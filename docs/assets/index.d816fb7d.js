(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var gP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var He={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=Symbol.for("react.element"),vP=Symbol.for("react.portal"),_P=Symbol.for("react.fragment"),yP=Symbol.for("react.strict_mode"),xP=Symbol.for("react.profiler"),wP=Symbol.for("react.provider"),SP=Symbol.for("react.context"),bP=Symbol.for("react.forward_ref"),MP=Symbol.for("react.suspense"),EP=Symbol.for("react.memo"),CP=Symbol.for("react.lazy"),Uw=Symbol.iterator;function PP(n){return n===null||typeof n!="object"?null:(n=Uw&&n[Uw]||n["@@iterator"],typeof n=="function"?n:null)}var Ab={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lb=Object.assign,Rb={};function rd(n,e,t){this.props=n,this.context=e,this.refs=Rb,this.updater=t||Ab}rd.prototype.isReactComponent={};rd.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};rd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function kb(){}kb.prototype=rd.prototype;function Xy(n,e,t){this.props=n,this.context=e,this.refs=Rb,this.updater=t||Ab}var qy=Xy.prototype=new kb;qy.constructor=Xy;Lb(qy,rd.prototype);qy.isPureReactComponent=!0;var Bw=Array.isArray,Ib=Object.prototype.hasOwnProperty,Yy={current:null},Db={key:!0,ref:!0,__self:!0,__source:!0};function Nb(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ib.call(e,i)&&!Db.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var d=Array(l),f=0;f<l;f++)d[f]=arguments[f+2];r.children=d}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:xf,type:n,key:s,ref:o,props:r,_owner:Yy.current}}function TP(n,e){return{$$typeof:xf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Ky(n){return typeof n=="object"&&n!==null&&n.$$typeof===xf}function AP(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Vw=/\/+/g;function Xv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?AP(""+n.key):e.toString(36)}function Km(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case xf:case vP:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Xv(o,0):i,Bw(r)?(t="",n!=null&&(t=n.replace(Vw,"$&/")+"/"),Km(r,e,t,"",function(f){return f})):r!=null&&(Ky(r)&&(r=TP(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Vw,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Bw(n))for(var l=0;l<n.length;l++){s=n[l];var d=i+Xv(s,l);o+=Km(s,e,t,d,r)}else if(d=PP(n),typeof d=="function")for(n=d.call(n),l=0;!(s=n.next()).done;)s=s.value,d=i+Xv(s,l++),o+=Km(s,e,t,d,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gp(n,e,t){if(n==null)return n;var i=[],r=0;return Km(n,i,"","",function(s){return e.call(t,s,r++)}),i}function LP(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ii={current:null},Zm={transition:null},RP={ReactCurrentDispatcher:Ii,ReactCurrentBatchConfig:Zm,ReactCurrentOwner:Yy};Rt.Children={map:Gp,forEach:function(n,e,t){Gp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Gp(n,function(){e++}),e},toArray:function(n){return Gp(n,function(e){return e})||[]},only:function(n){if(!Ky(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Rt.Component=rd;Rt.Fragment=_P;Rt.Profiler=xP;Rt.PureComponent=Xy;Rt.StrictMode=yP;Rt.Suspense=MP;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RP;Rt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Lb({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Yy.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(d in e)Ib.call(e,d)&&!Db.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&l!==void 0?l[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=t;else if(1<d){l=Array(d);for(var f=0;f<d;f++)l[f]=arguments[f+2];i.children=l}return{$$typeof:xf,type:n.type,key:r,ref:s,props:i,_owner:o}};Rt.createContext=function(n){return n={$$typeof:SP,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:wP,_context:n},n.Consumer=n};Rt.createElement=Nb;Rt.createFactory=function(n){var e=Nb.bind(null,n);return e.type=n,e};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(n){return{$$typeof:bP,render:n}};Rt.isValidElement=Ky;Rt.lazy=function(n){return{$$typeof:CP,_payload:{_status:-1,_result:n},_init:LP}};Rt.memo=function(n,e){return{$$typeof:EP,type:n,compare:e===void 0?null:e}};Rt.startTransition=function(n){var e=Zm.transition;Zm.transition={};try{n()}finally{Zm.transition=e}};Rt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rt.useCallback=function(n,e){return Ii.current.useCallback(n,e)};Rt.useContext=function(n){return Ii.current.useContext(n)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(n){return Ii.current.useDeferredValue(n)};Rt.useEffect=function(n,e){return Ii.current.useEffect(n,e)};Rt.useId=function(){return Ii.current.useId()};Rt.useImperativeHandle=function(n,e,t){return Ii.current.useImperativeHandle(n,e,t)};Rt.useInsertionEffect=function(n,e){return Ii.current.useInsertionEffect(n,e)};Rt.useLayoutEffect=function(n,e){return Ii.current.useLayoutEffect(n,e)};Rt.useMemo=function(n,e){return Ii.current.useMemo(n,e)};Rt.useReducer=function(n,e,t){return Ii.current.useReducer(n,e,t)};Rt.useRef=function(n){return Ii.current.useRef(n)};Rt.useState=function(n){return Ii.current.useState(n)};Rt.useSyncExternalStore=function(n,e,t){return Ii.current.useSyncExternalStore(n,e,t)};Rt.useTransition=function(){return Ii.current.useTransition()};Rt.version="18.2.0";(function(n){n.exports=Rt})(He);const kP=Tb(He.exports);var u_={},zb={exports:{}},vr={},Ob={exports:{}},Fb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,B){var H=O.length;O.push(B);e:for(;0<H;){var $=H-1>>>1,ie=O[$];if(0<r(ie,B))O[$]=B,O[H]=ie,H=$;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var B=O[0],H=O.pop();if(H!==B){O[0]=H;e:for(var $=0,ie=O.length,fe=ie>>>1;$<fe;){var be=2*($+1)-1,qe=O[be],ce=be+1,Ke=O[ce];if(0>r(qe,H))ce<ie&&0>r(Ke,qe)?(O[$]=Ke,O[ce]=H,$=ce):(O[$]=qe,O[be]=H,$=be);else if(ce<ie&&0>r(Ke,H))O[$]=Ke,O[ce]=H,$=ce;else break e}}return B}function r(O,B){var H=O.sortIndex-B.sortIndex;return H!==0?H:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var d=[],f=[],g=1,m=null,_=3,y=!1,w=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(O){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=O)i(f),B.sortIndex=B.expirationTime,e(d,B);else break;B=t(f)}}function A(O){if(S=!1,P(O),!w)if(t(d)!==null)w=!0,se(k);else{var B=t(f);B!==null&&ne(A,B.startTime-O)}}function k(O,B){w=!1,S&&(S=!1,M(L),L=-1),y=!0;var H=_;try{for(P(B),m=t(d);m!==null&&(!(m.expirationTime>B)||O&&!q());){var $=m.callback;if(typeof $=="function"){m.callback=null,_=m.priorityLevel;var ie=$(m.expirationTime<=B);B=n.unstable_now(),typeof ie=="function"?m.callback=ie:m===t(d)&&i(d),P(B)}else i(d);m=t(d)}if(m!==null)var fe=!0;else{var be=t(f);be!==null&&ne(A,be.startTime-B),fe=!1}return fe}finally{m=null,_=H,y=!1}}var D=!1,z=null,L=-1,N=5,F=-1;function q(){return!(n.unstable_now()-F<N)}function ge(){if(z!==null){var O=n.unstable_now();F=O;var B=!0;try{B=z(!0,O)}finally{B?te():(D=!1,z=null)}}else D=!1}var te;if(typeof C=="function")te=function(){C(ge)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,le=K.port2;K.port1.onmessage=ge,te=function(){le.postMessage(null)}}else te=function(){E(ge,0)};function se(O){z=O,D||(D=!0,te())}function ne(O,B){L=E(function(){O(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,se(k))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(O){switch(_){case 1:case 2:case 3:var B=3;break;default:B=_}var H=_;_=B;try{return O()}finally{_=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var H=_;_=O;try{return B()}finally{_=H}},n.unstable_scheduleCallback=function(O,B,H){var $=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?$+H:$):H=$,O){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=H+ie,O={id:g++,callback:B,priorityLevel:O,startTime:H,expirationTime:ie,sortIndex:-1},H>$?(O.sortIndex=H,e(f,O),t(d)===null&&O===t(f)&&(S?(M(L),L=-1):S=!0,ne(A,H-$))):(O.sortIndex=ie,e(d,O),w||y||(w=!0,se(k))),O},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(O){var B=_;return function(){var H=_;_=B;try{return O.apply(this,arguments)}finally{_=H}}}})(Fb);(function(n){n.exports=Fb})(Ob);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub=He.exports,gr=Ob.exports;function Ce(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bb=new Set,Fh={};function $l(n,e){qc(n,e),qc(n+"Capture",e)}function qc(n,e){for(Fh[n]=e,n=0;n<e.length;n++)Bb.add(e[n])}var go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c_=Object.prototype.hasOwnProperty,IP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hw={},Gw={};function DP(n){return c_.call(Gw,n)?!0:c_.call(Hw,n)?!1:IP.test(n)?Gw[n]=!0:(Hw[n]=!0,!1)}function NP(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function zP(n,e,t,i){if(e===null||typeof e>"u"||NP(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Di(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ri[n]=new Di(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ri[e]=new Di(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ri[n]=new Di(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ri[n]=new Di(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ri[n]=new Di(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ri[n]=new Di(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ri[n]=new Di(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ri[n]=new Di(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ri[n]=new Di(n,5,!1,n.toLowerCase(),null,!1,!1)});var Zy=/[\-:]([a-z])/g;function Jy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Zy,Jy);ri[e]=new Di(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Zy,Jy);ri[e]=new Di(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Zy,Jy);ri[e]=new Di(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ri[n]=new Di(n,1,!1,n.toLowerCase(),null,!1,!1)});ri.xlinkHref=new Di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ri[n]=new Di(n,1,!1,n.toLowerCase(),null,!0,!0)});function Qy(n,e,t,i){var r=ri.hasOwnProperty(e)?ri[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zP(e,t,r,i)&&(t=null),i||r===null?DP(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var So=Ub.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wp=Symbol.for("react.element"),bc=Symbol.for("react.portal"),Mc=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),d_=Symbol.for("react.profiler"),Vb=Symbol.for("react.provider"),Hb=Symbol.for("react.context"),ex=Symbol.for("react.forward_ref"),h_=Symbol.for("react.suspense"),f_=Symbol.for("react.suspense_list"),tx=Symbol.for("react.memo"),aa=Symbol.for("react.lazy"),Gb=Symbol.for("react.offscreen"),Ww=Symbol.iterator;function nh(n){return n===null||typeof n!="object"?null:(n=Ww&&n[Ww]||n["@@iterator"],typeof n=="function"?n:null)}var wn=Object.assign,qv;function xh(n){if(qv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);qv=e&&e[1]||""}return`
`+qv+n}var Yv=!1;function Kv(n,e){if(!n||Yv)return"";Yv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){i=f}n.call(e.prototype)}else{try{throw Error()}catch(f){i=f}n()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var d=`
`+r[o].replace(" at new "," at ");return n.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",n.displayName)),d}while(1<=o&&0<=l);break}}}finally{Yv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?xh(n):""}function OP(n){switch(n.tag){case 5:return xh(n.type);case 16:return xh("Lazy");case 13:return xh("Suspense");case 19:return xh("SuspenseList");case 0:case 2:case 15:return n=Kv(n.type,!1),n;case 11:return n=Kv(n.type.render,!1),n;case 1:return n=Kv(n.type,!0),n;default:return""}}function p_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Mc:return"Fragment";case bc:return"Portal";case d_:return"Profiler";case $y:return"StrictMode";case h_:return"Suspense";case f_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Hb:return(n.displayName||"Context")+".Consumer";case Vb:return(n._context.displayName||"Context")+".Provider";case ex:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case tx:return e=n.displayName||null,e!==null?e:p_(n.type)||"Memo";case aa:e=n._payload,n=n._init;try{return p_(n(e))}catch{}}return null}function FP(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return p_(e);case 8:return e===$y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ca(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Wb(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UP(n){var e=Wb(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function jp(n){n._valueTracker||(n._valueTracker=UP(n))}function jb(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Wb(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function mg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function m_(n,e){var t=e.checked;return wn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function jw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Ca(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xb(n,e){e=e.checked,e!=null&&Qy(n,"checked",e,!1)}function g_(n,e){Xb(n,e);var t=Ca(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?v_(n,e.type,t):e.hasOwnProperty("defaultValue")&&v_(n,e.type,Ca(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Xw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function v_(n,e,t){(e!=="number"||mg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var wh=Array.isArray;function Bc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Ca(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function __(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return wn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function qw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ce(92));if(wh(t)){if(1<t.length)throw Error(Ce(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ca(t)}}function qb(n,e){var t=Ca(e.value),i=Ca(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function Yw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Yb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function y_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Yb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xp,Kb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Xp=Xp||document.createElement("div"),Xp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Uh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ch={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BP=["Webkit","ms","Moz","O"];Object.keys(Ch).forEach(function(n){BP.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ch[e]=Ch[n]})});function Zb(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ch.hasOwnProperty(n)&&Ch[n]?(""+e).trim():e+"px"}function Jb(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=Zb(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var VP=wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x_(n,e){if(e){if(VP[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function w_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S_=null;function nx(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var b_=null,Vc=null,Hc=null;function Kw(n){if(n=bf(n)){if(typeof b_!="function")throw Error(Ce(280));var e=n.stateNode;e&&(e=Zg(e),b_(n.stateNode,n.type,e))}}function Qb(n){Vc?Hc?Hc.push(n):Hc=[n]:Vc=n}function $b(){if(Vc){var n=Vc,e=Hc;if(Hc=Vc=null,Kw(n),e)for(n=0;n<e.length;n++)Kw(e[n])}}function eM(n,e){return n(e)}function tM(){}var Zv=!1;function nM(n,e,t){if(Zv)return n(e,t);Zv=!0;try{return eM(n,e,t)}finally{Zv=!1,(Vc!==null||Hc!==null)&&(tM(),$b())}}function Bh(n,e){var t=n.stateNode;if(t===null)return null;var i=Zg(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ce(231,e,typeof t));return t}var M_=!1;if(go)try{var ih={};Object.defineProperty(ih,"passive",{get:function(){M_=!0}}),window.addEventListener("test",ih,ih),window.removeEventListener("test",ih,ih)}catch{M_=!1}function HP(n,e,t,i,r,s,o,l,d){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(g){this.onError(g)}}var Ph=!1,gg=null,vg=!1,E_=null,GP={onError:function(n){Ph=!0,gg=n}};function WP(n,e,t,i,r,s,o,l,d){Ph=!1,gg=null,HP.apply(GP,arguments)}function jP(n,e,t,i,r,s,o,l,d){if(WP.apply(this,arguments),Ph){if(Ph){var f=gg;Ph=!1,gg=null}else throw Error(Ce(198));vg||(vg=!0,E_=f)}}function eu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&4098)!==0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function iM(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Zw(n){if(eu(n)!==n)throw Error(Ce(188))}function XP(n){var e=n.alternate;if(!e){if(e=eu(n),e===null)throw Error(Ce(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return Zw(r),n;if(s===i)return Zw(r),e;s=s.sibling}throw Error(Ce(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===t){o=!0,t=r,i=s;break}if(l===i){o=!0,i=r,t=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===t){o=!0,t=s,i=r;break}if(l===i){o=!0,i=s,t=r;break}l=l.sibling}if(!o)throw Error(Ce(189))}}if(t.alternate!==i)throw Error(Ce(190))}if(t.tag!==3)throw Error(Ce(188));return t.stateNode.current===t?n:e}function rM(n){return n=XP(n),n!==null?sM(n):null}function sM(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=sM(n);if(e!==null)return e;n=n.sibling}return null}var oM=gr.unstable_scheduleCallback,Jw=gr.unstable_cancelCallback,qP=gr.unstable_shouldYield,YP=gr.unstable_requestPaint,Ln=gr.unstable_now,KP=gr.unstable_getCurrentPriorityLevel,ix=gr.unstable_ImmediatePriority,aM=gr.unstable_UserBlockingPriority,_g=gr.unstable_NormalPriority,ZP=gr.unstable_LowPriority,lM=gr.unstable_IdlePriority,Xg=null,Fs=null;function JP(n){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(Xg,n,void 0,(n.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:eT,QP=Math.log,$P=Math.LN2;function eT(n){return n>>>=0,n===0?32:31-(QP(n)/$P|0)|0}var qp=64,Yp=4194304;function Sh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~r;l!==0?i=Sh(l):(s&=o,s!==0&&(i=Sh(s)))}else o=t&~r,o!==0?i=Sh(o):s!==0&&(i=Sh(s));if(i===0)return 0;if(e!==0&&e!==i&&(e&r)===0&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if((i&4)!==0&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-fs(e),r=1<<t,i|=n[t],e&=~r;return i}function tT(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nT(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-fs(s),l=1<<o,d=r[o];d===-1?((l&t)===0||(l&i)!==0)&&(r[o]=tT(l,e)):d<=e&&(n.expiredLanes|=l),s&=~l}}function C_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function uM(){var n=qp;return qp<<=1,(qp&4194240)===0&&(qp=64),n}function Jv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function wf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-fs(e),n[e]=t}function iT(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-fs(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function rx(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-fs(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Yt=0;function cM(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var dM,sx,hM,fM,pM,P_=!1,Kp=[],ga=null,va=null,_a=null,Vh=new Map,Hh=new Map,ca=[],rT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qw(n,e){switch(n){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":Vh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hh.delete(e.pointerId)}}function rh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=bf(e),e!==null&&sx(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function sT(n,e,t,i,r){switch(e){case"focusin":return ga=rh(ga,n,e,t,i,r),!0;case"dragenter":return va=rh(va,n,e,t,i,r),!0;case"mouseover":return _a=rh(_a,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Vh.set(s,rh(Vh.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Hh.set(s,rh(Hh.get(s)||null,n,e,t,i,r)),!0}return!1}function mM(n){var e=Tl(n.target);if(e!==null){var t=eu(e);if(t!==null){if(e=t.tag,e===13){if(e=iM(t),e!==null){n.blockedOn=e,pM(n.priority,function(){hM(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=T_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);S_=i,t.target.dispatchEvent(i),S_=null}else return e=bf(t),e!==null&&sx(e),n.blockedOn=t,!1;e.shift()}return!0}function $w(n,e,t){Jm(n)&&t.delete(e)}function oT(){P_=!1,ga!==null&&Jm(ga)&&(ga=null),va!==null&&Jm(va)&&(va=null),_a!==null&&Jm(_a)&&(_a=null),Vh.forEach($w),Hh.forEach($w)}function sh(n,e){n.blockedOn===e&&(n.blockedOn=null,P_||(P_=!0,gr.unstable_scheduleCallback(gr.unstable_NormalPriority,oT)))}function Gh(n){function e(r){return sh(r,n)}if(0<Kp.length){sh(Kp[0],n);for(var t=1;t<Kp.length;t++){var i=Kp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ga!==null&&sh(ga,n),va!==null&&sh(va,n),_a!==null&&sh(_a,n),Vh.forEach(e),Hh.forEach(e),t=0;t<ca.length;t++)i=ca[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ca.length&&(t=ca[0],t.blockedOn===null);)mM(t),t.blockedOn===null&&ca.shift()}var Gc=So.ReactCurrentBatchConfig,xg=!0;function aT(n,e,t,i){var r=Yt,s=Gc.transition;Gc.transition=null;try{Yt=1,ox(n,e,t,i)}finally{Yt=r,Gc.transition=s}}function lT(n,e,t,i){var r=Yt,s=Gc.transition;Gc.transition=null;try{Yt=4,ox(n,e,t,i)}finally{Yt=r,Gc.transition=s}}function ox(n,e,t,i){if(xg){var r=T_(n,e,t,i);if(r===null)a0(n,e,i,wg,t),Qw(n,i);else if(sT(r,n,e,t,i))i.stopPropagation();else if(Qw(n,i),e&4&&-1<rT.indexOf(n)){for(;r!==null;){var s=bf(r);if(s!==null&&dM(s),s=T_(n,e,t,i),s===null&&a0(n,e,i,wg,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else a0(n,e,i,null,t)}}var wg=null;function T_(n,e,t,i){if(wg=null,n=nx(i),n=Tl(n),n!==null)if(e=eu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=iM(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return wg=n,null}function gM(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KP()){case ix:return 1;case aM:return 4;case _g:case ZP:return 16;case lM:return 536870912;default:return 16}default:return 16}}var ha=null,ax=null,Qm=null;function vM(){if(Qm)return Qm;var n,e=ax,t=e.length,i,r="value"in ha?ha.value:ha.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Qm=r.slice(n,1<i?1-i:void 0)}function $m(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Zp(){return!0}function e1(){return!1}function _r(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zp:e1,this.isPropagationStopped=e1,this}return wn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Zp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Zp)},persist:function(){},isPersistent:Zp}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lx=_r(sd),Sf=wn({},sd,{view:0,detail:0}),uT=_r(Sf),Qv,$v,oh,qg=wn({},Sf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ux,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==oh&&(oh&&n.type==="mousemove"?(Qv=n.screenX-oh.screenX,$v=n.screenY-oh.screenY):$v=Qv=0,oh=n),Qv)},movementY:function(n){return"movementY"in n?n.movementY:$v}}),t1=_r(qg),cT=wn({},qg,{dataTransfer:0}),dT=_r(cT),hT=wn({},Sf,{relatedTarget:0}),e0=_r(hT),fT=wn({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),pT=_r(fT),mT=wn({},sd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),gT=_r(mT),vT=wn({},sd,{data:0}),n1=_r(vT),_T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wT(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=xT[n])?!!e[n]:!1}function ux(){return wT}var ST=wn({},Sf,{key:function(n){if(n.key){var e=_T[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=$m(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?yT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ux,charCode:function(n){return n.type==="keypress"?$m(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$m(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),bT=_r(ST),MT=wn({},qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i1=_r(MT),ET=wn({},Sf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ux}),CT=_r(ET),PT=wn({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),TT=_r(PT),AT=wn({},qg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),LT=_r(AT),RT=[9,13,27,32],cx=go&&"CompositionEvent"in window,Th=null;go&&"documentMode"in document&&(Th=document.documentMode);var kT=go&&"TextEvent"in window&&!Th,_M=go&&(!cx||Th&&8<Th&&11>=Th),r1=String.fromCharCode(32),s1=!1;function yM(n,e){switch(n){case"keyup":return RT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xM(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ec=!1;function IT(n,e){switch(n){case"compositionend":return xM(e);case"keypress":return e.which!==32?null:(s1=!0,r1);case"textInput":return n=e.data,n===r1&&s1?null:n;default:return null}}function DT(n,e){if(Ec)return n==="compositionend"||!cx&&yM(n,e)?(n=vM(),Qm=ax=ha=null,Ec=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _M&&e.locale!=="ko"?null:e.data;default:return null}}var NT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!NT[n.type]:e==="textarea"}function wM(n,e,t,i){Qb(i),e=Sg(e,"onChange"),0<e.length&&(t=new lx("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ah=null,Wh=null;function zT(n){kM(n,0)}function Yg(n){var e=Tc(n);if(jb(e))return n}function OT(n,e){if(n==="change")return e}var SM=!1;if(go){var t0;if(go){var n0="oninput"in document;if(!n0){var a1=document.createElement("div");a1.setAttribute("oninput","return;"),n0=typeof a1.oninput=="function"}t0=n0}else t0=!1;SM=t0&&(!document.documentMode||9<document.documentMode)}function l1(){Ah&&(Ah.detachEvent("onpropertychange",bM),Wh=Ah=null)}function bM(n){if(n.propertyName==="value"&&Yg(Wh)){var e=[];wM(e,Wh,n,nx(n)),nM(zT,e)}}function FT(n,e,t){n==="focusin"?(l1(),Ah=e,Wh=t,Ah.attachEvent("onpropertychange",bM)):n==="focusout"&&l1()}function UT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yg(Wh)}function BT(n,e){if(n==="click")return Yg(e)}function VT(n,e){if(n==="input"||n==="change")return Yg(e)}function HT(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var gs=typeof Object.is=="function"?Object.is:HT;function jh(n,e){if(gs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!c_.call(e,r)||!gs(n[r],e[r]))return!1}return!0}function u1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function c1(n,e){var t=u1(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=u1(t)}}function MM(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?MM(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function EM(){for(var n=window,e=mg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=mg(n.document)}return e}function dx(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function GT(n){var e=EM(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&MM(t.ownerDocument.documentElement,t)){if(i!==null&&dx(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=c1(t,s);var o=c1(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var WT=go&&"documentMode"in document&&11>=document.documentMode,Cc=null,A_=null,Lh=null,L_=!1;function d1(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;L_||Cc==null||Cc!==mg(i)||(i=Cc,"selectionStart"in i&&dx(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Lh&&jh(Lh,i)||(Lh=i,i=Sg(A_,"onSelect"),0<i.length&&(e=new lx("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Cc)))}function Jp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Pc={animationend:Jp("Animation","AnimationEnd"),animationiteration:Jp("Animation","AnimationIteration"),animationstart:Jp("Animation","AnimationStart"),transitionend:Jp("Transition","TransitionEnd")},i0={},CM={};go&&(CM=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function Kg(n){if(i0[n])return i0[n];if(!Pc[n])return n;var e=Pc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in CM)return i0[n]=e[t];return n}var PM=Kg("animationend"),TM=Kg("animationiteration"),AM=Kg("animationstart"),LM=Kg("transitionend"),RM=new Map,h1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ka(n,e){RM.set(n,e),$l(e,[n])}for(var r0=0;r0<h1.length;r0++){var s0=h1[r0],jT=s0.toLowerCase(),XT=s0[0].toUpperCase()+s0.slice(1);ka(jT,"on"+XT)}ka(PM,"onAnimationEnd");ka(TM,"onAnimationIteration");ka(AM,"onAnimationStart");ka("dblclick","onDoubleClick");ka("focusin","onFocus");ka("focusout","onBlur");ka(LM,"onTransitionEnd");qc("onMouseEnter",["mouseout","mouseover"]);qc("onMouseLeave",["mouseout","mouseover"]);qc("onPointerEnter",["pointerout","pointerover"]);qc("onPointerLeave",["pointerout","pointerover"]);$l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$l("onBeforeInput",["compositionend","keypress","textInput","paste"]);$l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qT=new Set("cancel close invalid load scroll toggle".split(" ").concat(bh));function f1(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,jP(i,e,void 0,n),n.currentTarget=null}function kM(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],d=l.instance,f=l.currentTarget;if(l=l.listener,d!==s&&r.isPropagationStopped())break e;f1(r,l,f),s=d}else for(o=0;o<i.length;o++){if(l=i[o],d=l.instance,f=l.currentTarget,l=l.listener,d!==s&&r.isPropagationStopped())break e;f1(r,l,f),s=d}}}if(vg)throw n=E_,vg=!1,E_=null,n}function an(n,e){var t=e[N_];t===void 0&&(t=e[N_]=new Set);var i=n+"__bubble";t.has(i)||(IM(e,n,2,!1),t.add(i))}function o0(n,e,t){var i=0;e&&(i|=4),IM(t,n,i,e)}var Qp="_reactListening"+Math.random().toString(36).slice(2);function Xh(n){if(!n[Qp]){n[Qp]=!0,Bb.forEach(function(t){t!=="selectionchange"&&(qT.has(t)||o0(t,!1,n),o0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Qp]||(e[Qp]=!0,o0("selectionchange",!1,e))}}function IM(n,e,t,i){switch(gM(e)){case 1:var r=aT;break;case 4:r=lT;break;default:r=ox}t=r.bind(null,e,t,n),r=void 0,!M_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function a0(n,e,t,i,r){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Tl(l),o===null)return;if(d=o.tag,d===5||d===6){i=s=o;continue e}l=l.parentNode}}i=i.return}nM(function(){var f=s,g=nx(t),m=[];e:{var _=RM.get(n);if(_!==void 0){var y=lx,w=n;switch(n){case"keypress":if($m(t)===0)break e;case"keydown":case"keyup":y=bT;break;case"focusin":w="focus",y=e0;break;case"focusout":w="blur",y=e0;break;case"beforeblur":case"afterblur":y=e0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=t1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=dT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=CT;break;case PM:case TM:case AM:y=pT;break;case LM:y=TT;break;case"scroll":y=uT;break;case"wheel":y=LT;break;case"copy":case"cut":case"paste":y=gT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=i1}var S=(e&4)!==0,E=!S&&n==="scroll",M=S?_!==null?_+"Capture":null:_;S=[];for(var C=f,P;C!==null;){P=C;var A=P.stateNode;if(P.tag===5&&A!==null&&(P=A,M!==null&&(A=Bh(C,M),A!=null&&S.push(qh(C,A,P)))),E)break;C=C.return}0<S.length&&(_=new y(_,w,null,t,g),m.push({event:_,listeners:S}))}}if((e&7)===0){e:{if(_=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",_&&t!==S_&&(w=t.relatedTarget||t.fromElement)&&(Tl(w)||w[vo]))break e;if((y||_)&&(_=g.window===g?g:(_=g.ownerDocument)?_.defaultView||_.parentWindow:window,y?(w=t.relatedTarget||t.toElement,y=f,w=w?Tl(w):null,w!==null&&(E=eu(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=f),y!==w)){if(S=t1,A="onMouseLeave",M="onMouseEnter",C="mouse",(n==="pointerout"||n==="pointerover")&&(S=i1,A="onPointerLeave",M="onPointerEnter",C="pointer"),E=y==null?_:Tc(y),P=w==null?_:Tc(w),_=new S(A,C+"leave",y,t,g),_.target=E,_.relatedTarget=P,A=null,Tl(g)===f&&(S=new S(M,C+"enter",w,t,g),S.target=P,S.relatedTarget=E,A=S),E=A,y&&w)t:{for(S=y,M=w,C=0,P=S;P;P=tc(P))C++;for(P=0,A=M;A;A=tc(A))P++;for(;0<C-P;)S=tc(S),C--;for(;0<P-C;)M=tc(M),P--;for(;C--;){if(S===M||M!==null&&S===M.alternate)break t;S=tc(S),M=tc(M)}S=null}else S=null;y!==null&&p1(m,_,y,S,!1),w!==null&&E!==null&&p1(m,E,w,S,!0)}}e:{if(_=f?Tc(f):window,y=_.nodeName&&_.nodeName.toLowerCase(),y==="select"||y==="input"&&_.type==="file")var k=OT;else if(o1(_))if(SM)k=VT;else{k=UT;var D=FT}else(y=_.nodeName)&&y.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(k=BT);if(k&&(k=k(n,f))){wM(m,k,t,g);break e}D&&D(n,_,f),n==="focusout"&&(D=_._wrapperState)&&D.controlled&&_.type==="number"&&v_(_,"number",_.value)}switch(D=f?Tc(f):window,n){case"focusin":(o1(D)||D.contentEditable==="true")&&(Cc=D,A_=f,Lh=null);break;case"focusout":Lh=A_=Cc=null;break;case"mousedown":L_=!0;break;case"contextmenu":case"mouseup":case"dragend":L_=!1,d1(m,t,g);break;case"selectionchange":if(WT)break;case"keydown":case"keyup":d1(m,t,g)}var z;if(cx)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Ec?yM(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(_M&&t.locale!=="ko"&&(Ec||L!=="onCompositionStart"?L==="onCompositionEnd"&&Ec&&(z=vM()):(ha=g,ax="value"in ha?ha.value:ha.textContent,Ec=!0)),D=Sg(f,L),0<D.length&&(L=new n1(L,n,null,t,g),m.push({event:L,listeners:D}),z?L.data=z:(z=xM(t),z!==null&&(L.data=z)))),(z=kT?IT(n,t):DT(n,t))&&(f=Sg(f,"onBeforeInput"),0<f.length&&(g=new n1("onBeforeInput","beforeinput",null,t,g),m.push({event:g,listeners:f}),g.data=z))}kM(m,e)})}function qh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Sg(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Bh(n,t),s!=null&&i.unshift(qh(n,s,r)),s=Bh(n,e),s!=null&&i.push(qh(n,s,r))),n=n.return}return i}function tc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function p1(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var l=t,d=l.alternate,f=l.stateNode;if(d!==null&&d===i)break;l.tag===5&&f!==null&&(l=f,r?(d=Bh(t,s),d!=null&&o.unshift(qh(t,d,l))):r||(d=Bh(t,s),d!=null&&o.push(qh(t,d,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var YT=/\r\n?/g,KT=/\u0000|\uFFFD/g;function m1(n){return(typeof n=="string"?n:""+n).replace(YT,`
`).replace(KT,"")}function $p(n,e,t){if(e=m1(e),m1(n)!==e&&t)throw Error(Ce(425))}function bg(){}var R_=null,k_=null;function I_(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var D_=typeof setTimeout=="function"?setTimeout:void 0,ZT=typeof clearTimeout=="function"?clearTimeout:void 0,g1=typeof Promise=="function"?Promise:void 0,JT=typeof queueMicrotask=="function"?queueMicrotask:typeof g1<"u"?function(n){return g1.resolve(null).then(n).catch(QT)}:D_;function QT(n){setTimeout(function(){throw n})}function l0(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Gh(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Gh(e)}function ya(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function v1(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var od=Math.random().toString(36).slice(2),zs="__reactFiber$"+od,Yh="__reactProps$"+od,vo="__reactContainer$"+od,N_="__reactEvents$"+od,$T="__reactListeners$"+od,e3="__reactHandles$"+od;function Tl(n){var e=n[zs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[vo]||t[zs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=v1(n);n!==null;){if(t=n[zs])return t;n=v1(n)}return e}n=t,t=n.parentNode}return null}function bf(n){return n=n[zs]||n[vo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Tc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ce(33))}function Zg(n){return n[Yh]||null}var z_=[],Ac=-1;function Ia(n){return{current:n}}function ln(n){0>Ac||(n.current=z_[Ac],z_[Ac]=null,Ac--)}function on(n,e){Ac++,z_[Ac]=n.current,n.current=e}var Pa={},yi=Ia(Pa),Xi=Ia(!1),Wl=Pa;function Yc(n,e){var t=n.type.contextTypes;if(!t)return Pa;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function qi(n){return n=n.childContextTypes,n!=null}function Mg(){ln(Xi),ln(yi)}function _1(n,e,t){if(yi.current!==Pa)throw Error(Ce(168));on(yi,e),on(Xi,t)}function DM(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ce(108,FP(n)||"Unknown",r));return wn({},t,i)}function Eg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pa,Wl=yi.current,on(yi,n),on(Xi,Xi.current),!0}function y1(n,e,t){var i=n.stateNode;if(!i)throw Error(Ce(169));t?(n=DM(n,e,Wl),i.__reactInternalMemoizedMergedChildContext=n,ln(Xi),ln(yi),on(yi,n)):ln(Xi),on(Xi,t)}var ao=null,Jg=!1,u0=!1;function NM(n){ao===null?ao=[n]:ao.push(n)}function t3(n){Jg=!0,NM(n)}function Da(){if(!u0&&ao!==null){u0=!0;var n=0,e=Yt;try{var t=ao;for(Yt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ao=null,Jg=!1}catch(r){throw ao!==null&&(ao=ao.slice(n+1)),oM(ix,Da),r}finally{Yt=e,u0=!1}}return null}var Lc=[],Rc=0,Cg=null,Pg=0,Nr=[],zr=0,jl=null,co=1,ho="";function wl(n,e){Lc[Rc++]=Pg,Lc[Rc++]=Cg,Cg=n,Pg=e}function zM(n,e,t){Nr[zr++]=co,Nr[zr++]=ho,Nr[zr++]=jl,jl=n;var i=co;n=ho;var r=32-fs(i)-1;i&=~(1<<r),t+=1;var s=32-fs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,co=1<<32-fs(e)+r|t<<r|i,ho=s+n}else co=1<<s|t<<r|i,ho=n}function hx(n){n.return!==null&&(wl(n,1),zM(n,1,0))}function fx(n){for(;n===Cg;)Cg=Lc[--Rc],Lc[Rc]=null,Pg=Lc[--Rc],Lc[Rc]=null;for(;n===jl;)jl=Nr[--zr],Nr[zr]=null,ho=Nr[--zr],Nr[zr]=null,co=Nr[--zr],Nr[zr]=null}var fr=null,hr=null,hn=!1,cs=null;function OM(n,e){var t=Fr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function x1(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,fr=n,hr=ya(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,fr=n,hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=jl!==null?{id:co,overflow:ho}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Fr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,fr=n,hr=null,!0):!1;default:return!1}}function O_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function F_(n){if(hn){var e=hr;if(e){var t=e;if(!x1(n,e)){if(O_(n))throw Error(Ce(418));e=ya(t.nextSibling);var i=fr;e&&x1(n,e)?OM(i,t):(n.flags=n.flags&-4097|2,hn=!1,fr=n)}}else{if(O_(n))throw Error(Ce(418));n.flags=n.flags&-4097|2,hn=!1,fr=n}}}function w1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fr=n}function em(n){if(n!==fr)return!1;if(!hn)return w1(n),hn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!I_(n.type,n.memoizedProps)),e&&(e=hr)){if(O_(n))throw FM(),Error(Ce(418));for(;e;)OM(n,e),e=ya(e.nextSibling)}if(w1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ce(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){hr=ya(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}hr=null}}else hr=fr?ya(n.stateNode.nextSibling):null;return!0}function FM(){for(var n=hr;n;)n=ya(n.nextSibling)}function Kc(){hr=fr=null,hn=!1}function px(n){cs===null?cs=[n]:cs.push(n)}var n3=So.ReactCurrentBatchConfig;function as(n,e){if(n&&n.defaultProps){e=wn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Tg=Ia(null),Ag=null,kc=null,mx=null;function gx(){mx=kc=Ag=null}function vx(n){var e=Tg.current;ln(Tg),n._currentValue=e}function U_(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Wc(n,e){Ag=n,mx=kc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!==0&&(Wi=!0),n.firstContext=null)}function Hr(n){var e=n._currentValue;if(mx!==n)if(n={context:n,memoizedValue:e,next:null},kc===null){if(Ag===null)throw Error(Ce(308));kc=n,Ag.dependencies={lanes:0,firstContext:n}}else kc=kc.next=n;return e}var Al=null;function _x(n){Al===null?Al=[n]:Al.push(n)}function UM(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,_x(e)):(t.next=r.next,r.next=t),e.interleaved=t,_o(n,i)}function _o(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var la=!1;function yx(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BM(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function po(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function xa(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,(Ut&2)!==0){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,_o(n,t)}return r=i.interleaved,r===null?(e.next=e,_x(i)):(e.next=r.next,r.next=e),i.interleaved=e,_o(n,t)}function eg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,rx(n,t)}}function S1(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Lg(n,e,t,i){var r=n.updateQueue;la=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var d=l,f=d.next;d.next=null,o===null?s=f:o.next=f,o=d;var g=n.alternate;g!==null&&(g=g.updateQueue,l=g.lastBaseUpdate,l!==o&&(l===null?g.firstBaseUpdate=f:l.next=f,g.lastBaseUpdate=d))}if(s!==null){var m=r.baseState;o=0,g=f=d=null,l=s;do{var _=l.lane,y=l.eventTime;if((i&_)===_){g!==null&&(g=g.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=n,S=l;switch(_=e,y=t,S.tag){case 1:if(w=S.payload,typeof w=="function"){m=w.call(y,m,_);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,_=typeof w=="function"?w.call(y,m,_):w,_==null)break e;m=wn({},m,_);break e;case 2:la=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,_=r.effects,_===null?r.effects=[l]:_.push(l))}else y={eventTime:y,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},g===null?(f=g=y,d=m):g=g.next=y,o|=_;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(1);if(g===null&&(d=m),r.baseState=d,r.firstBaseUpdate=f,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ql|=o,n.lanes=o,n.memoizedState=m}}function b1(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ce(191,r));r.call(i)}}}var VM=new Ub.Component().refs;function B_(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:wn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Qg={isMounted:function(n){return(n=n._reactInternals)?eu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Li(),r=Sa(n),s=po(i,r);s.payload=e,t!=null&&(s.callback=t),e=xa(n,s,r),e!==null&&(ps(e,n,r,i),eg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Li(),r=Sa(n),s=po(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=xa(n,s,r),e!==null&&(ps(e,n,r,i),eg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Li(),i=Sa(n),r=po(t,i);r.tag=2,e!=null&&(r.callback=e),e=xa(n,r,i),e!==null&&(ps(e,n,i,t),eg(e,n,i))}};function M1(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!jh(t,i)||!jh(r,s):!0}function HM(n,e,t){var i=!1,r=Pa,s=e.contextType;return typeof s=="object"&&s!==null?s=Hr(s):(r=qi(e)?Wl:yi.current,i=e.contextTypes,s=(i=i!=null)?Yc(n,r):Pa),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function E1(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Qg.enqueueReplaceState(e,e.state,null)}function V_(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=VM,yx(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Hr(s):(s=qi(e)?Wl:yi.current,r.context=Yc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(B_(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Qg.enqueueReplaceState(r,r.state,null),Lg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function ah(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ce(309));var i=t.stateNode}if(!i)throw Error(Ce(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;l===VM&&(l=r.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ce(284));if(!t._owner)throw Error(Ce(290,n))}return n}function tm(n,e){throw n=Object.prototype.toString.call(e),Error(Ce(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function C1(n){var e=n._init;return e(n._payload)}function GM(n){function e(M,C){if(n){var P=M.deletions;P===null?(M.deletions=[C],M.flags|=16):P.push(C)}}function t(M,C){if(!n)return null;for(;C!==null;)e(M,C),C=C.sibling;return null}function i(M,C){for(M=new Map;C!==null;)C.key!==null?M.set(C.key,C):M.set(C.index,C),C=C.sibling;return M}function r(M,C){return M=ba(M,C),M.index=0,M.sibling=null,M}function s(M,C,P){return M.index=P,n?(P=M.alternate,P!==null?(P=P.index,P<C?(M.flags|=2,C):P):(M.flags|=2,C)):(M.flags|=1048576,C)}function o(M){return n&&M.alternate===null&&(M.flags|=2),M}function l(M,C,P,A){return C===null||C.tag!==6?(C=g0(P,M.mode,A),C.return=M,C):(C=r(C,P),C.return=M,C)}function d(M,C,P,A){var k=P.type;return k===Mc?g(M,C,P.props.children,A,P.key):C!==null&&(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===aa&&C1(k)===C.type)?(A=r(C,P.props),A.ref=ah(M,C,P),A.return=M,A):(A=og(P.type,P.key,P.props,null,M.mode,A),A.ref=ah(M,C,P),A.return=M,A)}function f(M,C,P,A){return C===null||C.tag!==4||C.stateNode.containerInfo!==P.containerInfo||C.stateNode.implementation!==P.implementation?(C=v0(P,M.mode,A),C.return=M,C):(C=r(C,P.children||[]),C.return=M,C)}function g(M,C,P,A,k){return C===null||C.tag!==7?(C=Ol(P,M.mode,A,k),C.return=M,C):(C=r(C,P),C.return=M,C)}function m(M,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return C=g0(""+C,M.mode,P),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wp:return P=og(C.type,C.key,C.props,null,M.mode,P),P.ref=ah(M,null,C),P.return=M,P;case bc:return C=v0(C,M.mode,P),C.return=M,C;case aa:var A=C._init;return m(M,A(C._payload),P)}if(wh(C)||nh(C))return C=Ol(C,M.mode,P,null),C.return=M,C;tm(M,C)}return null}function _(M,C,P,A){var k=C!==null?C.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return k!==null?null:l(M,C,""+P,A);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Wp:return P.key===k?d(M,C,P,A):null;case bc:return P.key===k?f(M,C,P,A):null;case aa:return k=P._init,_(M,C,k(P._payload),A)}if(wh(P)||nh(P))return k!==null?null:g(M,C,P,A,null);tm(M,P)}return null}function y(M,C,P,A,k){if(typeof A=="string"&&A!==""||typeof A=="number")return M=M.get(P)||null,l(C,M,""+A,k);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Wp:return M=M.get(A.key===null?P:A.key)||null,d(C,M,A,k);case bc:return M=M.get(A.key===null?P:A.key)||null,f(C,M,A,k);case aa:var D=A._init;return y(M,C,P,D(A._payload),k)}if(wh(A)||nh(A))return M=M.get(P)||null,g(C,M,A,k,null);tm(C,A)}return null}function w(M,C,P,A){for(var k=null,D=null,z=C,L=C=0,N=null;z!==null&&L<P.length;L++){z.index>L?(N=z,z=null):N=z.sibling;var F=_(M,z,P[L],A);if(F===null){z===null&&(z=N);break}n&&z&&F.alternate===null&&e(M,z),C=s(F,C,L),D===null?k=F:D.sibling=F,D=F,z=N}if(L===P.length)return t(M,z),hn&&wl(M,L),k;if(z===null){for(;L<P.length;L++)z=m(M,P[L],A),z!==null&&(C=s(z,C,L),D===null?k=z:D.sibling=z,D=z);return hn&&wl(M,L),k}for(z=i(M,z);L<P.length;L++)N=y(z,M,L,P[L],A),N!==null&&(n&&N.alternate!==null&&z.delete(N.key===null?L:N.key),C=s(N,C,L),D===null?k=N:D.sibling=N,D=N);return n&&z.forEach(function(q){return e(M,q)}),hn&&wl(M,L),k}function S(M,C,P,A){var k=nh(P);if(typeof k!="function")throw Error(Ce(150));if(P=k.call(P),P==null)throw Error(Ce(151));for(var D=k=null,z=C,L=C=0,N=null,F=P.next();z!==null&&!F.done;L++,F=P.next()){z.index>L?(N=z,z=null):N=z.sibling;var q=_(M,z,F.value,A);if(q===null){z===null&&(z=N);break}n&&z&&q.alternate===null&&e(M,z),C=s(q,C,L),D===null?k=q:D.sibling=q,D=q,z=N}if(F.done)return t(M,z),hn&&wl(M,L),k;if(z===null){for(;!F.done;L++,F=P.next())F=m(M,F.value,A),F!==null&&(C=s(F,C,L),D===null?k=F:D.sibling=F,D=F);return hn&&wl(M,L),k}for(z=i(M,z);!F.done;L++,F=P.next())F=y(z,M,L,F.value,A),F!==null&&(n&&F.alternate!==null&&z.delete(F.key===null?L:F.key),C=s(F,C,L),D===null?k=F:D.sibling=F,D=F);return n&&z.forEach(function(ge){return e(M,ge)}),hn&&wl(M,L),k}function E(M,C,P,A){if(typeof P=="object"&&P!==null&&P.type===Mc&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Wp:e:{for(var k=P.key,D=C;D!==null;){if(D.key===k){if(k=P.type,k===Mc){if(D.tag===7){t(M,D.sibling),C=r(D,P.props.children),C.return=M,M=C;break e}}else if(D.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===aa&&C1(k)===D.type){t(M,D.sibling),C=r(D,P.props),C.ref=ah(M,D,P),C.return=M,M=C;break e}t(M,D);break}else e(M,D);D=D.sibling}P.type===Mc?(C=Ol(P.props.children,M.mode,A,P.key),C.return=M,M=C):(A=og(P.type,P.key,P.props,null,M.mode,A),A.ref=ah(M,C,P),A.return=M,M=A)}return o(M);case bc:e:{for(D=P.key;C!==null;){if(C.key===D)if(C.tag===4&&C.stateNode.containerInfo===P.containerInfo&&C.stateNode.implementation===P.implementation){t(M,C.sibling),C=r(C,P.children||[]),C.return=M,M=C;break e}else{t(M,C);break}else e(M,C);C=C.sibling}C=v0(P,M.mode,A),C.return=M,M=C}return o(M);case aa:return D=P._init,E(M,C,D(P._payload),A)}if(wh(P))return w(M,C,P,A);if(nh(P))return S(M,C,P,A);tm(M,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,C!==null&&C.tag===6?(t(M,C.sibling),C=r(C,P),C.return=M,M=C):(t(M,C),C=g0(P,M.mode,A),C.return=M,M=C),o(M)):t(M,C)}return E}var Zc=GM(!0),WM=GM(!1),Mf={},Us=Ia(Mf),Kh=Ia(Mf),Zh=Ia(Mf);function Ll(n){if(n===Mf)throw Error(Ce(174));return n}function xx(n,e){switch(on(Zh,e),on(Kh,n),on(Us,Mf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:y_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=y_(e,n)}ln(Us),on(Us,e)}function Jc(){ln(Us),ln(Kh),ln(Zh)}function jM(n){Ll(Zh.current);var e=Ll(Us.current),t=y_(e,n.type);e!==t&&(on(Kh,n),on(Us,t))}function wx(n){Kh.current===n&&(ln(Us),ln(Kh))}var vn=Ia(0);function Rg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var c0=[];function Sx(){for(var n=0;n<c0.length;n++)c0[n]._workInProgressVersionPrimary=null;c0.length=0}var tg=So.ReactCurrentDispatcher,d0=So.ReactCurrentBatchConfig,Xl=0,xn=null,Vn=null,qn=null,kg=!1,Rh=!1,Jh=0,i3=0;function fi(){throw Error(Ce(321))}function bx(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!gs(n[t],e[t]))return!1;return!0}function Mx(n,e,t,i,r,s){if(Xl=s,xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tg.current=n===null||n.memoizedState===null?a3:l3,n=t(i,r),Rh){s=0;do{if(Rh=!1,Jh=0,25<=s)throw Error(Ce(301));s+=1,qn=Vn=null,e.updateQueue=null,tg.current=u3,n=t(i,r)}while(Rh)}if(tg.current=Ig,e=Vn!==null&&Vn.next!==null,Xl=0,qn=Vn=xn=null,kg=!1,e)throw Error(Ce(300));return n}function Ex(){var n=Jh!==0;return Jh=0,n}function Ds(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?xn.memoizedState=qn=n:qn=qn.next=n,qn}function Gr(){if(Vn===null){var n=xn.alternate;n=n!==null?n.memoizedState:null}else n=Vn.next;var e=qn===null?xn.memoizedState:qn.next;if(e!==null)qn=e,Vn=n;else{if(n===null)throw Error(Ce(310));Vn=n,n={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},qn===null?xn.memoizedState=qn=n:qn=qn.next=n}return qn}function Qh(n,e){return typeof e=="function"?e(n):e}function h0(n){var e=Gr(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var i=Vn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,d=null,f=s;do{var g=f.lane;if((Xl&g)===g)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:n(i,f.action);else{var m={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(l=d=m,o=i):d=d.next=m,xn.lanes|=g,ql|=g}f=f.next}while(f!==null&&f!==s);d===null?o=i:d.next=l,gs(i,e.memoizedState)||(Wi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=d,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,xn.lanes|=s,ql|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function f0(n){var e=Gr(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);gs(s,e.memoizedState)||(Wi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function XM(){}function qM(n,e){var t=xn,i=Gr(),r=e(),s=!gs(i.memoizedState,r);if(s&&(i.memoizedState=r,Wi=!0),i=i.queue,Cx(ZM.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||qn!==null&&qn.memoizedState.tag&1){if(t.flags|=2048,$h(9,KM.bind(null,t,i,r,e),void 0,null),Kn===null)throw Error(Ce(349));(Xl&30)!==0||YM(t,e,r)}return r}function YM(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function KM(n,e,t,i){e.value=t,e.getSnapshot=i,JM(e)&&QM(n)}function ZM(n,e,t){return t(function(){JM(e)&&QM(n)})}function JM(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!gs(n,t)}catch{return!0}}function QM(n){var e=_o(n,1);e!==null&&ps(e,n,1,-1)}function P1(n){var e=Ds();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qh,lastRenderedState:n},e.queue=n,n=n.dispatch=o3.bind(null,xn,n),[e.memoizedState,n]}function $h(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function $M(){return Gr().memoizedState}function ng(n,e,t,i){var r=Ds();xn.flags|=n,r.memoizedState=$h(1|e,t,void 0,i===void 0?null:i)}function $g(n,e,t,i){var r=Gr();i=i===void 0?null:i;var s=void 0;if(Vn!==null){var o=Vn.memoizedState;if(s=o.destroy,i!==null&&bx(i,o.deps)){r.memoizedState=$h(e,t,s,i);return}}xn.flags|=n,r.memoizedState=$h(1|e,t,s,i)}function T1(n,e){return ng(8390656,8,n,e)}function Cx(n,e){return $g(2048,8,n,e)}function eE(n,e){return $g(4,2,n,e)}function tE(n,e){return $g(4,4,n,e)}function nE(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function iE(n,e,t){return t=t!=null?t.concat([n]):null,$g(4,4,nE.bind(null,e,n),t)}function Px(){}function rE(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&bx(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function sE(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&bx(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function oE(n,e,t){return(Xl&21)===0?(n.baseState&&(n.baseState=!1,Wi=!0),n.memoizedState=t):(gs(t,e)||(t=uM(),xn.lanes|=t,ql|=t,n.baseState=!0),e)}function r3(n,e){var t=Yt;Yt=t!==0&&4>t?t:4,n(!0);var i=d0.transition;d0.transition={};try{n(!1),e()}finally{Yt=t,d0.transition=i}}function aE(){return Gr().memoizedState}function s3(n,e,t){var i=Sa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},lE(n))uE(e,t);else if(t=UM(n,e,t,i),t!==null){var r=Li();ps(t,n,i,r),cE(t,e,i)}}function o3(n,e,t){var i=Sa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(lE(n))uE(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,t);if(r.hasEagerState=!0,r.eagerState=l,gs(l,o)){var d=e.interleaved;d===null?(r.next=r,_x(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}t=UM(n,e,r,i),t!==null&&(r=Li(),ps(t,n,i,r),cE(t,e,i))}}function lE(n){var e=n.alternate;return n===xn||e!==null&&e===xn}function uE(n,e){Rh=kg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function cE(n,e,t){if((t&4194240)!==0){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,rx(n,t)}}var Ig={readContext:Hr,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},a3={readContext:Hr,useCallback:function(n,e){return Ds().memoizedState=[n,e===void 0?null:e],n},useContext:Hr,useEffect:T1,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ng(4194308,4,nE.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ng(4194308,4,n,e)},useInsertionEffect:function(n,e){return ng(4,2,n,e)},useMemo:function(n,e){var t=Ds();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ds();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=s3.bind(null,xn,n),[i.memoizedState,n]},useRef:function(n){var e=Ds();return n={current:n},e.memoizedState=n},useState:P1,useDebugValue:Px,useDeferredValue:function(n){return Ds().memoizedState=n},useTransition:function(){var n=P1(!1),e=n[0];return n=r3.bind(null,n[1]),Ds().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=xn,r=Ds();if(hn){if(t===void 0)throw Error(Ce(407));t=t()}else{if(t=e(),Kn===null)throw Error(Ce(349));(Xl&30)!==0||YM(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,T1(ZM.bind(null,i,s,n),[n]),i.flags|=2048,$h(9,KM.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ds(),e=Kn.identifierPrefix;if(hn){var t=ho,i=co;t=(i&~(1<<32-fs(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=i3++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},l3={readContext:Hr,useCallback:rE,useContext:Hr,useEffect:Cx,useImperativeHandle:iE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:h0,useRef:$M,useState:function(){return h0(Qh)},useDebugValue:Px,useDeferredValue:function(n){var e=Gr();return oE(e,Vn.memoizedState,n)},useTransition:function(){var n=h0(Qh)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:XM,useSyncExternalStore:qM,useId:aE,unstable_isNewReconciler:!1},u3={readContext:Hr,useCallback:rE,useContext:Hr,useEffect:Cx,useImperativeHandle:iE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:f0,useRef:$M,useState:function(){return f0(Qh)},useDebugValue:Px,useDeferredValue:function(n){var e=Gr();return Vn===null?e.memoizedState=n:oE(e,Vn.memoizedState,n)},useTransition:function(){var n=f0(Qh)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:XM,useSyncExternalStore:qM,useId:aE,unstable_isNewReconciler:!1};function Qc(n,e){try{var t="",i=e;do t+=OP(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function p0(n,e,t){return{value:n,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function H_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var c3=typeof WeakMap=="function"?WeakMap:Map;function dE(n,e,t){t=po(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Ng||(Ng=!0,Q_=i),H_(n,e)},t}function hE(n,e,t){t=po(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){H_(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){H_(n,e),typeof i!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function A1(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new c3;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=M3.bind(null,n,e,t),e.then(n,n))}function L1(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function R1(n,e,t,i,r){return(n.mode&1)===0?(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=po(-1,1),e.tag=2,xa(t,e,1))),t.lanes|=1),n):(n.flags|=65536,n.lanes=r,n)}var d3=So.ReactCurrentOwner,Wi=!1;function Ti(n,e,t,i){e.child=n===null?WM(e,null,t,i):Zc(e,n.child,t,i)}function k1(n,e,t,i,r){t=t.render;var s=e.ref;return Wc(e,r),i=Mx(n,e,t,i,s,r),t=Ex(),n!==null&&!Wi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,yo(n,e,r)):(hn&&t&&hx(e),e.flags|=1,Ti(n,e,i,r),e.child)}function I1(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Nx(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,fE(n,e,s,i,r)):(n=og(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,(n.lanes&r)===0){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:jh,t(o,i)&&n.ref===e.ref)return yo(n,e,r)}return e.flags|=1,n=ba(s,i),n.ref=e.ref,n.return=e,e.child=n}function fE(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(jh(s,i)&&n.ref===e.ref)if(Wi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)(n.flags&131072)!==0&&(Wi=!0);else return e.lanes=n.lanes,yo(n,e,r)}return G_(n,e,t,i,r)}function pE(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Dc,dr),dr|=t;else{if((t&1073741824)===0)return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,on(Dc,dr),dr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,on(Dc,dr),dr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,on(Dc,dr),dr|=i;return Ti(n,e,r,t),e.child}function mE(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function G_(n,e,t,i,r){var s=qi(t)?Wl:yi.current;return s=Yc(e,s),Wc(e,r),t=Mx(n,e,t,i,s,r),i=Ex(),n!==null&&!Wi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,yo(n,e,r)):(hn&&i&&hx(e),e.flags|=1,Ti(n,e,t,r),e.child)}function D1(n,e,t,i,r){if(qi(t)){var s=!0;Eg(e)}else s=!1;if(Wc(e,r),e.stateNode===null)ig(n,e),HM(e,t,i),V_(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var d=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=Hr(f):(f=qi(t)?Wl:yi.current,f=Yc(e,f));var g=t.getDerivedStateFromProps,m=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||d!==f)&&E1(e,o,i,f),la=!1;var _=e.memoizedState;o.state=_,Lg(e,i,o,r),d=e.memoizedState,l!==i||_!==d||Xi.current||la?(typeof g=="function"&&(B_(e,t,g,i),d=e.memoizedState),(l=la||M1(e,t,l,i,_,d,f))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),o.props=i,o.state=d,o.context=f,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,BM(n,e),l=e.memoizedProps,f=e.type===e.elementType?l:as(e.type,l),o.props=f,m=e.pendingProps,_=o.context,d=t.contextType,typeof d=="object"&&d!==null?d=Hr(d):(d=qi(t)?Wl:yi.current,d=Yc(e,d));var y=t.getDerivedStateFromProps;(g=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||_!==d)&&E1(e,o,i,d),la=!1,_=e.memoizedState,o.state=_,Lg(e,i,o,r);var w=e.memoizedState;l!==m||_!==w||Xi.current||la?(typeof y=="function"&&(B_(e,t,y,i),w=e.memoizedState),(f=la||M1(e,t,f,i,_,w,d)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,w,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,w,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&_===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&_===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),o.props=i,o.state=w,o.context=d,i=f):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&_===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&_===n.memoizedState||(e.flags|=1024),i=!1)}return W_(n,e,t,i,s,r)}function W_(n,e,t,i,r,s){mE(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&y1(e,t,!1),yo(n,e,s);i=e.stateNode,d3.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Zc(e,n.child,null,s),e.child=Zc(e,null,l,s)):Ti(n,e,l,s),e.memoizedState=i.state,r&&y1(e,t,!0),e.child}function gE(n){var e=n.stateNode;e.pendingContext?_1(n,e.pendingContext,e.pendingContext!==e.context):e.context&&_1(n,e.context,!1),xx(n,e.containerInfo)}function N1(n,e,t,i,r){return Kc(),px(r),e.flags|=256,Ti(n,e,t,i),e.child}var j_={dehydrated:null,treeContext:null,retryLane:0};function X_(n){return{baseLanes:n,cachePool:null,transitions:null}}function vE(n,e,t){var i=e.pendingProps,r=vn.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),on(vn,r&1),n===null)return F_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((e.mode&1)===0?e.lanes=1:n.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nv(o,i,0,null),n=Ol(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=X_(t),e.memoizedState=j_,n):Tx(e,o));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return h3(n,e,o,i,l,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,l=r.sibling;var d={mode:"hidden",children:i.children};return(o&1)===0&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=ba(r,d),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=ba(l,s):(s=Ol(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?X_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=j_,i}return s=n.child,n=s.sibling,i=ba(s,{mode:"visible",children:i.children}),(e.mode&1)===0&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Tx(n,e){return e=nv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function nm(n,e,t,i){return i!==null&&px(i),Zc(e,n.child,null,t),n=Tx(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function h3(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=p0(Error(Ce(422))),nm(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=nv({mode:"visible",children:i.children},r,0,null),s=Ol(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,(e.mode&1)!==0&&Zc(e,n.child,null,o),e.child.memoizedState=X_(o),e.memoizedState=j_,s);if((e.mode&1)===0)return nm(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(Ce(419)),i=p0(s,i,void 0),nm(n,e,o,i)}if(l=(o&n.childLanes)!==0,Wi||l){if(i=Kn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=(r&(i.suspendedLanes|o))!==0?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,_o(n,r),ps(i,n,r,-1))}return Dx(),i=p0(Error(Ce(421))),nm(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=E3.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,hr=ya(r.nextSibling),fr=e,hn=!0,cs=null,n!==null&&(Nr[zr++]=co,Nr[zr++]=ho,Nr[zr++]=jl,co=n.id,ho=n.overflow,jl=e),e=Tx(e,i.children),e.flags|=4096,e)}function z1(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),U_(n.return,e,t)}function m0(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function _E(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ti(n,e,i.children,t),i=vn.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&z1(n,t,e);else if(n.tag===19)z1(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(on(vn,i),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Rg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),m0(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Rg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}m0(e,!0,t,null,s);break;case"together":m0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ig(n,e){(e.mode&1)===0&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function yo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ql|=e.lanes,(t&e.childLanes)===0)return null;if(n!==null&&e.child!==n.child)throw Error(Ce(153));if(e.child!==null){for(n=e.child,t=ba(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ba(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function f3(n,e,t){switch(e.tag){case 3:gE(e),Kc();break;case 5:jM(e);break;case 1:qi(e.type)&&Eg(e);break;case 4:xx(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;on(Tg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(on(vn,vn.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?vE(n,e,t):(on(vn,vn.current&1),n=yo(n,e,t),n!==null?n.sibling:null);on(vn,vn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,(n.flags&128)!==0){if(i)return _E(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),on(vn,vn.current),i)break;return null;case 22:case 23:return e.lanes=0,pE(n,e,t)}return yo(n,e,t)}var yE,q_,xE,wE;yE=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};q_=function(){};xE=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ll(Us.current);var s=null;switch(t){case"input":r=m_(n,r),i=m_(n,i),s=[];break;case"select":r=wn({},r,{value:void 0}),i=wn({},i,{value:void 0}),s=[];break;case"textarea":r=__(n,r),i=__(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=bg)}x_(t,i);var o;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var l=r[f];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Fh.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var d=i[f];if(l=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&d!==l&&(d!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(t||(t={}),t[o]=d[o])}else t||(s||(s=[]),s.push(f,t)),t=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(s=s||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Fh.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&an("scroll",n),s||l===d||(s=[])):(s=s||[]).push(f,d))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};wE=function(n,e,t,i){t!==i&&(e.flags|=4)};function lh(n,e){if(!hn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function pi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function p3(n,e,t){var i=e.pendingProps;switch(fx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(e),null;case 1:return qi(e.type)&&Mg(),pi(e),null;case 3:return i=e.stateNode,Jc(),ln(Xi),ln(yi),Sx(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(em(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,cs!==null&&(ty(cs),cs=null))),q_(n,e),pi(e),null;case 5:wx(e);var r=Ll(Zh.current);if(t=e.type,n!==null&&e.stateNode!=null)xE(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ce(166));return pi(e),null}if(n=Ll(Us.current),em(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[zs]=e,i[Yh]=s,n=(e.mode&1)!==0,t){case"dialog":an("cancel",i),an("close",i);break;case"iframe":case"object":case"embed":an("load",i);break;case"video":case"audio":for(r=0;r<bh.length;r++)an(bh[r],i);break;case"source":an("error",i);break;case"img":case"image":case"link":an("error",i),an("load",i);break;case"details":an("toggle",i);break;case"input":jw(i,s),an("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},an("invalid",i);break;case"textarea":qw(i,s),an("invalid",i)}x_(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&$p(i.textContent,l,n),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&$p(i.textContent,l,n),r=["children",""+l]):Fh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&an("scroll",i)}switch(t){case"input":jp(i),Xw(i,s,!0);break;case"textarea":jp(i),Yw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=bg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Yb(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[zs]=e,n[Yh]=i,yE(n,e,!1,!1),e.stateNode=n;e:{switch(o=w_(t,i),t){case"dialog":an("cancel",n),an("close",n),r=i;break;case"iframe":case"object":case"embed":an("load",n),r=i;break;case"video":case"audio":for(r=0;r<bh.length;r++)an(bh[r],n);r=i;break;case"source":an("error",n),r=i;break;case"img":case"image":case"link":an("error",n),an("load",n),r=i;break;case"details":an("toggle",n),r=i;break;case"input":jw(n,i),r=m_(n,i),an("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=wn({},i,{value:void 0}),an("invalid",n);break;case"textarea":qw(n,i),r=__(n,i),an("invalid",n);break;default:r=i}x_(t,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];s==="style"?Jb(n,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Kb(n,d)):s==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&Uh(n,d):typeof d=="number"&&Uh(n,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fh.hasOwnProperty(s)?d!=null&&s==="onScroll"&&an("scroll",n):d!=null&&Qy(n,s,d,o))}switch(t){case"input":jp(n),Xw(n,i,!1);break;case"textarea":jp(n),Yw(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ca(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Bc(n,!!i.multiple,s,!1):i.defaultValue!=null&&Bc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=bg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pi(e),null;case 6:if(n&&e.stateNode!=null)wE(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ce(166));if(t=Ll(Zh.current),Ll(Us.current),em(e)){if(i=e.stateNode,t=e.memoizedProps,i[zs]=e,(s=i.nodeValue!==t)&&(n=fr,n!==null))switch(n.tag){case 3:$p(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&$p(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[zs]=e,e.stateNode=i}return pi(e),null;case 13:if(ln(vn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(hn&&hr!==null&&(e.mode&1)!==0&&(e.flags&128)===0)FM(),Kc(),e.flags|=98560,s=!1;else if(s=em(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[zs]=e}else Kc(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;pi(e),s=!1}else cs!==null&&(ty(cs),cs=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,(e.mode&1)!==0&&(n===null||(vn.current&1)!==0?Hn===0&&(Hn=3):Dx())),e.updateQueue!==null&&(e.flags|=4),pi(e),null);case 4:return Jc(),q_(n,e),n===null&&Xh(e.stateNode.containerInfo),pi(e),null;case 10:return vx(e.type._context),pi(e),null;case 17:return qi(e.type)&&Mg(),pi(e),null;case 19:if(ln(vn),s=e.memoizedState,s===null)return pi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)lh(s,!1);else{if(Hn!==0||n!==null&&(n.flags&128)!==0)for(n=e.child;n!==null;){if(o=Rg(n),o!==null){for(e.flags|=128,lh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return on(vn,vn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ln()>$c&&(e.flags|=128,i=!0,lh(s,!1),e.lanes=4194304)}else{if(!i)if(n=Rg(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),lh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hn)return pi(e),null}else 2*Ln()-s.renderingStartTime>$c&&t!==1073741824&&(e.flags|=128,i=!0,lh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ln(),e.sibling=null,t=vn.current,on(vn,i?t&1|2:t&1),e):(pi(e),null);case 22:case 23:return Ix(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&(e.mode&1)!==0?(dr&1073741824)!==0&&(pi(e),e.subtreeFlags&6&&(e.flags|=8192)):pi(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function m3(n,e){switch(fx(e),e.tag){case 1:return qi(e.type)&&Mg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Jc(),ln(Xi),ln(yi),Sx(),n=e.flags,(n&65536)!==0&&(n&128)===0?(e.flags=n&-65537|128,e):null;case 5:return wx(e),null;case 13:if(ln(vn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));Kc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ln(vn),null;case 4:return Jc(),null;case 10:return vx(e.type._context),null;case 22:case 23:return Ix(),null;case 24:return null;default:return null}}var im=!1,vi=!1,g3=typeof WeakSet=="function"?WeakSet:Set,je=null;function Ic(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){En(n,e,i)}else t.current=null}function Y_(n,e,t){try{t()}catch(i){En(n,e,i)}}var O1=!1;function v3(n,e){if(R_=xg,n=EM(),dx(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,l=-1,d=-1,f=0,g=0,m=n,_=null;t:for(;;){for(var y;m!==t||r!==0&&m.nodeType!==3||(l=o+r),m!==s||i!==0&&m.nodeType!==3||(d=o+i),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)_=m,m=y;for(;;){if(m===n)break t;if(_===t&&++f===r&&(l=o),_===s&&++g===i&&(d=o),(y=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=y}t=l===-1||d===-1?null:{start:l,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(k_={focusedElem:n,selectionRange:t},xg=!1,je=e;je!==null;)if(e=je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,je=n;else for(;je!==null;){e=je;try{var w=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var S=w.memoizedProps,E=w.memoizedState,M=e.stateNode,C=M.getSnapshotBeforeUpdate(e.elementType===e.type?S:as(e.type,S),E);M.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(A){En(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}return w=O1,O1=!1,w}function kh(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Y_(e,t,s)}r=r.next}while(r!==i)}}function ev(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function K_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function SE(n){var e=n.alternate;e!==null&&(n.alternate=null,SE(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[zs],delete e[Yh],delete e[N_],delete e[$T],delete e[e3])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function bE(n){return n.tag===5||n.tag===3||n.tag===4}function F1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Z_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=bg));else if(i!==4&&(n=n.child,n!==null))for(Z_(n,e,t),n=n.sibling;n!==null;)Z_(n,e,t),n=n.sibling}function J_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(J_(n,e,t),n=n.sibling;n!==null;)J_(n,e,t),n=n.sibling}var ni=null,ls=!1;function Qo(n,e,t){for(t=t.child;t!==null;)ME(n,e,t),t=t.sibling}function ME(n,e,t){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(Xg,t)}catch{}switch(t.tag){case 5:vi||Ic(t,e);case 6:var i=ni,r=ls;ni=null,Qo(n,e,t),ni=i,ls=r,ni!==null&&(ls?(n=ni,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ni.removeChild(t.stateNode));break;case 18:ni!==null&&(ls?(n=ni,t=t.stateNode,n.nodeType===8?l0(n.parentNode,t):n.nodeType===1&&l0(n,t),Gh(n)):l0(ni,t.stateNode));break;case 4:i=ni,r=ls,ni=t.stateNode.containerInfo,ls=!0,Qo(n,e,t),ni=i,ls=r;break;case 0:case 11:case 14:case 15:if(!vi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Y_(t,e,o),r=r.next}while(r!==i)}Qo(n,e,t);break;case 1:if(!vi&&(Ic(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(l){En(t,e,l)}Qo(n,e,t);break;case 21:Qo(n,e,t);break;case 22:t.mode&1?(vi=(i=vi)||t.memoizedState!==null,Qo(n,e,t),vi=i):Qo(n,e,t);break;default:Qo(n,e,t)}}function U1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new g3),e.forEach(function(i){var r=C3.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function is(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ni=l.stateNode,ls=!1;break e;case 3:ni=l.stateNode.containerInfo,ls=!0;break e;case 4:ni=l.stateNode.containerInfo,ls=!0;break e}l=l.return}if(ni===null)throw Error(Ce(160));ME(s,o,r),ni=null,ls=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(f){En(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EE(e,n),e=e.sibling}function EE(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(is(e,n),Is(n),i&4){try{kh(3,n,n.return),ev(3,n)}catch(S){En(n,n.return,S)}try{kh(5,n,n.return)}catch(S){En(n,n.return,S)}}break;case 1:is(e,n),Is(n),i&512&&t!==null&&Ic(t,t.return);break;case 5:if(is(e,n),Is(n),i&512&&t!==null&&Ic(t,t.return),n.flags&32){var r=n.stateNode;try{Uh(r,"")}catch(S){En(n,n.return,S)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,l=n.type,d=n.updateQueue;if(n.updateQueue=null,d!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Xb(r,s),w_(l,o);var f=w_(l,s);for(o=0;o<d.length;o+=2){var g=d[o],m=d[o+1];g==="style"?Jb(r,m):g==="dangerouslySetInnerHTML"?Kb(r,m):g==="children"?Uh(r,m):Qy(r,g,m,f)}switch(l){case"input":g_(r,s);break;case"textarea":qb(r,s);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Bc(r,!!s.multiple,y,!1):_!==!!s.multiple&&(s.defaultValue!=null?Bc(r,!!s.multiple,s.defaultValue,!0):Bc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Yh]=s}catch(S){En(n,n.return,S)}}break;case 6:if(is(e,n),Is(n),i&4){if(n.stateNode===null)throw Error(Ce(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(S){En(n,n.return,S)}}break;case 3:if(is(e,n),Is(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Gh(e.containerInfo)}catch(S){En(n,n.return,S)}break;case 4:is(e,n),Is(n);break;case 13:is(e,n),Is(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Rx=Ln())),i&4&&U1(n);break;case 22:if(g=t!==null&&t.memoizedState!==null,n.mode&1?(vi=(f=vi)||g,is(e,n),vi=f):is(e,n),Is(n),i&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!g&&(n.mode&1)!==0)for(je=n,g=n.child;g!==null;){for(m=je=g;je!==null;){switch(_=je,y=_.child,_.tag){case 0:case 11:case 14:case 15:kh(4,_,_.return);break;case 1:Ic(_,_.return);var w=_.stateNode;if(typeof w.componentWillUnmount=="function"){i=_,t=_.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(S){En(i,t,S)}}break;case 5:Ic(_,_.return);break;case 22:if(_.memoizedState!==null){V1(m);continue}}y!==null?(y.return=_,je=y):V1(m)}g=g.sibling}e:for(g=null,m=n;;){if(m.tag===5){if(g===null){g=m;try{r=m.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=Zb("display",o))}catch(S){En(n,n.return,S)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(S){En(n,n.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===n)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===n)break e;for(;m.sibling===null;){if(m.return===null||m.return===n)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:is(e,n),Is(n),i&4&&U1(n);break;case 21:break;default:is(e,n),Is(n)}}function Is(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(bE(t)){var i=t;break e}t=t.return}throw Error(Ce(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Uh(r,""),i.flags&=-33);var s=F1(n);J_(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=F1(n);Z_(n,l,o);break;default:throw Error(Ce(161))}}catch(d){En(n,n.return,d)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function _3(n,e,t){je=n,CE(n)}function CE(n,e,t){for(var i=(n.mode&1)!==0;je!==null;){var r=je,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||im;if(!o){var l=r.alternate,d=l!==null&&l.memoizedState!==null||vi;l=im;var f=vi;if(im=o,(vi=d)&&!f)for(je=r;je!==null;)o=je,d=o.child,o.tag===22&&o.memoizedState!==null?H1(r):d!==null?(d.return=o,je=d):H1(r);for(;s!==null;)je=s,CE(s),s=s.sibling;je=r,im=l,vi=f}B1(n)}else(r.subtreeFlags&8772)!==0&&s!==null?(s.return=r,je=s):B1(n)}}function B1(n){for(;je!==null;){var e=je;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:vi||ev(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!vi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:as(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&b1(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}b1(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Gh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}vi||e.flags&512&&K_(e)}catch(_){En(e,e.return,_)}}if(e===n){je=null;break}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}}function V1(n){for(;je!==null;){var e=je;if(e===n){je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,je=t;break}je=e.return}}function H1(n){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{ev(4,e)}catch(d){En(e,t,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){En(e,r,d)}}var s=e.return;try{K_(e)}catch(d){En(e,s,d)}break;case 5:var o=e.return;try{K_(e)}catch(d){En(e,o,d)}}}catch(d){En(e,e.return,d)}if(e===n){je=null;break}var l=e.sibling;if(l!==null){l.return=e.return,je=l;break}je=e.return}}var y3=Math.ceil,Dg=So.ReactCurrentDispatcher,Ax=So.ReactCurrentOwner,Vr=So.ReactCurrentBatchConfig,Ut=0,Kn=null,zn=null,ii=0,dr=0,Dc=Ia(0),Hn=0,ef=null,ql=0,tv=0,Lx=0,Ih=null,Gi=null,Rx=0,$c=1/0,oo=null,Ng=!1,Q_=null,wa=null,rm=!1,fa=null,zg=0,Dh=0,$_=null,rg=-1,sg=0;function Li(){return(Ut&6)!==0?Ln():rg!==-1?rg:rg=Ln()}function Sa(n){return(n.mode&1)===0?1:(Ut&2)!==0&&ii!==0?ii&-ii:n3.transition!==null?(sg===0&&(sg=uM()),sg):(n=Yt,n!==0||(n=window.event,n=n===void 0?16:gM(n.type)),n)}function ps(n,e,t,i){if(50<Dh)throw Dh=0,$_=null,Error(Ce(185));wf(n,t,i),((Ut&2)===0||n!==Kn)&&(n===Kn&&((Ut&2)===0&&(tv|=t),Hn===4&&da(n,ii)),Yi(n,i),t===1&&Ut===0&&(e.mode&1)===0&&($c=Ln()+500,Jg&&Da()))}function Yi(n,e){var t=n.callbackNode;nT(n,e);var i=yg(n,n===Kn?ii:0);if(i===0)t!==null&&Jw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Jw(t),e===1)n.tag===0?t3(G1.bind(null,n)):NM(G1.bind(null,n)),JT(function(){(Ut&6)===0&&Da()}),t=null;else{switch(cM(i)){case 1:t=ix;break;case 4:t=aM;break;case 16:t=_g;break;case 536870912:t=lM;break;default:t=_g}t=DE(t,PE.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function PE(n,e){if(rg=-1,sg=0,(Ut&6)!==0)throw Error(Ce(327));var t=n.callbackNode;if(jc()&&n.callbackNode!==t)return null;var i=yg(n,n===Kn?ii:0);if(i===0)return null;if((i&30)!==0||(i&n.expiredLanes)!==0||e)e=Og(n,i);else{e=i;var r=Ut;Ut|=2;var s=AE();(Kn!==n||ii!==e)&&(oo=null,$c=Ln()+500,zl(n,e));do try{S3();break}catch(l){TE(n,l)}while(1);gx(),Dg.current=s,Ut=r,zn!==null?e=0:(Kn=null,ii=0,e=Hn)}if(e!==0){if(e===2&&(r=C_(n),r!==0&&(i=r,e=ey(n,r))),e===1)throw t=ef,zl(n,0),da(n,i),Yi(n,Ln()),t;if(e===6)da(n,i);else{if(r=n.current.alternate,(i&30)===0&&!x3(r)&&(e=Og(n,i),e===2&&(s=C_(n),s!==0&&(i=s,e=ey(n,s))),e===1))throw t=ef,zl(n,0),da(n,i),Yi(n,Ln()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ce(345));case 2:Sl(n,Gi,oo);break;case 3:if(da(n,i),(i&130023424)===i&&(e=Rx+500-Ln(),10<e)){if(yg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Li(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=D_(Sl.bind(null,n,Gi,oo),e);break}Sl(n,Gi,oo);break;case 4:if(da(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-fs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ln()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*y3(i/1960))-i,10<i){n.timeoutHandle=D_(Sl.bind(null,n,Gi,oo),i);break}Sl(n,Gi,oo);break;case 5:Sl(n,Gi,oo);break;default:throw Error(Ce(329))}}}return Yi(n,Ln()),n.callbackNode===t?PE.bind(null,n):null}function ey(n,e){var t=Ih;return n.current.memoizedState.isDehydrated&&(zl(n,e).flags|=256),n=Og(n,e),n!==2&&(e=Gi,Gi=t,e!==null&&ty(e)),n}function ty(n){Gi===null?Gi=n:Gi.push.apply(Gi,n)}function x3(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!gs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function da(n,e){for(e&=~Lx,e&=~tv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-fs(e),i=1<<t;n[t]=-1,e&=~i}}function G1(n){if((Ut&6)!==0)throw Error(Ce(327));jc();var e=yg(n,0);if((e&1)===0)return Yi(n,Ln()),null;var t=Og(n,e);if(n.tag!==0&&t===2){var i=C_(n);i!==0&&(e=i,t=ey(n,i))}if(t===1)throw t=ef,zl(n,0),da(n,e),Yi(n,Ln()),t;if(t===6)throw Error(Ce(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Sl(n,Gi,oo),Yi(n,Ln()),null}function kx(n,e){var t=Ut;Ut|=1;try{return n(e)}finally{Ut=t,Ut===0&&($c=Ln()+500,Jg&&Da())}}function Yl(n){fa!==null&&fa.tag===0&&(Ut&6)===0&&jc();var e=Ut;Ut|=1;var t=Vr.transition,i=Yt;try{if(Vr.transition=null,Yt=1,n)return n()}finally{Yt=i,Vr.transition=t,Ut=e,(Ut&6)===0&&Da()}}function Ix(){dr=Dc.current,ln(Dc)}function zl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,ZT(t)),zn!==null)for(t=zn.return;t!==null;){var i=t;switch(fx(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Mg();break;case 3:Jc(),ln(Xi),ln(yi),Sx();break;case 5:wx(i);break;case 4:Jc();break;case 13:ln(vn);break;case 19:ln(vn);break;case 10:vx(i.type._context);break;case 22:case 23:Ix()}t=t.return}if(Kn=n,zn=n=ba(n.current,null),ii=dr=e,Hn=0,ef=null,Lx=tv=ql=0,Gi=Ih=null,Al!==null){for(e=0;e<Al.length;e++)if(t=Al[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Al=null}return n}function TE(n,e){do{var t=zn;try{if(gx(),tg.current=Ig,kg){for(var i=xn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}kg=!1}if(Xl=0,qn=Vn=xn=null,Rh=!1,Jh=0,Ax.current=null,t===null||t.return===null){Hn=1,ef=e,zn=null;break}e:{var s=n,o=t.return,l=t,d=e;if(e=ii,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,g=l,m=g.tag;if((g.mode&1)===0&&(m===0||m===11||m===15)){var _=g.alternate;_?(g.updateQueue=_.updateQueue,g.memoizedState=_.memoizedState,g.lanes=_.lanes):(g.updateQueue=null,g.memoizedState=null)}var y=L1(o);if(y!==null){y.flags&=-257,R1(y,o,l,s,e),y.mode&1&&A1(s,f,e),e=y,d=f;var w=e.updateQueue;if(w===null){var S=new Set;S.add(d),e.updateQueue=S}else w.add(d);break e}else{if((e&1)===0){A1(s,f,e),Dx();break e}d=Error(Ce(426))}}else if(hn&&l.mode&1){var E=L1(o);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),R1(E,o,l,s,e),px(Qc(d,l));break e}}s=d=Qc(d,l),Hn!==4&&(Hn=2),Ih===null?Ih=[s]:Ih.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var M=dE(s,d,e);S1(s,M);break e;case 1:l=d;var C=s.type,P=s.stateNode;if((s.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(wa===null||!wa.has(P)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=hE(s,l,e);S1(s,A);break e}}s=s.return}while(s!==null)}RE(t)}catch(k){e=k,zn===t&&t!==null&&(zn=t=t.return);continue}break}while(1)}function AE(){var n=Dg.current;return Dg.current=Ig,n===null?Ig:n}function Dx(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),Kn===null||(ql&268435455)===0&&(tv&268435455)===0||da(Kn,ii)}function Og(n,e){var t=Ut;Ut|=2;var i=AE();(Kn!==n||ii!==e)&&(oo=null,zl(n,e));do try{w3();break}catch(r){TE(n,r)}while(1);if(gx(),Ut=t,Dg.current=i,zn!==null)throw Error(Ce(261));return Kn=null,ii=0,Hn}function w3(){for(;zn!==null;)LE(zn)}function S3(){for(;zn!==null&&!qP();)LE(zn)}function LE(n){var e=IE(n.alternate,n,dr);n.memoizedProps=n.pendingProps,e===null?RE(n):zn=e,Ax.current=null}function RE(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&32768)===0){if(t=p3(t,e,dr),t!==null){zn=t;return}}else{if(t=m3(t,e),t!==null){t.flags&=32767,zn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Hn=6,zn=null;return}}if(e=e.sibling,e!==null){zn=e;return}zn=e=n}while(e!==null);Hn===0&&(Hn=5)}function Sl(n,e,t){var i=Yt,r=Vr.transition;try{Vr.transition=null,Yt=1,b3(n,e,t,i)}finally{Vr.transition=r,Yt=i}return null}function b3(n,e,t,i){do jc();while(fa!==null);if((Ut&6)!==0)throw Error(Ce(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ce(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(iT(n,s),n===Kn&&(zn=Kn=null,ii=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||rm||(rm=!0,DE(_g,function(){return jc(),null})),s=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||s){s=Vr.transition,Vr.transition=null;var o=Yt;Yt=1;var l=Ut;Ut|=4,Ax.current=null,v3(n,t),EE(t,n),GT(k_),xg=!!R_,k_=R_=null,n.current=t,_3(t),YP(),Ut=l,Yt=o,Vr.transition=s}else n.current=t;if(rm&&(rm=!1,fa=n,zg=r),s=n.pendingLanes,s===0&&(wa=null),JP(t.stateNode),Yi(n,Ln()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Ng)throw Ng=!1,n=Q_,Q_=null,n;return(zg&1)!==0&&n.tag!==0&&jc(),s=n.pendingLanes,(s&1)!==0?n===$_?Dh++:(Dh=0,$_=n):Dh=0,Da(),null}function jc(){if(fa!==null){var n=cM(zg),e=Vr.transition,t=Yt;try{if(Vr.transition=null,Yt=16>n?16:n,fa===null)var i=!1;else{if(n=fa,fa=null,zg=0,(Ut&6)!==0)throw Error(Ce(331));var r=Ut;for(Ut|=4,je=n.current;je!==null;){var s=je,o=s.child;if((je.flags&16)!==0){var l=s.deletions;if(l!==null){for(var d=0;d<l.length;d++){var f=l[d];for(je=f;je!==null;){var g=je;switch(g.tag){case 0:case 11:case 15:kh(8,g,s)}var m=g.child;if(m!==null)m.return=g,je=m;else for(;je!==null;){g=je;var _=g.sibling,y=g.return;if(SE(g),g===f){je=null;break}if(_!==null){_.return=y,je=_;break}je=y}}}var w=s.alternate;if(w!==null){var S=w.child;if(S!==null){w.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}je=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,je=o;else e:for(;je!==null;){if(s=je,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:kh(9,s,s.return)}var M=s.sibling;if(M!==null){M.return=s.return,je=M;break e}je=s.return}}var C=n.current;for(je=C;je!==null;){o=je;var P=o.child;if((o.subtreeFlags&2064)!==0&&P!==null)P.return=o,je=P;else e:for(o=C;je!==null;){if(l=je,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:ev(9,l)}}catch(k){En(l,l.return,k)}if(l===o){je=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,je=A;break e}je=l.return}}if(Ut=r,Da(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(Xg,n)}catch{}i=!0}return i}finally{Yt=t,Vr.transition=e}}return!1}function W1(n,e,t){e=Qc(t,e),e=dE(n,e,1),n=xa(n,e,1),e=Li(),n!==null&&(wf(n,1,e),Yi(n,e))}function En(n,e,t){if(n.tag===3)W1(n,n,t);else for(;e!==null;){if(e.tag===3){W1(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wa===null||!wa.has(i))){n=Qc(t,n),n=hE(e,n,1),e=xa(e,n,1),n=Li(),e!==null&&(wf(e,1,n),Yi(e,n));break}}e=e.return}}function M3(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Li(),n.pingedLanes|=n.suspendedLanes&t,Kn===n&&(ii&t)===t&&(Hn===4||Hn===3&&(ii&130023424)===ii&&500>Ln()-Rx?zl(n,0):Lx|=t),Yi(n,e)}function kE(n,e){e===0&&((n.mode&1)===0?e=1:(e=Yp,Yp<<=1,(Yp&130023424)===0&&(Yp=4194304)));var t=Li();n=_o(n,e),n!==null&&(wf(n,e,t),Yi(n,t))}function E3(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),kE(n,t)}function C3(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ce(314))}i!==null&&i.delete(e),kE(n,t)}var IE;IE=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Xi.current)Wi=!0;else{if((n.lanes&t)===0&&(e.flags&128)===0)return Wi=!1,f3(n,e,t);Wi=(n.flags&131072)!==0}else Wi=!1,hn&&(e.flags&1048576)!==0&&zM(e,Pg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ig(n,e),n=e.pendingProps;var r=Yc(e,yi.current);Wc(e,t),r=Mx(null,e,i,n,r,t);var s=Ex();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qi(i)?(s=!0,Eg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,yx(e),r.updater=Qg,e.stateNode=r,r._reactInternals=e,V_(e,i,n,t),e=W_(null,e,i,!0,s,t)):(e.tag=0,hn&&s&&hx(e),Ti(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(ig(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=T3(i),n=as(i,n),r){case 0:e=G_(null,e,i,n,t);break e;case 1:e=D1(null,e,i,n,t);break e;case 11:e=k1(null,e,i,n,t);break e;case 14:e=I1(null,e,i,as(i.type,n),t);break e}throw Error(Ce(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:as(i,r),G_(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:as(i,r),D1(n,e,i,r,t);case 3:e:{if(gE(e),n===null)throw Error(Ce(387));i=e.pendingProps,s=e.memoizedState,r=s.element,BM(n,e),Lg(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Qc(Error(Ce(423)),e),e=N1(n,e,i,t,r);break e}else if(i!==r){r=Qc(Error(Ce(424)),e),e=N1(n,e,i,t,r);break e}else for(hr=ya(e.stateNode.containerInfo.firstChild),fr=e,hn=!0,cs=null,t=WM(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Kc(),i===r){e=yo(n,e,t);break e}Ti(n,e,i,t)}e=e.child}return e;case 5:return jM(e),n===null&&F_(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,I_(i,r)?o=null:s!==null&&I_(i,s)&&(e.flags|=32),mE(n,e),Ti(n,e,o,t),e.child;case 6:return n===null&&F_(e),null;case 13:return vE(n,e,t);case 4:return xx(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Zc(e,null,i,t):Ti(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:as(i,r),k1(n,e,i,r,t);case 7:return Ti(n,e,e.pendingProps,t),e.child;case 8:return Ti(n,e,e.pendingProps.children,t),e.child;case 12:return Ti(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,on(Tg,i._currentValue),i._currentValue=o,s!==null)if(gs(s.value,o)){if(s.children===r.children&&!Xi.current){e=yo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var d=l.firstContext;d!==null;){if(d.context===i){if(s.tag===1){d=po(-1,t&-t),d.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?d.next=d:(d.next=g.next,g.next=d),f.pending=d}}s.lanes|=t,d=s.alternate,d!==null&&(d.lanes|=t),U_(s.return,t,e),l.lanes|=t;break}d=d.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ce(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),U_(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ti(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Wc(e,t),r=Hr(r),i=i(r),e.flags|=1,Ti(n,e,i,t),e.child;case 14:return i=e.type,r=as(i,e.pendingProps),r=as(i.type,r),I1(n,e,i,r,t);case 15:return fE(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:as(i,r),ig(n,e),e.tag=1,qi(i)?(n=!0,Eg(e)):n=!1,Wc(e,t),HM(e,i,r),V_(e,i,r,t),W_(null,e,i,!0,n,t);case 19:return _E(n,e,t);case 22:return pE(n,e,t)}throw Error(Ce(156,e.tag))};function DE(n,e){return oM(n,e)}function P3(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(n,e,t,i){return new P3(n,e,t,i)}function Nx(n){return n=n.prototype,!(!n||!n.isReactComponent)}function T3(n){if(typeof n=="function")return Nx(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ex)return 11;if(n===tx)return 14}return 2}function ba(n,e){var t=n.alternate;return t===null?(t=Fr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function og(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")Nx(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Mc:return Ol(t.children,r,s,e);case $y:o=8,r|=8;break;case d_:return n=Fr(12,t,e,r|2),n.elementType=d_,n.lanes=s,n;case h_:return n=Fr(13,t,e,r),n.elementType=h_,n.lanes=s,n;case f_:return n=Fr(19,t,e,r),n.elementType=f_,n.lanes=s,n;case Gb:return nv(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Vb:o=10;break e;case Hb:o=9;break e;case ex:o=11;break e;case tx:o=14;break e;case aa:o=16,i=null;break e}throw Error(Ce(130,n==null?n:typeof n,""))}return e=Fr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ol(n,e,t,i){return n=Fr(7,n,i,e),n.lanes=t,n}function nv(n,e,t,i){return n=Fr(22,n,i,e),n.elementType=Gb,n.lanes=t,n.stateNode={isHidden:!1},n}function g0(n,e,t){return n=Fr(6,n,null,e),n.lanes=t,n}function v0(n,e,t){return e=Fr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function A3(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jv(0),this.expirationTimes=Jv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jv(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zx(n,e,t,i,r,s,o,l,d){return n=new A3(n,e,t,l,d),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},yx(s),n}function L3(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function NE(n){if(!n)return Pa;n=n._reactInternals;e:{if(eu(n)!==n||n.tag!==1)throw Error(Ce(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(n.tag===1){var t=n.type;if(qi(t))return DM(n,t,e)}return e}function zE(n,e,t,i,r,s,o,l,d){return n=zx(t,i,!0,n,r,s,o,l,d),n.context=NE(null),t=n.current,i=Li(),r=Sa(t),s=po(i,r),s.callback=e!=null?e:null,xa(t,s,r),n.current.lanes=r,wf(n,r,i),Yi(n,i),n}function iv(n,e,t,i){var r=e.current,s=Li(),o=Sa(r);return t=NE(t),e.context===null?e.context=t:e.pendingContext=t,e=po(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=xa(r,e,o),n!==null&&(ps(n,r,o,s),eg(n,r,o)),o}function Fg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function j1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ox(n,e){j1(n,e),(n=n.alternate)&&j1(n,e)}function R3(){return null}var OE=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fx(n){this._internalRoot=n}rv.prototype.render=Fx.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ce(409));iv(n,e,null,null)};rv.prototype.unmount=Fx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Yl(function(){iv(null,n,null,null)}),e[vo]=null}};function rv(n){this._internalRoot=n}rv.prototype.unstable_scheduleHydration=function(n){if(n){var e=fM();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ca.length&&e!==0&&e<ca[t].priority;t++);ca.splice(t,0,n),t===0&&mM(n)}};function Ux(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function X1(){}function k3(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=Fg(o);s.call(f)}}var o=zE(e,i,n,0,null,!1,!1,"",X1);return n._reactRootContainer=o,n[vo]=o.current,Xh(n.nodeType===8?n.parentNode:n),Yl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var f=Fg(d);l.call(f)}}var d=zx(n,0,!1,null,null,!1,!1,"",X1);return n._reactRootContainer=d,n[vo]=d.current,Xh(n.nodeType===8?n.parentNode:n),Yl(function(){iv(e,d,t,i)}),d}function ov(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var d=Fg(o);l.call(d)}}iv(e,o,n,r)}else o=k3(t,e,n,r,i);return Fg(o)}dM=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Sh(e.pendingLanes);t!==0&&(rx(e,t|1),Yi(e,Ln()),(Ut&6)===0&&($c=Ln()+500,Da()))}break;case 13:Yl(function(){var i=_o(n,1);if(i!==null){var r=Li();ps(i,n,1,r)}}),Ox(n,1)}};sx=function(n){if(n.tag===13){var e=_o(n,134217728);if(e!==null){var t=Li();ps(e,n,134217728,t)}Ox(n,134217728)}};hM=function(n){if(n.tag===13){var e=Sa(n),t=_o(n,e);if(t!==null){var i=Li();ps(t,n,e,i)}Ox(n,e)}};fM=function(){return Yt};pM=function(n,e){var t=Yt;try{return Yt=n,e()}finally{Yt=t}};b_=function(n,e,t){switch(e){case"input":if(g_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Zg(i);if(!r)throw Error(Ce(90));jb(i),g_(i,r)}}}break;case"textarea":qb(n,t);break;case"select":e=t.value,e!=null&&Bc(n,!!t.multiple,e,!1)}};eM=kx;tM=Yl;var I3={usingClientEntryPoint:!1,Events:[bf,Tc,Zg,Qb,$b,kx]},uh={findFiberByHostInstance:Tl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},D3={bundleType:uh.bundleType,version:uh.version,rendererPackageName:uh.rendererPackageName,rendererConfig:uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:So.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=rM(n),n===null?null:n.stateNode},findFiberByHostInstance:uh.findFiberByHostInstance||R3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sm.isDisabled&&sm.supportsFiber)try{Xg=sm.inject(D3),Fs=sm}catch{}}vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I3;vr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ux(e))throw Error(Ce(200));return L3(n,e,null,t)};vr.createRoot=function(n,e){if(!Ux(n))throw Error(Ce(299));var t=!1,i="",r=OE;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=zx(n,1,!1,null,null,t,!1,i,r),n[vo]=e.current,Xh(n.nodeType===8?n.parentNode:n),new Fx(e)};vr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ce(188)):(n=Object.keys(n).join(","),Error(Ce(268,n)));return n=rM(e),n=n===null?null:n.stateNode,n};vr.flushSync=function(n){return Yl(n)};vr.hydrate=function(n,e,t){if(!sv(e))throw Error(Ce(200));return ov(null,n,e,!0,t)};vr.hydrateRoot=function(n,e,t){if(!Ux(n))throw Error(Ce(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=OE;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=zE(e,null,n,1,t!=null?t:null,r,!1,s,o),n[vo]=e.current,Xh(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new rv(e)};vr.render=function(n,e,t){if(!sv(e))throw Error(Ce(200));return ov(null,n,e,!1,t)};vr.unmountComponentAtNode=function(n){if(!sv(n))throw Error(Ce(40));return n._reactRootContainer?(Yl(function(){ov(null,null,n,!1,function(){n._reactRootContainer=null,n[vo]=null})}),!0):!1};vr.unstable_batchedUpdates=kx;vr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!sv(t))throw Error(Ce(200));if(n==null||n._reactInternals===void 0)throw Error(Ce(38));return ov(n,e,t,!1,i)};vr.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=vr})(zb);var q1=zb.exports;u_.createRoot=q1.createRoot,u_.hydrateRoot=q1.hydrateRoot;/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const av="144",bl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ml={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FE=0,ny=1,UE=2,N3=3,z3=0,Bx=1,Vx=2,Nc=3,Kl=0,pr=1,Os=2,mo=0,Fl=1,iy=2,ry=3,sy=4,BE=5,Cl=100,VE=101,HE=102,oy=103,ay=104,GE=200,WE=201,jE=202,XE=203,Hx=204,Gx=205,qE=206,YE=207,KE=208,ZE=209,JE=210,QE=0,$E=1,eC=2,Ug=3,tC=4,nC=5,iC=6,rC=7,Ef=0,sC=1,oC=2,ms=0,aC=1,lC=2,uC=3,Wx=4,cC=5,lv=300,xo=301,Ta=302,ed=303,tf=304,ad=306,nf=1e3,Ai=1001,rf=1002,Nn=1003,Bg=1004,O3=1004,Vg=1005,F3=1005,_n=1006,jx=1007,U3=1007,tu=1008,B3=1008,Aa=1009,dC=1010,hC=1011,Xx=1012,fC=1013,pa=1014,Ur=1015,hs=1016,pC=1017,mC=1018,Ul=1020,gC=1021,vC=1022,Br=1023,_C=1024,yC=1025,Ma=1026,Zl=1027,xC=1028,wC=1029,SC=1030,bC=1031,MC=1033,ag=33776,lg=33777,ug=33778,cg=33779,ly=35840,uy=35841,cy=35842,dy=35843,EC=36196,hy=37492,fy=37496,py=37808,my=37809,gy=37810,vy=37811,_y=37812,yy=37813,xy=37814,wy=37815,Sy=37816,by=37817,My=37818,Ey=37819,Cy=37820,Py=37821,Ty=36492,CC=2200,PC=2201,TC=2202,sf=2300,of=2301,dg=2302,Rl=2400,kl=2401,af=2402,uv=2500,qx=2501,V3=0,H3=1,G3=2,vs=3e3,sn=3001,AC=3200,LC=3201,Na=0,RC=1,W3="",Ns="srgb",ma="srgb-linear",j3=0,hg=7680,X3=7681,q3=7682,Y3=7683,K3=34055,Z3=34056,J3=5386,Q3=512,$3=513,eA=514,tA=515,nA=516,iA=517,rA=518,kC=519,lf=35044,sA=35048,oA=35040,aA=35045,lA=35049,uA=35041,cA=35046,dA=35050,hA=35042,fA="100",Ay="300 es",Hg=1035;class Vs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const mi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Y1=1234567;const Bl=Math.PI/180,uf=180/Math.PI;function mr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(mi[n&255]+mi[n>>8&255]+mi[n>>16&255]+mi[n>>24&255]+"-"+mi[e&255]+mi[e>>8&255]+"-"+mi[e>>16&15|64]+mi[e>>24&255]+"-"+mi[t&63|128]+mi[t>>8&255]+"-"+mi[t>>16&255]+mi[t>>24&255]+mi[i&255]+mi[i>>8&255]+mi[i>>16&255]+mi[i>>24&255]).toLowerCase()}function Rn(n,e,t){return Math.max(e,Math.min(t,n))}function Yx(n,e){return(n%e+e)%e}function pA(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function mA(n,e,t){return n!==e?(t-n)/(e-n):0}function Nh(n,e,t){return(1-t)*n+t*e}function gA(n,e,t,i){return Nh(n,e,1-Math.exp(-t*i))}function vA(n,e=1){return e-Math.abs(Yx(n,e*2)-e)}function _A(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function yA(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function xA(n,e){return n+Math.floor(Math.random()*(e-n+1))}function wA(n,e){return n+Math.random()*(e-n)}function SA(n){return n*(.5-Math.random())}function bA(n){n!==void 0&&(Y1=n);let e=Y1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function MA(n){return n*Bl}function EA(n){return n*uf}function Ly(n){return(n&n-1)===0&&n!==0}function IC(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Gg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function CA(n,e,t,i,r){const s=Math.cos,o=Math.sin,l=s(t/2),d=o(t/2),f=s((e+i)/2),g=o((e+i)/2),m=s((e-i)/2),_=o((e-i)/2),y=s((i-e)/2),w=o((i-e)/2);switch(r){case"XYX":n.set(l*g,d*m,d*_,l*f);break;case"YZY":n.set(d*_,l*g,d*m,l*f);break;case"ZXZ":n.set(d*m,d*_,l*g,l*f);break;case"XZX":n.set(l*g,d*w,d*y,l*f);break;case"YXY":n.set(d*y,l*g,d*w,l*f);break;case"ZYZ":n.set(d*w,d*y,l*g,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function fo(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function en(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var PA=Object.freeze({__proto__:null,DEG2RAD:Bl,RAD2DEG:uf,generateUUID:mr,clamp:Rn,euclideanModulo:Yx,mapLinear:pA,inverseLerp:mA,lerp:Nh,damp:gA,pingpong:vA,smoothstep:_A,smootherstep:yA,randInt:xA,randFloat:wA,randFloatSpread:SA,seededRandom:bA,degToRad:MA,radToDeg:EA,isPowerOfTwo:Ly,ceilPowerOfTwo:IC,floorPowerOfTwo:Gg,setQuaternionFromProperEuler:CA,normalize:en,denormalize:fo});class Se{constructor(e=0,t=0){Se.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ji{constructor(){ji.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,l,d,f){const g=this.elements;return g[0]=e,g[1]=r,g[2]=l,g[3]=t,g[4]=s,g[5]=d,g[6]=i,g[7]=o,g[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[3],d=i[6],f=i[1],g=i[4],m=i[7],_=i[2],y=i[5],w=i[8],S=r[0],E=r[3],M=r[6],C=r[1],P=r[4],A=r[7],k=r[2],D=r[5],z=r[8];return s[0]=o*S+l*C+d*k,s[3]=o*E+l*P+d*D,s[6]=o*M+l*A+d*z,s[1]=f*S+g*C+m*k,s[4]=f*E+g*P+m*D,s[7]=f*M+g*A+m*z,s[2]=_*S+y*C+w*k,s[5]=_*E+y*P+w*D,s[8]=_*M+y*A+w*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],g=e[8];return t*o*g-t*l*f-i*s*g+i*l*d+r*s*f-r*o*d}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],g=e[8],m=g*o-l*f,_=l*d-g*s,y=f*s-o*d,w=t*m+i*_+r*y;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/w;return e[0]=m*S,e[1]=(r*f-g*i)*S,e[2]=(l*i-r*o)*S,e[3]=_*S,e[4]=(g*t-r*d)*S,e[5]=(r*s-l*t)*S,e[6]=y*S,e[7]=(i*d-f*t)*S,e[8]=(o*t-i*s)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,l){const d=Math.cos(s),f=Math.sin(s);return this.set(i*d,i*f,-i*(d*o+f*l)+o+e,-r*f,r*d,-r*(-f*o+d*l)+l+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],l=r[6],d=r[1],f=r[4],g=r[7];return r[0]=t*s+i*d,r[3]=t*o+i*f,r[6]=t*l+i*g,r[1]=-i*s+t*d,r[4]=-i*o+t*f,r[7]=-i*l+t*g,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function DC(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const TA={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zc(n,e){return new TA[n](e)}function cf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Vl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function fg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const _0={[Ns]:{[ma]:Vl},[ma]:{[Ns]:fg}},Ir={legacyMode:!0,get workingColorSpace(){return ma},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(_0[e]&&_0[e][t]!==void 0){const i=_0[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},NC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bn={r:0,g:0,b:0},rs={h:0,s:0,l:0},om={h:0,s:0,l:0};function y0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function am(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Ge{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ns){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ir.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ma){return this.r=e,this.g=t,this.b=i,Ir.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ma){if(e=Yx(e,1),t=Rn(t,0,1),i=Rn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=y0(o,s,e+1/3),this.g=y0(o,s,e),this.b=y0(o,s,e-1/3)}return Ir.toWorkingColorSpace(this,r),this}setStyle(e,t=Ns){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Ir.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Ir.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const d=parseFloat(s[1])/360,f=parseFloat(s[2])/100,g=parseFloat(s[3])/100;return i(s[4]),this.setHSL(d,f,g,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Ir.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Ir.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ns){const i=NC[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Vl(e.r),this.g=Vl(e.g),this.b=Vl(e.b),this}copyLinearToSRGB(e){return this.r=fg(e.r),this.g=fg(e.g),this.b=fg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ns){return Ir.fromWorkingColorSpace(am(this,Bn),e),Rn(Bn.r*255,0,255)<<16^Rn(Bn.g*255,0,255)<<8^Rn(Bn.b*255,0,255)<<0}getHexString(e=Ns){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ma){Ir.fromWorkingColorSpace(am(this,Bn),t);const i=Bn.r,r=Bn.g,s=Bn.b,o=Math.max(i,r,s),l=Math.min(i,r,s);let d,f;const g=(l+o)/2;if(l===o)d=0,f=0;else{const m=o-l;switch(f=g<=.5?m/(o+l):m/(2-o-l),o){case i:d=(r-s)/m+(r<s?6:0);break;case r:d=(s-i)/m+2;break;case s:d=(i-r)/m+4;break}d/=6}return e.h=d,e.s=f,e.l=g,e}getRGB(e,t=ma){return Ir.fromWorkingColorSpace(am(this,Bn),t),e.r=Bn.r,e.g=Bn.g,e.b=Bn.b,e}getStyle(e=Ns){return Ir.fromWorkingColorSpace(am(this,Bn),e),e!==Ns?`color(${e} ${Bn.r} ${Bn.g} ${Bn.b})`:`rgb(${Bn.r*255|0},${Bn.g*255|0},${Bn.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(rs),rs.h+=e,rs.s+=t,rs.l+=i,this.setHSL(rs.h,rs.s,rs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(rs),e.getHSL(om);const i=Nh(rs.h,om.h,t),r=Nh(rs.s,om.s,t),s=Nh(rs.l,om.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Ge.NAMES=NC;let nc;class Kx{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{nc===void 0&&(nc=cf("canvas")),nc.width=e.width,nc.height=e.height;const i=nc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=nc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=cf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Vl(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Vl(t[i]/255)*255):t[i]=Vl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Il{constructor(e=null){this.isSource=!0,this.uuid=mr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(x0(r[o].image)):s.push(x0(r[o]))}else s=x0(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function x0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Kx.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let AA=0;class On extends Vs{constructor(e=On.DEFAULT_IMAGE,t=On.DEFAULT_MAPPING,i=Ai,r=Ai,s=_n,o=tu,l=Br,d=Aa,f=1,g=vs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:AA++}),this.uuid=mr(),this.name="",this.source=new Il(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=d,this.offset=new Se(0,0),this.repeat=new Se(1,1),this.center=new Se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ji,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=g,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==lv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nf:e.x=e.x-Math.floor(e.x);break;case Ai:e.x=e.x<0?0:1;break;case rf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case nf:e.y=e.y-Math.floor(e.y);break;case Ai:e.y=e.y<0?0:1;break;case rf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}On.DEFAULT_IMAGE=null;On.DEFAULT_MAPPING=lv;class qt{constructor(e=0,t=0,i=0,r=1){qt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const d=e.elements,f=d[0],g=d[4],m=d[8],_=d[1],y=d[5],w=d[9],S=d[2],E=d[6],M=d[10];if(Math.abs(g-_)<.01&&Math.abs(m-S)<.01&&Math.abs(w-E)<.01){if(Math.abs(g+_)<.1&&Math.abs(m+S)<.1&&Math.abs(w+E)<.1&&Math.abs(f+y+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(f+1)/2,A=(y+1)/2,k=(M+1)/2,D=(g+_)/4,z=(m+S)/4,L=(w+E)/4;return P>A&&P>k?P<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(P),r=D/i,s=z/i):A>k?A<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(A),i=D/r,s=L/r):k<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(k),i=z/s,r=L/s),this.set(i,r,s,t),this}let C=Math.sqrt((E-w)*(E-w)+(m-S)*(m-S)+(_-g)*(_-g));return Math.abs(C)<.001&&(C=1),this.x=(E-w)/C,this.y=(m-S)/C,this.z=(_-g)/C,this.w=Math.acos((f+y+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Wr extends Vs{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qt(0,0,e,t),this.scissorTest=!1,this.viewport=new qt(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new On(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:_n,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Il(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Cf extends On{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=Ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class LA extends Wr{constructor(e,t,i){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Cf(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class cv extends On{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=Ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class RA extends Wr{constructor(e,t,i){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new cv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class kA extends Wr{constructor(e,t,i,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class _i{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,l){let d=i[r+0],f=i[r+1],g=i[r+2],m=i[r+3];const _=s[o+0],y=s[o+1],w=s[o+2],S=s[o+3];if(l===0){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=m;return}if(l===1){e[t+0]=_,e[t+1]=y,e[t+2]=w,e[t+3]=S;return}if(m!==S||d!==_||f!==y||g!==w){let E=1-l;const M=d*_+f*y+g*w+m*S,C=M>=0?1:-1,P=1-M*M;if(P>Number.EPSILON){const k=Math.sqrt(P),D=Math.atan2(k,M*C);E=Math.sin(E*D)/k,l=Math.sin(l*D)/k}const A=l*C;if(d=d*E+_*A,f=f*E+y*A,g=g*E+w*A,m=m*E+S*A,E===1-l){const k=1/Math.sqrt(d*d+f*f+g*g+m*m);d*=k,f*=k,g*=k,m*=k}}e[t]=d,e[t+1]=f,e[t+2]=g,e[t+3]=m}static multiplyQuaternionsFlat(e,t,i,r,s,o){const l=i[r],d=i[r+1],f=i[r+2],g=i[r+3],m=s[o],_=s[o+1],y=s[o+2],w=s[o+3];return e[t]=l*w+g*m+d*y-f*_,e[t+1]=d*w+g*_+f*m-l*y,e[t+2]=f*w+g*y+l*_-d*m,e[t+3]=g*w-l*m-d*_-f*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,d=Math.sin,f=l(i/2),g=l(r/2),m=l(s/2),_=d(i/2),y=d(r/2),w=d(s/2);switch(o){case"XYZ":this._x=_*g*m+f*y*w,this._y=f*y*m-_*g*w,this._z=f*g*w+_*y*m,this._w=f*g*m-_*y*w;break;case"YXZ":this._x=_*g*m+f*y*w,this._y=f*y*m-_*g*w,this._z=f*g*w-_*y*m,this._w=f*g*m+_*y*w;break;case"ZXY":this._x=_*g*m-f*y*w,this._y=f*y*m+_*g*w,this._z=f*g*w+_*y*m,this._w=f*g*m-_*y*w;break;case"ZYX":this._x=_*g*m-f*y*w,this._y=f*y*m+_*g*w,this._z=f*g*w-_*y*m,this._w=f*g*m+_*y*w;break;case"YZX":this._x=_*g*m+f*y*w,this._y=f*y*m+_*g*w,this._z=f*g*w-_*y*m,this._w=f*g*m-_*y*w;break;case"XZY":this._x=_*g*m-f*y*w,this._y=f*y*m-_*g*w,this._z=f*g*w+_*y*m,this._w=f*g*m+_*y*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],l=t[5],d=t[9],f=t[2],g=t[6],m=t[10],_=i+l+m;if(_>0){const y=.5/Math.sqrt(_+1);this._w=.25/y,this._x=(g-d)*y,this._y=(s-f)*y,this._z=(o-r)*y}else if(i>l&&i>m){const y=2*Math.sqrt(1+i-l-m);this._w=(g-d)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+f)/y}else if(l>m){const y=2*Math.sqrt(1+l-i-m);this._w=(s-f)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(d+g)/y}else{const y=2*Math.sqrt(1+m-i-l);this._w=(o-r)/y,this._x=(s+f)/y,this._y=(d+g)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,l=t._x,d=t._y,f=t._z,g=t._w;return this._x=i*g+o*l+r*f-s*d,this._y=r*g+o*d+s*l-i*f,this._z=s*g+o*f+i*d-r*l,this._w=o*g-i*l-r*d-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const d=1-l*l;if(d<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(d),g=Math.atan2(f,l),m=Math.sin((1-t)*g)/f,_=Math.sin(t*g)/f;return this._w=o*m+this._w*_,this._x=i*m+this._x*_,this._y=r*m+this._y*_,this._z=s*m+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(e=0,t=0,i=0){V.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(K1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(K1.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,l=e.z,d=e.w,f=d*t+o*r-l*i,g=d*i+l*t-s*r,m=d*r+s*i-o*t,_=-s*t-o*i-l*r;return this.x=f*d+_*-s+g*-l-m*-o,this.y=g*d+_*-o+m*-s-f*-l,this.z=m*d+_*-l+f*-o-g*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,l=t.y,d=t.z;return this.x=r*d-s*l,this.y=s*o-i*d,this.z=i*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return w0.copy(this).projectOnVector(e),this.sub(w0)}reflect(e){return this.sub(w0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Rn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const w0=new V,K1=new _i;class nu{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let d=0,f=e.length;d<f;d+=3){const g=e[d],m=e[d+1],_=e[d+2];g<t&&(t=g),m<i&&(i=m),_<r&&(r=_),g>s&&(s=g),m>o&&(o=m),_>l&&(l=_)}return this.min.set(t,i,r),this.max.set(s,o,l),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let d=0,f=e.count;d<f;d++){const g=e.getX(d),m=e.getY(d),_=e.getZ(d);g<t&&(t=g),m<i&&(i=m),_<r&&(r=_),g>s&&(s=g),m>o&&(o=m),_>l&&(l=_)}return this.min.set(t,i,r),this.max.set(s,o,l),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=fl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,l=s.count;o<l;o++)fl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(fl)}else i.boundingBox===null&&i.computeBoundingBox(),S0.copy(i.boundingBox),S0.applyMatrix4(e.matrixWorld),this.union(S0);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fl),fl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ch),lm.subVectors(this.max,ch),ic.subVectors(e.a,ch),rc.subVectors(e.b,ch),sc.subVectors(e.c,ch),$o.subVectors(rc,ic),ea.subVectors(sc,rc),pl.subVectors(ic,sc);let t=[0,-$o.z,$o.y,0,-ea.z,ea.y,0,-pl.z,pl.y,$o.z,0,-$o.x,ea.z,0,-ea.x,pl.z,0,-pl.x,-$o.y,$o.x,0,-ea.y,ea.x,0,-pl.y,pl.x,0];return!b0(t,ic,rc,sc,lm)||(t=[1,0,0,0,1,0,0,0,1],!b0(t,ic,rc,sc,lm))?!1:(um.crossVectors($o,ea),t=[um.x,um.y,um.z],b0(t,ic,rc,sc,lm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return fl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(fl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(eo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),eo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),eo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),eo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),eo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),eo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),eo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),eo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(eo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const eo=[new V,new V,new V,new V,new V,new V,new V,new V],fl=new V,S0=new nu,ic=new V,rc=new V,sc=new V,$o=new V,ea=new V,pl=new V,ch=new V,lm=new V,um=new V,ml=new V;function b0(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ml.fromArray(n,s);const l=r.x*Math.abs(ml.x)+r.y*Math.abs(ml.y)+r.z*Math.abs(ml.z),d=e.dot(ml),f=t.dot(ml),g=i.dot(ml);if(Math.max(-Math.max(d,f,g),Math.min(d,f,g))>l)return!1}return!0}const IA=new nu,Z1=new V,cm=new V,M0=new V;class iu{constructor(e=new V,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):IA.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){M0.subVectors(e,this.center);const t=M0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(M0.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?cm.set(0,0,1).multiplyScalar(e.radius):cm.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Z1.copy(e.center).add(cm)),this.expandByPoint(Z1.copy(e.center).sub(cm)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const to=new V,E0=new V,dm=new V,ta=new V,C0=new V,hm=new V,P0=new V;class Pf{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,to)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=to.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(to.copy(this.direction).multiplyScalar(t).add(this.origin),to.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){E0.copy(e).add(t).multiplyScalar(.5),dm.copy(t).sub(e).normalize(),ta.copy(this.origin).sub(E0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(dm),l=ta.dot(this.direction),d=-ta.dot(dm),f=ta.lengthSq(),g=Math.abs(1-o*o);let m,_,y,w;if(g>0)if(m=o*d-l,_=o*l-d,w=s*g,m>=0)if(_>=-w)if(_<=w){const S=1/g;m*=S,_*=S,y=m*(m+o*_+2*l)+_*(o*m+_+2*d)+f}else _=s,m=Math.max(0,-(o*_+l)),y=-m*m+_*(_+2*d)+f;else _=-s,m=Math.max(0,-(o*_+l)),y=-m*m+_*(_+2*d)+f;else _<=-w?(m=Math.max(0,-(-o*s+l)),_=m>0?-s:Math.min(Math.max(-s,-d),s),y=-m*m+_*(_+2*d)+f):_<=w?(m=0,_=Math.min(Math.max(-s,-d),s),y=_*(_+2*d)+f):(m=Math.max(0,-(o*s+l)),_=m>0?s:Math.min(Math.max(-s,-d),s),y=-m*m+_*(_+2*d)+f);else _=o>0?-s:s,m=Math.max(0,-(o*_+l)),y=-m*m+_*(_+2*d)+f;return i&&i.copy(this.direction).multiplyScalar(m).add(this.origin),r&&r.copy(dm).multiplyScalar(_).add(E0),y}intersectSphere(e,t){to.subVectors(e.center,this.origin);const i=to.dot(this.direction),r=to.dot(to)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=i-o,d=i+o;return l<0&&d<0?null:l<0?this.at(d,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,l,d;const f=1/this.direction.x,g=1/this.direction.y,m=1/this.direction.z,_=this.origin;return f>=0?(i=(e.min.x-_.x)*f,r=(e.max.x-_.x)*f):(i=(e.max.x-_.x)*f,r=(e.min.x-_.x)*f),g>=0?(s=(e.min.y-_.y)*g,o=(e.max.y-_.y)*g):(s=(e.max.y-_.y)*g,o=(e.min.y-_.y)*g),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),m>=0?(l=(e.min.z-_.z)*m,d=(e.max.z-_.z)*m):(l=(e.max.z-_.z)*m,d=(e.min.z-_.z)*m),i>d||l>r)||((l>i||i!==i)&&(i=l),(d<r||r!==r)&&(r=d),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,to)!==null}intersectTriangle(e,t,i,r,s){C0.subVectors(t,e),hm.subVectors(i,e),P0.crossVectors(C0,hm);let o=this.direction.dot(P0),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;ta.subVectors(this.origin,e);const d=l*this.direction.dot(hm.crossVectors(ta,hm));if(d<0)return null;const f=l*this.direction.dot(C0.cross(ta));if(f<0||d+f>o)return null;const g=-l*ta.dot(P0);return g<0?null:this.at(g/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class St{constructor(){St.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,l,d,f,g,m,_,y,w,S,E){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=r,M[1]=s,M[5]=o,M[9]=l,M[13]=d,M[2]=f,M[6]=g,M[10]=m,M[14]=_,M[3]=y,M[7]=w,M[11]=S,M[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new St().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/oc.setFromMatrixColumn(e,0).length(),s=1/oc.setFromMatrixColumn(e,1).length(),o=1/oc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),l=Math.sin(i),d=Math.cos(r),f=Math.sin(r),g=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const _=o*g,y=o*m,w=l*g,S=l*m;t[0]=d*g,t[4]=-d*m,t[8]=f,t[1]=y+w*f,t[5]=_-S*f,t[9]=-l*d,t[2]=S-_*f,t[6]=w+y*f,t[10]=o*d}else if(e.order==="YXZ"){const _=d*g,y=d*m,w=f*g,S=f*m;t[0]=_+S*l,t[4]=w*l-y,t[8]=o*f,t[1]=o*m,t[5]=o*g,t[9]=-l,t[2]=y*l-w,t[6]=S+_*l,t[10]=o*d}else if(e.order==="ZXY"){const _=d*g,y=d*m,w=f*g,S=f*m;t[0]=_-S*l,t[4]=-o*m,t[8]=w+y*l,t[1]=y+w*l,t[5]=o*g,t[9]=S-_*l,t[2]=-o*f,t[6]=l,t[10]=o*d}else if(e.order==="ZYX"){const _=o*g,y=o*m,w=l*g,S=l*m;t[0]=d*g,t[4]=w*f-y,t[8]=_*f+S,t[1]=d*m,t[5]=S*f+_,t[9]=y*f-w,t[2]=-f,t[6]=l*d,t[10]=o*d}else if(e.order==="YZX"){const _=o*d,y=o*f,w=l*d,S=l*f;t[0]=d*g,t[4]=S-_*m,t[8]=w*m+y,t[1]=m,t[5]=o*g,t[9]=-l*g,t[2]=-f*g,t[6]=y*m+w,t[10]=_-S*m}else if(e.order==="XZY"){const _=o*d,y=o*f,w=l*d,S=l*f;t[0]=d*g,t[4]=-m,t[8]=f*g,t[1]=_*m+S,t[5]=o*g,t[9]=y*m-w,t[2]=w*m-y,t[6]=l*g,t[10]=S*m+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(DA,e,NA)}lookAt(e,t,i){const r=this.elements;return ur.subVectors(e,t),ur.lengthSq()===0&&(ur.z=1),ur.normalize(),na.crossVectors(i,ur),na.lengthSq()===0&&(Math.abs(i.z)===1?ur.x+=1e-4:ur.z+=1e-4,ur.normalize(),na.crossVectors(i,ur)),na.normalize(),fm.crossVectors(ur,na),r[0]=na.x,r[4]=fm.x,r[8]=ur.x,r[1]=na.y,r[5]=fm.y,r[9]=ur.y,r[2]=na.z,r[6]=fm.z,r[10]=ur.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[4],d=i[8],f=i[12],g=i[1],m=i[5],_=i[9],y=i[13],w=i[2],S=i[6],E=i[10],M=i[14],C=i[3],P=i[7],A=i[11],k=i[15],D=r[0],z=r[4],L=r[8],N=r[12],F=r[1],q=r[5],ge=r[9],te=r[13],K=r[2],le=r[6],se=r[10],ne=r[14],O=r[3],B=r[7],H=r[11],$=r[15];return s[0]=o*D+l*F+d*K+f*O,s[4]=o*z+l*q+d*le+f*B,s[8]=o*L+l*ge+d*se+f*H,s[12]=o*N+l*te+d*ne+f*$,s[1]=g*D+m*F+_*K+y*O,s[5]=g*z+m*q+_*le+y*B,s[9]=g*L+m*ge+_*se+y*H,s[13]=g*N+m*te+_*ne+y*$,s[2]=w*D+S*F+E*K+M*O,s[6]=w*z+S*q+E*le+M*B,s[10]=w*L+S*ge+E*se+M*H,s[14]=w*N+S*te+E*ne+M*$,s[3]=C*D+P*F+A*K+k*O,s[7]=C*z+P*q+A*le+k*B,s[11]=C*L+P*ge+A*se+k*H,s[15]=C*N+P*te+A*ne+k*$,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],l=e[5],d=e[9],f=e[13],g=e[2],m=e[6],_=e[10],y=e[14],w=e[3],S=e[7],E=e[11],M=e[15];return w*(+s*d*m-r*f*m-s*l*_+i*f*_+r*l*y-i*d*y)+S*(+t*d*y-t*f*_+s*o*_-r*o*y+r*f*g-s*d*g)+E*(+t*f*m-t*l*y-s*o*m+i*o*y+s*l*g-i*f*g)+M*(-r*l*g-t*d*m+t*l*_+r*o*m-i*o*_+i*d*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],g=e[8],m=e[9],_=e[10],y=e[11],w=e[12],S=e[13],E=e[14],M=e[15],C=m*E*f-S*_*f+S*d*y-l*E*y-m*d*M+l*_*M,P=w*_*f-g*E*f-w*d*y+o*E*y+g*d*M-o*_*M,A=g*S*f-w*m*f+w*l*y-o*S*y-g*l*M+o*m*M,k=w*m*d-g*S*d-w*l*_+o*S*_+g*l*E-o*m*E,D=t*C+i*P+r*A+s*k;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/D;return e[0]=C*z,e[1]=(S*_*s-m*E*s-S*r*y+i*E*y+m*r*M-i*_*M)*z,e[2]=(l*E*s-S*d*s+S*r*f-i*E*f-l*r*M+i*d*M)*z,e[3]=(m*d*s-l*_*s-m*r*f+i*_*f+l*r*y-i*d*y)*z,e[4]=P*z,e[5]=(g*E*s-w*_*s+w*r*y-t*E*y-g*r*M+t*_*M)*z,e[6]=(w*d*s-o*E*s-w*r*f+t*E*f+o*r*M-t*d*M)*z,e[7]=(o*_*s-g*d*s+g*r*f-t*_*f-o*r*y+t*d*y)*z,e[8]=A*z,e[9]=(w*m*s-g*S*s-w*i*y+t*S*y+g*i*M-t*m*M)*z,e[10]=(o*S*s-w*l*s+w*i*f-t*S*f-o*i*M+t*l*M)*z,e[11]=(g*l*s-o*m*s-g*i*f+t*m*f+o*i*y-t*l*y)*z,e[12]=k*z,e[13]=(g*S*r-w*m*r+w*i*_-t*S*_-g*i*E+t*m*E)*z,e[14]=(w*l*r-o*S*r-w*i*d+t*S*d+o*i*E-t*l*E)*z,e[15]=(o*m*r-g*l*r+g*i*d-t*m*d-o*i*_+t*l*_)*z,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,l=e.y,d=e.z,f=s*o,g=s*l;return this.set(f*o+i,f*l-r*d,f*d+r*l,0,f*l+r*d,g*l+i,g*d-r*o,0,f*d-r*l,g*d+r*o,s*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,l=t._z,d=t._w,f=s+s,g=o+o,m=l+l,_=s*f,y=s*g,w=s*m,S=o*g,E=o*m,M=l*m,C=d*f,P=d*g,A=d*m,k=i.x,D=i.y,z=i.z;return r[0]=(1-(S+M))*k,r[1]=(y+A)*k,r[2]=(w-P)*k,r[3]=0,r[4]=(y-A)*D,r[5]=(1-(_+M))*D,r[6]=(E+C)*D,r[7]=0,r[8]=(w+P)*z,r[9]=(E-C)*z,r[10]=(1-(_+S))*z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=oc.set(r[0],r[1],r[2]).length();const o=oc.set(r[4],r[5],r[6]).length(),l=oc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ss.copy(this);const f=1/s,g=1/o,m=1/l;return ss.elements[0]*=f,ss.elements[1]*=f,ss.elements[2]*=f,ss.elements[4]*=g,ss.elements[5]*=g,ss.elements[6]*=g,ss.elements[8]*=m,ss.elements[9]*=m,ss.elements[10]*=m,t.setFromRotationMatrix(ss),i.x=s,i.y=o,i.z=l,this}makePerspective(e,t,i,r,s,o){const l=this.elements,d=2*s/(t-e),f=2*s/(i-r),g=(t+e)/(t-e),m=(i+r)/(i-r),_=-(o+s)/(o-s),y=-2*o*s/(o-s);return l[0]=d,l[4]=0,l[8]=g,l[12]=0,l[1]=0,l[5]=f,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=_,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o){const l=this.elements,d=1/(t-e),f=1/(i-r),g=1/(o-s),m=(t+e)*d,_=(i+r)*f,y=(o+s)*g;return l[0]=2*d,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-_,l[2]=0,l[6]=0,l[10]=-2*g,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const oc=new V,ss=new St,DA=new V(0,0,0),NA=new V(1,1,1),na=new V,fm=new V,ur=new V,J1=new St,Q1=new _i;class ld{constructor(e=0,t=0,i=0,r=ld.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],d=r[1],f=r[5],g=r[9],m=r[2],_=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(Rn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-g,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(_,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Rn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(d,f)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Rn(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-Rn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(_,y),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(Rn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,f),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-Rn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(_,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-g,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return J1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(J1,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Q1.setFromEuler(this),this.setFromQuaternion(Q1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}ld.DefaultOrder="XYZ";ld.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Hl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let zA=0;const $1=new V,ac=new _i,no=new St,pm=new V,dh=new V,OA=new V,FA=new _i,eS=new V(1,0,0),tS=new V(0,1,0),nS=new V(0,0,1),UA={type:"added"},iS={type:"removed"};class Ht extends Vs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:zA++}),this.uuid=mr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ht.DefaultUp.clone();const e=new V,t=new ld,i=new _i,r=new V(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new St},normalMatrix:{value:new ji}}),this.matrix=new St,this.matrixWorld=new St,this.matrixAutoUpdate=Ht.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ht.DefaultMatrixWorldAutoUpdate,this.layers=new Hl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ac.setFromAxisAngle(e,t),this.quaternion.multiply(ac),this}rotateOnWorldAxis(e,t){return ac.setFromAxisAngle(e,t),this.quaternion.premultiply(ac),this}rotateX(e){return this.rotateOnAxis(eS,e)}rotateY(e){return this.rotateOnAxis(tS,e)}rotateZ(e){return this.rotateOnAxis(nS,e)}translateOnAxis(e,t){return $1.copy(e).applyQuaternion(this.quaternion),this.position.add($1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(eS,e)}translateY(e){return this.translateOnAxis(tS,e)}translateZ(e){return this.translateOnAxis(nS,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(no.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?pm.copy(e):pm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),dh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?no.lookAt(dh,pm,this.up):no.lookAt(pm,dh,this.up),this.quaternion.setFromRotationMatrix(no),r&&(no.extractRotation(r.matrixWorld),ac.setFromRotationMatrix(no),this.quaternion.premultiply(ac.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(UA)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(iS)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(iS)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),no.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),no.multiply(e.parent.matrixWorld)),e.applyMatrix4(no),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dh,e,OA),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dh,FA,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const l=r[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(l,d){return l[d.uuid]===void 0&&(l[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const d=l.shapes;if(Array.isArray(d))for(let f=0,g=d.length;f<g;f++){const m=d[f];s(e.shapes,m)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let d=0,f=this.material.length;d<f;d++)l.push(s(e.materials,this.material[d]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const d=this.animations[l];r.animations.push(s(e.animations,d))}}if(t){const l=o(e.geometries),d=o(e.materials),f=o(e.textures),g=o(e.images),m=o(e.shapes),_=o(e.skeletons),y=o(e.animations),w=o(e.nodes);l.length>0&&(i.geometries=l),d.length>0&&(i.materials=d),f.length>0&&(i.textures=f),g.length>0&&(i.images=g),m.length>0&&(i.shapes=m),_.length>0&&(i.skeletons=_),y.length>0&&(i.animations=y),w.length>0&&(i.nodes=w)}return i.object=r,i;function o(l){const d=[];for(const f in l){const g=l[f];delete g.metadata,d.push(g)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ht.DefaultUp=new V(0,1,0);Ht.DefaultMatrixAutoUpdate=!0;Ht.DefaultMatrixWorldAutoUpdate=!0;const os=new V,io=new V,T0=new V,ro=new V,lc=new V,uc=new V,rS=new V,A0=new V,L0=new V,R0=new V;class Or{constructor(e=new V,t=new V,i=new V){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),os.subVectors(e,t),r.cross(os);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){os.subVectors(r,t),io.subVectors(i,t),T0.subVectors(e,t);const o=os.dot(os),l=os.dot(io),d=os.dot(T0),f=io.dot(io),g=io.dot(T0),m=o*f-l*l;if(m===0)return s.set(-2,-1,-1);const _=1/m,y=(f*d-l*g)*_,w=(o*g-l*d)*_;return s.set(1-y-w,w,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ro),ro.x>=0&&ro.y>=0&&ro.x+ro.y<=1}static getUV(e,t,i,r,s,o,l,d){return this.getBarycoord(e,t,i,r,ro),d.set(0,0),d.addScaledVector(s,ro.x),d.addScaledVector(o,ro.y),d.addScaledVector(l,ro.z),d}static isFrontFacing(e,t,i,r){return os.subVectors(i,t),io.subVectors(e,t),os.cross(io).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return os.subVectors(this.c,this.b),io.subVectors(this.a,this.b),os.cross(io).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Or.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Or.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Or.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Or.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Or.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,l;lc.subVectors(r,i),uc.subVectors(s,i),A0.subVectors(e,i);const d=lc.dot(A0),f=uc.dot(A0);if(d<=0&&f<=0)return t.copy(i);L0.subVectors(e,r);const g=lc.dot(L0),m=uc.dot(L0);if(g>=0&&m<=g)return t.copy(r);const _=d*m-g*f;if(_<=0&&d>=0&&g<=0)return o=d/(d-g),t.copy(i).addScaledVector(lc,o);R0.subVectors(e,s);const y=lc.dot(R0),w=uc.dot(R0);if(w>=0&&y<=w)return t.copy(s);const S=y*f-d*w;if(S<=0&&f>=0&&w<=0)return l=f/(f-w),t.copy(i).addScaledVector(uc,l);const E=g*w-y*m;if(E<=0&&m-g>=0&&y-w>=0)return rS.subVectors(s,r),l=(m-g)/(m-g+(y-w)),t.copy(r).addScaledVector(rS,l);const M=1/(E+S+_);return o=S*M,l=_*M,t.copy(i).addScaledVector(lc,o).addScaledVector(uc,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let BA=0;class si extends Vs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:BA++}),this.uuid=mr(),this.name="",this.type="Material",this.blending=Fl,this.side=Kl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Hx,this.blendDst=Gx,this.blendEquation=Cl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ug,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hg,this.stencilZFail=hg,this.stencilZPass=hg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Fl&&(i.blending=this.blending),this.side!==Kl&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const l in s){const d=s[l];delete d.metadata,o.push(d)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class za extends si{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ef,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Dn=new V,mm=new Se;class tn{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=lf,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)mm.fromBufferAttribute(this,t),mm.applyMatrix3(e),this.setXY(t,mm.x,mm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix3(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix4(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyNormalMatrix(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.transformDirection(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=fo(t,this.array)),t}setX(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=fo(t,this.array)),t}setY(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=fo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=fo(t,this.array)),t}setW(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),i=en(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),i=en(i,this.array),r=en(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),i=en(i,this.array),r=en(r,this.array),s=en(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==lf&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class VA extends tn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class HA extends tn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class GA extends tn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class WA extends tn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Zx extends tn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class jA extends tn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Jx extends tn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class XA extends tn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class Ze extends tn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class qA extends tn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let YA=0;const kr=new St,k0=new Ht,cc=new V,cr=new nu,hh=new nu,Xn=new V;class Mt extends Vs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:YA++}),this.uuid=mr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(DC(e)?Jx:Zx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new ji().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return kr.makeRotationFromQuaternion(e),this.applyMatrix4(kr),this}rotateX(e){return kr.makeRotationX(e),this.applyMatrix4(kr),this}rotateY(e){return kr.makeRotationY(e),this.applyMatrix4(kr),this}rotateZ(e){return kr.makeRotationZ(e),this.applyMatrix4(kr),this}translate(e,t,i){return kr.makeTranslation(e,t,i),this.applyMatrix4(kr),this}scale(e,t,i){return kr.makeScale(e,t,i),this.applyMatrix4(kr),this}lookAt(e){return k0.lookAt(e),k0.updateMatrix(),this.applyMatrix4(k0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cc).negate(),this.translate(cc.x,cc.y,cc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ze(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new nu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];cr.setFromBufferAttribute(s),this.morphTargetsRelative?(Xn.addVectors(this.boundingBox.min,cr.min),this.boundingBox.expandByPoint(Xn),Xn.addVectors(this.boundingBox.max,cr.max),this.boundingBox.expandByPoint(Xn)):(this.boundingBox.expandByPoint(cr.min),this.boundingBox.expandByPoint(cr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new iu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new V,1/0);return}if(e){const i=this.boundingSphere.center;if(cr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];hh.setFromBufferAttribute(l),this.morphTargetsRelative?(Xn.addVectors(cr.min,hh.min),cr.expandByPoint(Xn),Xn.addVectors(cr.max,hh.max),cr.expandByPoint(Xn)):(cr.expandByPoint(hh.min),cr.expandByPoint(hh.max))}cr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Xn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Xn));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],d=this.morphTargetsRelative;for(let f=0,g=l.count;f<g;f++)Xn.fromBufferAttribute(l,f),d&&(cc.fromBufferAttribute(e,f),Xn.add(cc)),r=Math.max(r,i.distanceToSquared(Xn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,l=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new tn(new Float32Array(4*l),4));const d=this.getAttribute("tangent").array,f=[],g=[];for(let F=0;F<l;F++)f[F]=new V,g[F]=new V;const m=new V,_=new V,y=new V,w=new Se,S=new Se,E=new Se,M=new V,C=new V;function P(F,q,ge){m.fromArray(r,F*3),_.fromArray(r,q*3),y.fromArray(r,ge*3),w.fromArray(o,F*2),S.fromArray(o,q*2),E.fromArray(o,ge*2),_.sub(m),y.sub(m),S.sub(w),E.sub(w);const te=1/(S.x*E.y-E.x*S.y);!isFinite(te)||(M.copy(_).multiplyScalar(E.y).addScaledVector(y,-S.y).multiplyScalar(te),C.copy(y).multiplyScalar(S.x).addScaledVector(_,-E.x).multiplyScalar(te),f[F].add(M),f[q].add(M),f[ge].add(M),g[F].add(C),g[q].add(C),g[ge].add(C))}let A=this.groups;A.length===0&&(A=[{start:0,count:i.length}]);for(let F=0,q=A.length;F<q;++F){const ge=A[F],te=ge.start,K=ge.count;for(let le=te,se=te+K;le<se;le+=3)P(i[le+0],i[le+1],i[le+2])}const k=new V,D=new V,z=new V,L=new V;function N(F){z.fromArray(s,F*3),L.copy(z);const q=f[F];k.copy(q),k.sub(z.multiplyScalar(z.dot(q))).normalize(),D.crossVectors(L,q);const te=D.dot(g[F])<0?-1:1;d[F*4]=k.x,d[F*4+1]=k.y,d[F*4+2]=k.z,d[F*4+3]=te}for(let F=0,q=A.length;F<q;++F){const ge=A[F],te=ge.start,K=ge.count;for(let le=te,se=te+K;le<se;le+=3)N(i[le+0]),N(i[le+1]),N(i[le+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new tn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let _=0,y=i.count;_<y;_++)i.setXYZ(_,0,0,0);const r=new V,s=new V,o=new V,l=new V,d=new V,f=new V,g=new V,m=new V;if(e)for(let _=0,y=e.count;_<y;_+=3){const w=e.getX(_+0),S=e.getX(_+1),E=e.getX(_+2);r.fromBufferAttribute(t,w),s.fromBufferAttribute(t,S),o.fromBufferAttribute(t,E),g.subVectors(o,s),m.subVectors(r,s),g.cross(m),l.fromBufferAttribute(i,w),d.fromBufferAttribute(i,S),f.fromBufferAttribute(i,E),l.add(g),d.add(g),f.add(g),i.setXYZ(w,l.x,l.y,l.z),i.setXYZ(S,d.x,d.y,d.z),i.setXYZ(E,f.x,f.y,f.z)}else for(let _=0,y=t.count;_<y;_+=3)r.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),o.fromBufferAttribute(t,_+2),g.subVectors(o,s),m.subVectors(r,s),g.cross(m),i.setXYZ(_+0,g.x,g.y,g.z),i.setXYZ(_+1,g.x,g.y,g.z),i.setXYZ(_+2,g.x,g.y,g.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Xn.fromBufferAttribute(e,t),Xn.normalize(),e.setXYZ(t,Xn.x,Xn.y,Xn.z)}toNonIndexed(){function e(l,d){const f=l.array,g=l.itemSize,m=l.normalized,_=new f.constructor(d.length*g);let y=0,w=0;for(let S=0,E=d.length;S<E;S++){l.isInterleavedBufferAttribute?y=d[S]*l.data.stride+l.offset:y=d[S]*g;for(let M=0;M<g;M++)_[w++]=f[y++]}return new tn(_,g,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mt,i=this.index.array,r=this.attributes;for(const l in r){const d=r[l],f=e(d,i);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const d=[],f=s[l];for(let g=0,m=f.length;g<m;g++){const _=f[g],y=e(_,i);d.push(y)}t.morphAttributes[l]=d}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,d=o.length;l<d;l++){const f=o[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const f in d)d[f]!==void 0&&(e[f]=d[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const f=i[d];e.data.attributes[d]=f.toJSON(e.data)}const r={};let s=!1;for(const d in this.morphAttributes){const f=this.morphAttributes[d],g=[];for(let m=0,_=f.length;m<_;m++){const y=f[m];g.push(y.toJSON(e.data))}g.length>0&&(r[d]=g,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const g=r[f];this.setAttribute(f,g.clone(t))}const s=e.morphAttributes;for(const f in s){const g=[],m=s[f];for(let _=0,y=m.length;_<y;_++)g.push(m[_].clone(t));this.morphAttributes[f]=g}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,g=o.length;f<g;f++){const m=o[f];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const sS=new St,dc=new Pf,I0=new iu,ia=new V,ra=new V,sa=new V,D0=new V,N0=new V,z0=new V,gm=new V,vm=new V,_m=new V,ym=new Se,xm=new Se,wm=new Se,O0=new V,Sm=new V;class Yn extends Ht{constructor(e=new Mt,t=new za){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),I0.copy(i.boundingSphere),I0.applyMatrix4(s),e.ray.intersectsSphere(I0)===!1)||(sS.copy(s).invert(),dc.copy(e.ray).applyMatrix4(sS),i.boundingBox!==null&&dc.intersectsBox(i.boundingBox)===!1))return;let o;const l=i.index,d=i.attributes.position,f=i.morphAttributes.position,g=i.morphTargetsRelative,m=i.attributes.uv,_=i.attributes.uv2,y=i.groups,w=i.drawRange;if(l!==null)if(Array.isArray(r))for(let S=0,E=y.length;S<E;S++){const M=y[S],C=r[M.materialIndex],P=Math.max(M.start,w.start),A=Math.min(l.count,Math.min(M.start+M.count,w.start+w.count));for(let k=P,D=A;k<D;k+=3){const z=l.getX(k),L=l.getX(k+1),N=l.getX(k+2);o=bm(this,C,e,dc,d,f,g,m,_,z,L,N),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=M.materialIndex,t.push(o))}}else{const S=Math.max(0,w.start),E=Math.min(l.count,w.start+w.count);for(let M=S,C=E;M<C;M+=3){const P=l.getX(M),A=l.getX(M+1),k=l.getX(M+2);o=bm(this,r,e,dc,d,f,g,m,_,P,A,k),o&&(o.faceIndex=Math.floor(M/3),t.push(o))}}else if(d!==void 0)if(Array.isArray(r))for(let S=0,E=y.length;S<E;S++){const M=y[S],C=r[M.materialIndex],P=Math.max(M.start,w.start),A=Math.min(d.count,Math.min(M.start+M.count,w.start+w.count));for(let k=P,D=A;k<D;k+=3){const z=k,L=k+1,N=k+2;o=bm(this,C,e,dc,d,f,g,m,_,z,L,N),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=M.materialIndex,t.push(o))}}else{const S=Math.max(0,w.start),E=Math.min(d.count,w.start+w.count);for(let M=S,C=E;M<C;M+=3){const P=M,A=M+1,k=M+2;o=bm(this,r,e,dc,d,f,g,m,_,P,A,k),o&&(o.faceIndex=Math.floor(M/3),t.push(o))}}}}function KA(n,e,t,i,r,s,o,l){let d;if(e.side===pr?d=i.intersectTriangle(o,s,r,!0,l):d=i.intersectTriangle(r,s,o,e.side!==Os,l),d===null)return null;Sm.copy(l),Sm.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Sm);return f<t.near||f>t.far?null:{distance:f,point:Sm.clone(),object:n}}function bm(n,e,t,i,r,s,o,l,d,f,g,m){ia.fromBufferAttribute(r,f),ra.fromBufferAttribute(r,g),sa.fromBufferAttribute(r,m);const _=n.morphTargetInfluences;if(s&&_){gm.set(0,0,0),vm.set(0,0,0),_m.set(0,0,0);for(let w=0,S=s.length;w<S;w++){const E=_[w],M=s[w];E!==0&&(D0.fromBufferAttribute(M,f),N0.fromBufferAttribute(M,g),z0.fromBufferAttribute(M,m),o?(gm.addScaledVector(D0,E),vm.addScaledVector(N0,E),_m.addScaledVector(z0,E)):(gm.addScaledVector(D0.sub(ia),E),vm.addScaledVector(N0.sub(ra),E),_m.addScaledVector(z0.sub(sa),E)))}ia.add(gm),ra.add(vm),sa.add(_m)}n.isSkinnedMesh&&(n.boneTransform(f,ia),n.boneTransform(g,ra),n.boneTransform(m,sa));const y=KA(n,e,t,i,ia,ra,sa,O0);if(y){l&&(ym.fromBufferAttribute(l,f),xm.fromBufferAttribute(l,g),wm.fromBufferAttribute(l,m),y.uv=Or.getUV(O0,ia,ra,sa,ym,xm,wm,new Se)),d&&(ym.fromBufferAttribute(d,f),xm.fromBufferAttribute(d,g),wm.fromBufferAttribute(d,m),y.uv2=Or.getUV(O0,ia,ra,sa,ym,xm,wm,new Se));const w={a:f,b:g,c:m,normal:new V,materialIndex:0};Or.getNormal(ia,ra,sa,w.normal),y.face=w}return y}class Oa extends Mt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const d=[],f=[],g=[],m=[];let _=0,y=0;w("z","y","x",-1,-1,i,t,e,o,s,0),w("z","y","x",1,-1,i,t,-e,o,s,1),w("x","z","y",1,1,e,i,t,r,o,2),w("x","z","y",1,-1,e,i,-t,r,o,3),w("x","y","z",1,-1,e,t,i,r,s,4),w("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(d),this.setAttribute("position",new Ze(f,3)),this.setAttribute("normal",new Ze(g,3)),this.setAttribute("uv",new Ze(m,2));function w(S,E,M,C,P,A,k,D,z,L,N){const F=A/z,q=k/L,ge=A/2,te=k/2,K=D/2,le=z+1,se=L+1;let ne=0,O=0;const B=new V;for(let H=0;H<se;H++){const $=H*q-te;for(let ie=0;ie<le;ie++){const fe=ie*F-ge;B[S]=fe*C,B[E]=$*P,B[M]=K,f.push(B.x,B.y,B.z),B[S]=0,B[E]=0,B[M]=D>0?1:-1,g.push(B.x,B.y,B.z),m.push(ie/z),m.push(1-H/L),ne+=1}}for(let H=0;H<L;H++)for(let $=0;$<z;$++){const ie=_+$+le*H,fe=_+$+le*(H+1),be=_+($+1)+le*(H+1),qe=_+($+1)+le*H;d.push(ie,fe,qe),d.push(fe,be,qe),O+=6}l.addGroup(y,O,N),y+=O,_+=ne}}static fromJSON(e){return new Oa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function td(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function gi(n){const e={};for(let t=0;t<n.length;t++){const i=td(n[t]);for(const r in i)e[r]=i[r]}return e}function ZA(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const zC={clone:td,merge:gi};var JA=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,QA=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _s extends si{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=JA,this.fragmentShader=QA,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=td(e.uniforms),this.uniformsGroups=ZA(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Tf extends Ht{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new St,this.projectionMatrix=new St,this.projectionMatrixInverse=new St}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class fn extends Tf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Bl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uf*2*Math.atan(Math.tan(Bl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Bl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const d=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/d,t-=o.offsetY*i/f,r*=o.width/d,i*=o.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const hc=90,fc=1;class OC extends Ht{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new fn(hc,fc,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new V(1,0,0)),this.add(r);const s=new fn(hc,fc,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new V(-1,0,0)),this.add(s);const o=new fn(hc,fc,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new V(0,1,0)),this.add(o);const l=new fn(hc,fc,e,t);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new V(0,-1,0)),this.add(l);const d=new fn(hc,fc,e,t);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new V(0,0,1)),this.add(d);const f=new fn(hc,fc,e,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new V(0,0,-1)),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,l,d,f]=this.children,g=e.getRenderTarget(),m=e.toneMapping,_=e.xr.enabled;e.toneMapping=ms,e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,l),e.setRenderTarget(i,4),e.render(t,d),i.texture.generateMipmaps=y,e.setRenderTarget(i,5),e.render(t,f),e.setRenderTarget(g),e.toneMapping=m,e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class Af extends On{constructor(e,t,i,r,s,o,l,d,f,g){e=e!==void 0?e:[],t=t!==void 0?t:xo,super(e,t,i,r,s,o,l,d,f,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Qx extends Wr{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Af(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:_n}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Oa(5,5,5),s=new _s({name:"CubemapFromEquirect",uniforms:td(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:pr,blending:mo});s.uniforms.tEquirect.value=t;const o=new Yn(r,s),l=t.minFilter;return t.minFilter===tu&&(t.minFilter=_n),new OC(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const F0=new V,$A=new V,eL=new ji;class ua{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=F0.subVectors(i,t).cross($A.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(F0),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||eL.getNormalMatrix(e),r=this.coplanarPoint(F0).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const pc=new iu,Mm=new V;class dv{constructor(e=new ua,t=new ua,i=new ua,r=new ua,s=new ua,o=new ua){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],l=i[3],d=i[4],f=i[5],g=i[6],m=i[7],_=i[8],y=i[9],w=i[10],S=i[11],E=i[12],M=i[13],C=i[14],P=i[15];return t[0].setComponents(l-r,m-d,S-_,P-E).normalize(),t[1].setComponents(l+r,m+d,S+_,P+E).normalize(),t[2].setComponents(l+s,m+f,S+y,P+M).normalize(),t[3].setComponents(l-s,m-f,S-y,P-M).normalize(),t[4].setComponents(l-o,m-g,S-w,P-C).normalize(),t[5].setComponents(l+o,m+g,S+w,P+C).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),pc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(pc)}intersectsSprite(e){return pc.center.set(0,0,0),pc.radius=.7071067811865476,pc.applyMatrix4(e.matrixWorld),this.intersectsSphere(pc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Mm.x=r.normal.x>0?e.max.x:e.min.x,Mm.y=r.normal.y>0?e.max.y:e.min.y,Mm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Mm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function FC(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function tL(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,g){const m=f.array,_=f.usage,y=n.createBuffer();n.bindBuffer(g,y),n.bufferData(g,m,_),f.onUploadCallback();let w;if(m instanceof Float32Array)w=5126;else if(m instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)w=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=5123;else if(m instanceof Int16Array)w=5122;else if(m instanceof Uint32Array)w=5125;else if(m instanceof Int32Array)w=5124;else if(m instanceof Int8Array)w=5120;else if(m instanceof Uint8Array)w=5121;else if(m instanceof Uint8ClampedArray)w=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:y,type:w,bytesPerElement:m.BYTES_PER_ELEMENT,version:f.version}}function s(f,g,m){const _=g.array,y=g.updateRange;n.bindBuffer(m,f),y.count===-1?n.bufferSubData(m,0,_):(t?n.bufferSubData(m,y.offset*_.BYTES_PER_ELEMENT,_,y.offset,y.count):n.bufferSubData(m,y.offset*_.BYTES_PER_ELEMENT,_.subarray(y.offset,y.offset+y.count)),y.count=-1)}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function l(f){f.isInterleavedBufferAttribute&&(f=f.data);const g=i.get(f);g&&(n.deleteBuffer(g.buffer),i.delete(f))}function d(f,g){if(f.isGLBufferAttribute){const _=i.get(f);(!_||_.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const m=i.get(f);m===void 0?i.set(f,r(f,g)):m.version<f.version&&(s(m.buffer,f,g),m.version=f.version)}return{get:o,remove:l,update:d}}class ud extends Mt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(i),d=Math.floor(r),f=l+1,g=d+1,m=e/l,_=t/d,y=[],w=[],S=[],E=[];for(let M=0;M<g;M++){const C=M*_-o;for(let P=0;P<f;P++){const A=P*m-s;w.push(A,-C,0),S.push(0,0,1),E.push(P/l),E.push(1-M/d)}}for(let M=0;M<d;M++)for(let C=0;C<l;C++){const P=C+f*M,A=C+f*(M+1),k=C+1+f*(M+1),D=C+1+f*M;y.push(P,A,D),y.push(A,k,D)}this.setIndex(y),this.setAttribute("position",new Ze(w,3)),this.setAttribute("normal",new Ze(S,3)),this.setAttribute("uv",new Ze(E,2))}static fromJSON(e){return new ud(e.width,e.height,e.widthSegments,e.heightSegments)}}var nL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,iL=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rL=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,sL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,oL=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,lL="vec3 transformed = vec3( position );",uL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cL=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,dL=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,pL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,mL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,gL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,vL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,_L=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,xL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,wL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,SL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,bL=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ML=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,EL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,CL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,PL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,TL="gl_FragColor = linearToOutputTexel( gl_FragColor );",AL=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,LL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,RL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,IL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,DL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,NL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,zL=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,OL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,FL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,UL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,BL=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,VL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,HL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,GL=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,WL=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jL=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,XL=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,qL=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,YL=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,KL=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,ZL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,JL=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,QL=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$L=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,eR=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,tR=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,nR=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,iR=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,rR=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,sR=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,oR=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,aR=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lR=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uR=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,cR=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,dR=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hR=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,fR=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,pR=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,mR=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,gR=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,vR=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_R=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yR=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,xR=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,wR=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,SR=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,bR=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,MR=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ER=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,CR=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,PR=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,TR=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,AR=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,LR=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,RR=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,kR=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,IR=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,DR=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,NR=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,zR=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,OR=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,FR=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,UR=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,BR=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,VR=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,HR=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,GR=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,WR=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,jR=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,XR=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,qR=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,YR=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,KR=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,ZR=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,JR=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,QR=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,$R=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ek=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,tk=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,nk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ik=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,rk=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sk=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,ok=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ak=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uk=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ck=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dk=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hk=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fk=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pk=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mk=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gk=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vk=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_k=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yk=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xk=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wk=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sk=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bk=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mk=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ek=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ck=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Pk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tk=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ak=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Lk=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Rk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Pt={alphamap_fragment:nL,alphamap_pars_fragment:iL,alphatest_fragment:rL,alphatest_pars_fragment:sL,aomap_fragment:oL,aomap_pars_fragment:aL,begin_vertex:lL,beginnormal_vertex:uL,bsdfs:cL,iridescence_fragment:dL,bumpmap_pars_fragment:hL,clipping_planes_fragment:fL,clipping_planes_pars_fragment:pL,clipping_planes_pars_vertex:mL,clipping_planes_vertex:gL,color_fragment:vL,color_pars_fragment:_L,color_pars_vertex:yL,color_vertex:xL,common:wL,cube_uv_reflection_fragment:SL,defaultnormal_vertex:bL,displacementmap_pars_vertex:ML,displacementmap_vertex:EL,emissivemap_fragment:CL,emissivemap_pars_fragment:PL,encodings_fragment:TL,encodings_pars_fragment:AL,envmap_fragment:LL,envmap_common_pars_fragment:RL,envmap_pars_fragment:kL,envmap_pars_vertex:IL,envmap_physical_pars_fragment:jL,envmap_vertex:DL,fog_vertex:NL,fog_pars_vertex:zL,fog_fragment:OL,fog_pars_fragment:FL,gradientmap_pars_fragment:UL,lightmap_fragment:BL,lightmap_pars_fragment:VL,lights_lambert_fragment:HL,lights_lambert_pars_fragment:GL,lights_pars_begin:WL,lights_toon_fragment:XL,lights_toon_pars_fragment:qL,lights_phong_fragment:YL,lights_phong_pars_fragment:KL,lights_physical_fragment:ZL,lights_physical_pars_fragment:JL,lights_fragment_begin:QL,lights_fragment_maps:$L,lights_fragment_end:eR,logdepthbuf_fragment:tR,logdepthbuf_pars_fragment:nR,logdepthbuf_pars_vertex:iR,logdepthbuf_vertex:rR,map_fragment:sR,map_pars_fragment:oR,map_particle_fragment:aR,map_particle_pars_fragment:lR,metalnessmap_fragment:uR,metalnessmap_pars_fragment:cR,morphcolor_vertex:dR,morphnormal_vertex:hR,morphtarget_pars_vertex:fR,morphtarget_vertex:pR,normal_fragment_begin:mR,normal_fragment_maps:gR,normal_pars_fragment:vR,normal_pars_vertex:_R,normal_vertex:yR,normalmap_pars_fragment:xR,clearcoat_normal_fragment_begin:wR,clearcoat_normal_fragment_maps:SR,clearcoat_pars_fragment:bR,iridescence_pars_fragment:MR,output_fragment:ER,packing:CR,premultiplied_alpha_fragment:PR,project_vertex:TR,dithering_fragment:AR,dithering_pars_fragment:LR,roughnessmap_fragment:RR,roughnessmap_pars_fragment:kR,shadowmap_pars_fragment:IR,shadowmap_pars_vertex:DR,shadowmap_vertex:NR,shadowmask_pars_fragment:zR,skinbase_vertex:OR,skinning_pars_vertex:FR,skinning_vertex:UR,skinnormal_vertex:BR,specularmap_fragment:VR,specularmap_pars_fragment:HR,tonemapping_fragment:GR,tonemapping_pars_fragment:WR,transmission_fragment:jR,transmission_pars_fragment:XR,uv_pars_fragment:qR,uv_pars_vertex:YR,uv_vertex:KR,uv2_pars_fragment:ZR,uv2_pars_vertex:JR,uv2_vertex:QR,worldpos_vertex:$R,background_vert:ek,background_frag:tk,cube_vert:nk,cube_frag:ik,depth_vert:rk,depth_frag:sk,distanceRGBA_vert:ok,distanceRGBA_frag:ak,equirect_vert:lk,equirect_frag:uk,linedashed_vert:ck,linedashed_frag:dk,meshbasic_vert:hk,meshbasic_frag:fk,meshlambert_vert:pk,meshlambert_frag:mk,meshmatcap_vert:gk,meshmatcap_frag:vk,meshnormal_vert:_k,meshnormal_frag:yk,meshphong_vert:xk,meshphong_frag:wk,meshphysical_vert:Sk,meshphysical_frag:bk,meshtoon_vert:Mk,meshtoon_frag:Ek,points_vert:Ck,points_frag:Pk,shadow_vert:Tk,shadow_frag:Ak,sprite_vert:Lk,sprite_frag:Rk},ze={common:{diffuse:{value:new Ge(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ji},uv2Transform:{value:new ji},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ji}},sprite:{diffuse:{value:new Ge(16777215)},opacity:{value:1},center:{value:new Se(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ji}}},ds={basic:{uniforms:gi([ze.common,ze.specularmap,ze.envmap,ze.aomap,ze.lightmap,ze.fog]),vertexShader:Pt.meshbasic_vert,fragmentShader:Pt.meshbasic_frag},lambert:{uniforms:gi([ze.common,ze.specularmap,ze.envmap,ze.aomap,ze.lightmap,ze.emissivemap,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.fog,ze.lights,{emissive:{value:new Ge(0)}}]),vertexShader:Pt.meshlambert_vert,fragmentShader:Pt.meshlambert_frag},phong:{uniforms:gi([ze.common,ze.specularmap,ze.envmap,ze.aomap,ze.lightmap,ze.emissivemap,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.fog,ze.lights,{emissive:{value:new Ge(0)},specular:{value:new Ge(1118481)},shininess:{value:30}}]),vertexShader:Pt.meshphong_vert,fragmentShader:Pt.meshphong_frag},standard:{uniforms:gi([ze.common,ze.envmap,ze.aomap,ze.lightmap,ze.emissivemap,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.roughnessmap,ze.metalnessmap,ze.fog,ze.lights,{emissive:{value:new Ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Pt.meshphysical_vert,fragmentShader:Pt.meshphysical_frag},toon:{uniforms:gi([ze.common,ze.aomap,ze.lightmap,ze.emissivemap,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.gradientmap,ze.fog,ze.lights,{emissive:{value:new Ge(0)}}]),vertexShader:Pt.meshtoon_vert,fragmentShader:Pt.meshtoon_frag},matcap:{uniforms:gi([ze.common,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.fog,{matcap:{value:null}}]),vertexShader:Pt.meshmatcap_vert,fragmentShader:Pt.meshmatcap_frag},points:{uniforms:gi([ze.points,ze.fog]),vertexShader:Pt.points_vert,fragmentShader:Pt.points_frag},dashed:{uniforms:gi([ze.common,ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pt.linedashed_vert,fragmentShader:Pt.linedashed_frag},depth:{uniforms:gi([ze.common,ze.displacementmap]),vertexShader:Pt.depth_vert,fragmentShader:Pt.depth_frag},normal:{uniforms:gi([ze.common,ze.bumpmap,ze.normalmap,ze.displacementmap,{opacity:{value:1}}]),vertexShader:Pt.meshnormal_vert,fragmentShader:Pt.meshnormal_frag},sprite:{uniforms:gi([ze.sprite,ze.fog]),vertexShader:Pt.sprite_vert,fragmentShader:Pt.sprite_frag},background:{uniforms:{uvTransform:{value:new ji},t2D:{value:null}},vertexShader:Pt.background_vert,fragmentShader:Pt.background_frag},cube:{uniforms:gi([ze.envmap,{opacity:{value:1}}]),vertexShader:Pt.cube_vert,fragmentShader:Pt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Pt.equirect_vert,fragmentShader:Pt.equirect_frag},distanceRGBA:{uniforms:gi([ze.common,ze.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Pt.distanceRGBA_vert,fragmentShader:Pt.distanceRGBA_frag},shadow:{uniforms:gi([ze.lights,ze.fog,{color:{value:new Ge(0)},opacity:{value:1}}]),vertexShader:Pt.shadow_vert,fragmentShader:Pt.shadow_frag}};ds.physical={uniforms:gi([ds.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Se(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ge(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ge(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ge(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Pt.meshphysical_vert,fragmentShader:Pt.meshphysical_frag};function kk(n,e,t,i,r,s){const o=new Ge(0);let l=r===!0?0:1,d,f,g=null,m=0,_=null;function y(S,E){let M=!1,C=E.isScene===!0?E.background:null;C&&C.isTexture&&(C=e.get(C));const P=n.xr,A=P.getSession&&P.getSession();A&&A.environmentBlendMode==="additive"&&(C=null),C===null?w(o,l):C&&C.isColor&&(w(C,1),M=!0),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),C&&(C.isCubeTexture||C.mapping===ad)?(f===void 0&&(f=new Yn(new Oa(1,1,1),new _s({name:"BackgroundCubeMaterial",uniforms:td(ds.cube.uniforms),vertexShader:ds.cube.vertexShader,fragmentShader:ds.cube.fragmentShader,side:pr,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(k,D,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=C,f.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,(g!==C||m!==C.version||_!==n.toneMapping)&&(f.material.needsUpdate=!0,g=C,m=C.version,_=n.toneMapping),f.layers.enableAll(),S.unshift(f,f.geometry,f.material,0,0,null)):C&&C.isTexture&&(d===void 0&&(d=new Yn(new ud(2,2),new _s({name:"BackgroundMaterial",uniforms:td(ds.background.uniforms),vertexShader:ds.background.vertexShader,fragmentShader:ds.background.fragmentShader,side:Kl,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=C,C.matrixAutoUpdate===!0&&C.updateMatrix(),d.material.uniforms.uvTransform.value.copy(C.matrix),(g!==C||m!==C.version||_!==n.toneMapping)&&(d.material.needsUpdate=!0,g=C,m=C.version,_=n.toneMapping),d.layers.enableAll(),S.unshift(d,d.geometry,d.material,0,0,null))}function w(S,E){t.buffers.color.setClear(S.r,S.g,S.b,E,s)}return{getClearColor:function(){return o},setClearColor:function(S,E=1){o.set(S),l=E,w(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,w(o,l)},render:y}}function Ik(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,l={},d=E(null);let f=d,g=!1;function m(K,le,se,ne,O){let B=!1;if(o){const H=S(ne,se,le);f!==H&&(f=H,y(f.object)),B=M(K,ne,se,O),B&&C(K,ne,se,O)}else{const H=le.wireframe===!0;(f.geometry!==ne.id||f.program!==se.id||f.wireframe!==H)&&(f.geometry=ne.id,f.program=se.id,f.wireframe=H,B=!0)}O!==null&&t.update(O,34963),(B||g)&&(g=!1,L(K,le,se,ne),O!==null&&n.bindBuffer(34963,t.get(O).buffer))}function _(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function y(K){return i.isWebGL2?n.bindVertexArray(K):s.bindVertexArrayOES(K)}function w(K){return i.isWebGL2?n.deleteVertexArray(K):s.deleteVertexArrayOES(K)}function S(K,le,se){const ne=se.wireframe===!0;let O=l[K.id];O===void 0&&(O={},l[K.id]=O);let B=O[le.id];B===void 0&&(B={},O[le.id]=B);let H=B[ne];return H===void 0&&(H=E(_()),B[ne]=H),H}function E(K){const le=[],se=[],ne=[];for(let O=0;O<r;O++)le[O]=0,se[O]=0,ne[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:le,enabledAttributes:se,attributeDivisors:ne,object:K,attributes:{},index:null}}function M(K,le,se,ne){const O=f.attributes,B=le.attributes;let H=0;const $=se.getAttributes();for(const ie in $)if($[ie].location>=0){const be=O[ie];let qe=B[ie];if(qe===void 0&&(ie==="instanceMatrix"&&K.instanceMatrix&&(qe=K.instanceMatrix),ie==="instanceColor"&&K.instanceColor&&(qe=K.instanceColor)),be===void 0||be.attribute!==qe||qe&&be.data!==qe.data)return!0;H++}return f.attributesNum!==H||f.index!==ne}function C(K,le,se,ne){const O={},B=le.attributes;let H=0;const $=se.getAttributes();for(const ie in $)if($[ie].location>=0){let be=B[ie];be===void 0&&(ie==="instanceMatrix"&&K.instanceMatrix&&(be=K.instanceMatrix),ie==="instanceColor"&&K.instanceColor&&(be=K.instanceColor));const qe={};qe.attribute=be,be&&be.data&&(qe.data=be.data),O[ie]=qe,H++}f.attributes=O,f.attributesNum=H,f.index=ne}function P(){const K=f.newAttributes;for(let le=0,se=K.length;le<se;le++)K[le]=0}function A(K){k(K,0)}function k(K,le){const se=f.newAttributes,ne=f.enabledAttributes,O=f.attributeDivisors;se[K]=1,ne[K]===0&&(n.enableVertexAttribArray(K),ne[K]=1),O[K]!==le&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](K,le),O[K]=le)}function D(){const K=f.newAttributes,le=f.enabledAttributes;for(let se=0,ne=le.length;se<ne;se++)le[se]!==K[se]&&(n.disableVertexAttribArray(se),le[se]=0)}function z(K,le,se,ne,O,B){i.isWebGL2===!0&&(se===5124||se===5125)?n.vertexAttribIPointer(K,le,se,O,B):n.vertexAttribPointer(K,le,se,ne,O,B)}function L(K,le,se,ne){if(i.isWebGL2===!1&&(K.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;P();const O=ne.attributes,B=se.getAttributes(),H=le.defaultAttributeValues;for(const $ in B){const ie=B[$];if(ie.location>=0){let fe=O[$];if(fe===void 0&&($==="instanceMatrix"&&K.instanceMatrix&&(fe=K.instanceMatrix),$==="instanceColor"&&K.instanceColor&&(fe=K.instanceColor)),fe!==void 0){const be=fe.normalized,qe=fe.itemSize,ce=t.get(fe);if(ce===void 0)continue;const Ke=ce.buffer,tt=ce.type,nt=ce.bytesPerElement;if(fe.isInterleavedBufferAttribute){const Te=fe.data,rt=Te.stride,we=fe.offset;if(Te.isInstancedInterleavedBuffer){for(let me=0;me<ie.locationSize;me++)k(ie.location+me,Te.meshPerAttribute);K.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let me=0;me<ie.locationSize;me++)A(ie.location+me);n.bindBuffer(34962,Ke);for(let me=0;me<ie.locationSize;me++)z(ie.location+me,qe/ie.locationSize,tt,be,rt*nt,(we+qe/ie.locationSize*me)*nt)}else{if(fe.isInstancedBufferAttribute){for(let Te=0;Te<ie.locationSize;Te++)k(ie.location+Te,fe.meshPerAttribute);K.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let Te=0;Te<ie.locationSize;Te++)A(ie.location+Te);n.bindBuffer(34962,Ke);for(let Te=0;Te<ie.locationSize;Te++)z(ie.location+Te,qe/ie.locationSize,tt,be,qe*nt,qe/ie.locationSize*Te*nt)}}else if(H!==void 0){const be=H[$];if(be!==void 0)switch(be.length){case 2:n.vertexAttrib2fv(ie.location,be);break;case 3:n.vertexAttrib3fv(ie.location,be);break;case 4:n.vertexAttrib4fv(ie.location,be);break;default:n.vertexAttrib1fv(ie.location,be)}}}}D()}function N(){ge();for(const K in l){const le=l[K];for(const se in le){const ne=le[se];for(const O in ne)w(ne[O].object),delete ne[O];delete le[se]}delete l[K]}}function F(K){if(l[K.id]===void 0)return;const le=l[K.id];for(const se in le){const ne=le[se];for(const O in ne)w(ne[O].object),delete ne[O];delete le[se]}delete l[K.id]}function q(K){for(const le in l){const se=l[le];if(se[K.id]===void 0)continue;const ne=se[K.id];for(const O in ne)w(ne[O].object),delete ne[O];delete se[K.id]}}function ge(){te(),g=!0,f!==d&&(f=d,y(f.object))}function te(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:m,reset:ge,resetDefaultState:te,dispose:N,releaseStatesOfGeometry:F,releaseStatesOfProgram:q,initAttributes:P,enableAttribute:A,disableUnusedAttributes:D}}function Dk(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}function l(f,g){n.drawArrays(s,f,g),t.update(g,s,1)}function d(f,g,m){if(m===0)return;let _,y;if(r)_=n,y="drawArraysInstanced";else if(_=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",_===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[y](s,f,g,m),t.update(g,s,m)}this.setMode=o,this.render=l,this.renderInstances=d}function Nk(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(z){if(z==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";z="mediump"}return z==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let l=t.precision!==void 0?t.precision:"highp";const d=s(l);d!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",d,"instead."),l=d);const f=o||e.has("WEBGL_draw_buffers"),g=t.logarithmicDepthBuffer===!0,m=n.getParameter(34930),_=n.getParameter(35660),y=n.getParameter(3379),w=n.getParameter(34076),S=n.getParameter(34921),E=n.getParameter(36347),M=n.getParameter(36348),C=n.getParameter(36349),P=_>0,A=o||e.has("OES_texture_float"),k=P&&A,D=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:g,maxTextures:m,maxVertexTextures:_,maxTextureSize:y,maxCubemapSize:w,maxAttributes:S,maxVertexUniforms:E,maxVaryings:M,maxFragmentUniforms:C,vertexTextures:P,floatFragmentTextures:A,floatVertexTextures:k,maxSamples:D}}function zk(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ua,l=new ji,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(m,_,y){const w=m.length!==0||_||i!==0||r;return r=_,t=g(m,y,0),i=m.length,w},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1,f()},this.setState=function(m,_,y){const w=m.clippingPlanes,S=m.clipIntersection,E=m.clipShadows,M=n.get(m);if(!r||w===null||w.length===0||s&&!E)s?g(null):f();else{const C=s?0:i,P=C*4;let A=M.clippingState||null;d.value=A,A=g(w,_,P,y);for(let k=0;k!==P;++k)A[k]=t[k];M.clippingState=A,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=C}};function f(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function g(m,_,y,w){const S=m!==null?m.length:0;let E=null;if(S!==0){if(E=d.value,w!==!0||E===null){const M=y+S*4,C=_.matrixWorldInverse;l.getNormalMatrix(C),(E===null||E.length<M)&&(E=new Float32Array(M));for(let P=0,A=y;P!==S;++P,A+=4)o.copy(m[P]).applyMatrix4(C,l),o.normal.toArray(E,A),E[A+3]=o.constant}d.value=E,d.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,E}}function Ok(n){let e=new WeakMap;function t(o,l){return l===ed?o.mapping=xo:l===tf&&(o.mapping=Ta),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const l=o.mapping;if(l===ed||l===tf)if(e.has(o)){const d=e.get(o).texture;return t(d,o.mapping)}else{const d=o.image;if(d&&d.height>0){const f=new Qx(d.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",r),t(f.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const d=e.get(l);d!==void 0&&(e.delete(l),d.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Ea extends Tf{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,l=r+t,d=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,l-=g*this.view.offsetY,d=l-g*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,d,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Oc=4,oS=[.125,.215,.35,.446,.526,.582],Pl=20,U0=new Ea,aS=new Ge;let B0=null;const El=(1+Math.sqrt(5))/2,mc=1/El,lS=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,El,mc),new V(0,El,-mc),new V(mc,0,El),new V(-mc,0,El),new V(El,mc,0),new V(-El,mc,0)];class Ry{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){B0=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=dS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=cS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(B0),e.scissorTest=!1,Em(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===xo||e.mapping===Ta?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),B0=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:_n,minFilter:_n,generateMipmaps:!1,type:hs,format:Br,encoding:vs,depthBuffer:!1},r=uS(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uS(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Fk(s)),this._blurMaterial=Uk(s,e,t)}return r}_compileMaterial(e){const t=new Yn(this._lodPlanes[0],e);this._renderer.compile(t,U0)}_sceneToCubeUV(e,t,i,r){const l=new fn(90,1,t,i),d=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],g=this._renderer,m=g.autoClear,_=g.toneMapping;g.getClearColor(aS),g.toneMapping=ms,g.autoClear=!1;const y=new za({name:"PMREM.Background",side:pr,depthWrite:!1,depthTest:!1}),w=new Yn(new Oa,y);let S=!1;const E=e.background;E?E.isColor&&(y.color.copy(E),e.background=null,S=!0):(y.color.copy(aS),S=!0);for(let M=0;M<6;M++){const C=M%3;C===0?(l.up.set(0,d[M],0),l.lookAt(f[M],0,0)):C===1?(l.up.set(0,0,d[M]),l.lookAt(0,f[M],0)):(l.up.set(0,d[M],0),l.lookAt(0,0,f[M]));const P=this._cubeSize;Em(r,C*P,M>2?P:0,P,P),g.setRenderTarget(r),S&&g.render(w,l),g.render(e,l)}w.geometry.dispose(),w.material.dispose(),g.toneMapping=_,g.autoClear=m,e.background=E}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===xo||e.mapping===Ta;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=dS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=cS());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Yn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const d=this._cubeSize;Em(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(o,U0)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=lS[(r-1)%lS.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,l){const d=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,m=new Yn(this._lodPlanes[r],f),_=f.uniforms,y=this._sizeLods[i]-1,w=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*Pl-1),S=s/w,E=isFinite(s)?1+Math.floor(g*S):Pl;E>Pl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Pl}`);const M=[];let C=0;for(let z=0;z<Pl;++z){const L=z/S,N=Math.exp(-L*L/2);M.push(N),z===0?C+=N:z<E&&(C+=2*N)}for(let z=0;z<M.length;z++)M[z]=M[z]/C;_.envMap.value=e.texture,_.samples.value=E,_.weights.value=M,_.latitudinal.value=o==="latitudinal",l&&(_.poleAxis.value=l);const{_lodMax:P}=this;_.dTheta.value=w,_.mipInt.value=P-i;const A=this._sizeLods[r],k=3*A*(r>P-Oc?r-P+Oc:0),D=4*(this._cubeSize-A);Em(t,k,D,3*A,2*A),d.setRenderTarget(t),d.render(m,U0)}}function Fk(n){const e=[],t=[],i=[];let r=n;const s=n-Oc+1+oS.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let d=1/l;o>n-Oc?d=oS[o-n+Oc-1]:o===0&&(d=0),i.push(d);const f=1/(l-2),g=-f,m=1+f,_=[g,g,m,g,m,m,g,g,m,m,g,m],y=6,w=6,S=3,E=2,M=1,C=new Float32Array(S*w*y),P=new Float32Array(E*w*y),A=new Float32Array(M*w*y);for(let D=0;D<y;D++){const z=D%3*2/3-1,L=D>2?0:-1,N=[z,L,0,z+2/3,L,0,z+2/3,L+1,0,z,L,0,z+2/3,L+1,0,z,L+1,0];C.set(N,S*w*D),P.set(_,E*w*D);const F=[D,D,D,D,D,D];A.set(F,M*w*D)}const k=new Mt;k.setAttribute("position",new tn(C,S)),k.setAttribute("uv",new tn(P,E)),k.setAttribute("faceIndex",new tn(A,M)),e.push(k),r>Oc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function uS(n,e,t){const i=new Wr(n,e,t);return i.texture.mapping=ad,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Em(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Uk(n,e,t){const i=new Float32Array(Pl),r=new V(0,1,0);return new _s({name:"SphericalGaussianBlur",defines:{n:Pl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:$x(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:mo,depthTest:!1,depthWrite:!1})}function cS(){return new _s({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$x(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:mo,depthTest:!1,depthWrite:!1})}function dS(){return new _s({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$x(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:mo,depthTest:!1,depthWrite:!1})}function $x(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Bk(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const d=l.mapping,f=d===ed||d===tf,g=d===xo||d===Ta;if(f||g)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let m=e.get(l);return t===null&&(t=new Ry(n)),m=f?t.fromEquirectangular(l,m):t.fromCubemap(l,m),e.set(l,m),m.texture}else{if(e.has(l))return e.get(l).texture;{const m=l.image;if(f&&m&&m.height>0||g&&m&&r(m)){t===null&&(t=new Ry(n));const _=f?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,_),l.addEventListener("dispose",s),_.texture}else return null}}}return l}function r(l){let d=0;const f=6;for(let g=0;g<f;g++)l[g]!==void 0&&d++;return d===f}function s(l){const d=l.target;d.removeEventListener("dispose",s);const f=e.get(d);f!==void 0&&(e.delete(d),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function Vk(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Hk(n,e,t,i){const r={},s=new WeakMap;function o(m){const _=m.target;_.index!==null&&e.remove(_.index);for(const w in _.attributes)e.remove(_.attributes[w]);_.removeEventListener("dispose",o),delete r[_.id];const y=s.get(_);y&&(e.remove(y),s.delete(_)),i.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function l(m,_){return r[_.id]===!0||(_.addEventListener("dispose",o),r[_.id]=!0,t.memory.geometries++),_}function d(m){const _=m.attributes;for(const w in _)e.update(_[w],34962);const y=m.morphAttributes;for(const w in y){const S=y[w];for(let E=0,M=S.length;E<M;E++)e.update(S[E],34962)}}function f(m){const _=[],y=m.index,w=m.attributes.position;let S=0;if(y!==null){const C=y.array;S=y.version;for(let P=0,A=C.length;P<A;P+=3){const k=C[P+0],D=C[P+1],z=C[P+2];_.push(k,D,D,z,z,k)}}else{const C=w.array;S=w.version;for(let P=0,A=C.length/3-1;P<A;P+=3){const k=P+0,D=P+1,z=P+2;_.push(k,D,D,z,z,k)}}const E=new(DC(_)?Jx:Zx)(_,1);E.version=S;const M=s.get(m);M&&e.remove(M),s.set(m,E)}function g(m){const _=s.get(m);if(_){const y=m.index;y!==null&&_.version<y.version&&f(m)}else f(m);return s.get(m)}return{get:l,update:d,getWireframeAttribute:g}}function Gk(n,e,t,i){const r=i.isWebGL2;let s;function o(_){s=_}let l,d;function f(_){l=_.type,d=_.bytesPerElement}function g(_,y){n.drawElements(s,y,l,_*d),t.update(y,s,1)}function m(_,y,w){if(w===0)return;let S,E;if(r)S=n,E="drawElementsInstanced";else if(S=e.get("ANGLE_instanced_arrays"),E="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[E](s,y,l,_*d,w),t.update(y,s,w)}this.setMode=o,this.setIndex=f,this.render=g,this.renderInstances=m}function Wk(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,l){switch(t.calls++,o){case 4:t.triangles+=l*(s/3);break;case 1:t.lines+=l*(s/2);break;case 3:t.lines+=l*(s-1);break;case 2:t.lines+=l*s;break;case 0:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function jk(n,e){return n[0]-e[0]}function Xk(n,e){return Math.abs(e[1])-Math.abs(n[1])}function qk(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new qt,l=[];for(let f=0;f<8;f++)l[f]=[f,0];function d(f,g,m,_){const y=f.morphTargetInfluences;if(e.isWebGL2===!0){const S=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,E=S!==void 0?S.length:0;let M=s.get(g);if(M===void 0||M.count!==E){let se=function(){K.dispose(),s.delete(g),g.removeEventListener("dispose",se)};var w=se;M!==void 0&&M.texture.dispose();const A=g.morphAttributes.position!==void 0,k=g.morphAttributes.normal!==void 0,D=g.morphAttributes.color!==void 0,z=g.morphAttributes.position||[],L=g.morphAttributes.normal||[],N=g.morphAttributes.color||[];let F=0;A===!0&&(F=1),k===!0&&(F=2),D===!0&&(F=3);let q=g.attributes.position.count*F,ge=1;q>e.maxTextureSize&&(ge=Math.ceil(q/e.maxTextureSize),q=e.maxTextureSize);const te=new Float32Array(q*ge*4*E),K=new Cf(te,q,ge,E);K.type=Ur,K.needsUpdate=!0;const le=F*4;for(let ne=0;ne<E;ne++){const O=z[ne],B=L[ne],H=N[ne],$=q*ge*4*ne;for(let ie=0;ie<O.count;ie++){const fe=ie*le;A===!0&&(o.fromBufferAttribute(O,ie),te[$+fe+0]=o.x,te[$+fe+1]=o.y,te[$+fe+2]=o.z,te[$+fe+3]=0),k===!0&&(o.fromBufferAttribute(B,ie),te[$+fe+4]=o.x,te[$+fe+5]=o.y,te[$+fe+6]=o.z,te[$+fe+7]=0),D===!0&&(o.fromBufferAttribute(H,ie),te[$+fe+8]=o.x,te[$+fe+9]=o.y,te[$+fe+10]=o.z,te[$+fe+11]=H.itemSize===4?o.w:1)}}M={count:E,texture:K,size:new Se(q,ge)},s.set(g,M),g.addEventListener("dispose",se)}let C=0;for(let A=0;A<y.length;A++)C+=y[A];const P=g.morphTargetsRelative?1:1-C;_.getUniforms().setValue(n,"morphTargetBaseInfluence",P),_.getUniforms().setValue(n,"morphTargetInfluences",y),_.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),_.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const S=y===void 0?0:y.length;let E=i[g.id];if(E===void 0||E.length!==S){E=[];for(let k=0;k<S;k++)E[k]=[k,0];i[g.id]=E}for(let k=0;k<S;k++){const D=E[k];D[0]=k,D[1]=y[k]}E.sort(Xk);for(let k=0;k<8;k++)k<S&&E[k][1]?(l[k][0]=E[k][0],l[k][1]=E[k][1]):(l[k][0]=Number.MAX_SAFE_INTEGER,l[k][1]=0);l.sort(jk);const M=g.morphAttributes.position,C=g.morphAttributes.normal;let P=0;for(let k=0;k<8;k++){const D=l[k],z=D[0],L=D[1];z!==Number.MAX_SAFE_INTEGER&&L?(M&&g.getAttribute("morphTarget"+k)!==M[z]&&g.setAttribute("morphTarget"+k,M[z]),C&&g.getAttribute("morphNormal"+k)!==C[z]&&g.setAttribute("morphNormal"+k,C[z]),r[k]=L,P+=L):(M&&g.hasAttribute("morphTarget"+k)===!0&&g.deleteAttribute("morphTarget"+k),C&&g.hasAttribute("morphNormal"+k)===!0&&g.deleteAttribute("morphNormal"+k),r[k]=0)}const A=g.morphTargetsRelative?1:1-P;_.getUniforms().setValue(n,"morphTargetBaseInfluence",A),_.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:d}}function Yk(n,e,t,i){let r=new WeakMap;function s(d){const f=i.render.frame,g=d.geometry,m=e.get(d,g);return r.get(m)!==f&&(e.update(m),r.set(m,f)),d.isInstancedMesh&&(d.hasEventListener("dispose",l)===!1&&d.addEventListener("dispose",l),t.update(d.instanceMatrix,34962),d.instanceColor!==null&&t.update(d.instanceColor,34962)),m}function o(){r=new WeakMap}function l(d){const f=d.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}const UC=new On,BC=new Cf,VC=new cv,HC=new Af,hS=[],fS=[],pS=new Float32Array(16),mS=new Float32Array(9),gS=new Float32Array(4);function cd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=hS[r];if(s===void 0&&(s=new Float32Array(r),hS[r]=s),e!==0){i.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function Ri(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ki(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function hv(n,e){let t=fS[e];t===void 0&&(t=new Int32Array(e),fS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Kk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Zk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;n.uniform2fv(this.addr,e),ki(t,e)}}function Jk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ri(t,e))return;n.uniform3fv(this.addr,e),ki(t,e)}}function Qk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;n.uniform4fv(this.addr,e),ki(t,e)}}function $k(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ri(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ki(t,e)}else{if(Ri(t,i))return;gS.set(i),n.uniformMatrix2fv(this.addr,!1,gS),ki(t,i)}}function eI(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ri(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ki(t,e)}else{if(Ri(t,i))return;mS.set(i),n.uniformMatrix3fv(this.addr,!1,mS),ki(t,i)}}function tI(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ri(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ki(t,e)}else{if(Ri(t,i))return;pS.set(i),n.uniformMatrix4fv(this.addr,!1,pS),ki(t,i)}}function nI(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function iI(n,e){const t=this.cache;Ri(t,e)||(n.uniform2iv(this.addr,e),ki(t,e))}function rI(n,e){const t=this.cache;Ri(t,e)||(n.uniform3iv(this.addr,e),ki(t,e))}function sI(n,e){const t=this.cache;Ri(t,e)||(n.uniform4iv(this.addr,e),ki(t,e))}function oI(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function aI(n,e){const t=this.cache;Ri(t,e)||(n.uniform2uiv(this.addr,e),ki(t,e))}function lI(n,e){const t=this.cache;Ri(t,e)||(n.uniform3uiv(this.addr,e),ki(t,e))}function uI(n,e){const t=this.cache;Ri(t,e)||(n.uniform4uiv(this.addr,e),ki(t,e))}function cI(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||UC,r)}function dI(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||VC,r)}function hI(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||HC,r)}function fI(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||BC,r)}function pI(n){switch(n){case 5126:return Kk;case 35664:return Zk;case 35665:return Jk;case 35666:return Qk;case 35674:return $k;case 35675:return eI;case 35676:return tI;case 5124:case 35670:return nI;case 35667:case 35671:return iI;case 35668:case 35672:return rI;case 35669:case 35673:return sI;case 5125:return oI;case 36294:return aI;case 36295:return lI;case 36296:return uI;case 35678:case 36198:case 36298:case 36306:case 35682:return cI;case 35679:case 36299:case 36307:return dI;case 35680:case 36300:case 36308:case 36293:return hI;case 36289:case 36303:case 36311:case 36292:return fI}}function mI(n,e){n.uniform1fv(this.addr,e)}function gI(n,e){const t=cd(e,this.size,2);n.uniform2fv(this.addr,t)}function vI(n,e){const t=cd(e,this.size,3);n.uniform3fv(this.addr,t)}function _I(n,e){const t=cd(e,this.size,4);n.uniform4fv(this.addr,t)}function yI(n,e){const t=cd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xI(n,e){const t=cd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function wI(n,e){const t=cd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function SI(n,e){n.uniform1iv(this.addr,e)}function bI(n,e){n.uniform2iv(this.addr,e)}function MI(n,e){n.uniform3iv(this.addr,e)}function EI(n,e){n.uniform4iv(this.addr,e)}function CI(n,e){n.uniform1uiv(this.addr,e)}function PI(n,e){n.uniform2uiv(this.addr,e)}function TI(n,e){n.uniform3uiv(this.addr,e)}function AI(n,e){n.uniform4uiv(this.addr,e)}function LI(n,e,t){const i=e.length,r=hv(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||UC,r[s])}function RI(n,e,t){const i=e.length,r=hv(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||VC,r[s])}function kI(n,e,t){const i=e.length,r=hv(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||HC,r[s])}function II(n,e,t){const i=e.length,r=hv(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||BC,r[s])}function DI(n){switch(n){case 5126:return mI;case 35664:return gI;case 35665:return vI;case 35666:return _I;case 35674:return yI;case 35675:return xI;case 35676:return wI;case 5124:case 35670:return SI;case 35667:case 35671:return bI;case 35668:case 35672:return MI;case 35669:case 35673:return EI;case 5125:return CI;case 36294:return PI;case 36295:return TI;case 36296:return AI;case 35678:case 36198:case 36298:case 36306:case 35682:return LI;case 35679:case 36299:case 36307:return RI;case 35680:case 36300:case 36308:case 36293:return kI;case 36289:case 36303:case 36311:case 36292:return II}}class NI{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=pI(t.type)}}class zI{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=DI(t.type)}}class OI{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const V0=/(\w+)(\])?(\[|\.)?/g;function vS(n,e){n.seq.push(e),n.map[e.id]=e}function FI(n,e,t){const i=n.name,r=i.length;for(V0.lastIndex=0;;){const s=V0.exec(i),o=V0.lastIndex;let l=s[1];const d=s[2]==="]",f=s[3];if(d&&(l=l|0),f===void 0||f==="["&&o+2===r){vS(t,f===void 0?new NI(l,n,e):new zI(l,n,e));break}else{let m=t.map[l];m===void 0&&(m=new OI(l),vS(t,m)),t=m}}}class pg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);FI(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],d=i[l.id];d.needsUpdate!==!1&&l.setValue(e,d.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function _S(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let UI=0;function BI(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const l=o+1;i.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return i.join(`
`)}function VI(n){switch(n){case vs:return["Linear","( value )"];case sn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function yS(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+BI(n.getShaderSource(e),o)}else return r}function HI(n,e){const t=VI(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function GI(n,e){let t;switch(e){case aC:t="Linear";break;case lC:t="Reinhard";break;case uC:t="OptimizedCineon";break;case Wx:t="ACESFilmic";break;case cC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function WI(n){return[n.extensionDerivatives||!!n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Mh).join(`
`)}function jI(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function XI(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===35674&&(l=2),s.type===35675&&(l=3),s.type===35676&&(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function Mh(n){return n!==""}function xS(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function wS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const qI=/^[ \t]*#include +<([\w\d./]+)>/gm;function ky(n){return n.replace(qI,YI)}function YI(n,e){const t=Pt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return ky(t)}const KI=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function SS(n){return n.replace(KI,ZI)}function ZI(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function bS(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function JI(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Bx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Vx?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Nc&&(e="SHADOWMAP_TYPE_VSM"),e}function QI(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case xo:case Ta:e="ENVMAP_TYPE_CUBE";break;case ad:e="ENVMAP_TYPE_CUBE_UV";break}return e}function $I(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ta:e="ENVMAP_MODE_REFRACTION";break}return e}function eD(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ef:e="ENVMAP_BLENDING_MULTIPLY";break;case sC:e="ENVMAP_BLENDING_MIX";break;case oC:e="ENVMAP_BLENDING_ADD";break}return e}function tD(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function nD(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const d=JI(t),f=QI(t),g=$I(t),m=eD(t),_=tD(t),y=t.isWebGL2?"":WI(t),w=jI(s),S=r.createProgram();let E,M,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=[w].filter(Mh).join(`
`),E.length>0&&(E+=`
`),M=[y,w].filter(Mh).join(`
`),M.length>0&&(M+=`
`)):(E=[bS(t),"#define SHADER_NAME "+t.shaderName,w,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Mh).join(`
`),M=[y,bS(t),"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+g:"",t.envMap?"#define "+m:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ms?"#define TONE_MAPPING":"",t.toneMapping!==ms?Pt.tonemapping_pars_fragment:"",t.toneMapping!==ms?GI("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Pt.encodings_pars_fragment,HI("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Mh).join(`
`)),o=ky(o),o=xS(o,t),o=wS(o,t),l=ky(l),l=xS(l,t),l=wS(l,t),o=SS(o),l=SS(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,M=["#define varying in",t.glslVersion===Ay?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Ay?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const P=C+E+o,A=C+M+l,k=_S(r,35633,P),D=_S(r,35632,A);if(r.attachShader(S,k),r.attachShader(S,D),t.index0AttributeName!==void 0?r.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S),n.debug.checkShaderErrors){const N=r.getProgramInfoLog(S).trim(),F=r.getShaderInfoLog(k).trim(),q=r.getShaderInfoLog(D).trim();let ge=!0,te=!0;if(r.getProgramParameter(S,35714)===!1){ge=!1;const K=yS(r,k,"vertex"),le=yS(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,35715)+`

Program Info Log: `+N+`
`+K+`
`+le)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(F===""||q==="")&&(te=!1);te&&(this.diagnostics={runnable:ge,programLog:N,vertexShader:{log:F,prefix:E},fragmentShader:{log:q,prefix:M}})}r.deleteShader(k),r.deleteShader(D);let z;this.getUniforms=function(){return z===void 0&&(z=new pg(r,S)),z};let L;return this.getAttributes=function(){return L===void 0&&(L=XI(r,S)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.name=t.shaderName,this.id=UI++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=k,this.fragmentShader=D,this}let iD=0;class rD{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new sD(e),t.set(e,i)),i}}class sD{constructor(e){this.id=iD++,this.code=e,this.usedTimes=0}}function oD(n,e,t,i,r,s,o){const l=new Hl,d=new rD,f=[],g=r.isWebGL2,m=r.logarithmicDepthBuffer,_=r.vertexTextures;let y=r.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(L,N,F,q,ge){const te=q.fog,K=ge.geometry,le=L.isMeshStandardMaterial?q.environment:null,se=(L.isMeshStandardMaterial?t:e).get(L.envMap||le),ne=!!se&&se.mapping===ad?se.image.height:null,O=w[L.type];L.precision!==null&&(y=r.getMaxPrecision(L.precision),y!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",y,"instead."));const B=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,H=B!==void 0?B.length:0;let $=0;K.morphAttributes.position!==void 0&&($=1),K.morphAttributes.normal!==void 0&&($=2),K.morphAttributes.color!==void 0&&($=3);let ie,fe,be,qe;if(O){const rt=ds[O];ie=rt.vertexShader,fe=rt.fragmentShader}else ie=L.vertexShader,fe=L.fragmentShader,d.update(L),be=d.getVertexShaderID(L),qe=d.getFragmentShaderID(L);const ce=n.getRenderTarget(),Ke=L.alphaTest>0,tt=L.clearcoat>0,nt=L.iridescence>0;return{isWebGL2:g,shaderID:O,shaderName:L.type,vertexShader:ie,fragmentShader:fe,defines:L.defines,customVertexShaderID:be,customFragmentShaderID:qe,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:y,instancing:ge.isInstancedMesh===!0,instancingColor:ge.isInstancedMesh===!0&&ge.instanceColor!==null,supportsVertexTextures:_,outputEncoding:ce===null?n.outputEncoding:ce.isXRRenderTarget===!0?ce.texture.encoding:vs,map:!!L.map,matcap:!!L.matcap,envMap:!!se,envMapMode:se&&se.mapping,envMapCubeUVHeight:ne,lightMap:!!L.lightMap,aoMap:!!L.aoMap,emissiveMap:!!L.emissiveMap,bumpMap:!!L.bumpMap,normalMap:!!L.normalMap,objectSpaceNormalMap:L.normalMapType===RC,tangentSpaceNormalMap:L.normalMapType===Na,decodeVideoTexture:!!L.map&&L.map.isVideoTexture===!0&&L.map.encoding===sn,clearcoat:tt,clearcoatMap:tt&&!!L.clearcoatMap,clearcoatRoughnessMap:tt&&!!L.clearcoatRoughnessMap,clearcoatNormalMap:tt&&!!L.clearcoatNormalMap,iridescence:nt,iridescenceMap:nt&&!!L.iridescenceMap,iridescenceThicknessMap:nt&&!!L.iridescenceThicknessMap,displacementMap:!!L.displacementMap,roughnessMap:!!L.roughnessMap,metalnessMap:!!L.metalnessMap,specularMap:!!L.specularMap,specularIntensityMap:!!L.specularIntensityMap,specularColorMap:!!L.specularColorMap,opaque:L.transparent===!1&&L.blending===Fl,alphaMap:!!L.alphaMap,alphaTest:Ke,gradientMap:!!L.gradientMap,sheen:L.sheen>0,sheenColorMap:!!L.sheenColorMap,sheenRoughnessMap:!!L.sheenRoughnessMap,transmission:L.transmission>0,transmissionMap:!!L.transmissionMap,thicknessMap:!!L.thicknessMap,combine:L.combine,vertexTangents:!!L.normalMap&&!!K.attributes.tangent,vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,vertexUvs:!!L.map||!!L.bumpMap||!!L.normalMap||!!L.specularMap||!!L.alphaMap||!!L.emissiveMap||!!L.roughnessMap||!!L.metalnessMap||!!L.clearcoatMap||!!L.clearcoatRoughnessMap||!!L.clearcoatNormalMap||!!L.iridescenceMap||!!L.iridescenceThicknessMap||!!L.displacementMap||!!L.transmissionMap||!!L.thicknessMap||!!L.specularIntensityMap||!!L.specularColorMap||!!L.sheenColorMap||!!L.sheenRoughnessMap,uvsVertexOnly:!(!!L.map||!!L.bumpMap||!!L.normalMap||!!L.specularMap||!!L.alphaMap||!!L.emissiveMap||!!L.roughnessMap||!!L.metalnessMap||!!L.clearcoatNormalMap||!!L.iridescenceMap||!!L.iridescenceThicknessMap||L.transmission>0||!!L.transmissionMap||!!L.thicknessMap||!!L.specularIntensityMap||!!L.specularColorMap||L.sheen>0||!!L.sheenColorMap||!!L.sheenRoughnessMap)&&!!L.displacementMap,fog:!!te,useFog:L.fog===!0,fogExp2:te&&te.isFogExp2,flatShading:!!L.flatShading,sizeAttenuation:L.sizeAttenuation,logarithmicDepthBuffer:m,skinning:ge.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:$,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:L.toneMapped?n.toneMapping:ms,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Os,flipSided:L.side===pr,useDepthPacking:!!L.depthPacking,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionDerivatives:L.extensions&&L.extensions.derivatives,extensionFragDepth:L.extensions&&L.extensions.fragDepth,extensionDrawBuffers:L.extensions&&L.extensions.drawBuffers,extensionShaderTextureLOD:L.extensions&&L.extensions.shaderTextureLOD,rendererExtensionFragDepth:g||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:g||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:g||i.has("EXT_shader_texture_lod"),customProgramCacheKey:L.customProgramCacheKey()}}function E(L){const N=[];if(L.shaderID?N.push(L.shaderID):(N.push(L.customVertexShaderID),N.push(L.customFragmentShaderID)),L.defines!==void 0)for(const F in L.defines)N.push(F),N.push(L.defines[F]);return L.isRawShaderMaterial===!1&&(M(N,L),C(N,L),N.push(n.outputEncoding)),N.push(L.customProgramCacheKey),N.join()}function M(L,N){L.push(N.precision),L.push(N.outputEncoding),L.push(N.envMapMode),L.push(N.envMapCubeUVHeight),L.push(N.combine),L.push(N.vertexUvs),L.push(N.fogExp2),L.push(N.sizeAttenuation),L.push(N.morphTargetsCount),L.push(N.morphAttributeCount),L.push(N.numDirLights),L.push(N.numPointLights),L.push(N.numSpotLights),L.push(N.numSpotLightMaps),L.push(N.numHemiLights),L.push(N.numRectAreaLights),L.push(N.numDirLightShadows),L.push(N.numPointLightShadows),L.push(N.numSpotLightShadows),L.push(N.numSpotLightShadowsWithMaps),L.push(N.shadowMapType),L.push(N.toneMapping),L.push(N.numClippingPlanes),L.push(N.numClipIntersection),L.push(N.depthPacking)}function C(L,N){l.disableAll(),N.isWebGL2&&l.enable(0),N.supportsVertexTextures&&l.enable(1),N.instancing&&l.enable(2),N.instancingColor&&l.enable(3),N.map&&l.enable(4),N.matcap&&l.enable(5),N.envMap&&l.enable(6),N.lightMap&&l.enable(7),N.aoMap&&l.enable(8),N.emissiveMap&&l.enable(9),N.bumpMap&&l.enable(10),N.normalMap&&l.enable(11),N.objectSpaceNormalMap&&l.enable(12),N.tangentSpaceNormalMap&&l.enable(13),N.clearcoat&&l.enable(14),N.clearcoatMap&&l.enable(15),N.clearcoatRoughnessMap&&l.enable(16),N.clearcoatNormalMap&&l.enable(17),N.iridescence&&l.enable(18),N.iridescenceMap&&l.enable(19),N.iridescenceThicknessMap&&l.enable(20),N.displacementMap&&l.enable(21),N.specularMap&&l.enable(22),N.roughnessMap&&l.enable(23),N.metalnessMap&&l.enable(24),N.gradientMap&&l.enable(25),N.alphaMap&&l.enable(26),N.alphaTest&&l.enable(27),N.vertexColors&&l.enable(28),N.vertexAlphas&&l.enable(29),N.vertexUvs&&l.enable(30),N.vertexTangents&&l.enable(31),N.uvsVertexOnly&&l.enable(32),L.push(l.mask),l.disableAll(),N.fog&&l.enable(0),N.useFog&&l.enable(1),N.flatShading&&l.enable(2),N.logarithmicDepthBuffer&&l.enable(3),N.skinning&&l.enable(4),N.morphTargets&&l.enable(5),N.morphNormals&&l.enable(6),N.morphColors&&l.enable(7),N.premultipliedAlpha&&l.enable(8),N.shadowMapEnabled&&l.enable(9),N.physicallyCorrectLights&&l.enable(10),N.doubleSided&&l.enable(11),N.flipSided&&l.enable(12),N.useDepthPacking&&l.enable(13),N.dithering&&l.enable(14),N.specularIntensityMap&&l.enable(15),N.specularColorMap&&l.enable(16),N.transmission&&l.enable(17),N.transmissionMap&&l.enable(18),N.thicknessMap&&l.enable(19),N.sheen&&l.enable(20),N.sheenColorMap&&l.enable(21),N.sheenRoughnessMap&&l.enable(22),N.decodeVideoTexture&&l.enable(23),N.opaque&&l.enable(24),L.push(l.mask)}function P(L){const N=w[L.type];let F;if(N){const q=ds[N];F=zC.clone(q.uniforms)}else F=L.uniforms;return F}function A(L,N){let F;for(let q=0,ge=f.length;q<ge;q++){const te=f[q];if(te.cacheKey===N){F=te,++F.usedTimes;break}}return F===void 0&&(F=new nD(n,N,L,s),f.push(F)),F}function k(L){if(--L.usedTimes===0){const N=f.indexOf(L);f[N]=f[f.length-1],f.pop(),L.destroy()}}function D(L){d.remove(L)}function z(){d.dispose()}return{getParameters:S,getProgramCacheKey:E,getUniforms:P,acquireProgram:A,releaseProgram:k,releaseShaderCache:D,programs:f,dispose:z}}function aD(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,l){n.get(s)[o]=l}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function lD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function MS(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function ES(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(m,_,y,w,S,E){let M=n[e];return M===void 0?(M={id:m.id,object:m,geometry:_,material:y,groupOrder:w,renderOrder:m.renderOrder,z:S,group:E},n[e]=M):(M.id=m.id,M.object=m,M.geometry=_,M.material=y,M.groupOrder=w,M.renderOrder=m.renderOrder,M.z=S,M.group=E),e++,M}function l(m,_,y,w,S,E){const M=o(m,_,y,w,S,E);y.transmission>0?i.push(M):y.transparent===!0?r.push(M):t.push(M)}function d(m,_,y,w,S,E){const M=o(m,_,y,w,S,E);y.transmission>0?i.unshift(M):y.transparent===!0?r.unshift(M):t.unshift(M)}function f(m,_){t.length>1&&t.sort(m||lD),i.length>1&&i.sort(_||MS),r.length>1&&r.sort(_||MS)}function g(){for(let m=e,_=n.length;m<_;m++){const y=n[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:d,finish:g,sort:f}}function uD(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new ES,n.set(i,[o])):r>=s.length?(o=new ES,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function cD(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new V,color:new Ge};break;case"SpotLight":t={position:new V,direction:new V,color:new Ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new V,color:new Ge,distance:0,decay:0};break;case"HemisphereLight":t={direction:new V,skyColor:new Ge,groundColor:new Ge};break;case"RectAreaLight":t={color:new Ge,position:new V,halfWidth:new V,halfHeight:new V};break}return n[e.id]=t,t}}}function dD(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let hD=0;function fD(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function pD(n,e){const t=new cD,i=dD(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let g=0;g<9;g++)r.probe.push(new V);const s=new V,o=new St,l=new St;function d(g,m){let _=0,y=0,w=0;for(let q=0;q<9;q++)r.probe[q].set(0,0,0);let S=0,E=0,M=0,C=0,P=0,A=0,k=0,D=0,z=0,L=0;g.sort(fD);const N=m!==!0?Math.PI:1;for(let q=0,ge=g.length;q<ge;q++){const te=g[q],K=te.color,le=te.intensity,se=te.distance,ne=te.shadow&&te.shadow.map?te.shadow.map.texture:null;if(te.isAmbientLight)_+=K.r*le*N,y+=K.g*le*N,w+=K.b*le*N;else if(te.isLightProbe)for(let O=0;O<9;O++)r.probe[O].addScaledVector(te.sh.coefficients[O],le);else if(te.isDirectionalLight){const O=t.get(te);if(O.color.copy(te.color).multiplyScalar(te.intensity*N),te.castShadow){const B=te.shadow,H=i.get(te);H.shadowBias=B.bias,H.shadowNormalBias=B.normalBias,H.shadowRadius=B.radius,H.shadowMapSize=B.mapSize,r.directionalShadow[S]=H,r.directionalShadowMap[S]=ne,r.directionalShadowMatrix[S]=te.shadow.matrix,A++}r.directional[S]=O,S++}else if(te.isSpotLight){const O=t.get(te);O.position.setFromMatrixPosition(te.matrixWorld),O.color.copy(K).multiplyScalar(le*N),O.distance=se,O.coneCos=Math.cos(te.angle),O.penumbraCos=Math.cos(te.angle*(1-te.penumbra)),O.decay=te.decay,r.spot[M]=O;const B=te.shadow;if(te.map&&(r.spotLightMap[z]=te.map,z++,B.updateMatrices(te),te.castShadow&&L++),r.spotLightMatrix[M]=B.matrix,te.castShadow){const H=i.get(te);H.shadowBias=B.bias,H.shadowNormalBias=B.normalBias,H.shadowRadius=B.radius,H.shadowMapSize=B.mapSize,r.spotShadow[M]=H,r.spotShadowMap[M]=ne,D++}M++}else if(te.isRectAreaLight){const O=t.get(te);O.color.copy(K).multiplyScalar(le),O.halfWidth.set(te.width*.5,0,0),O.halfHeight.set(0,te.height*.5,0),r.rectArea[C]=O,C++}else if(te.isPointLight){const O=t.get(te);if(O.color.copy(te.color).multiplyScalar(te.intensity*N),O.distance=te.distance,O.decay=te.decay,te.castShadow){const B=te.shadow,H=i.get(te);H.shadowBias=B.bias,H.shadowNormalBias=B.normalBias,H.shadowRadius=B.radius,H.shadowMapSize=B.mapSize,H.shadowCameraNear=B.camera.near,H.shadowCameraFar=B.camera.far,r.pointShadow[E]=H,r.pointShadowMap[E]=ne,r.pointShadowMatrix[E]=te.shadow.matrix,k++}r.point[E]=O,E++}else if(te.isHemisphereLight){const O=t.get(te);O.skyColor.copy(te.color).multiplyScalar(le*N),O.groundColor.copy(te.groundColor).multiplyScalar(le*N),r.hemi[P]=O,P++}}C>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ze.LTC_FLOAT_1,r.rectAreaLTC2=ze.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ze.LTC_HALF_1,r.rectAreaLTC2=ze.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=_,r.ambient[1]=y,r.ambient[2]=w;const F=r.hash;(F.directionalLength!==S||F.pointLength!==E||F.spotLength!==M||F.rectAreaLength!==C||F.hemiLength!==P||F.numDirectionalShadows!==A||F.numPointShadows!==k||F.numSpotShadows!==D||F.numSpotMaps!==z)&&(r.directional.length=S,r.spot.length=M,r.rectArea.length=C,r.point.length=E,r.hemi.length=P,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=k,r.pointShadowMap.length=k,r.spotShadow.length=D,r.spotShadowMap.length=D,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=k,r.spotLightMatrix.length=D+z-L,r.spotLightMap.length=z,r.numSpotLightShadowsWithMaps=L,F.directionalLength=S,F.pointLength=E,F.spotLength=M,F.rectAreaLength=C,F.hemiLength=P,F.numDirectionalShadows=A,F.numPointShadows=k,F.numSpotShadows=D,F.numSpotMaps=z,r.version=hD++)}function f(g,m){let _=0,y=0,w=0,S=0,E=0;const M=m.matrixWorldInverse;for(let C=0,P=g.length;C<P;C++){const A=g[C];if(A.isDirectionalLight){const k=r.directional[_];k.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(M),_++}else if(A.isSpotLight){const k=r.spot[w];k.position.setFromMatrixPosition(A.matrixWorld),k.position.applyMatrix4(M),k.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(M),w++}else if(A.isRectAreaLight){const k=r.rectArea[S];k.position.setFromMatrixPosition(A.matrixWorld),k.position.applyMatrix4(M),l.identity(),o.copy(A.matrixWorld),o.premultiply(M),l.extractRotation(o),k.halfWidth.set(A.width*.5,0,0),k.halfHeight.set(0,A.height*.5,0),k.halfWidth.applyMatrix4(l),k.halfHeight.applyMatrix4(l),S++}else if(A.isPointLight){const k=r.point[y];k.position.setFromMatrixPosition(A.matrixWorld),k.position.applyMatrix4(M),y++}else if(A.isHemisphereLight){const k=r.hemi[E];k.direction.setFromMatrixPosition(A.matrixWorld),k.direction.transformDirection(M),E++}}}return{setup:d,setupView:f,state:r}}function CS(n,e){const t=new pD(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(m){i.push(m)}function l(m){r.push(m)}function d(m){t.setup(i,m)}function f(m){t.setupView(i,m)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:d,setupLightsView:f,pushLight:o,pushShadow:l}}function mD(n,e){let t=new WeakMap;function i(s,o=0){const l=t.get(s);let d;return l===void 0?(d=new CS(n,e),t.set(s,[d])):o>=l.length?(d=new CS(n,e),l.push(d)):d=l[o],d}function r(){t=new WeakMap}return{get:i,dispose:r}}class ew extends si{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=AC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tw extends si{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const gD=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,vD=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function _D(n,e,t){let i=new dv;const r=new Se,s=new Se,o=new qt,l=new ew({depthPacking:LC}),d=new tw,f={},g=t.maxTextureSize,m={0:pr,1:Kl,2:Os},_=new _s({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Se},radius:{value:4}},vertexShader:gD,fragmentShader:vD}),y=_.clone();y.defines.HORIZONTAL_PASS=1;const w=new Mt;w.setAttribute("position",new tn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Yn(w,_),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bx,this.render=function(A,k,D){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||A.length===0)return;const z=n.getRenderTarget(),L=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),F=n.state;F.setBlending(mo),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);for(let q=0,ge=A.length;q<ge;q++){const te=A[q],K=te.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;r.copy(K.mapSize);const le=K.getFrameExtents();if(r.multiply(le),s.copy(K.mapSize),(r.x>g||r.y>g)&&(r.x>g&&(s.x=Math.floor(g/le.x),r.x=s.x*le.x,K.mapSize.x=s.x),r.y>g&&(s.y=Math.floor(g/le.y),r.y=s.y*le.y,K.mapSize.y=s.y)),K.map===null){const ne=this.type!==Nc?{minFilter:Nn,magFilter:Nn}:{};K.map=new Wr(r.x,r.y,ne),K.map.texture.name=te.name+".shadowMap",K.camera.updateProjectionMatrix()}n.setRenderTarget(K.map),n.clear();const se=K.getViewportCount();for(let ne=0;ne<se;ne++){const O=K.getViewport(ne);o.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),F.viewport(o),K.updateMatrices(te,ne),i=K.getFrustum(),P(k,D,K.camera,te,this.type)}K.isPointLightShadow!==!0&&this.type===Nc&&M(K,D),K.needsUpdate=!1}E.needsUpdate=!1,n.setRenderTarget(z,L,N)};function M(A,k){const D=e.update(S);_.defines.VSM_SAMPLES!==A.blurSamples&&(_.defines.VSM_SAMPLES=A.blurSamples,y.defines.VSM_SAMPLES=A.blurSamples,_.needsUpdate=!0,y.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Wr(r.x,r.y)),_.uniforms.shadow_pass.value=A.map.texture,_.uniforms.resolution.value=A.mapSize,_.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(k,null,D,_,S,null),y.uniforms.shadow_pass.value=A.mapPass.texture,y.uniforms.resolution.value=A.mapSize,y.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(k,null,D,y,S,null)}function C(A,k,D,z,L,N){let F=null;const q=D.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(q!==void 0?F=q:F=D.isPointLight===!0?d:l,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0){const ge=F.uuid,te=k.uuid;let K=f[ge];K===void 0&&(K={},f[ge]=K);let le=K[te];le===void 0&&(le=F.clone(),K[te]=le),F=le}return F.visible=k.visible,F.wireframe=k.wireframe,N===Nc?F.side=k.shadowSide!==null?k.shadowSide:k.side:F.side=k.shadowSide!==null?k.shadowSide:m[k.side],F.alphaMap=k.alphaMap,F.alphaTest=k.alphaTest,F.clipShadows=k.clipShadows,F.clippingPlanes=k.clippingPlanes,F.clipIntersection=k.clipIntersection,F.displacementMap=k.displacementMap,F.displacementScale=k.displacementScale,F.displacementBias=k.displacementBias,F.wireframeLinewidth=k.wireframeLinewidth,F.linewidth=k.linewidth,D.isPointLight===!0&&F.isMeshDistanceMaterial===!0&&(F.referencePosition.setFromMatrixPosition(D.matrixWorld),F.nearDistance=z,F.farDistance=L),F}function P(A,k,D,z,L){if(A.visible===!1)return;if(A.layers.test(k.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&L===Nc)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,A.matrixWorld);const q=e.update(A),ge=A.material;if(Array.isArray(ge)){const te=q.groups;for(let K=0,le=te.length;K<le;K++){const se=te[K],ne=ge[se.materialIndex];if(ne&&ne.visible){const O=C(A,ne,z,D.near,D.far,L);n.renderBufferDirect(D,null,q,O,A,se)}}}else if(ge.visible){const te=C(A,ge,z,D.near,D.far,L);n.renderBufferDirect(D,null,q,te,A,null)}}const F=A.children;for(let q=0,ge=F.length;q<ge;q++)P(F[q],k,D,z,L)}}function yD(n,e,t){const i=t.isWebGL2;function r(){let Z=!1;const Ue=new qt;let _e=null;const Ie=new qt(0,0,0,0);return{setMask:function(ke){_e!==ke&&!Z&&(n.colorMask(ke,ke,ke,ke),_e=ke)},setLocked:function(ke){Z=ke},setClear:function(ke,ht,un,Nt,Ki){Ki===!0&&(ke*=Nt,ht*=Nt,un*=Nt),Ue.set(ke,ht,un,Nt),Ie.equals(Ue)===!1&&(n.clearColor(ke,ht,un,Nt),Ie.copy(Ue))},reset:function(){Z=!1,_e=null,Ie.set(-1,0,0,0)}}}function s(){let Z=!1,Ue=null,_e=null,Ie=null;return{setTest:function(ke){ke?Ke(2929):tt(2929)},setMask:function(ke){Ue!==ke&&!Z&&(n.depthMask(ke),Ue=ke)},setFunc:function(ke){if(_e!==ke){if(ke)switch(ke){case QE:n.depthFunc(512);break;case $E:n.depthFunc(519);break;case eC:n.depthFunc(513);break;case Ug:n.depthFunc(515);break;case tC:n.depthFunc(514);break;case nC:n.depthFunc(518);break;case iC:n.depthFunc(516);break;case rC:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);_e=ke}},setLocked:function(ke){Z=ke},setClear:function(ke){Ie!==ke&&(n.clearDepth(ke),Ie=ke)},reset:function(){Z=!1,Ue=null,_e=null,Ie=null}}}function o(){let Z=!1,Ue=null,_e=null,Ie=null,ke=null,ht=null,un=null,Nt=null,Ki=null;return{setTest:function(jt){Z||(jt?Ke(2960):tt(2960))},setMask:function(jt){Ue!==jt&&!Z&&(n.stencilMask(jt),Ue=jt)},setFunc:function(jt,xi,kn){(_e!==jt||Ie!==xi||ke!==kn)&&(n.stencilFunc(jt,xi,kn),_e=jt,Ie=xi,ke=kn)},setOp:function(jt,xi,kn){(ht!==jt||un!==xi||Nt!==kn)&&(n.stencilOp(jt,xi,kn),ht=jt,un=xi,Nt=kn)},setLocked:function(jt){Z=jt},setClear:function(jt){Ki!==jt&&(n.clearStencil(jt),Ki=jt)},reset:function(){Z=!1,Ue=null,_e=null,Ie=null,ke=null,ht=null,un=null,Nt=null,Ki=null}}}const l=new r,d=new s,f=new o,g=new WeakMap,m=new WeakMap;let _={},y={},w=new WeakMap,S=[],E=null,M=!1,C=null,P=null,A=null,k=null,D=null,z=null,L=null,N=!1,F=null,q=null,ge=null,te=null,K=null;const le=n.getParameter(35661);let se=!1,ne=0;const O=n.getParameter(7938);O.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(O)[1]),se=ne>=1):O.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),se=ne>=2);let B=null,H={};const $=n.getParameter(3088),ie=n.getParameter(2978),fe=new qt().fromArray($),be=new qt().fromArray(ie);function qe(Z,Ue,_e){const Ie=new Uint8Array(4),ke=n.createTexture();n.bindTexture(Z,ke),n.texParameteri(Z,10241,9728),n.texParameteri(Z,10240,9728);for(let ht=0;ht<_e;ht++)n.texImage2D(Ue+ht,0,6408,1,1,0,6408,5121,Ie);return ke}const ce={};ce[3553]=qe(3553,3553,1),ce[34067]=qe(34067,34069,6),l.setClear(0,0,0,1),d.setClear(1),f.setClear(0),Ke(2929),d.setFunc(Ug),Ne(!1),dt(ny),Ke(2884),Ae(mo);function Ke(Z){_[Z]!==!0&&(n.enable(Z),_[Z]=!0)}function tt(Z){_[Z]!==!1&&(n.disable(Z),_[Z]=!1)}function nt(Z,Ue){return y[Z]!==Ue?(n.bindFramebuffer(Z,Ue),y[Z]=Ue,i&&(Z===36009&&(y[36160]=Ue),Z===36160&&(y[36009]=Ue)),!0):!1}function Te(Z,Ue){let _e=S,Ie=!1;if(Z)if(_e=w.get(Ue),_e===void 0&&(_e=[],w.set(Ue,_e)),Z.isWebGLMultipleRenderTargets){const ke=Z.texture;if(_e.length!==ke.length||_e[0]!==36064){for(let ht=0,un=ke.length;ht<un;ht++)_e[ht]=36064+ht;_e.length=ke.length,Ie=!0}}else _e[0]!==36064&&(_e[0]=36064,Ie=!0);else _e[0]!==1029&&(_e[0]=1029,Ie=!0);Ie&&(t.isWebGL2?n.drawBuffers(_e):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(_e))}function rt(Z){return E!==Z?(n.useProgram(Z),E=Z,!0):!1}const we={[Cl]:32774,[VE]:32778,[HE]:32779};if(i)we[oy]=32775,we[ay]=32776;else{const Z=e.get("EXT_blend_minmax");Z!==null&&(we[oy]=Z.MIN_EXT,we[ay]=Z.MAX_EXT)}const me={[GE]:0,[WE]:1,[jE]:768,[Hx]:770,[JE]:776,[KE]:774,[qE]:772,[XE]:769,[Gx]:771,[ZE]:775,[YE]:773};function Ae(Z,Ue,_e,Ie,ke,ht,un,Nt){if(Z===mo){M===!0&&(tt(3042),M=!1);return}if(M===!1&&(Ke(3042),M=!0),Z!==BE){if(Z!==C||Nt!==N){if((P!==Cl||D!==Cl)&&(n.blendEquation(32774),P=Cl,D=Cl),Nt)switch(Z){case Fl:n.blendFuncSeparate(1,771,1,771);break;case iy:n.blendFunc(1,1);break;case ry:n.blendFuncSeparate(0,769,0,1);break;case sy:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case Fl:n.blendFuncSeparate(770,771,1,771);break;case iy:n.blendFunc(770,1);break;case ry:n.blendFuncSeparate(0,769,0,1);break;case sy:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}A=null,k=null,z=null,L=null,C=Z,N=Nt}return}ke=ke||Ue,ht=ht||_e,un=un||Ie,(Ue!==P||ke!==D)&&(n.blendEquationSeparate(we[Ue],we[ke]),P=Ue,D=ke),(_e!==A||Ie!==k||ht!==z||un!==L)&&(n.blendFuncSeparate(me[_e],me[Ie],me[ht],me[un]),A=_e,k=Ie,z=ht,L=un),C=Z,N=null}function Ye(Z,Ue){Z.side===Os?tt(2884):Ke(2884);let _e=Z.side===pr;Ue&&(_e=!_e),Ne(_e),Z.blending===Fl&&Z.transparent===!1?Ae(mo):Ae(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.premultipliedAlpha),d.setFunc(Z.depthFunc),d.setTest(Z.depthTest),d.setMask(Z.depthWrite),l.setMask(Z.colorWrite);const Ie=Z.stencilWrite;f.setTest(Ie),Ie&&(f.setMask(Z.stencilWriteMask),f.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),f.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),Je(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?Ke(32926):tt(32926)}function Ne(Z){F!==Z&&(Z?n.frontFace(2304):n.frontFace(2305),F=Z)}function dt(Z){Z!==FE?(Ke(2884),Z!==q&&(Z===ny?n.cullFace(1029):Z===UE?n.cullFace(1028):n.cullFace(1032))):tt(2884),q=Z}function Qe(Z){Z!==ge&&(se&&n.lineWidth(Z),ge=Z)}function Je(Z,Ue,_e){Z?(Ke(32823),(te!==Ue||K!==_e)&&(n.polygonOffset(Ue,_e),te=Ue,K=_e)):tt(32823)}function Tt(Z){Z?Ke(3089):tt(3089)}function kt(Z){Z===void 0&&(Z=33984+le-1),B!==Z&&(n.activeTexture(Z),B=Z)}function j(Z,Ue){B===null&&kt();let _e=H[B];_e===void 0&&(_e={type:void 0,texture:void 0},H[B]=_e),(_e.type!==Z||_e.texture!==Ue)&&(n.bindTexture(Z,Ue||ce[Z]),_e.type=Z,_e.texture=Ue)}function U(){const Z=H[B];Z!==void 0&&Z.type!==void 0&&(n.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function de(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ee(){try{n.texSubImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Le(){try{n.texSubImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function De(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function lt(){try{n.texStorage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function he(){try{n.texStorage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function We(){try{n.texImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Oe(){try{n.texImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Y(Z){fe.equals(Z)===!1&&(n.scissor(Z.x,Z.y,Z.z,Z.w),fe.copy(Z))}function ue(Z){be.equals(Z)===!1&&(n.viewport(Z.x,Z.y,Z.z,Z.w),be.copy(Z))}function Pe(Z,Ue){let _e=m.get(Ue);_e===void 0&&(_e=new WeakMap,m.set(Ue,_e));let Ie=_e.get(Z);Ie===void 0&&(Ie=n.getUniformBlockIndex(Ue,Z.name),_e.set(Z,Ie))}function Ve(Z,Ue){const Ie=m.get(Ue).get(Z);g.get(Z)!==Ie&&(n.uniformBlockBinding(Ue,Ie,Z.__bindingPointIndex),g.set(Z,Ie))}function ft(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),_={},B=null,H={},y={},w=new WeakMap,S=[],E=null,M=!1,C=null,P=null,A=null,k=null,D=null,z=null,L=null,N=!1,F=null,q=null,ge=null,te=null,K=null,fe.set(0,0,n.canvas.width,n.canvas.height),be.set(0,0,n.canvas.width,n.canvas.height),l.reset(),d.reset(),f.reset()}return{buffers:{color:l,depth:d,stencil:f},enable:Ke,disable:tt,bindFramebuffer:nt,drawBuffers:Te,useProgram:rt,setBlending:Ae,setMaterial:Ye,setFlipSided:Ne,setCullFace:dt,setLineWidth:Qe,setPolygonOffset:Je,setScissorTest:Tt,activeTexture:kt,bindTexture:j,unbindTexture:U,compressedTexImage2D:de,texImage2D:We,texImage3D:Oe,updateUBOMapping:Pe,uniformBlockBinding:Ve,texStorage2D:lt,texStorage3D:he,texSubImage2D:Ee,texSubImage3D:Le,compressedTexSubImage2D:De,scissor:Y,viewport:ue,reset:ft}}function xD(n,e,t,i,r,s,o){const l=r.isWebGL2,d=r.maxTextures,f=r.maxCubemapSize,g=r.maxTextureSize,m=r.maxSamples,_=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,y=/OculusBrowser/g.test(navigator.userAgent),w=new WeakMap;let S;const E=new WeakMap;let M=!1;try{M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function C(j,U){return M?new OffscreenCanvas(j,U):cf("canvas")}function P(j,U,de,Ee){let Le=1;if((j.width>Ee||j.height>Ee)&&(Le=Ee/Math.max(j.width,j.height)),Le<1||U===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const De=U?Gg:Math.floor,lt=De(Le*j.width),he=De(Le*j.height);S===void 0&&(S=C(lt,he));const We=de?C(lt,he):S;return We.width=lt,We.height=he,We.getContext("2d").drawImage(j,0,0,lt,he),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+lt+"x"+he+")."),We}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function A(j){return Ly(j.width)&&Ly(j.height)}function k(j){return l?!1:j.wrapS!==Ai||j.wrapT!==Ai||j.minFilter!==Nn&&j.minFilter!==_n}function D(j,U){return j.generateMipmaps&&U&&j.minFilter!==Nn&&j.minFilter!==_n}function z(j){n.generateMipmap(j)}function L(j,U,de,Ee,Le=!1){if(l===!1)return U;if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let De=U;return U===6403&&(de===5126&&(De=33326),de===5131&&(De=33325),de===5121&&(De=33321)),U===33319&&(de===5126&&(De=33328),de===5131&&(De=33327),de===5121&&(De=33323)),U===6408&&(de===5126&&(De=34836),de===5131&&(De=34842),de===5121&&(De=Ee===sn&&Le===!1?35907:32856),de===32819&&(De=32854),de===32820&&(De=32855)),(De===33325||De===33326||De===33327||De===33328||De===34842||De===34836)&&e.get("EXT_color_buffer_float"),De}function N(j,U,de){return D(j,de)===!0||j.isFramebufferTexture&&j.minFilter!==Nn&&j.minFilter!==_n?Math.log2(Math.max(U.width,U.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?U.mipmaps.length:1}function F(j){return j===Nn||j===Bg||j===Vg?9728:9729}function q(j){const U=j.target;U.removeEventListener("dispose",q),te(U),U.isVideoTexture&&w.delete(U)}function ge(j){const U=j.target;U.removeEventListener("dispose",ge),le(U)}function te(j){const U=i.get(j);if(U.__webglInit===void 0)return;const de=j.source,Ee=E.get(de);if(Ee){const Le=Ee[U.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&K(j),Object.keys(Ee).length===0&&E.delete(de)}i.remove(j)}function K(j){const U=i.get(j);n.deleteTexture(U.__webglTexture);const de=j.source,Ee=E.get(de);delete Ee[U.__cacheKey],o.memory.textures--}function le(j){const U=j.texture,de=i.get(j),Ee=i.get(U);if(Ee.__webglTexture!==void 0&&(n.deleteTexture(Ee.__webglTexture),o.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++)n.deleteFramebuffer(de.__webglFramebuffer[Le]),de.__webglDepthbuffer&&n.deleteRenderbuffer(de.__webglDepthbuffer[Le]);else{if(n.deleteFramebuffer(de.__webglFramebuffer),de.__webglDepthbuffer&&n.deleteRenderbuffer(de.__webglDepthbuffer),de.__webglMultisampledFramebuffer&&n.deleteFramebuffer(de.__webglMultisampledFramebuffer),de.__webglColorRenderbuffer)for(let Le=0;Le<de.__webglColorRenderbuffer.length;Le++)de.__webglColorRenderbuffer[Le]&&n.deleteRenderbuffer(de.__webglColorRenderbuffer[Le]);de.__webglDepthRenderbuffer&&n.deleteRenderbuffer(de.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let Le=0,De=U.length;Le<De;Le++){const lt=i.get(U[Le]);lt.__webglTexture&&(n.deleteTexture(lt.__webglTexture),o.memory.textures--),i.remove(U[Le])}i.remove(U),i.remove(j)}let se=0;function ne(){se=0}function O(){const j=se;return j>=d&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+d),se+=1,j}function B(j){const U=[];return U.push(j.wrapS),U.push(j.wrapT),U.push(j.magFilter),U.push(j.minFilter),U.push(j.anisotropy),U.push(j.internalFormat),U.push(j.format),U.push(j.type),U.push(j.generateMipmaps),U.push(j.premultiplyAlpha),U.push(j.flipY),U.push(j.unpackAlignment),U.push(j.encoding),U.join()}function H(j,U){const de=i.get(j);if(j.isVideoTexture&&Tt(j),j.isRenderTargetTexture===!1&&j.version>0&&de.__version!==j.version){const Ee=j.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{tt(de,j,U);return}}t.activeTexture(33984+U),t.bindTexture(3553,de.__webglTexture)}function $(j,U){const de=i.get(j);if(j.version>0&&de.__version!==j.version){tt(de,j,U);return}t.activeTexture(33984+U),t.bindTexture(35866,de.__webglTexture)}function ie(j,U){const de=i.get(j);if(j.version>0&&de.__version!==j.version){tt(de,j,U);return}t.activeTexture(33984+U),t.bindTexture(32879,de.__webglTexture)}function fe(j,U){const de=i.get(j);if(j.version>0&&de.__version!==j.version){nt(de,j,U);return}t.activeTexture(33984+U),t.bindTexture(34067,de.__webglTexture)}const be={[nf]:10497,[Ai]:33071,[rf]:33648},qe={[Nn]:9728,[Bg]:9984,[Vg]:9986,[_n]:9729,[jx]:9985,[tu]:9987};function ce(j,U,de){if(de?(n.texParameteri(j,10242,be[U.wrapS]),n.texParameteri(j,10243,be[U.wrapT]),(j===32879||j===35866)&&n.texParameteri(j,32882,be[U.wrapR]),n.texParameteri(j,10240,qe[U.magFilter]),n.texParameteri(j,10241,qe[U.minFilter])):(n.texParameteri(j,10242,33071),n.texParameteri(j,10243,33071),(j===32879||j===35866)&&n.texParameteri(j,32882,33071),(U.wrapS!==Ai||U.wrapT!==Ai)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(j,10240,F(U.magFilter)),n.texParameteri(j,10241,F(U.minFilter)),U.minFilter!==Nn&&U.minFilter!==_n&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ee=e.get("EXT_texture_filter_anisotropic");if(U.type===Ur&&e.has("OES_texture_float_linear")===!1||l===!1&&U.type===hs&&e.has("OES_texture_half_float_linear")===!1)return;(U.anisotropy>1||i.get(U).__currentAnisotropy)&&(n.texParameterf(j,Ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,r.getMaxAnisotropy())),i.get(U).__currentAnisotropy=U.anisotropy)}}function Ke(j,U){let de=!1;j.__webglInit===void 0&&(j.__webglInit=!0,U.addEventListener("dispose",q));const Ee=U.source;let Le=E.get(Ee);Le===void 0&&(Le={},E.set(Ee,Le));const De=B(U);if(De!==j.__cacheKey){Le[De]===void 0&&(Le[De]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,de=!0),Le[De].usedTimes++;const lt=Le[j.__cacheKey];lt!==void 0&&(Le[j.__cacheKey].usedTimes--,lt.usedTimes===0&&K(U)),j.__cacheKey=De,j.__webglTexture=Le[De].texture}return de}function tt(j,U,de){let Ee=3553;U.isDataArrayTexture&&(Ee=35866),U.isData3DTexture&&(Ee=32879);const Le=Ke(j,U),De=U.source;if(t.activeTexture(33984+de),t.bindTexture(Ee,j.__webglTexture),De.version!==De.__currentVersion||Le===!0){n.pixelStorei(37440,U.flipY),n.pixelStorei(37441,U.premultiplyAlpha),n.pixelStorei(3317,U.unpackAlignment),n.pixelStorei(37443,0);const lt=k(U)&&A(U.image)===!1;let he=P(U.image,lt,!1,g);he=kt(U,he);const We=A(he)||l,Oe=s.convert(U.format,U.encoding);let Y=s.convert(U.type),ue=L(U.internalFormat,Oe,Y,U.encoding,U.isVideoTexture);ce(Ee,U,We);let Pe;const Ve=U.mipmaps,ft=l&&U.isVideoTexture!==!0,Z=De.__currentVersion===void 0||Le===!0,Ue=N(U,he,We);if(U.isDepthTexture)ue=6402,l?U.type===Ur?ue=36012:U.type===pa?ue=33190:U.type===Ul?ue=35056:ue=33189:U.type===Ur&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),U.format===Ma&&ue===6402&&U.type!==Xx&&U.type!==pa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),U.type=pa,Y=s.convert(U.type)),U.format===Zl&&ue===6402&&(ue=34041,U.type!==Ul&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),U.type=Ul,Y=s.convert(U.type))),Z&&(ft?t.texStorage2D(3553,1,ue,he.width,he.height):t.texImage2D(3553,0,ue,he.width,he.height,0,Oe,Y,null));else if(U.isDataTexture)if(Ve.length>0&&We){ft&&Z&&t.texStorage2D(3553,Ue,ue,Ve[0].width,Ve[0].height);for(let _e=0,Ie=Ve.length;_e<Ie;_e++)Pe=Ve[_e],ft?t.texSubImage2D(3553,_e,0,0,Pe.width,Pe.height,Oe,Y,Pe.data):t.texImage2D(3553,_e,ue,Pe.width,Pe.height,0,Oe,Y,Pe.data);U.generateMipmaps=!1}else ft?(Z&&t.texStorage2D(3553,Ue,ue,he.width,he.height),t.texSubImage2D(3553,0,0,0,he.width,he.height,Oe,Y,he.data)):t.texImage2D(3553,0,ue,he.width,he.height,0,Oe,Y,he.data);else if(U.isCompressedTexture){ft&&Z&&t.texStorage2D(3553,Ue,ue,Ve[0].width,Ve[0].height);for(let _e=0,Ie=Ve.length;_e<Ie;_e++)Pe=Ve[_e],U.format!==Br?Oe!==null?ft?t.compressedTexSubImage2D(3553,_e,0,0,Pe.width,Pe.height,Oe,Pe.data):t.compressedTexImage2D(3553,_e,ue,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?t.texSubImage2D(3553,_e,0,0,Pe.width,Pe.height,Oe,Y,Pe.data):t.texImage2D(3553,_e,ue,Pe.width,Pe.height,0,Oe,Y,Pe.data)}else if(U.isDataArrayTexture)ft?(Z&&t.texStorage3D(35866,Ue,ue,he.width,he.height,he.depth),t.texSubImage3D(35866,0,0,0,0,he.width,he.height,he.depth,Oe,Y,he.data)):t.texImage3D(35866,0,ue,he.width,he.height,he.depth,0,Oe,Y,he.data);else if(U.isData3DTexture)ft?(Z&&t.texStorage3D(32879,Ue,ue,he.width,he.height,he.depth),t.texSubImage3D(32879,0,0,0,0,he.width,he.height,he.depth,Oe,Y,he.data)):t.texImage3D(32879,0,ue,he.width,he.height,he.depth,0,Oe,Y,he.data);else if(U.isFramebufferTexture){if(Z)if(ft)t.texStorage2D(3553,Ue,ue,he.width,he.height);else{let _e=he.width,Ie=he.height;for(let ke=0;ke<Ue;ke++)t.texImage2D(3553,ke,ue,_e,Ie,0,Oe,Y,null),_e>>=1,Ie>>=1}}else if(Ve.length>0&&We){ft&&Z&&t.texStorage2D(3553,Ue,ue,Ve[0].width,Ve[0].height);for(let _e=0,Ie=Ve.length;_e<Ie;_e++)Pe=Ve[_e],ft?t.texSubImage2D(3553,_e,0,0,Oe,Y,Pe):t.texImage2D(3553,_e,ue,Oe,Y,Pe);U.generateMipmaps=!1}else ft?(Z&&t.texStorage2D(3553,Ue,ue,he.width,he.height),t.texSubImage2D(3553,0,0,0,Oe,Y,he)):t.texImage2D(3553,0,ue,Oe,Y,he);D(U,We)&&z(Ee),De.__currentVersion=De.version,U.onUpdate&&U.onUpdate(U)}j.__version=U.version}function nt(j,U,de){if(U.image.length!==6)return;const Ee=Ke(j,U),Le=U.source;if(t.activeTexture(33984+de),t.bindTexture(34067,j.__webglTexture),Le.version!==Le.__currentVersion||Ee===!0){n.pixelStorei(37440,U.flipY),n.pixelStorei(37441,U.premultiplyAlpha),n.pixelStorei(3317,U.unpackAlignment),n.pixelStorei(37443,0);const De=U.isCompressedTexture||U.image[0].isCompressedTexture,lt=U.image[0]&&U.image[0].isDataTexture,he=[];for(let _e=0;_e<6;_e++)!De&&!lt?he[_e]=P(U.image[_e],!1,!0,f):he[_e]=lt?U.image[_e].image:U.image[_e],he[_e]=kt(U,he[_e]);const We=he[0],Oe=A(We)||l,Y=s.convert(U.format,U.encoding),ue=s.convert(U.type),Pe=L(U.internalFormat,Y,ue,U.encoding),Ve=l&&U.isVideoTexture!==!0,ft=Le.__currentVersion===void 0||Ee===!0;let Z=N(U,We,Oe);ce(34067,U,Oe);let Ue;if(De){Ve&&ft&&t.texStorage2D(34067,Z,Pe,We.width,We.height);for(let _e=0;_e<6;_e++){Ue=he[_e].mipmaps;for(let Ie=0;Ie<Ue.length;Ie++){const ke=Ue[Ie];U.format!==Br?Y!==null?Ve?t.compressedTexSubImage2D(34069+_e,Ie,0,0,ke.width,ke.height,Y,ke.data):t.compressedTexImage2D(34069+_e,Ie,Pe,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ve?t.texSubImage2D(34069+_e,Ie,0,0,ke.width,ke.height,Y,ue,ke.data):t.texImage2D(34069+_e,Ie,Pe,ke.width,ke.height,0,Y,ue,ke.data)}}}else{Ue=U.mipmaps,Ve&&ft&&(Ue.length>0&&Z++,t.texStorage2D(34067,Z,Pe,he[0].width,he[0].height));for(let _e=0;_e<6;_e++)if(lt){Ve?t.texSubImage2D(34069+_e,0,0,0,he[_e].width,he[_e].height,Y,ue,he[_e].data):t.texImage2D(34069+_e,0,Pe,he[_e].width,he[_e].height,0,Y,ue,he[_e].data);for(let Ie=0;Ie<Ue.length;Ie++){const ht=Ue[Ie].image[_e].image;Ve?t.texSubImage2D(34069+_e,Ie+1,0,0,ht.width,ht.height,Y,ue,ht.data):t.texImage2D(34069+_e,Ie+1,Pe,ht.width,ht.height,0,Y,ue,ht.data)}}else{Ve?t.texSubImage2D(34069+_e,0,0,0,Y,ue,he[_e]):t.texImage2D(34069+_e,0,Pe,Y,ue,he[_e]);for(let Ie=0;Ie<Ue.length;Ie++){const ke=Ue[Ie];Ve?t.texSubImage2D(34069+_e,Ie+1,0,0,Y,ue,ke.image[_e]):t.texImage2D(34069+_e,Ie+1,Pe,Y,ue,ke.image[_e])}}}D(U,Oe)&&z(34067),Le.__currentVersion=Le.version,U.onUpdate&&U.onUpdate(U)}j.__version=U.version}function Te(j,U,de,Ee,Le){const De=s.convert(de.format,de.encoding),lt=s.convert(de.type),he=L(de.internalFormat,De,lt,de.encoding);i.get(U).__hasExternalTextures||(Le===32879||Le===35866?t.texImage3D(Le,0,he,U.width,U.height,U.depth,0,De,lt,null):t.texImage2D(Le,0,he,U.width,U.height,0,De,lt,null)),t.bindFramebuffer(36160,j),Je(U)?_.framebufferTexture2DMultisampleEXT(36160,Ee,Le,i.get(de).__webglTexture,0,Qe(U)):n.framebufferTexture2D(36160,Ee,Le,i.get(de).__webglTexture,0),t.bindFramebuffer(36160,null)}function rt(j,U,de){if(n.bindRenderbuffer(36161,j),U.depthBuffer&&!U.stencilBuffer){let Ee=33189;if(de||Je(U)){const Le=U.depthTexture;Le&&Le.isDepthTexture&&(Le.type===Ur?Ee=36012:Le.type===pa&&(Ee=33190));const De=Qe(U);Je(U)?_.renderbufferStorageMultisampleEXT(36161,De,Ee,U.width,U.height):n.renderbufferStorageMultisample(36161,De,Ee,U.width,U.height)}else n.renderbufferStorage(36161,Ee,U.width,U.height);n.framebufferRenderbuffer(36160,36096,36161,j)}else if(U.depthBuffer&&U.stencilBuffer){const Ee=Qe(U);de&&Je(U)===!1?n.renderbufferStorageMultisample(36161,Ee,35056,U.width,U.height):Je(U)?_.renderbufferStorageMultisampleEXT(36161,Ee,35056,U.width,U.height):n.renderbufferStorage(36161,34041,U.width,U.height),n.framebufferRenderbuffer(36160,33306,36161,j)}else{const Ee=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let Le=0;Le<Ee.length;Le++){const De=Ee[Le],lt=s.convert(De.format,De.encoding),he=s.convert(De.type),We=L(De.internalFormat,lt,he,De.encoding),Oe=Qe(U);de&&Je(U)===!1?n.renderbufferStorageMultisample(36161,Oe,We,U.width,U.height):Je(U)?_.renderbufferStorageMultisampleEXT(36161,Oe,We,U.width,U.height):n.renderbufferStorage(36161,We,U.width,U.height)}}n.bindRenderbuffer(36161,null)}function we(j,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,j),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),H(U.depthTexture,0);const Ee=i.get(U.depthTexture).__webglTexture,Le=Qe(U);if(U.depthTexture.format===Ma)Je(U)?_.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ee,0,Le):n.framebufferTexture2D(36160,36096,3553,Ee,0);else if(U.depthTexture.format===Zl)Je(U)?_.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ee,0,Le):n.framebufferTexture2D(36160,33306,3553,Ee,0);else throw new Error("Unknown depthTexture format")}function me(j){const U=i.get(j),de=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!U.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");we(U.__webglFramebuffer,j)}else if(de){U.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)t.bindFramebuffer(36160,U.__webglFramebuffer[Ee]),U.__webglDepthbuffer[Ee]=n.createRenderbuffer(),rt(U.__webglDepthbuffer[Ee],j,!1)}else t.bindFramebuffer(36160,U.__webglFramebuffer),U.__webglDepthbuffer=n.createRenderbuffer(),rt(U.__webglDepthbuffer,j,!1);t.bindFramebuffer(36160,null)}function Ae(j,U,de){const Ee=i.get(j);U!==void 0&&Te(Ee.__webglFramebuffer,j,j.texture,36064,3553),de!==void 0&&me(j)}function Ye(j){const U=j.texture,de=i.get(j),Ee=i.get(U);j.addEventListener("dispose",ge),j.isWebGLMultipleRenderTargets!==!0&&(Ee.__webglTexture===void 0&&(Ee.__webglTexture=n.createTexture()),Ee.__version=U.version,o.memory.textures++);const Le=j.isWebGLCubeRenderTarget===!0,De=j.isWebGLMultipleRenderTargets===!0,lt=A(j)||l;if(Le){de.__webglFramebuffer=[];for(let he=0;he<6;he++)de.__webglFramebuffer[he]=n.createFramebuffer()}else{if(de.__webglFramebuffer=n.createFramebuffer(),De)if(r.drawBuffers){const he=j.texture;for(let We=0,Oe=he.length;We<Oe;We++){const Y=i.get(he[We]);Y.__webglTexture===void 0&&(Y.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&j.samples>0&&Je(j)===!1){const he=De?U:[U];de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,de.__webglMultisampledFramebuffer);for(let We=0;We<he.length;We++){const Oe=he[We];de.__webglColorRenderbuffer[We]=n.createRenderbuffer(),n.bindRenderbuffer(36161,de.__webglColorRenderbuffer[We]);const Y=s.convert(Oe.format,Oe.encoding),ue=s.convert(Oe.type),Pe=L(Oe.internalFormat,Y,ue,Oe.encoding),Ve=Qe(j);n.renderbufferStorageMultisample(36161,Ve,Pe,j.width,j.height),n.framebufferRenderbuffer(36160,36064+We,36161,de.__webglColorRenderbuffer[We])}n.bindRenderbuffer(36161,null),j.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),rt(de.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(36160,null)}}if(Le){t.bindTexture(34067,Ee.__webglTexture),ce(34067,U,lt);for(let he=0;he<6;he++)Te(de.__webglFramebuffer[he],j,U,36064,34069+he);D(U,lt)&&z(34067),t.unbindTexture()}else if(De){const he=j.texture;for(let We=0,Oe=he.length;We<Oe;We++){const Y=he[We],ue=i.get(Y);t.bindTexture(3553,ue.__webglTexture),ce(3553,Y,lt),Te(de.__webglFramebuffer,j,Y,36064+We,3553),D(Y,lt)&&z(3553)}t.unbindTexture()}else{let he=3553;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(l?he=j.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(he,Ee.__webglTexture),ce(he,U,lt),Te(de.__webglFramebuffer,j,U,36064,he),D(U,lt)&&z(he),t.unbindTexture()}j.depthBuffer&&me(j)}function Ne(j){const U=A(j)||l,de=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let Ee=0,Le=de.length;Ee<Le;Ee++){const De=de[Ee];if(D(De,U)){const lt=j.isWebGLCubeRenderTarget?34067:3553,he=i.get(De).__webglTexture;t.bindTexture(lt,he),z(lt),t.unbindTexture()}}}function dt(j){if(l&&j.samples>0&&Je(j)===!1){const U=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],de=j.width,Ee=j.height;let Le=16384;const De=[],lt=j.stencilBuffer?33306:36096,he=i.get(j),We=j.isWebGLMultipleRenderTargets===!0;if(We)for(let Oe=0;Oe<U.length;Oe++)t.bindFramebuffer(36160,he.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Oe,36161,null),t.bindFramebuffer(36160,he.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Oe,3553,null,0);t.bindFramebuffer(36008,he.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,he.__webglFramebuffer);for(let Oe=0;Oe<U.length;Oe++){De.push(36064+Oe),j.depthBuffer&&De.push(lt);const Y=he.__ignoreDepthValues!==void 0?he.__ignoreDepthValues:!1;if(Y===!1&&(j.depthBuffer&&(Le|=256),j.stencilBuffer&&(Le|=1024)),We&&n.framebufferRenderbuffer(36008,36064,36161,he.__webglColorRenderbuffer[Oe]),Y===!0&&(n.invalidateFramebuffer(36008,[lt]),n.invalidateFramebuffer(36009,[lt])),We){const ue=i.get(U[Oe]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ue,0)}n.blitFramebuffer(0,0,de,Ee,0,0,de,Ee,Le,9728),y&&n.invalidateFramebuffer(36008,De)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),We)for(let Oe=0;Oe<U.length;Oe++){t.bindFramebuffer(36160,he.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Oe,36161,he.__webglColorRenderbuffer[Oe]);const Y=i.get(U[Oe]).__webglTexture;t.bindFramebuffer(36160,he.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Oe,3553,Y,0)}t.bindFramebuffer(36009,he.__webglMultisampledFramebuffer)}}function Qe(j){return Math.min(m,j.samples)}function Je(j){const U=i.get(j);return l&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function Tt(j){const U=o.render.frame;w.get(j)!==U&&(w.set(j,U),j.update())}function kt(j,U){const de=j.encoding,Ee=j.format,Le=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===Hg||de!==vs&&(de===sn?l===!1?e.has("EXT_sRGB")===!0&&Ee===Br?(j.format=Hg,j.minFilter=_n,j.generateMipmaps=!1):U=Kx.sRGBToLinear(U):(Ee!==Br||Le!==Aa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",de)),U}this.allocateTextureUnit=O,this.resetTextureUnits=ne,this.setTexture2D=H,this.setTexture2DArray=$,this.setTexture3D=ie,this.setTextureCube=fe,this.rebindTextures=Ae,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=dt,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=Te,this.useMultisampledRTT=Je}function GC(n,e,t){const i=t.isWebGL2;function r(s,o=null){let l;if(s===Aa)return 5121;if(s===pC)return 32819;if(s===mC)return 32820;if(s===dC)return 5120;if(s===hC)return 5122;if(s===Xx)return 5123;if(s===fC)return 5124;if(s===pa)return 5125;if(s===Ur)return 5126;if(s===hs)return i?5131:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===gC)return 6406;if(s===Br)return 6408;if(s===_C)return 6409;if(s===yC)return 6410;if(s===Ma)return 6402;if(s===Zl)return 34041;if(s===xC)return 6403;if(s===vC)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===Hg)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===wC)return 36244;if(s===SC)return 33319;if(s===bC)return 33320;if(s===MC)return 36249;if(s===ag||s===lg||s===ug||s===cg)if(o===sn)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===ag)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===lg)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===ug)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===cg)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===ag)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===lg)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ug)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===cg)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ly||s===uy||s===cy||s===dy)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===ly)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===uy)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===cy)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===dy)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===EC)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===hy||s===fy)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===hy)return o===sn?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===fy)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===py||s===my||s===gy||s===vy||s===_y||s===yy||s===xy||s===wy||s===Sy||s===by||s===My||s===Ey||s===Cy||s===Py)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===py)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===my)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===gy)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===vy)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===_y)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===yy)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===xy)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===wy)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Sy)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===by)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===My)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Ey)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Cy)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Py)return o===sn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Ty)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===Ty)return o===sn?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Ul?i?34042:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class WC extends fn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Fc extends Ht{constructor(){super(),this.isGroup=!0,this.type="Group"}}const wD={type:"move"};class H0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Fc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Fc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Fc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const l=this._targetRay,d=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const S of e.hand.values()){const E=t.getJointPose(S,i);if(f.joints[S.jointName]===void 0){const C=new Fc;C.matrixAutoUpdate=!1,C.visible=!1,f.joints[S.jointName]=C,f.add(C)}const M=f.joints[S.jointName];E!==null&&(M.matrix.fromArray(E.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.jointRadius=E.radius),M.visible=E!==null}const g=f.joints["index-finger-tip"],m=f.joints["thumb-tip"],_=g.position.distanceTo(m.position),y=.02,w=.005;f.inputState.pinching&&_>y+w?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&_<=y-w&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(wD)))}return l!==null&&(l.visible=r!==null),d!==null&&(d.visible=s!==null),f!==null&&(f.visible=o!==null),this}}class jC extends On{constructor(e,t,i,r,s,o,l,d,f,g){if(g=g!==void 0?g:Ma,g!==Ma&&g!==Zl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&g===Ma&&(i=pa),i===void 0&&g===Zl&&(i=Ul),super(null,r,s,o,l,d,g,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:Nn,this.minFilter=d!==void 0?d:Nn,this.flipY=!1,this.generateMipmaps=!1}}class SD extends Vs{constructor(e,t){super();const i=this;let r=null,s=1,o=null,l="local-floor",d=null,f=null,g=null,m=null,_=null,y=null;const w=t.getContextAttributes();let S=null,E=null;const M=[],C=[],P=new fn;P.layers.enable(1),P.viewport=new qt;const A=new fn;A.layers.enable(2),A.viewport=new qt;const k=[P,A],D=new WC;D.layers.enable(1),D.layers.enable(2);let z=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let H=M[B];return H===void 0&&(H=new H0,M[B]=H),H.getTargetRaySpace()},this.getControllerGrip=function(B){let H=M[B];return H===void 0&&(H=new H0,M[B]=H),H.getGripSpace()},this.getHand=function(B){let H=M[B];return H===void 0&&(H=new H0,M[B]=H),H.getHandSpace()};function N(B){const H=C.indexOf(B.inputSource);if(H===-1)return;const $=M[H];$!==void 0&&$.dispatchEvent({type:B.type,data:B.inputSource})}function F(){r.removeEventListener("select",N),r.removeEventListener("selectstart",N),r.removeEventListener("selectend",N),r.removeEventListener("squeeze",N),r.removeEventListener("squeezestart",N),r.removeEventListener("squeezeend",N),r.removeEventListener("end",F),r.removeEventListener("inputsourceschange",q);for(let B=0;B<M.length;B++){const H=C[B];H!==null&&(C[B]=null,M[B].disconnect(H))}z=null,L=null,e.setRenderTarget(S),_=null,m=null,g=null,r=null,E=null,O.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){s=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){l=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(B){d=B},this.getBaseLayer=function(){return m!==null?m:_},this.getBinding=function(){return g},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(B){if(r=B,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",N),r.addEventListener("selectstart",N),r.addEventListener("selectend",N),r.addEventListener("squeeze",N),r.addEventListener("squeezestart",N),r.addEventListener("squeezeend",N),r.addEventListener("end",F),r.addEventListener("inputsourceschange",q),w.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const H={antialias:r.renderState.layers===void 0?w.antialias:!0,alpha:w.alpha,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};_=new XRWebGLLayer(r,t,H),r.updateRenderState({baseLayer:_}),E=new Wr(_.framebufferWidth,_.framebufferHeight,{format:Br,type:Aa,encoding:e.outputEncoding,stencilBuffer:w.stencil})}else{let H=null,$=null,ie=null;w.depth&&(ie=w.stencil?35056:33190,H=w.stencil?Zl:Ma,$=w.stencil?Ul:pa);const fe={colorFormat:32856,depthFormat:ie,scaleFactor:s};g=new XRWebGLBinding(r,t),m=g.createProjectionLayer(fe),r.updateRenderState({layers:[m]}),E=new Wr(m.textureWidth,m.textureHeight,{format:Br,type:Aa,depthTexture:new jC(m.textureWidth,m.textureHeight,$,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:w.stencil,encoding:e.outputEncoding,samples:w.antialias?4:0});const be=e.properties.get(E);be.__ignoreDepthValues=m.ignoreDepthValues}E.isXRRenderTarget=!0,this.setFoveation(1),d=null,o=await r.requestReferenceSpace(l),O.setContext(r),O.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function q(B){for(let H=0;H<B.removed.length;H++){const $=B.removed[H],ie=C.indexOf($);ie>=0&&(C[ie]=null,M[ie].dispatchEvent({type:"disconnected",data:$}))}for(let H=0;H<B.added.length;H++){const $=B.added[H];let ie=C.indexOf($);if(ie===-1){for(let be=0;be<M.length;be++)if(be>=C.length){C.push($),ie=be;break}else if(C[be]===null){C[be]=$,ie=be;break}if(ie===-1)break}const fe=M[ie];fe&&fe.dispatchEvent({type:"connected",data:$})}}const ge=new V,te=new V;function K(B,H,$){ge.setFromMatrixPosition(H.matrixWorld),te.setFromMatrixPosition($.matrixWorld);const ie=ge.distanceTo(te),fe=H.projectionMatrix.elements,be=$.projectionMatrix.elements,qe=fe[14]/(fe[10]-1),ce=fe[14]/(fe[10]+1),Ke=(fe[9]+1)/fe[5],tt=(fe[9]-1)/fe[5],nt=(fe[8]-1)/fe[0],Te=(be[8]+1)/be[0],rt=qe*nt,we=qe*Te,me=ie/(-nt+Te),Ae=me*-nt;H.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(Ae),B.translateZ(me),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const Ye=qe+me,Ne=ce+me,dt=rt-Ae,Qe=we+(ie-Ae),Je=Ke*ce/Ne*Ye,Tt=tt*ce/Ne*Ye;B.projectionMatrix.makePerspective(dt,Qe,Je,Tt,Ye,Ne)}function le(B,H){H===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(H.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(r===null)return;D.near=A.near=P.near=B.near,D.far=A.far=P.far=B.far,(z!==D.near||L!==D.far)&&(r.updateRenderState({depthNear:D.near,depthFar:D.far}),z=D.near,L=D.far);const H=B.parent,$=D.cameras;le(D,H);for(let fe=0;fe<$.length;fe++)le($[fe],H);D.matrixWorld.decompose(D.position,D.quaternion,D.scale),B.matrix.copy(D.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale);const ie=B.children;for(let fe=0,be=ie.length;fe<be;fe++)ie[fe].updateMatrixWorld(!0);$.length===2?K(D,P,A):D.projectionMatrix.copy(P.projectionMatrix)},this.getCamera=function(){return D},this.getFoveation=function(){if(m!==null)return m.fixedFoveation;if(_!==null)return _.fixedFoveation},this.setFoveation=function(B){m!==null&&(m.fixedFoveation=B),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=B)};let se=null;function ne(B,H){if(f=H.getViewerPose(d||o),y=H,f!==null){const $=f.views;_!==null&&(e.setRenderTargetFramebuffer(E,_.framebuffer),e.setRenderTarget(E));let ie=!1;$.length!==D.cameras.length&&(D.cameras.length=0,ie=!0);for(let fe=0;fe<$.length;fe++){const be=$[fe];let qe=null;if(_!==null)qe=_.getViewport(be);else{const Ke=g.getViewSubImage(m,be);qe=Ke.viewport,fe===0&&(e.setRenderTargetTextures(E,Ke.colorTexture,m.ignoreDepthValues?void 0:Ke.depthStencilTexture),e.setRenderTarget(E))}let ce=k[fe];ce===void 0&&(ce=new fn,ce.layers.enable(fe),ce.viewport=new qt,k[fe]=ce),ce.matrix.fromArray(be.transform.matrix),ce.projectionMatrix.fromArray(be.projectionMatrix),ce.viewport.set(qe.x,qe.y,qe.width,qe.height),fe===0&&D.matrix.copy(ce.matrix),ie===!0&&D.cameras.push(ce)}}for(let $=0;$<M.length;$++){const ie=C[$],fe=M[$];ie!==null&&fe!==void 0&&fe.update(ie,H,d||o)}se&&se(B,H),y=null}const O=new FC;O.setAnimationLoop(ne),this.setAnimationLoop=function(B){se=B},this.dispose=function(){}}}function bD(n,e){function t(S,E){S.fogColor.value.copy(E.color),E.isFog?(S.fogNear.value=E.near,S.fogFar.value=E.far):E.isFogExp2&&(S.fogDensity.value=E.density)}function i(S,E,M,C,P){E.isMeshBasicMaterial||E.isMeshLambertMaterial?r(S,E):E.isMeshToonMaterial?(r(S,E),g(S,E)):E.isMeshPhongMaterial?(r(S,E),f(S,E)):E.isMeshStandardMaterial?(r(S,E),m(S,E),E.isMeshPhysicalMaterial&&_(S,E,P)):E.isMeshMatcapMaterial?(r(S,E),y(S,E)):E.isMeshDepthMaterial?r(S,E):E.isMeshDistanceMaterial?(r(S,E),w(S,E)):E.isMeshNormalMaterial?r(S,E):E.isLineBasicMaterial?(s(S,E),E.isLineDashedMaterial&&o(S,E)):E.isPointsMaterial?l(S,E,M,C):E.isSpriteMaterial?d(S,E):E.isShadowMaterial?(S.color.value.copy(E.color),S.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function r(S,E){S.opacity.value=E.opacity,E.color&&S.diffuse.value.copy(E.color),E.emissive&&S.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(S.map.value=E.map),E.alphaMap&&(S.alphaMap.value=E.alphaMap),E.bumpMap&&(S.bumpMap.value=E.bumpMap,S.bumpScale.value=E.bumpScale,E.side===pr&&(S.bumpScale.value*=-1)),E.displacementMap&&(S.displacementMap.value=E.displacementMap,S.displacementScale.value=E.displacementScale,S.displacementBias.value=E.displacementBias),E.emissiveMap&&(S.emissiveMap.value=E.emissiveMap),E.normalMap&&(S.normalMap.value=E.normalMap,S.normalScale.value.copy(E.normalScale),E.side===pr&&S.normalScale.value.negate()),E.specularMap&&(S.specularMap.value=E.specularMap),E.alphaTest>0&&(S.alphaTest.value=E.alphaTest);const M=e.get(E).envMap;if(M&&(S.envMap.value=M,S.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=E.reflectivity,S.ior.value=E.ior,S.refractionRatio.value=E.refractionRatio),E.lightMap){S.lightMap.value=E.lightMap;const A=n.physicallyCorrectLights!==!0?Math.PI:1;S.lightMapIntensity.value=E.lightMapIntensity*A}E.aoMap&&(S.aoMap.value=E.aoMap,S.aoMapIntensity.value=E.aoMapIntensity);let C;E.map?C=E.map:E.specularMap?C=E.specularMap:E.displacementMap?C=E.displacementMap:E.normalMap?C=E.normalMap:E.bumpMap?C=E.bumpMap:E.roughnessMap?C=E.roughnessMap:E.metalnessMap?C=E.metalnessMap:E.alphaMap?C=E.alphaMap:E.emissiveMap?C=E.emissiveMap:E.clearcoatMap?C=E.clearcoatMap:E.clearcoatNormalMap?C=E.clearcoatNormalMap:E.clearcoatRoughnessMap?C=E.clearcoatRoughnessMap:E.iridescenceMap?C=E.iridescenceMap:E.iridescenceThicknessMap?C=E.iridescenceThicknessMap:E.specularIntensityMap?C=E.specularIntensityMap:E.specularColorMap?C=E.specularColorMap:E.transmissionMap?C=E.transmissionMap:E.thicknessMap?C=E.thicknessMap:E.sheenColorMap?C=E.sheenColorMap:E.sheenRoughnessMap&&(C=E.sheenRoughnessMap),C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),S.uvTransform.value.copy(C.matrix));let P;E.aoMap?P=E.aoMap:E.lightMap&&(P=E.lightMap),P!==void 0&&(P.isWebGLRenderTarget&&(P=P.texture),P.matrixAutoUpdate===!0&&P.updateMatrix(),S.uv2Transform.value.copy(P.matrix))}function s(S,E){S.diffuse.value.copy(E.color),S.opacity.value=E.opacity}function o(S,E){S.dashSize.value=E.dashSize,S.totalSize.value=E.dashSize+E.gapSize,S.scale.value=E.scale}function l(S,E,M,C){S.diffuse.value.copy(E.color),S.opacity.value=E.opacity,S.size.value=E.size*M,S.scale.value=C*.5,E.map&&(S.map.value=E.map),E.alphaMap&&(S.alphaMap.value=E.alphaMap),E.alphaTest>0&&(S.alphaTest.value=E.alphaTest);let P;E.map?P=E.map:E.alphaMap&&(P=E.alphaMap),P!==void 0&&(P.matrixAutoUpdate===!0&&P.updateMatrix(),S.uvTransform.value.copy(P.matrix))}function d(S,E){S.diffuse.value.copy(E.color),S.opacity.value=E.opacity,S.rotation.value=E.rotation,E.map&&(S.map.value=E.map),E.alphaMap&&(S.alphaMap.value=E.alphaMap),E.alphaTest>0&&(S.alphaTest.value=E.alphaTest);let M;E.map?M=E.map:E.alphaMap&&(M=E.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),S.uvTransform.value.copy(M.matrix))}function f(S,E){S.specular.value.copy(E.specular),S.shininess.value=Math.max(E.shininess,1e-4)}function g(S,E){E.gradientMap&&(S.gradientMap.value=E.gradientMap)}function m(S,E){S.roughness.value=E.roughness,S.metalness.value=E.metalness,E.roughnessMap&&(S.roughnessMap.value=E.roughnessMap),E.metalnessMap&&(S.metalnessMap.value=E.metalnessMap),e.get(E).envMap&&(S.envMapIntensity.value=E.envMapIntensity)}function _(S,E,M){S.ior.value=E.ior,E.sheen>0&&(S.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),S.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(S.sheenColorMap.value=E.sheenColorMap),E.sheenRoughnessMap&&(S.sheenRoughnessMap.value=E.sheenRoughnessMap)),E.clearcoat>0&&(S.clearcoat.value=E.clearcoat,S.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(S.clearcoatMap.value=E.clearcoatMap),E.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap),E.clearcoatNormalMap&&(S.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),S.clearcoatNormalMap.value=E.clearcoatNormalMap,E.side===pr&&S.clearcoatNormalScale.value.negate())),E.iridescence>0&&(S.iridescence.value=E.iridescence,S.iridescenceIOR.value=E.iridescenceIOR,S.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(S.iridescenceMap.value=E.iridescenceMap),E.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=E.iridescenceThicknessMap)),E.transmission>0&&(S.transmission.value=E.transmission,S.transmissionSamplerMap.value=M.texture,S.transmissionSamplerSize.value.set(M.width,M.height),E.transmissionMap&&(S.transmissionMap.value=E.transmissionMap),S.thickness.value=E.thickness,E.thicknessMap&&(S.thicknessMap.value=E.thicknessMap),S.attenuationDistance.value=E.attenuationDistance,S.attenuationColor.value.copy(E.attenuationColor)),S.specularIntensity.value=E.specularIntensity,S.specularColor.value.copy(E.specularColor),E.specularIntensityMap&&(S.specularIntensityMap.value=E.specularIntensityMap),E.specularColorMap&&(S.specularColorMap.value=E.specularColorMap)}function y(S,E){E.matcap&&(S.matcap.value=E.matcap)}function w(S,E){S.referencePosition.value.copy(E.referencePosition),S.nearDistance.value=E.nearDistance,S.farDistance.value=E.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function MD(n,e,t,i){let r={},s={},o=[];const l=t.isWebGL2?n.getParameter(35375):0;function d(C,P){const A=P.program;i.uniformBlockBinding(C,A)}function f(C,P){let A=r[C.id];A===void 0&&(w(C),A=g(C),r[C.id]=A,C.addEventListener("dispose",E));const k=P.program;i.updateUBOMapping(C,k);const D=e.render.frame;s[C.id]!==D&&(_(C),s[C.id]=D)}function g(C){const P=m();C.__bindingPointIndex=P;const A=n.createBuffer(),k=C.__size,D=C.usage;return n.bindBuffer(35345,A),n.bufferData(35345,k,D),n.bindBuffer(35345,null),n.bindBufferBase(35345,P,A),A}function m(){for(let C=0;C<l;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(C){const P=r[C.id],A=C.uniforms,k=C.__cache;n.bindBuffer(35345,P);for(let D=0,z=A.length;D<z;D++){const L=A[D];if(y(L,D,k)===!0){const N=L.value,F=L.__offset;typeof N=="number"?(L.__data[0]=N,n.bufferSubData(35345,F,L.__data)):(L.value.isMatrix3?(L.__data[0]=L.value.elements[0],L.__data[1]=L.value.elements[1],L.__data[2]=L.value.elements[2],L.__data[3]=L.value.elements[0],L.__data[4]=L.value.elements[3],L.__data[5]=L.value.elements[4],L.__data[6]=L.value.elements[5],L.__data[7]=L.value.elements[0],L.__data[8]=L.value.elements[6],L.__data[9]=L.value.elements[7],L.__data[10]=L.value.elements[8],L.__data[11]=L.value.elements[0]):N.toArray(L.__data),n.bufferSubData(35345,F,L.__data))}}n.bindBuffer(35345,null)}function y(C,P,A){const k=C.value;if(A[P]===void 0)return typeof k=="number"?A[P]=k:A[P]=k.clone(),!0;if(typeof k=="number"){if(A[P]!==k)return A[P]=k,!0}else{const D=A[P];if(D.equals(k)===!1)return D.copy(k),!0}return!1}function w(C){const P=C.uniforms;let A=0;const k=16;let D=0;for(let z=0,L=P.length;z<L;z++){const N=P[z],F=S(N);if(N.__data=new Float32Array(F.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=A,z>0){D=A%k;const q=k-D;D!==0&&q-F.boundary<0&&(A+=k-D,N.__offset=A)}A+=F.storage}return D=A%k,D>0&&(A+=k-D),C.__size=A,C.__cache={},this}function S(C){const P=C.value,A={boundary:0,storage:0};return typeof P=="number"?(A.boundary=4,A.storage=4):P.isVector2?(A.boundary=8,A.storage=8):P.isVector3||P.isColor?(A.boundary=16,A.storage=12):P.isVector4?(A.boundary=16,A.storage=16):P.isMatrix3?(A.boundary=48,A.storage=48):P.isMatrix4?(A.boundary=64,A.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),A}function E(C){const P=C.target;P.removeEventListener("dispose",E);const A=o.indexOf(P.__bindingPointIndex);o.splice(A,1),n.deleteBuffer(r[P.id]),delete r[P.id],delete s[P.id]}function M(){for(const C in r)n.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:d,update:f,dispose:M}}function ED(){const n=cf("canvas");return n.style.display="block",n}function nw(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:ED(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,d=n.powerPreference!==void 0?n.powerPreference:"default",f=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let g;t!==null?g=t.getContextAttributes().alpha:g=n.alpha!==void 0?n.alpha:!1;let m=null,_=null;const y=[],w=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=vs,this.physicallyCorrectLights=!1,this.toneMapping=ms,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const S=this;let E=!1,M=0,C=0,P=null,A=-1,k=null;const D=new qt,z=new qt;let L=null,N=e.width,F=e.height,q=1,ge=null,te=null;const K=new qt(0,0,N,F),le=new qt(0,0,N,F);let se=!1;const ne=new dv;let O=!1,B=!1,H=null;const $=new St,ie=new Se,fe=new V,be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function qe(){return P===null?q:1}let ce=t;function Ke(G,oe){for(let ye=0;ye<G.length;ye++){const re=G[ye],xe=e.getContext(re,oe);if(xe!==null)return xe}return null}try{const G={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${av}`),e.addEventListener("webglcontextlost",Pe,!1),e.addEventListener("webglcontextrestored",Ve,!1),e.addEventListener("webglcontextcreationerror",ft,!1),ce===null){const oe=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&oe.shift(),ce=Ke(oe,G),ce===null)throw Ke(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ce.getShaderPrecisionFormat===void 0&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let tt,nt,Te,rt,we,me,Ae,Ye,Ne,dt,Qe,Je,Tt,kt,j,U,de,Ee,Le,De,lt,he,We,Oe;function Y(){tt=new Vk(ce),nt=new Nk(ce,tt,n),tt.init(nt),he=new GC(ce,tt,nt),Te=new yD(ce,tt,nt),rt=new Wk,we=new aD,me=new xD(ce,tt,Te,we,nt,he,rt),Ae=new Ok(S),Ye=new Bk(S),Ne=new tL(ce,nt),We=new Ik(ce,tt,Ne,nt),dt=new Hk(ce,Ne,rt,We),Qe=new Yk(ce,dt,Ne,rt),Le=new qk(ce,nt,me),U=new zk(we),Je=new oD(S,Ae,Ye,tt,nt,We,U),Tt=new bD(S,we),kt=new uD,j=new mD(tt,nt),Ee=new kk(S,Ae,Te,Qe,g,o),de=new _D(S,Qe,nt),Oe=new MD(ce,rt,nt,Te),De=new Dk(ce,tt,rt,nt),lt=new Gk(ce,tt,rt,nt),rt.programs=Je.programs,S.capabilities=nt,S.extensions=tt,S.properties=we,S.renderLists=kt,S.shadowMap=de,S.state=Te,S.info=rt}Y();const ue=new SD(S,ce);this.xr=ue,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const G=tt.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=tt.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(G){G!==void 0&&(q=G,this.setSize(N,F,!1))},this.getSize=function(G){return G.set(N,F)},this.setSize=function(G,oe,ye){if(ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}N=G,F=oe,e.width=Math.floor(G*q),e.height=Math.floor(oe*q),ye!==!1&&(e.style.width=G+"px",e.style.height=oe+"px"),this.setViewport(0,0,G,oe)},this.getDrawingBufferSize=function(G){return G.set(N*q,F*q).floor()},this.setDrawingBufferSize=function(G,oe,ye){N=G,F=oe,q=ye,e.width=Math.floor(G*ye),e.height=Math.floor(oe*ye),this.setViewport(0,0,G,oe)},this.getCurrentViewport=function(G){return G.copy(D)},this.getViewport=function(G){return G.copy(K)},this.setViewport=function(G,oe,ye,re){G.isVector4?K.set(G.x,G.y,G.z,G.w):K.set(G,oe,ye,re),Te.viewport(D.copy(K).multiplyScalar(q).floor())},this.getScissor=function(G){return G.copy(le)},this.setScissor=function(G,oe,ye,re){G.isVector4?le.set(G.x,G.y,G.z,G.w):le.set(G,oe,ye,re),Te.scissor(z.copy(le).multiplyScalar(q).floor())},this.getScissorTest=function(){return se},this.setScissorTest=function(G){Te.setScissorTest(se=G)},this.setOpaqueSort=function(G){ge=G},this.setTransparentSort=function(G){te=G},this.getClearColor=function(G){return G.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function(G=!0,oe=!0,ye=!0){let re=0;G&&(re|=16384),oe&&(re|=256),ye&&(re|=1024),ce.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Pe,!1),e.removeEventListener("webglcontextrestored",Ve,!1),e.removeEventListener("webglcontextcreationerror",ft,!1),kt.dispose(),j.dispose(),we.dispose(),Ae.dispose(),Ye.dispose(),Qe.dispose(),We.dispose(),Oe.dispose(),Je.dispose(),ue.dispose(),ue.removeEventListener("sessionstart",ht),ue.removeEventListener("sessionend",un),H&&(H.dispose(),H=null),Nt.stop()};function Pe(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Ve(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const G=rt.autoReset,oe=de.enabled,ye=de.autoUpdate,re=de.needsUpdate,xe=de.type;Y(),rt.autoReset=G,de.enabled=oe,de.autoUpdate=ye,de.needsUpdate=re,de.type=xe}function ft(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function Z(G){const oe=G.target;oe.removeEventListener("dispose",Z),Ue(oe)}function Ue(G){_e(G),we.remove(G)}function _e(G){const oe=we.get(G).programs;oe!==void 0&&(oe.forEach(function(ye){Je.releaseProgram(ye)}),G.isShaderMaterial&&Je.releaseShaderCache(G))}this.renderBufferDirect=function(G,oe,ye,re,xe,st){oe===null&&(oe=be);const ut=xe.isMesh&&xe.matrixWorld.determinant()<0,_t=gd(G,oe,ye,re,xe);Te.setMaterial(re,ut);let at=ye.index;const It=ye.attributes.position;if(at===null){if(It===void 0||It.count===0)return}else if(at.count===0)return;let Ct=1;re.wireframe===!0&&(at=dt.getWireframeAttribute(ye),Ct=2),We.setup(xe,re,_t,ye,at);let At,Jt=De;at!==null&&(At=Ne.get(at),Jt=lt,Jt.setIndex(At));const jr=at!==null?at.count:It.count,Ss=ye.drawRange.start*Ct,Xr=ye.drawRange.count*Ct,pn=st!==null?st.start*Ct:0,yt=st!==null?st.count*Ct:1/0,xr=Math.max(Ss,pn),nn=Math.min(jr,Ss+Xr,pn+yt)-1,Zn=Math.max(0,nn-xr+1);if(Zn!==0){if(xe.isMesh)re.wireframe===!0?(Te.setLineWidth(re.wireframeLinewidth*qe()),Jt.setMode(1)):Jt.setMode(4);else if(xe.isLine){let wi=re.linewidth;wi===void 0&&(wi=1),Te.setLineWidth(wi*qe()),xe.isLineSegments?Jt.setMode(1):xe.isLineLoop?Jt.setMode(2):Jt.setMode(3)}else xe.isPoints?Jt.setMode(0):xe.isSprite&&Jt.setMode(4);if(xe.isInstancedMesh)Jt.renderInstances(xr,Zn,xe.count);else if(ye.isInstancedBufferGeometry){const wi=Math.min(ye.instanceCount,ye._maxInstanceCount);Jt.renderInstances(xr,Zn,wi)}else Jt.render(xr,Zn)}},this.compile=function(G,oe){function ye(re,xe,st){re.transparent===!0&&re.side===Os?(re.side=pr,re.needsUpdate=!0,ws(re,xe,st),re.side=Kl,re.needsUpdate=!0,ws(re,xe,st),re.side=Os):ws(re,xe,st)}_=j.get(G),_.init(),w.push(_),G.traverseVisible(function(re){re.isLight&&re.layers.test(oe.layers)&&(_.pushLight(re),re.castShadow&&_.pushShadow(re))}),_.setupLights(S.physicallyCorrectLights),G.traverse(function(re){const xe=re.material;if(xe)if(Array.isArray(xe))for(let st=0;st<xe.length;st++){const ut=xe[st];ye(ut,G,re)}else ye(xe,G,re)}),w.pop(),_=null};let Ie=null;function ke(G){Ie&&Ie(G)}function ht(){Nt.stop()}function un(){Nt.start()}const Nt=new FC;Nt.setAnimationLoop(ke),typeof self<"u"&&Nt.setContext(self),this.setAnimationLoop=function(G){Ie=G,ue.setAnimationLoop(G),G===null?Nt.stop():Nt.start()},ue.addEventListener("sessionstart",ht),ue.addEventListener("sessionend",un),this.render=function(G,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),ue.enabled===!0&&ue.isPresenting===!0&&(ue.cameraAutoUpdate===!0&&ue.updateCamera(oe),oe=ue.getCamera()),G.isScene===!0&&G.onBeforeRender(S,G,oe,P),_=j.get(G,w.length),_.init(),w.push(_),$.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),ne.setFromProjectionMatrix($),B=this.localClippingEnabled,O=U.init(this.clippingPlanes,B,oe),m=kt.get(G,y.length),m.init(),y.push(m),Ki(G,oe,0,S.sortObjects),m.finish(),S.sortObjects===!0&&m.sort(ge,te),O===!0&&U.beginShadows();const ye=_.state.shadowsArray;if(de.render(ye,G,oe),O===!0&&U.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ee.render(m,G),_.setupLights(S.physicallyCorrectLights),oe.isArrayCamera){const re=oe.cameras;for(let xe=0,st=re.length;xe<st;xe++){const ut=re[xe];jt(m,G,ut,ut.viewport)}}else jt(m,G,oe);P!==null&&(me.updateMultisampleRenderTarget(P),me.updateRenderTargetMipmap(P)),G.isScene===!0&&G.onAfterRender(S,G,oe),We.resetDefaultState(),A=-1,k=null,w.pop(),w.length>0?_=w[w.length-1]:_=null,y.pop(),y.length>0?m=y[y.length-1]:m=null};function Ki(G,oe,ye,re){if(G.visible===!1)return;if(G.layers.test(oe.layers)){if(G.isGroup)ye=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(oe);else if(G.isLight)_.pushLight(G),G.castShadow&&_.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||ne.intersectsSprite(G)){re&&fe.setFromMatrixPosition(G.matrixWorld).applyMatrix4($);const ut=Qe.update(G),_t=G.material;_t.visible&&m.push(G,ut,_t,ye,fe.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(G.isSkinnedMesh&&G.skeleton.frame!==rt.render.frame&&(G.skeleton.update(),G.skeleton.frame=rt.render.frame),!G.frustumCulled||ne.intersectsObject(G))){re&&fe.setFromMatrixPosition(G.matrixWorld).applyMatrix4($);const ut=Qe.update(G),_t=G.material;if(Array.isArray(_t)){const at=ut.groups;for(let It=0,Ct=at.length;It<Ct;It++){const At=at[It],Jt=_t[At.materialIndex];Jt&&Jt.visible&&m.push(G,ut,Jt,ye,fe.z,At)}}else _t.visible&&m.push(G,ut,_t,ye,fe.z,null)}}const st=G.children;for(let ut=0,_t=st.length;ut<_t;ut++)Ki(st[ut],oe,ye,re)}function jt(G,oe,ye,re){const xe=G.opaque,st=G.transmissive,ut=G.transparent;_.setupLightsView(ye),st.length>0&&xi(xe,oe,ye),re&&Te.viewport(D.copy(re)),xe.length>0&&kn(xe,oe,ye),st.length>0&&kn(st,oe,ye),ut.length>0&&kn(ut,oe,ye),Te.buffers.depth.setTest(!0),Te.buffers.depth.setMask(!0),Te.buffers.color.setMask(!0),Te.setPolygonOffset(!1)}function xi(G,oe,ye){const re=nt.isWebGL2;H===null&&(H=new Wr(1,1,{generateMipmaps:!0,type:tt.has("EXT_color_buffer_half_float")?hs:Aa,minFilter:tu,samples:re&&s===!0?4:0})),S.getDrawingBufferSize(ie),re?H.setSize(ie.x,ie.y):H.setSize(Gg(ie.x),Gg(ie.y));const xe=S.getRenderTarget();S.setRenderTarget(H),S.clear();const st=S.toneMapping;S.toneMapping=ms,kn(G,oe,ye),S.toneMapping=st,me.updateMultisampleRenderTarget(H),me.updateRenderTargetMipmap(H),S.setRenderTarget(xe)}function kn(G,oe,ye){const re=oe.isScene===!0?oe.overrideMaterial:null;for(let xe=0,st=G.length;xe<st;xe++){const ut=G[xe],_t=ut.object,at=ut.geometry,It=re===null?ut.material:re,Ct=ut.group;_t.layers.test(ye.layers)&&Mo(_t,oe,ye,at,It,Ct)}}function Mo(G,oe,ye,re,xe,st){G.onBeforeRender(S,oe,ye,re,xe,st),G.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),xe.onBeforeRender(S,oe,ye,re,G,st),xe.transparent===!0&&xe.side===Os?(xe.side=pr,xe.needsUpdate=!0,S.renderBufferDirect(ye,oe,re,xe,G,st),xe.side=Kl,xe.needsUpdate=!0,S.renderBufferDirect(ye,oe,re,xe,G,st),xe.side=Os):S.renderBufferDirect(ye,oe,re,xe,G,st),G.onAfterRender(S,oe,ye,re,xe,st)}function ws(G,oe,ye){oe.isScene!==!0&&(oe=be);const re=we.get(G),xe=_.state.lights,st=_.state.shadowsArray,ut=xe.state.version,_t=Je.getParameters(G,xe.state,st,oe,ye),at=Je.getProgramCacheKey(_t);let It=re.programs;re.environment=G.isMeshStandardMaterial?oe.environment:null,re.fog=oe.fog,re.envMap=(G.isMeshStandardMaterial?Ye:Ae).get(G.envMap||re.environment),It===void 0&&(G.addEventListener("dispose",Z),It=new Map,re.programs=It);let Ct=It.get(at);if(Ct!==void 0){if(re.currentProgram===Ct&&re.lightsStateVersion===ut)return lu(G,_t),Ct}else _t.uniforms=Je.getUniforms(G),G.onBuild(ye,_t,S),G.onBeforeCompile(_t,S),Ct=Je.acquireProgram(_t,at),It.set(at,Ct),re.uniforms=_t.uniforms;const At=re.uniforms;(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(At.clippingPlanes=U.uniform),lu(G,_t),re.needsLights=Ua(G),re.lightsStateVersion=ut,re.needsLights&&(At.ambientLightColor.value=xe.state.ambient,At.lightProbe.value=xe.state.probe,At.directionalLights.value=xe.state.directional,At.directionalLightShadows.value=xe.state.directionalShadow,At.spotLights.value=xe.state.spot,At.spotLightShadows.value=xe.state.spotShadow,At.rectAreaLights.value=xe.state.rectArea,At.ltc_1.value=xe.state.rectAreaLTC1,At.ltc_2.value=xe.state.rectAreaLTC2,At.pointLights.value=xe.state.point,At.pointLightShadows.value=xe.state.pointShadow,At.hemisphereLights.value=xe.state.hemi,At.directionalShadowMap.value=xe.state.directionalShadowMap,At.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,At.spotShadowMap.value=xe.state.spotShadowMap,At.spotLightMatrix.value=xe.state.spotLightMatrix,At.spotLightMap.value=xe.state.spotLightMap,At.pointShadowMap.value=xe.state.pointShadowMap,At.pointShadowMatrix.value=xe.state.pointShadowMatrix);const Jt=Ct.getUniforms(),jr=pg.seqWithValue(Jt.seq,At);return re.currentProgram=Ct,re.uniformsList=jr,Ct}function lu(G,oe){const ye=we.get(G);ye.outputEncoding=oe.outputEncoding,ye.instancing=oe.instancing,ye.skinning=oe.skinning,ye.morphTargets=oe.morphTargets,ye.morphNormals=oe.morphNormals,ye.morphColors=oe.morphColors,ye.morphTargetsCount=oe.morphTargetsCount,ye.numClippingPlanes=oe.numClippingPlanes,ye.numIntersection=oe.numClipIntersection,ye.vertexAlphas=oe.vertexAlphas,ye.vertexTangents=oe.vertexTangents,ye.toneMapping=oe.toneMapping}function gd(G,oe,ye,re,xe){oe.isScene!==!0&&(oe=be),me.resetTextureUnits();const st=oe.fog,ut=re.isMeshStandardMaterial?oe.environment:null,_t=P===null?S.outputEncoding:P.isXRRenderTarget===!0?P.texture.encoding:vs,at=(re.isMeshStandardMaterial?Ye:Ae).get(re.envMap||ut),It=re.vertexColors===!0&&!!ye.attributes.color&&ye.attributes.color.itemSize===4,Ct=!!re.normalMap&&!!ye.attributes.tangent,At=!!ye.morphAttributes.position,Jt=!!ye.morphAttributes.normal,jr=!!ye.morphAttributes.color,Ss=re.toneMapped?S.toneMapping:ms,Xr=ye.morphAttributes.position||ye.morphAttributes.normal||ye.morphAttributes.color,pn=Xr!==void 0?Xr.length:0,yt=we.get(re),xr=_.state.lights;if(O===!0&&(B===!0||G!==k)){const zt=G===k&&re.id===A;U.setState(re,G,zt)}let nn=!1;re.version===yt.__version?(yt.needsLights&&yt.lightsStateVersion!==xr.state.version||yt.outputEncoding!==_t||xe.isInstancedMesh&&yt.instancing===!1||!xe.isInstancedMesh&&yt.instancing===!0||xe.isSkinnedMesh&&yt.skinning===!1||!xe.isSkinnedMesh&&yt.skinning===!0||yt.envMap!==at||re.fog===!0&&yt.fog!==st||yt.numClippingPlanes!==void 0&&(yt.numClippingPlanes!==U.numPlanes||yt.numIntersection!==U.numIntersection)||yt.vertexAlphas!==It||yt.vertexTangents!==Ct||yt.morphTargets!==At||yt.morphNormals!==Jt||yt.morphColors!==jr||yt.toneMapping!==Ss||nt.isWebGL2===!0&&yt.morphTargetsCount!==pn)&&(nn=!0):(nn=!0,yt.__version=re.version);let Zn=yt.currentProgram;nn===!0&&(Zn=ws(re,oe,xe));let wi=!1,Si=!1,bi=!1;const pt=Zn.getUniforms(),Et=yt.uniforms;if(Te.useProgram(Zn.program)&&(wi=!0,Si=!0,bi=!0),re.id!==A&&(A=re.id,Si=!0),wi||k!==G){if(pt.setValue(ce,"projectionMatrix",G.projectionMatrix),nt.logarithmicDepthBuffer&&pt.setValue(ce,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),k!==G&&(k=G,Si=!0,bi=!0),re.isShaderMaterial||re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshStandardMaterial||re.envMap){const zt=pt.map.cameraPosition;zt!==void 0&&zt.setValue(ce,fe.setFromMatrixPosition(G.matrixWorld))}(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&pt.setValue(ce,"isOrthographic",G.isOrthographicCamera===!0),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial||re.isShadowMaterial||xe.isSkinnedMesh)&&pt.setValue(ce,"viewMatrix",G.matrixWorldInverse)}if(xe.isSkinnedMesh){pt.setOptional(ce,xe,"bindMatrix"),pt.setOptional(ce,xe,"bindMatrixInverse");const zt=xe.skeleton;zt&&(nt.floatVertexTextures?(zt.boneTexture===null&&zt.computeBoneTexture(),pt.setValue(ce,"boneTexture",zt.boneTexture,me),pt.setValue(ce,"boneTextureSize",zt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const zi=ye.morphAttributes;if((zi.position!==void 0||zi.normal!==void 0||zi.color!==void 0&&nt.isWebGL2===!0)&&Le.update(xe,ye,re,Zn),(Si||yt.receiveShadow!==xe.receiveShadow)&&(yt.receiveShadow=xe.receiveShadow,pt.setValue(ce,"receiveShadow",xe.receiveShadow)),re.isMeshGouraudMaterial&&re.envMap!==null&&(Et.envMap.value=at,Et.flipEnvMap.value=at.isCubeTexture&&at.isRenderTargetTexture===!1?-1:1),Si&&(pt.setValue(ce,"toneMappingExposure",S.toneMappingExposure),yt.needsLights&&uu(Et,bi),st&&re.fog===!0&&Tt.refreshFogUniforms(Et,st),Tt.refreshMaterialUniforms(Et,re,q,F,H),pg.upload(ce,yt.uniformsList,Et,me)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(pg.upload(ce,yt.uniformsList,Et,me),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&pt.setValue(ce,"center",xe.center),pt.setValue(ce,"modelViewMatrix",xe.modelViewMatrix),pt.setValue(ce,"normalMatrix",xe.normalMatrix),pt.setValue(ce,"modelMatrix",xe.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const zt=re.uniformsGroups;for(let Pn=0,qr=zt.length;Pn<qr;Pn++)if(nt.isWebGL2){const Yr=zt[Pn];Oe.update(Yr,Zn),Oe.bind(Yr,Zn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Zn}function uu(G,oe){G.ambientLightColor.needsUpdate=oe,G.lightProbe.needsUpdate=oe,G.directionalLights.needsUpdate=oe,G.directionalLightShadows.needsUpdate=oe,G.pointLights.needsUpdate=oe,G.pointLightShadows.needsUpdate=oe,G.spotLights.needsUpdate=oe,G.spotLightShadows.needsUpdate=oe,G.rectAreaLights.needsUpdate=oe,G.hemisphereLights.needsUpdate=oe}function Ua(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(G,oe,ye){we.get(G.texture).__webglTexture=oe,we.get(G.depthTexture).__webglTexture=ye;const re=we.get(G);re.__hasExternalTextures=!0,re.__hasExternalTextures&&(re.__autoAllocateDepthBuffer=ye===void 0,re.__autoAllocateDepthBuffer||tt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,oe){const ye=we.get(G);ye.__webglFramebuffer=oe,ye.__useDefaultFramebuffer=oe===void 0},this.setRenderTarget=function(G,oe=0,ye=0){P=G,M=oe,C=ye;let re=!0;if(G){const at=we.get(G);at.__useDefaultFramebuffer!==void 0?(Te.bindFramebuffer(36160,null),re=!1):at.__webglFramebuffer===void 0?me.setupRenderTarget(G):at.__hasExternalTextures&&me.rebindTextures(G,we.get(G.texture).__webglTexture,we.get(G.depthTexture).__webglTexture)}let xe=null,st=!1,ut=!1;if(G){const at=G.texture;(at.isData3DTexture||at.isDataArrayTexture)&&(ut=!0);const It=we.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(xe=It[oe],st=!0):nt.isWebGL2&&G.samples>0&&me.useMultisampledRTT(G)===!1?xe=we.get(G).__webglMultisampledFramebuffer:xe=It,D.copy(G.viewport),z.copy(G.scissor),L=G.scissorTest}else D.copy(K).multiplyScalar(q).floor(),z.copy(le).multiplyScalar(q).floor(),L=se;if(Te.bindFramebuffer(36160,xe)&&nt.drawBuffers&&re&&Te.drawBuffers(G,xe),Te.viewport(D),Te.scissor(z),Te.setScissorTest(L),st){const at=we.get(G.texture);ce.framebufferTexture2D(36160,36064,34069+oe,at.__webglTexture,ye)}else if(ut){const at=we.get(G.texture),It=oe||0;ce.framebufferTextureLayer(36160,36064,at.__webglTexture,ye||0,It)}A=-1},this.readRenderTargetPixels=function(G,oe,ye,re,xe,st,ut){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _t=we.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&ut!==void 0&&(_t=_t[ut]),_t){Te.bindFramebuffer(36160,_t);try{const at=G.texture,It=at.format,Ct=at.type;if(It!==Br&&he.convert(It)!==ce.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const At=Ct===hs&&(tt.has("EXT_color_buffer_half_float")||nt.isWebGL2&&tt.has("EXT_color_buffer_float"));if(Ct!==Aa&&he.convert(Ct)!==ce.getParameter(35738)&&!(Ct===Ur&&(nt.isWebGL2||tt.has("OES_texture_float")||tt.has("WEBGL_color_buffer_float")))&&!At){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=G.width-re&&ye>=0&&ye<=G.height-xe&&ce.readPixels(oe,ye,re,xe,he.convert(It),he.convert(Ct),st)}finally{const at=P!==null?we.get(P).__webglFramebuffer:null;Te.bindFramebuffer(36160,at)}}},this.copyFramebufferToTexture=function(G,oe,ye=0){const re=Math.pow(2,-ye),xe=Math.floor(oe.image.width*re),st=Math.floor(oe.image.height*re);me.setTexture2D(oe,0),ce.copyTexSubImage2D(3553,ye,0,0,G.x,G.y,xe,st),Te.unbindTexture()},this.copyTextureToTexture=function(G,oe,ye,re=0){const xe=oe.image.width,st=oe.image.height,ut=he.convert(ye.format),_t=he.convert(ye.type);me.setTexture2D(ye,0),ce.pixelStorei(37440,ye.flipY),ce.pixelStorei(37441,ye.premultiplyAlpha),ce.pixelStorei(3317,ye.unpackAlignment),oe.isDataTexture?ce.texSubImage2D(3553,re,G.x,G.y,xe,st,ut,_t,oe.image.data):oe.isCompressedTexture?ce.compressedTexSubImage2D(3553,re,G.x,G.y,oe.mipmaps[0].width,oe.mipmaps[0].height,ut,oe.mipmaps[0].data):ce.texSubImage2D(3553,re,G.x,G.y,ut,_t,oe.image),re===0&&ye.generateMipmaps&&ce.generateMipmap(3553),Te.unbindTexture()},this.copyTextureToTexture3D=function(G,oe,ye,re,xe=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const st=G.max.x-G.min.x+1,ut=G.max.y-G.min.y+1,_t=G.max.z-G.min.z+1,at=he.convert(re.format),It=he.convert(re.type);let Ct;if(re.isData3DTexture)me.setTexture3D(re,0),Ct=32879;else if(re.isDataArrayTexture)me.setTexture2DArray(re,0),Ct=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ce.pixelStorei(37440,re.flipY),ce.pixelStorei(37441,re.premultiplyAlpha),ce.pixelStorei(3317,re.unpackAlignment);const At=ce.getParameter(3314),Jt=ce.getParameter(32878),jr=ce.getParameter(3316),Ss=ce.getParameter(3315),Xr=ce.getParameter(32877),pn=ye.isCompressedTexture?ye.mipmaps[0]:ye.image;ce.pixelStorei(3314,pn.width),ce.pixelStorei(32878,pn.height),ce.pixelStorei(3316,G.min.x),ce.pixelStorei(3315,G.min.y),ce.pixelStorei(32877,G.min.z),ye.isDataTexture||ye.isData3DTexture?ce.texSubImage3D(Ct,xe,oe.x,oe.y,oe.z,st,ut,_t,at,It,pn.data):ye.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ce.compressedTexSubImage3D(Ct,xe,oe.x,oe.y,oe.z,st,ut,_t,at,pn.data)):ce.texSubImage3D(Ct,xe,oe.x,oe.y,oe.z,st,ut,_t,at,It,pn),ce.pixelStorei(3314,At),ce.pixelStorei(32878,Jt),ce.pixelStorei(3316,jr),ce.pixelStorei(3315,Ss),ce.pixelStorei(32877,Xr),xe===0&&re.generateMipmaps&&ce.generateMipmap(Ct),Te.unbindTexture()},this.initTexture=function(G){G.isCubeTexture?me.setTextureCube(G,0):G.isData3DTexture?me.setTexture3D(G,0):G.isDataArrayTexture?me.setTexture2DArray(G,0):me.setTexture2D(G,0),Te.unbindTexture()},this.resetState=function(){M=0,C=0,P=null,Te.reset(),We.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class XC extends nw{}XC.prototype.isWebGL1Renderer=!0;class fv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ge(e),this.density=t}clone(){return new fv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class pv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ge(e),this.near=t,this.far=i}clone(){return new pv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class mv extends Ht{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class gv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=lf,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=mr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Pi=new V;class Jl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.applyMatrix4(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.applyNormalMatrix(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.transformDirection(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}setX(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=fo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=fo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=fo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=fo(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),i=en(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),i=en(i,this.array),r=en(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),i=en(i,this.array),r=en(r,this.array),s=en(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new tn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Jl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class iw extends si{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gc;const fh=new V,vc=new V,_c=new V,yc=new Se,ph=new Se,qC=new St,Cm=new V,mh=new V,Pm=new V,PS=new Se,G0=new Se,TS=new Se;class YC extends Ht{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",gc===void 0){gc=new Mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new gv(t,5);gc.setIndex([0,1,2,0,2,3]),gc.setAttribute("position",new Jl(i,3,0,!1)),gc.setAttribute("uv",new Jl(i,2,3,!1))}this.geometry=gc,this.material=e!==void 0?e:new iw,this.center=new Se(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),vc.setFromMatrixScale(this.matrixWorld),qC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_c.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&vc.multiplyScalar(-_c.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Tm(Cm.set(-.5,-.5,0),_c,o,vc,r,s),Tm(mh.set(.5,-.5,0),_c,o,vc,r,s),Tm(Pm.set(.5,.5,0),_c,o,vc,r,s),PS.set(0,0),G0.set(1,0),TS.set(1,1);let l=e.ray.intersectTriangle(Cm,mh,Pm,!1,fh);if(l===null&&(Tm(mh.set(-.5,.5,0),_c,o,vc,r,s),G0.set(0,1),l=e.ray.intersectTriangle(Cm,Pm,mh,!1,fh),l===null))return;const d=e.ray.origin.distanceTo(fh);d<e.near||d>e.far||t.push({distance:d,point:fh.clone(),uv:Or.getUV(fh,Cm,mh,Pm,PS,G0,TS,new Se),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Tm(n,e,t,i,r,s){yc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(ph.x=s*yc.x-r*yc.y,ph.y=r*yc.x+s*yc.y):ph.copy(yc),n.copy(e),n.x+=ph.x,n.y+=ph.y,n.applyMatrix4(qC)}const Am=new V,AS=new V;class KC extends Ht{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Am.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Am);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Am.setFromMatrixPosition(e.matrixWorld),AS.setFromMatrixPosition(this.matrixWorld);const i=Am.distanceTo(AS)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s&&i>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const LS=new V,RS=new qt,kS=new qt,CD=new V,IS=new St;class ZC extends Yn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new St,this.bindMatrixInverse=new St}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;RS.fromBufferAttribute(r.attributes.skinIndex,e),kS.fromBufferAttribute(r.attributes.skinWeight,e),LS.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=kS.getComponent(s);if(o!==0){const l=RS.getComponent(s);IS.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(CD.copy(LS).applyMatrix4(IS),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class rw extends Ht{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xc extends On{constructor(e=null,t=1,i=1,r,s,o,l,d,f=Nn,g=Nn,m,_){super(null,o,l,d,f,g,r,s,m,_),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DS=new St,PD=new St;class vv{constructor(e=[],t=[]){this.uuid=mr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new St)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new St;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:PD;DS.multiplyMatrices(l,t[s]),DS.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new vv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=IC(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Xc(t,e,e,Br,Ur);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new rw),this.bones.push(o),this.boneInverses.push(new St().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class nd extends tn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const NS=new St,zS=new St,Lm=[],gh=new Yn;class JC extends Yn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new nd(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(gh.geometry=this.geometry,gh.material=this.material,gh.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,NS),zS.multiplyMatrices(i,NS),gh.matrixWorld=zS,gh.raycast(e,Lm);for(let o=0,l=Lm.length;o<l;o++){const d=Lm[o];d.instanceId=s,d.object=this,t.push(d)}Lm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new nd(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ni extends si{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ge(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const OS=new V,FS=new V,US=new St,W0=new Pf,Rm=new iu;class La extends Ht{constructor(e=new Mt,t=new Ni){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)OS.fromBufferAttribute(t,r-1),FS.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=OS.distanceTo(FS);e.setAttribute("lineDistance",new Ze(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Rm.copy(i.boundingSphere),Rm.applyMatrix4(r),Rm.radius+=s,e.ray.intersectsSphere(Rm)===!1)return;US.copy(r).invert(),W0.copy(e.ray).applyMatrix4(US);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=l*l,f=new V,g=new V,m=new V,_=new V,y=this.isLineSegments?2:1,w=i.index,E=i.attributes.position;if(w!==null){const M=Math.max(0,o.start),C=Math.min(w.count,o.start+o.count);for(let P=M,A=C-1;P<A;P+=y){const k=w.getX(P),D=w.getX(P+1);if(f.fromBufferAttribute(E,k),g.fromBufferAttribute(E,D),W0.distanceSqToSegment(f,g,_,m)>d)continue;_.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(_);L<e.near||L>e.far||t.push({distance:L,point:m.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}else{const M=Math.max(0,o.start),C=Math.min(E.count,o.start+o.count);for(let P=M,A=C-1;P<A;P+=y){if(f.fromBufferAttribute(E,P),g.fromBufferAttribute(E,P+1),W0.distanceSqToSegment(f,g,_,m)>d)continue;_.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(_);D<e.near||D>e.far||t.push({distance:D,point:m.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const BS=new V,VS=new V;class Hs extends La{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)BS.fromBufferAttribute(t,r),VS.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+BS.distanceTo(VS);e.setAttribute("lineDistance",new Ze(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class QC extends La{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class sw extends si{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const HS=new St,Iy=new Pf,km=new iu,Im=new V;class $C extends Ht{constructor(e=new Mt,t=new sw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),km.copy(i.boundingSphere),km.applyMatrix4(r),km.radius+=s,e.ray.intersectsSphere(km)===!1)return;HS.copy(r).invert(),Iy.copy(e.ray).applyMatrix4(HS);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=l*l,f=i.index,m=i.attributes.position;if(f!==null){const _=Math.max(0,o.start),y=Math.min(f.count,o.start+o.count);for(let w=_,S=y;w<S;w++){const E=f.getX(w);Im.fromBufferAttribute(m,E),GS(Im,E,d,r,e,t,this)}}else{const _=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let w=_,S=y;w<S;w++)Im.fromBufferAttribute(m,w),GS(Im,w,d,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function GS(n,e,t,i,r,s,o){const l=Iy.distanceSqToPoint(n);if(l<t){const d=new V;Iy.closestPointToPoint(n,d),d.applyMatrix4(i);const f=r.ray.origin.distanceTo(d);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:d,index:e,face:null,object:o})}}class TD extends On{constructor(e,t,i,r,s,o,l,d,f){super(e,t,i,r,s,o,l,d,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:_n,this.magFilter=s!==void 0?s:_n,this.generateMipmaps=!1;const g=this;function m(){g.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class AD extends On{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Nn,this.minFilter=Nn,this.generateMipmaps=!1,this.needsUpdate=!0}}class e2 extends On{constructor(e,t,i,r,s,o,l,d,f,g,m,_){super(null,o,l,d,f,g,r,s,m,_),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class LD extends On{constructor(e,t,i,r,s,o,l,d,f){super(e,t,i,r,s,o,l,d,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ys{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let l=0,d=s-1,f;for(;l<=d;)if(r=Math.floor(l+(d-l)/2),f=i[r]-o,f<0)l=r+1;else if(f>0)d=r-1;else{d=r;break}if(r=d,i[r]===o)return r/(s-1);const g=i[r],_=i[r+1]-g,y=(o-g)/_;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),d=t||(o.isVector2?new Se:new V);return d.copy(l).sub(o).normalize(),d}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new V,r=[],s=[],o=[],l=new V,d=new St;for(let y=0;y<=e;y++){const w=y/e;r[y]=this.getTangentAt(w,new V)}s[0]=new V,o[0]=new V;let f=Number.MAX_VALUE;const g=Math.abs(r[0].x),m=Math.abs(r[0].y),_=Math.abs(r[0].z);g<=f&&(f=g,i.set(1,0,0)),m<=f&&(f=m,i.set(0,1,0)),_<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),l.crossVectors(r[y-1],r[y]),l.length()>Number.EPSILON){l.normalize();const w=Math.acos(Rn(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(d.makeRotationAxis(l,w))}o[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(Rn(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(y=-y);for(let w=1;w<=e;w++)s[w].applyMatrix4(d.makeRotationAxis(r[w],y*w)),o[w].crossVectors(r[w],s[w])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class _v extends ys{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,l=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=d}getPoint(e,t){const i=t||new Se,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let d=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const g=Math.cos(this.aRotation),m=Math.sin(this.aRotation),_=d-this.aX,y=f-this.aY;d=_*g-y*m+this.aX,f=_*m+y*g+this.aY}return i.set(d,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class t2 extends _v{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function ow(){let n=0,e=0,t=0,i=0;function r(s,o,l,d){n=s,e=l,t=-3*s+3*o-2*l-d,i=2*s-2*o+l+d}return{initCatmullRom:function(s,o,l,d,f){r(o,l,f*(l-s),f*(d-o))},initNonuniformCatmullRom:function(s,o,l,d,f,g,m){let _=(o-s)/f-(l-s)/(f+g)+(l-o)/g,y=(l-o)/g-(d-o)/(g+m)+(d-l)/m;_*=g,y*=g,r(o,l,_,y)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+i*l}}}const Dm=new V,j0=new ow,X0=new ow,q0=new ow;class n2 extends ys{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new V){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),d=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:d===0&&l===s-1&&(l=s-2,d=1);let f,g;this.closed||l>0?f=r[(l-1)%s]:(Dm.subVectors(r[0],r[1]).add(r[0]),f=Dm);const m=r[l%s],_=r[(l+1)%s];if(this.closed||l+2<s?g=r[(l+2)%s]:(Dm.subVectors(r[s-1],r[s-2]).add(r[s-1]),g=Dm),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let w=Math.pow(f.distanceToSquared(m),y),S=Math.pow(m.distanceToSquared(_),y),E=Math.pow(_.distanceToSquared(g),y);S<1e-4&&(S=1),w<1e-4&&(w=S),E<1e-4&&(E=S),j0.initNonuniformCatmullRom(f.x,m.x,_.x,g.x,w,S,E),X0.initNonuniformCatmullRom(f.y,m.y,_.y,g.y,w,S,E),q0.initNonuniformCatmullRom(f.z,m.z,_.z,g.z,w,S,E)}else this.curveType==="catmullrom"&&(j0.initCatmullRom(f.x,m.x,_.x,g.x,this.tension),X0.initCatmullRom(f.y,m.y,_.y,g.y,this.tension),q0.initCatmullRom(f.z,m.z,_.z,g.z,this.tension));return i.set(j0.calc(d),X0.calc(d),q0.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new V().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function WS(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,l=n*n,d=n*l;return(2*t-2*i+s+o)*d+(-3*t+3*i-2*s-o)*l+s*n+t}function RD(n,e){const t=1-n;return t*t*e}function kD(n,e){return 2*(1-n)*n*e}function ID(n,e){return n*n*e}function zh(n,e,t,i){return RD(n,e)+kD(n,t)+ID(n,i)}function DD(n,e){const t=1-n;return t*t*t*e}function ND(n,e){const t=1-n;return 3*t*t*n*e}function zD(n,e){return 3*(1-n)*n*n*e}function OD(n,e){return n*n*n*e}function Oh(n,e,t,i,r){return DD(n,e)+ND(n,t)+zD(n,i)+OD(n,r)}class aw extends ys{constructor(e=new Se,t=new Se,i=new Se,r=new Se){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Se){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(Oh(e,r.x,s.x,o.x,l.x),Oh(e,r.y,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class i2 extends ys{constructor(e=new V,t=new V,i=new V,r=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new V){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(Oh(e,r.x,s.x,o.x,l.x),Oh(e,r.y,s.y,o.y,l.y),Oh(e,r.z,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class yv extends ys{constructor(e=new Se,t=new Se){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Se){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Se;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class r2 extends ys{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lw extends ys{constructor(e=new Se,t=new Se,i=new Se){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Se){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(zh(e,r.x,s.x,o.x),zh(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uw extends ys{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(zh(e,r.x,s.x,o.x),zh(e,r.y,s.y,o.y),zh(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cw extends ys{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Se){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,d=r[o===0?o:o-1],f=r[o],g=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return i.set(WS(l,d.x,f.x,g.x,m.x),WS(l,d.y,f.y,g.y,m.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Se().fromArray(r))}return this}}var dw=Object.freeze({__proto__:null,ArcCurve:t2,CatmullRomCurve3:n2,CubicBezierCurve:aw,CubicBezierCurve3:i2,EllipseCurve:_v,LineCurve:yv,LineCurve3:r2,QuadraticBezierCurve:lw,QuadraticBezierCurve3:uw,SplineCurve:cw});class s2 extends ys{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new yv(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,l=this.curves[s],d=l.getLength(),f=d===0?0:1-o/d;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,d=o.getPoints(l);for(let f=0;f<d.length;f++){const g=d[f];i&&i.equals(g)||(t.push(g),i=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new dw[r.type]().fromJSON(r))}return this}}class df extends s2{constructor(e){super(),this.type="Path",this.currentPoint=new Se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new yv(this.currentPoint.clone(),new Se(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new lw(this.currentPoint.clone(),new Se(e,t),new Se(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const l=new aw(this.currentPoint.clone(),new Se(e,t),new Se(i,r),new Se(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new cw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const l=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+l,t+d,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,l,d){const f=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+f,t+g,i,r,s,o,l,d),this}absellipse(e,t,i,r,s,o,l,d){const f=new _v(e,t,i,r,s,o,l,d);if(this.curves.length>0){const m=f.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(f);const g=f.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class dd extends Mt{constructor(e=[new Se(0,-.5),new Se(.5,0),new Se(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Rn(r,0,Math.PI*2);const s=[],o=[],l=[],d=[],f=[],g=1/t,m=new V,_=new Se,y=new V,w=new V,S=new V;let E=0,M=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:E=e[C+1].x-e[C].x,M=e[C+1].y-e[C].y,y.x=M*1,y.y=-E,y.z=M*0,S.copy(y),y.normalize(),d.push(y.x,y.y,y.z);break;case e.length-1:d.push(S.x,S.y,S.z);break;default:E=e[C+1].x-e[C].x,M=e[C+1].y-e[C].y,y.x=M*1,y.y=-E,y.z=M*0,w.copy(y),y.x+=S.x,y.y+=S.y,y.z+=S.z,y.normalize(),d.push(y.x,y.y,y.z),S.copy(w)}for(let C=0;C<=t;C++){const P=i+C*g*r,A=Math.sin(P),k=Math.cos(P);for(let D=0;D<=e.length-1;D++){m.x=e[D].x*A,m.y=e[D].y,m.z=e[D].x*k,o.push(m.x,m.y,m.z),_.x=C/t,_.y=D/(e.length-1),l.push(_.x,_.y);const z=d[3*D+0]*A,L=d[3*D+1],N=d[3*D+0]*k;f.push(z,L,N)}}for(let C=0;C<t;C++)for(let P=0;P<e.length-1;P++){const A=P+C*e.length,k=A,D=A+e.length,z=A+e.length+1,L=A+1;s.push(k,D,L),s.push(z,L,D)}this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("uv",new Ze(l,2)),this.setAttribute("normal",new Ze(f,3))}static fromJSON(e){return new dd(e.points,e.segments,e.phiStart,e.phiLength)}}class Lf extends dd{constructor(e=1,t=1,i=4,r=8){const s=new df;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Lf(e.radius,e.length,e.capSegments,e.radialSegments)}}class Rf extends Mt{constructor(e=1,t=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],d=[],f=new V,g=new Se;o.push(0,0,0),l.push(0,0,1),d.push(.5,.5);for(let m=0,_=3;m<=t;m++,_+=3){const y=i+m/t*r;f.x=e*Math.cos(y),f.y=e*Math.sin(y),o.push(f.x,f.y,f.z),l.push(0,0,1),g.x=(o[_]/e+1)/2,g.y=(o[_+1]/e+1)/2,d.push(g.x,g.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("normal",new Ze(l,3)),this.setAttribute("uv",new Ze(d,2))}static fromJSON(e){return new Rf(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ru extends Mt{constructor(e=1,t=1,i=1,r=8,s=1,o=!1,l=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:d};const f=this;r=Math.floor(r),s=Math.floor(s);const g=[],m=[],_=[],y=[];let w=0;const S=[],E=i/2;let M=0;C(),o===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(g),this.setAttribute("position",new Ze(m,3)),this.setAttribute("normal",new Ze(_,3)),this.setAttribute("uv",new Ze(y,2));function C(){const A=new V,k=new V;let D=0;const z=(t-e)/i;for(let L=0;L<=s;L++){const N=[],F=L/s,q=F*(t-e)+e;for(let ge=0;ge<=r;ge++){const te=ge/r,K=te*d+l,le=Math.sin(K),se=Math.cos(K);k.x=q*le,k.y=-F*i+E,k.z=q*se,m.push(k.x,k.y,k.z),A.set(le,z,se).normalize(),_.push(A.x,A.y,A.z),y.push(te,1-F),N.push(w++)}S.push(N)}for(let L=0;L<r;L++)for(let N=0;N<s;N++){const F=S[N][L],q=S[N+1][L],ge=S[N+1][L+1],te=S[N][L+1];g.push(F,q,te),g.push(q,ge,te),D+=6}f.addGroup(M,D,0),M+=D}function P(A){const k=w,D=new Se,z=new V;let L=0;const N=A===!0?e:t,F=A===!0?1:-1;for(let ge=1;ge<=r;ge++)m.push(0,E*F,0),_.push(0,F,0),y.push(.5,.5),w++;const q=w;for(let ge=0;ge<=r;ge++){const K=ge/r*d+l,le=Math.cos(K),se=Math.sin(K);z.x=N*se,z.y=E*F,z.z=N*le,m.push(z.x,z.y,z.z),_.push(0,F,0),D.x=le*.5+.5,D.y=se*.5*F+.5,y.push(D.x,D.y),w++}for(let ge=0;ge<r;ge++){const te=k+ge,K=q+ge;A===!0?g.push(K,K+1,te):g.push(K+1,K,te),L+=3}f.addGroup(M,L,A===!0?1:2),M+=L}}static fromJSON(e){return new ru(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class kf extends ru{constructor(e=1,t=1,i=8,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,i,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new kf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class bo extends Mt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];l(r),f(i),g(),this.setAttribute("position",new Ze(s,3)),this.setAttribute("normal",new Ze(s.slice(),3)),this.setAttribute("uv",new Ze(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(C){const P=new V,A=new V,k=new V;for(let D=0;D<t.length;D+=3)y(t[D+0],P),y(t[D+1],A),y(t[D+2],k),d(P,A,k,C)}function d(C,P,A,k){const D=k+1,z=[];for(let L=0;L<=D;L++){z[L]=[];const N=C.clone().lerp(A,L/D),F=P.clone().lerp(A,L/D),q=D-L;for(let ge=0;ge<=q;ge++)ge===0&&L===D?z[L][ge]=N:z[L][ge]=N.clone().lerp(F,ge/q)}for(let L=0;L<D;L++)for(let N=0;N<2*(D-L)-1;N++){const F=Math.floor(N/2);N%2===0?(_(z[L][F+1]),_(z[L+1][F]),_(z[L][F])):(_(z[L][F+1]),_(z[L+1][F+1]),_(z[L+1][F]))}}function f(C){const P=new V;for(let A=0;A<s.length;A+=3)P.x=s[A+0],P.y=s[A+1],P.z=s[A+2],P.normalize().multiplyScalar(C),s[A+0]=P.x,s[A+1]=P.y,s[A+2]=P.z}function g(){const C=new V;for(let P=0;P<s.length;P+=3){C.x=s[P+0],C.y=s[P+1],C.z=s[P+2];const A=E(C)/2/Math.PI+.5,k=M(C)/Math.PI+.5;o.push(A,1-k)}w(),m()}function m(){for(let C=0;C<o.length;C+=6){const P=o[C+0],A=o[C+2],k=o[C+4],D=Math.max(P,A,k),z=Math.min(P,A,k);D>.9&&z<.1&&(P<.2&&(o[C+0]+=1),A<.2&&(o[C+2]+=1),k<.2&&(o[C+4]+=1))}}function _(C){s.push(C.x,C.y,C.z)}function y(C,P){const A=C*3;P.x=e[A+0],P.y=e[A+1],P.z=e[A+2]}function w(){const C=new V,P=new V,A=new V,k=new V,D=new Se,z=new Se,L=new Se;for(let N=0,F=0;N<s.length;N+=9,F+=6){C.set(s[N+0],s[N+1],s[N+2]),P.set(s[N+3],s[N+4],s[N+5]),A.set(s[N+6],s[N+7],s[N+8]),D.set(o[F+0],o[F+1]),z.set(o[F+2],o[F+3]),L.set(o[F+4],o[F+5]),k.copy(C).add(P).add(A).divideScalar(3);const q=E(k);S(D,F+0,C,q),S(z,F+2,P,q),S(L,F+4,A,q)}}function S(C,P,A,k){k<0&&C.x===1&&(o[P]=C.x-1),A.x===0&&A.z===0&&(o[P]=k/2/Math.PI+.5)}function E(C){return Math.atan2(C.z,-C.x)}function M(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}static fromJSON(e){return new bo(e.vertices,e.indices,e.radius,e.details)}}class If extends bo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new If(e.radius,e.detail)}}const Nm=new V,zm=new V,Y0=new V,Om=new Or;class o2 extends Mt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Bl*t),o=e.getIndex(),l=e.getAttribute("position"),d=o?o.count:l.count,f=[0,0,0],g=["a","b","c"],m=new Array(3),_={},y=[];for(let w=0;w<d;w+=3){o?(f[0]=o.getX(w),f[1]=o.getX(w+1),f[2]=o.getX(w+2)):(f[0]=w,f[1]=w+1,f[2]=w+2);const{a:S,b:E,c:M}=Om;if(S.fromBufferAttribute(l,f[0]),E.fromBufferAttribute(l,f[1]),M.fromBufferAttribute(l,f[2]),Om.getNormal(Y0),m[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,m[1]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,m[2]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let C=0;C<3;C++){const P=(C+1)%3,A=m[C],k=m[P],D=Om[g[C]],z=Om[g[P]],L=`${A}_${k}`,N=`${k}_${A}`;N in _&&_[N]?(Y0.dot(_[N].normal)<=s&&(y.push(D.x,D.y,D.z),y.push(z.x,z.y,z.z)),_[N]=null):L in _||(_[L]={index0:f[C],index1:f[P],normal:Y0.clone()})}}for(const w in _)if(_[w]){const{index0:S,index1:E}=_[w];Nm.fromBufferAttribute(l,S),zm.fromBufferAttribute(l,E),y.push(Nm.x,Nm.y,Nm.z),y.push(zm.x,zm.y,zm.z)}this.setAttribute("position",new Ze(y,3))}}}class Gl extends df{constructor(e){super(e),this.uuid=mr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new df().fromJSON(r))}return this}}const FD={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=a2(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,d,f,g,m,_,y;if(i&&(s=GD(n,e,s,t)),n.length>80*t){l=f=n[0],d=g=n[1];for(let w=t;w<r;w+=t)m=n[w],_=n[w+1],m<l&&(l=m),_<d&&(d=_),m>f&&(f=m),_>g&&(g=_);y=Math.max(f-l,g-d),y=y!==0?1/y:0}return hf(s,o,t,l,d,y),o}};function a2(n,e,t,i,r){let s,o;if(r===eN(n,e,t,i)>0)for(s=e;s<t;s+=i)o=jS(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=jS(s,n[s],n[s+1],o);return o&&xv(o,o.next)&&(pf(o),o=o.next),o}function Ra(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(xv(t,t.next)||yn(t.prev,t,t.next)===0)){if(pf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function hf(n,e,t,i,r,s,o){if(!n)return;!o&&s&&YD(n,i,r,s);let l=n,d,f;for(;n.prev!==n.next;){if(d=n.prev,f=n.next,s?BD(n,i,r,s):UD(n)){e.push(d.i/t),e.push(n.i/t),e.push(f.i/t),pf(n),n=f.next,l=f.next;continue}if(n=f,n===l){o?o===1?(n=VD(Ra(n),e,t),hf(n,e,t,i,r,s,2)):o===2&&HD(n,e,t,i,r,s):hf(Ra(n),e,t,i,r,s,1);break}}}function UD(n){const e=n.prev,t=n,i=n.next;if(yn(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Uc(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&yn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function BD(n,e,t,i){const r=n.prev,s=n,o=n.next;if(yn(r,s,o)>=0)return!1;const l=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,d=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,f=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,g=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,m=Dy(l,d,e,t,i),_=Dy(f,g,e,t,i);let y=n.prevZ,w=n.nextZ;for(;y&&y.z>=m&&w&&w.z<=_;){if(y!==n.prev&&y!==n.next&&Uc(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&yn(y.prev,y,y.next)>=0||(y=y.prevZ,w!==n.prev&&w!==n.next&&Uc(r.x,r.y,s.x,s.y,o.x,o.y,w.x,w.y)&&yn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=m;){if(y!==n.prev&&y!==n.next&&Uc(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&yn(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=_;){if(w!==n.prev&&w!==n.next&&Uc(r.x,r.y,s.x,s.y,o.x,o.y,w.x,w.y)&&yn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function VD(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!xv(r,s)&&l2(r,i,i.next,s)&&ff(r,s)&&ff(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),pf(i),pf(i.next),i=n=s),i=i.next}while(i!==n);return Ra(i)}function HD(n,e,t,i,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&JD(o,l)){let d=u2(o,l);o=Ra(o,o.next),d=Ra(d,d.next),hf(o,e,t,i,r,s),hf(d,e,t,i,r,s);return}l=l.next}o=o.next}while(o!==n)}function GD(n,e,t,i){const r=[];let s,o,l,d,f;for(s=0,o=e.length;s<o;s++)l=e[s]*i,d=s<o-1?e[s+1]*i:n.length,f=a2(n,l,d,i,!1),f===f.next&&(f.steiner=!0),r.push(ZD(f));for(r.sort(WD),s=0;s<r.length;s++)jD(r[s],t),t=Ra(t,t.next);return t}function WD(n,e){return n.x-e.x}function jD(n,e){if(e=XD(n,e),e){const t=u2(e,n);Ra(e,e.next),Ra(t,t.next)}}function XD(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const _=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=i&&_>s){if(s=_,_===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const l=o,d=o.x,f=o.y;let g=1/0,m;t=o;do i>=t.x&&t.x>=d&&i!==t.x&&Uc(r<f?i:s,r,d,f,r<f?s:i,r,t.x,t.y)&&(m=Math.abs(r-t.y)/(i-t.x),ff(t,n)&&(m<g||m===g&&(t.x>o.x||t.x===o.x&&qD(o,t)))&&(o=t,g=m)),t=t.next;while(t!==l);return o}function qD(n,e){return yn(n.prev,n,e.prev)<0&&yn(e.next,n,n.next)<0}function YD(n,e,t,i){let r=n;do r.z===null&&(r.z=Dy(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,KD(r)}function KD(n){let e,t,i,r,s,o,l,d,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,l=0,e=0;e<f&&(l++,i=i.nextZ,!!i);e++);for(d=f;l>0||d>0&&i;)l!==0&&(d===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,l--):(r=i,i=i.nextZ,d--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return n}function Dy(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function ZD(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Uc(n,e,t,i,r,s,o,l){return(r-o)*(e-l)-(n-o)*(s-l)>=0&&(n-o)*(i-l)-(t-o)*(e-l)>=0&&(t-o)*(s-l)-(r-o)*(i-l)>=0}function JD(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!QD(n,e)&&(ff(n,e)&&ff(e,n)&&$D(n,e)&&(yn(n.prev,n,e.prev)||yn(n,e.prev,e))||xv(n,e)&&yn(n.prev,n,n.next)>0&&yn(e.prev,e,e.next)>0)}function yn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function xv(n,e){return n.x===e.x&&n.y===e.y}function l2(n,e,t,i){const r=Um(yn(n,e,t)),s=Um(yn(n,e,i)),o=Um(yn(t,i,n)),l=Um(yn(t,i,e));return!!(r!==s&&o!==l||r===0&&Fm(n,t,e)||s===0&&Fm(n,i,e)||o===0&&Fm(t,n,i)||l===0&&Fm(t,e,i))}function Fm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Um(n){return n>0?1:n<0?-1:0}function QD(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&l2(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ff(n,e){return yn(n.prev,n,n.next)<0?yn(n,e,n.next)>=0&&yn(n,n.prev,e)>=0:yn(n,e,n.prev)<0||yn(n,n.next,e)<0}function $D(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function u2(n,e){const t=new Ny(n.i,n.x,n.y),i=new Ny(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function jS(n,e,t,i){const r=new Ny(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function pf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Ny(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function eN(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Bs{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Bs.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];XS(e),qS(i,e);let o=e.length;t.forEach(XS);for(let d=0;d<t.length;d++)r.push(o),o+=t[d].length,qS(i,t[d]);const l=FD.triangulate(i,r);for(let d=0;d<l.length;d+=3)s.push(l.slice(d,d+3));return s}}function XS(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function qS(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Df extends Mt{constructor(e=new Gl([new Se(.5,.5),new Se(-.5,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,d=e.length;l<d;l++){const f=e[l];o(f)}this.setAttribute("position",new Ze(r,3)),this.setAttribute("uv",new Ze(s,2)),this.computeVertexNormals();function o(l){const d=[],f=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,w=t.bevelSize!==void 0?t.bevelSize:y-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:tN;let P,A=!1,k,D,z,L;M&&(P=M.getSpacedPoints(g),A=!0,_=!1,k=M.computeFrenetFrames(g,!1),D=new V,z=new V,L=new V),_||(E=0,y=0,w=0,S=0);const N=l.extractPoints(f);let F=N.shape;const q=N.holes;if(!Bs.isClockWise(F)){F=F.reverse();for(let we=0,me=q.length;we<me;we++){const Ae=q[we];Bs.isClockWise(Ae)&&(q[we]=Ae.reverse())}}const te=Bs.triangulateShape(F,q),K=F;for(let we=0,me=q.length;we<me;we++){const Ae=q[we];F=F.concat(Ae)}function le(we,me,Ae){return me||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().multiplyScalar(Ae).add(we)}const se=F.length,ne=te.length;function O(we,me,Ae){let Ye,Ne,dt;const Qe=we.x-me.x,Je=we.y-me.y,Tt=Ae.x-we.x,kt=Ae.y-we.y,j=Qe*Qe+Je*Je,U=Qe*kt-Je*Tt;if(Math.abs(U)>Number.EPSILON){const de=Math.sqrt(j),Ee=Math.sqrt(Tt*Tt+kt*kt),Le=me.x-Je/de,De=me.y+Qe/de,lt=Ae.x-kt/Ee,he=Ae.y+Tt/Ee,We=((lt-Le)*kt-(he-De)*Tt)/(Qe*kt-Je*Tt);Ye=Le+Qe*We-we.x,Ne=De+Je*We-we.y;const Oe=Ye*Ye+Ne*Ne;if(Oe<=2)return new Se(Ye,Ne);dt=Math.sqrt(Oe/2)}else{let de=!1;Qe>Number.EPSILON?Tt>Number.EPSILON&&(de=!0):Qe<-Number.EPSILON?Tt<-Number.EPSILON&&(de=!0):Math.sign(Je)===Math.sign(kt)&&(de=!0),de?(Ye=-Je,Ne=Qe,dt=Math.sqrt(j)):(Ye=Qe,Ne=Je,dt=Math.sqrt(j/2))}return new Se(Ye/dt,Ne/dt)}const B=[];for(let we=0,me=K.length,Ae=me-1,Ye=we+1;we<me;we++,Ae++,Ye++)Ae===me&&(Ae=0),Ye===me&&(Ye=0),B[we]=O(K[we],K[Ae],K[Ye]);const H=[];let $,ie=B.concat();for(let we=0,me=q.length;we<me;we++){const Ae=q[we];$=[];for(let Ye=0,Ne=Ae.length,dt=Ne-1,Qe=Ye+1;Ye<Ne;Ye++,dt++,Qe++)dt===Ne&&(dt=0),Qe===Ne&&(Qe=0),$[Ye]=O(Ae[Ye],Ae[dt],Ae[Qe]);H.push($),ie=ie.concat($)}for(let we=0;we<E;we++){const me=we/E,Ae=y*Math.cos(me*Math.PI/2),Ye=w*Math.sin(me*Math.PI/2)+S;for(let Ne=0,dt=K.length;Ne<dt;Ne++){const Qe=le(K[Ne],B[Ne],Ye);Ke(Qe.x,Qe.y,-Ae)}for(let Ne=0,dt=q.length;Ne<dt;Ne++){const Qe=q[Ne];$=H[Ne];for(let Je=0,Tt=Qe.length;Je<Tt;Je++){const kt=le(Qe[Je],$[Je],Ye);Ke(kt.x,kt.y,-Ae)}}}const fe=w+S;for(let we=0;we<se;we++){const me=_?le(F[we],ie[we],fe):F[we];A?(z.copy(k.normals[0]).multiplyScalar(me.x),D.copy(k.binormals[0]).multiplyScalar(me.y),L.copy(P[0]).add(z).add(D),Ke(L.x,L.y,L.z)):Ke(me.x,me.y,0)}for(let we=1;we<=g;we++)for(let me=0;me<se;me++){const Ae=_?le(F[me],ie[me],fe):F[me];A?(z.copy(k.normals[we]).multiplyScalar(Ae.x),D.copy(k.binormals[we]).multiplyScalar(Ae.y),L.copy(P[we]).add(z).add(D),Ke(L.x,L.y,L.z)):Ke(Ae.x,Ae.y,m/g*we)}for(let we=E-1;we>=0;we--){const me=we/E,Ae=y*Math.cos(me*Math.PI/2),Ye=w*Math.sin(me*Math.PI/2)+S;for(let Ne=0,dt=K.length;Ne<dt;Ne++){const Qe=le(K[Ne],B[Ne],Ye);Ke(Qe.x,Qe.y,m+Ae)}for(let Ne=0,dt=q.length;Ne<dt;Ne++){const Qe=q[Ne];$=H[Ne];for(let Je=0,Tt=Qe.length;Je<Tt;Je++){const kt=le(Qe[Je],$[Je],Ye);A?Ke(kt.x,kt.y+P[g-1].y,P[g-1].x+Ae):Ke(kt.x,kt.y,m+Ae)}}}be(),qe();function be(){const we=r.length/3;if(_){let me=0,Ae=se*me;for(let Ye=0;Ye<ne;Ye++){const Ne=te[Ye];tt(Ne[2]+Ae,Ne[1]+Ae,Ne[0]+Ae)}me=g+E*2,Ae=se*me;for(let Ye=0;Ye<ne;Ye++){const Ne=te[Ye];tt(Ne[0]+Ae,Ne[1]+Ae,Ne[2]+Ae)}}else{for(let me=0;me<ne;me++){const Ae=te[me];tt(Ae[2],Ae[1],Ae[0])}for(let me=0;me<ne;me++){const Ae=te[me];tt(Ae[0]+se*g,Ae[1]+se*g,Ae[2]+se*g)}}i.addGroup(we,r.length/3-we,0)}function qe(){const we=r.length/3;let me=0;ce(K,me),me+=K.length;for(let Ae=0,Ye=q.length;Ae<Ye;Ae++){const Ne=q[Ae];ce(Ne,me),me+=Ne.length}i.addGroup(we,r.length/3-we,1)}function ce(we,me){let Ae=we.length;for(;--Ae>=0;){const Ye=Ae;let Ne=Ae-1;Ne<0&&(Ne=we.length-1);for(let dt=0,Qe=g+E*2;dt<Qe;dt++){const Je=se*dt,Tt=se*(dt+1),kt=me+Ye+Je,j=me+Ne+Je,U=me+Ne+Tt,de=me+Ye+Tt;nt(kt,j,U,de)}}}function Ke(we,me,Ae){d.push(we),d.push(me),d.push(Ae)}function tt(we,me,Ae){Te(we),Te(me),Te(Ae);const Ye=r.length/3,Ne=C.generateTopUV(i,r,Ye-3,Ye-2,Ye-1);rt(Ne[0]),rt(Ne[1]),rt(Ne[2])}function nt(we,me,Ae,Ye){Te(we),Te(me),Te(Ye),Te(me),Te(Ae),Te(Ye);const Ne=r.length/3,dt=C.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);rt(dt[0]),rt(dt[1]),rt(dt[3]),rt(dt[1]),rt(dt[2]),rt(dt[3])}function Te(we){r.push(d[we*3+0]),r.push(d[we*3+1]),r.push(d[we*3+2])}function rt(we){s.push(we.x),s.push(we.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return nN(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new dw[r.type]().fromJSON(r)),new Df(i,e.options)}}const tN={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],l=e[i*3],d=e[i*3+1],f=e[r*3],g=e[r*3+1];return[new Se(s,o),new Se(l,d),new Se(f,g)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],l=e[t*3+1],d=e[t*3+2],f=e[i*3],g=e[i*3+1],m=e[i*3+2],_=e[r*3],y=e[r*3+1],w=e[r*3+2],S=e[s*3],E=e[s*3+1],M=e[s*3+2];return Math.abs(l-g)<Math.abs(o-f)?[new Se(o,1-d),new Se(f,1-m),new Se(_,1-w),new Se(S,1-M)]:[new Se(l,1-d),new Se(g,1-m),new Se(y,1-w),new Se(E,1-M)]}};function nN(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class hd extends bo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hd(e.radius,e.detail)}}class fd extends bo{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fd(e.radius,e.detail)}}class Nf extends Mt{constructor(e=.5,t=1,i=8,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const l=[],d=[],f=[],g=[];let m=e;const _=(t-e)/r,y=new V,w=new Se;for(let S=0;S<=r;S++){for(let E=0;E<=i;E++){const M=s+E/i*o;y.x=m*Math.cos(M),y.y=m*Math.sin(M),d.push(y.x,y.y,y.z),f.push(0,0,1),w.x=(y.x/t+1)/2,w.y=(y.y/t+1)/2,g.push(w.x,w.y)}m+=_}for(let S=0;S<r;S++){const E=S*(i+1);for(let M=0;M<i;M++){const C=M+E,P=C,A=C+i+1,k=C+i+2,D=C+1;l.push(P,A,D),l.push(A,k,D)}}this.setIndex(l),this.setAttribute("position",new Ze(d,3)),this.setAttribute("normal",new Ze(f,3)),this.setAttribute("uv",new Ze(g,2))}static fromJSON(e){return new Nf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zf extends Mt{constructor(e=new Gl([new Se(0,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let l=0,d=0;if(Array.isArray(e)===!1)f(e);else for(let g=0;g<e.length;g++)f(e[g]),this.addGroup(l,d,g),l+=d,d=0;this.setIndex(i),this.setAttribute("position",new Ze(r,3)),this.setAttribute("normal",new Ze(s,3)),this.setAttribute("uv",new Ze(o,2));function f(g){const m=r.length/3,_=g.extractPoints(t);let y=_.shape;const w=_.holes;Bs.isClockWise(y)===!1&&(y=y.reverse());for(let E=0,M=w.length;E<M;E++){const C=w[E];Bs.isClockWise(C)===!0&&(w[E]=C.reverse())}const S=Bs.triangulateShape(y,w);for(let E=0,M=w.length;E<M;E++){const C=w[E];y=y.concat(C)}for(let E=0,M=y.length;E<M;E++){const C=y[E];r.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let E=0,M=S.length;E<M;E++){const C=S[E],P=C[0]+m,A=C[1]+m,k=C[2]+m;i.push(P,A,k),d+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return iN(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new zf(i,e.curveSegments)}}function iN(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class pd extends Mt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(o+l,Math.PI);let f=0;const g=[],m=new V,_=new V,y=[],w=[],S=[],E=[];for(let M=0;M<=i;M++){const C=[],P=M/i;let A=0;M==0&&o==0?A=.5/t:M==i&&d==Math.PI&&(A=-.5/t);for(let k=0;k<=t;k++){const D=k/t;m.x=-e*Math.cos(r+D*s)*Math.sin(o+P*l),m.y=e*Math.cos(o+P*l),m.z=e*Math.sin(r+D*s)*Math.sin(o+P*l),w.push(m.x,m.y,m.z),_.copy(m).normalize(),S.push(_.x,_.y,_.z),E.push(D+A,1-P),C.push(f++)}g.push(C)}for(let M=0;M<i;M++)for(let C=0;C<t;C++){const P=g[M][C+1],A=g[M][C],k=g[M+1][C],D=g[M+1][C+1];(M!==0||o>0)&&y.push(P,A,D),(M!==i-1||d<Math.PI)&&y.push(A,k,D)}this.setIndex(y),this.setAttribute("position",new Ze(w,3)),this.setAttribute("normal",new Ze(S,3)),this.setAttribute("uv",new Ze(E,2))}static fromJSON(e){return new pd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Of extends bo{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Of(e.radius,e.detail)}}class Ff extends Mt{constructor(e=1,t=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],d=[],f=[],g=new V,m=new V,_=new V;for(let y=0;y<=i;y++)for(let w=0;w<=r;w++){const S=w/r*s,E=y/i*Math.PI*2;m.x=(e+t*Math.cos(E))*Math.cos(S),m.y=(e+t*Math.cos(E))*Math.sin(S),m.z=t*Math.sin(E),l.push(m.x,m.y,m.z),g.x=e*Math.cos(S),g.y=e*Math.sin(S),_.subVectors(m,g).normalize(),d.push(_.x,_.y,_.z),f.push(w/r),f.push(y/i)}for(let y=1;y<=i;y++)for(let w=1;w<=r;w++){const S=(r+1)*y+w-1,E=(r+1)*(y-1)+w-1,M=(r+1)*(y-1)+w,C=(r+1)*y+w;o.push(S,E,C),o.push(E,M,C)}this.setIndex(o),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(d,3)),this.setAttribute("uv",new Ze(f,2))}static fromJSON(e){return new Ff(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Uf extends Mt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const l=[],d=[],f=[],g=[],m=new V,_=new V,y=new V,w=new V,S=new V,E=new V,M=new V;for(let P=0;P<=i;++P){const A=P/i*s*Math.PI*2;C(A,s,o,e,y),C(A+.01,s,o,e,w),E.subVectors(w,y),M.addVectors(w,y),S.crossVectors(E,M),M.crossVectors(S,E),S.normalize(),M.normalize();for(let k=0;k<=r;++k){const D=k/r*Math.PI*2,z=-t*Math.cos(D),L=t*Math.sin(D);m.x=y.x+(z*M.x+L*S.x),m.y=y.y+(z*M.y+L*S.y),m.z=y.z+(z*M.z+L*S.z),d.push(m.x,m.y,m.z),_.subVectors(m,y).normalize(),f.push(_.x,_.y,_.z),g.push(P/i),g.push(k/r)}}for(let P=1;P<=i;P++)for(let A=1;A<=r;A++){const k=(r+1)*(P-1)+(A-1),D=(r+1)*P+(A-1),z=(r+1)*P+A,L=(r+1)*(P-1)+A;l.push(k,D,L),l.push(D,z,L)}this.setIndex(l),this.setAttribute("position",new Ze(d,3)),this.setAttribute("normal",new Ze(f,3)),this.setAttribute("uv",new Ze(g,2));function C(P,A,k,D,z){const L=Math.cos(P),N=Math.sin(P),F=k/A*P,q=Math.cos(F);z.x=D*(2+q)*.5*L,z.y=D*(2+q)*N*.5,z.z=D*Math.sin(F)*.5}}static fromJSON(e){return new Uf(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Bf extends Mt{constructor(e=new uw(new V(-1,-1,0),new V(-1,1,0),new V(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new V,d=new V,f=new Se;let g=new V;const m=[],_=[],y=[],w=[];S(),this.setIndex(w),this.setAttribute("position",new Ze(m,3)),this.setAttribute("normal",new Ze(_,3)),this.setAttribute("uv",new Ze(y,2));function S(){for(let P=0;P<t;P++)E(P);E(s===!1?t:0),C(),M()}function E(P){g=e.getPointAt(P/t,g);const A=o.normals[P],k=o.binormals[P];for(let D=0;D<=r;D++){const z=D/r*Math.PI*2,L=Math.sin(z),N=-Math.cos(z);d.x=N*A.x+L*k.x,d.y=N*A.y+L*k.y,d.z=N*A.z+L*k.z,d.normalize(),_.push(d.x,d.y,d.z),l.x=g.x+i*d.x,l.y=g.y+i*d.y,l.z=g.z+i*d.z,m.push(l.x,l.y,l.z)}}function M(){for(let P=1;P<=t;P++)for(let A=1;A<=r;A++){const k=(r+1)*(P-1)+(A-1),D=(r+1)*P+(A-1),z=(r+1)*P+A,L=(r+1)*(P-1)+A;w.push(k,D,L),w.push(D,z,L)}}function C(){for(let P=0;P<=t;P++)for(let A=0;A<=r;A++)f.x=P/t,f.y=A/r,y.push(f.x,f.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Bf(new dw[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class c2 extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new V,s=new V;if(e.index!==null){const o=e.attributes.position,l=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,g=d.length;f<g;++f){const m=d[f],_=m.start,y=m.count;for(let w=_,S=_+y;w<S;w+=3)for(let E=0;E<3;E++){const M=l.getX(w+E),C=l.getX(w+(E+1)%3);r.fromBufferAttribute(o,M),s.fromBufferAttribute(o,C),YS(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,d=o.count/3;l<d;l++)for(let f=0;f<3;f++){const g=3*l+f,m=3*l+(f+1)%3;r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,m),YS(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ze(t,3))}}}function YS(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var KS=Object.freeze({__proto__:null,BoxGeometry:Oa,CapsuleGeometry:Lf,CircleGeometry:Rf,ConeGeometry:kf,CylinderGeometry:ru,DodecahedronGeometry:If,EdgesGeometry:o2,ExtrudeGeometry:Df,IcosahedronGeometry:hd,LatheGeometry:dd,OctahedronGeometry:fd,PlaneGeometry:ud,PolyhedronGeometry:bo,RingGeometry:Nf,ShapeGeometry:zf,SphereGeometry:pd,TetrahedronGeometry:Of,TorusGeometry:Ff,TorusKnotGeometry:Uf,TubeGeometry:Bf,WireframeGeometry:c2});class d2 extends si{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ge(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class h2 extends _s{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class hw extends si{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ge(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Na,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class f2 extends hw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ge(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ge(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ge(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class p2 extends si{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ge(16777215),this.specular=new Ge(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Na,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ef,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m2 extends si{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ge(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Na,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class g2 extends si{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Na,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class v2 extends si{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Na,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ef,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _2 extends si{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ge(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Na,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class y2 extends Ni{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Dr(n,e,t){return fw(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Dl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function fw(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function x2(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function zy(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const l=t[s]*e;for(let d=0;d!==e;++d)r[o++]=n[l+d]}return r}function pw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function rN(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let d=0;d<s.tracks.length;++d){const f=s.tracks[d],g=f.getValueSize(),m=[],_=[];for(let y=0;y<f.times.length;++y){const w=f.times[y]*r;if(!(w<t||w>=i)){m.push(f.times[y]);for(let S=0;S<g;++S)_.push(f.values[y*g+S])}}m.length!==0&&(f.times=Dl(m,f.times.constructor),f.values=Dl(_,f.values.constructor),o.push(f))}s.tracks=o;let l=1/0;for(let d=0;d<s.tracks.length;++d)l>s.tracks[d].times[0]&&(l=s.tracks[d].times[0]);for(let d=0;d<s.tracks.length;++d)s.tracks[d].shift(-1*l);return s.resetDuration(),s}function sN(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const l=t.tracks[o],d=l.ValueTypeName;if(d==="bool"||d==="string")continue;const f=n.tracks.find(function(M){return M.name===l.name&&M.ValueTypeName===d});if(f===void 0)continue;let g=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=m/3);let _=0;const y=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=y/3);const w=l.times.length-1;let S;if(s<=l.times[0]){const M=g,C=m-g;S=Dr(l.values,M,C)}else if(s>=l.times[w]){const M=w*m+g,C=M+m-g;S=Dr(l.values,M,C)}else{const M=l.createInterpolant(),C=g,P=m-g;M.evaluate(s),S=Dr(M.resultBuffer,C,P)}d==="quaternion"&&new _i().fromArray(S).normalize().conjugate().toArray(S);const E=f.times.length;for(let M=0;M<E;++M){const C=M*y+_;if(d==="quaternion")_i.multiplyQuaternionsFlat(f.values,C,S,0,f.values,C);else{const P=y-_*2;for(let A=0;A<P;++A)f.values[C+A]-=S[A]}}}return n.blendMode=qx,n}var oN=Object.freeze({__proto__:null,arraySlice:Dr,convertArray:Dl,isTypedArray:fw,getKeyframeOrder:x2,sortedArray:zy,flattenJSON:pw,subclip:rN,makeClipAdditive:sN});class Vf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let d=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const l=i+o>>>1;e<t[l]?o=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class w2 extends Vf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Rl,endingEnd:Rl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],d=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case kl:s=e,l=2*t-i;break;case af:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(d===void 0)switch(this.getSettings_().endingEnd){case kl:o=e,d=2*i-t;break;case af:o=1,d=i+r[1]-r[0];break;default:o=e-1,d=t}const f=(i-t)*.5,g=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(d-i),this._offsetPrev=s*g,this._offsetNext=o*g}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,d=e*l,f=d-l,g=this._offsetPrev,m=this._offsetNext,_=this._weightPrev,y=this._weightNext,w=(i-t)/(r-t),S=w*w,E=S*w,M=-_*E+2*_*S-_*w,C=(1+_)*E+(-1.5-2*_)*S+(-.5+_)*w+1,P=(-1-y)*E+(1.5+y)*S+.5*w,A=y*E-y*S;for(let k=0;k!==l;++k)s[k]=M*o[g+k]+C*o[f+k]+P*o[d+k]+A*o[m+k];return s}}class mw extends Vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,d=e*l,f=d-l,g=(i-t)/(r-t),m=1-g;for(let _=0;_!==l;++_)s[_]=o[f+_]*m+o[d+_]*g;return s}}class S2 extends Vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class xs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Dl(t,this.TimeBufferType),this.values=Dl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Dl(e.times,Array),values:Dl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new S2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new mw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new w2(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case sf:t=this.InterpolantFactoryMethodDiscrete;break;case of:t=this.InterpolantFactoryMethodLinear;break;case dg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sf;case this.InterpolantFactoryMethodLinear:return of;case this.InterpolantFactoryMethodSmooth:return dg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=Dr(i,s,o),this.values=Dr(this.values,s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const d=i[l];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,d),e=!1;break}if(o!==null&&o>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,d,o),e=!1;break}o=d}if(r!==void 0&&fw(r))for(let l=0,d=r.length;l!==d;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=Dr(this.times),t=Dr(this.values),i=this.getValueSize(),r=this.getInterpolation()===dg,s=e.length-1;let o=1;for(let l=1;l<s;++l){let d=!1;const f=e[l],g=e[l+1];if(f!==g&&(l!==1||f!==e[0]))if(r)d=!0;else{const m=l*i,_=m-i,y=m+i;for(let w=0;w!==i;++w){const S=t[m+w];if(S!==t[_+w]||S!==t[y+w]){d=!0;break}}}if(d){if(l!==o){e[o]=e[l];const m=l*i,_=o*i;for(let y=0;y!==i;++y)t[_+y]=t[m+y]}++o}}if(s>0){e[o]=e[s];for(let l=s*i,d=o*i,f=0;f!==i;++f)t[d+f]=t[l+f];++o}return o!==e.length?(this.times=Dr(e,0,o),this.values=Dr(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Dr(this.times,0),t=Dr(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}xs.prototype.TimeBufferType=Float32Array;xs.prototype.ValueBufferType=Float32Array;xs.prototype.DefaultInterpolation=of;class su extends xs{}su.prototype.ValueTypeName="bool";su.prototype.ValueBufferType=Array;su.prototype.DefaultInterpolation=sf;su.prototype.InterpolantFactoryMethodLinear=void 0;su.prototype.InterpolantFactoryMethodSmooth=void 0;class gw extends xs{}gw.prototype.ValueTypeName="color";class mf extends xs{}mf.prototype.ValueTypeName="number";class b2 extends Vf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,d=(i-t)/(r-t);let f=e*l;for(let g=f+l;f!==g;f+=4)_i.slerpFlat(s,0,o,f-l,o,f,d);return s}}class md extends xs{InterpolantFactoryMethodLinear(e){return new b2(this.times,this.values,this.getValueSize(),e)}}md.prototype.ValueTypeName="quaternion";md.prototype.DefaultInterpolation=of;md.prototype.InterpolantFactoryMethodSmooth=void 0;class ou extends xs{}ou.prototype.ValueTypeName="string";ou.prototype.ValueBufferType=Array;ou.prototype.DefaultInterpolation=sf;ou.prototype.InterpolantFactoryMethodLinear=void 0;ou.prototype.InterpolantFactoryMethodSmooth=void 0;class gf extends xs{}gf.prototype.ValueTypeName="vector";class vf{constructor(e,t=-1,i,r=uv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=mr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)t.push(lN(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(xs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let l=0;l<s;l++){let d=[],f=[];d.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const g=x2(d);d=zy(d,1,g),f=zy(f,1,g),!r&&d[0]===0&&(d.push(s),f.push(f[0])),o.push(new mf(".morphTargetInfluences["+t[l].name+"]",d,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,d=e.length;l<d;l++){const f=e[l],g=f.name.match(s);if(g&&g.length>1){const m=g[1];let _=r[m];_||(r[m]=_=[]),_.push(f)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,_,y,w,S){if(y.length!==0){const E=[],M=[];pw(y,E,M,w),E.length!==0&&S.push(new m(_,E,M))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let d=e.length||-1;const f=e.hierarchy||[];for(let m=0;m<f.length;m++){const _=f[m].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const y={};let w;for(w=0;w<_.length;w++)if(_[w].morphTargets)for(let S=0;S<_[w].morphTargets.length;S++)y[_[w].morphTargets[S]]=-1;for(const S in y){const E=[],M=[];for(let C=0;C!==_[w].morphTargets.length;++C){const P=_[w];E.push(P.time),M.push(P.morphTarget===S?1:0)}r.push(new mf(".morphTargetInfluence["+S+"]",E,M))}d=y.length*o}else{const y=".bones["+t[m].name+"]";i(gf,y+".position",_,"pos",r),i(md,y+".quaternion",_,"rot",r),i(gf,y+".scale",_,"scl",r)}}return r.length===0?null:new this(s,d,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function aN(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mf;case"vector":case"vector2":case"vector3":case"vector4":return gf;case"color":return gw;case"quaternion":return md;case"bool":case"boolean":return su;case"string":return ou}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function lN(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=aN(n.type);if(n.times===void 0){const t=[],i=[];pw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ql={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class vw{constructor(e,t,i){const r=this;let s=!1,o=0,l=0,d;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(g){l++,s===!1&&r.onStart!==void 0&&r.onStart(g,o,l),s=!0},this.itemEnd=function(g){o++,r.onProgress!==void 0&&r.onProgress(g,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(g){r.onError!==void 0&&r.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,m){return f.push(g,m),this},this.removeHandler=function(g){const m=f.indexOf(g);return m!==-1&&f.splice(m,2),this},this.getHandler=function(g){for(let m=0,_=f.length;m<_;m+=2){const y=f[m],w=f[m+1];if(y.global&&(y.lastIndex=0),y.test(g))return w}return null}}}const M2=new vw;class yr{constructor(e){this.manager=e!==void 0?e:M2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const so={};class uN extends Error{constructor(e,t){super(e),this.response=t}}class wo extends yr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ql.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(so[e]!==void 0){so[e].push({onLoad:t,onProgress:i,onError:r});return}so[e]=[],so[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,d=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const g=so[e],m=f.body.getReader(),_=f.headers.get("Content-Length"),y=_?parseInt(_):0,w=y!==0;let S=0;const E=new ReadableStream({start(M){C();function C(){m.read().then(({done:P,value:A})=>{if(P)M.close();else{S+=A.byteLength;const k=new ProgressEvent("progress",{lengthComputable:w,loaded:S,total:y});for(let D=0,z=g.length;D<z;D++){const L=g[D];L.onProgress&&L.onProgress(k)}M.enqueue(A),C()}})}}});return new Response(E)}else throw new uN(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(d){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(g=>new DOMParser().parseFromString(g,l));case"json":return f.json();default:if(l===void 0)return f.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),_=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(_);return f.arrayBuffer().then(w=>y.decode(w))}}}).then(f=>{Ql.add(e,f);const g=so[e];delete so[e];for(let m=0,_=g.length;m<_;m++){const y=g[m];y.onLoad&&y.onLoad(f)}}).catch(f=>{const g=so[e];if(g===void 0)throw this.manager.itemError(e),f;delete so[e];for(let m=0,_=g.length;m<_;m++){const y=g[m];y.onError&&y.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class cN extends yr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new wo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=vf.parse(e[i]);t.push(r)}return t}}class dN extends yr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],l=new e2,d=new wo(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(s.withCredentials);let f=0;function g(m){d.load(e[m],function(_){const y=s.parse(_,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},f+=1,f===6&&(y.mipmapCount===1&&(l.minFilter=_n),l.image=o,l.format=y.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let m=0,_=e.length;m<_;++m)g(m);else d.load(e,function(m){const _=s.parse(m,!0);if(_.isCubemap){const y=_.mipmaps.length/_.mipmapCount;for(let w=0;w<y;w++){o[w]={mipmaps:[]};for(let S=0;S<_.mipmapCount;S++)o[w].mipmaps.push(_.mipmaps[w*_.mipmapCount+S]),o[w].format=_.format,o[w].width=_.width,o[w].height=_.height}l.image=o}else l.image.width=_.width,l.image.height=_.height,l.mipmaps=_.mipmaps;_.mipmapCount===1&&(l.minFilter=_n),l.format=_.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class _f extends yr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ql.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=cf("img");function d(){g(),Ql.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(m){g(),r&&r(m),s.manager.itemError(e),s.manager.itemEnd(e)}function g(){l.removeEventListener("load",d,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",d,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class E2 extends yr{constructor(e){super(e)}load(e,t,i,r){const s=new Af,o=new _f(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function d(f){o.load(e[f],function(g){s.images[f]=g,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)d(f);return s}}class C2 extends yr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Xc,l=new wo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(d){const f=s.parse(d);!f||(f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:Ai,o.wrapT=f.wrapT!==void 0?f.wrapT:Ai,o.magFilter=f.magFilter!==void 0?f.magFilter:_n,o.minFilter=f.minFilter!==void 0?f.minFilter:_n,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=tu),f.mipmapCount===1&&(o.minFilter=_n),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f))},i,r),o}}class hN extends yr{constructor(e){super(e)}load(e,t,i,r){const s=new On,o=new _f(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Fa extends Ht{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ge(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class P2 extends Fa{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ht.DefaultUp),this.updateMatrix(),this.groundColor=new Ge(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ZS=new St,JS=new V,QS=new V;class _w{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Se(512,512),this.map=null,this.mapPass=null,this.matrix=new St,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new dv,this._frameExtents=new Se(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;JS.setFromMatrixPosition(e.matrixWorld),t.position.copy(JS),QS.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(QS),t.updateMatrixWorld(),ZS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ZS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fN extends _w{constructor(){super(new fn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=uf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class T2 extends Fa{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ht.DefaultUp),this.updateMatrix(),this.target=new Ht,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new fN}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const $S=new St,vh=new V,K0=new V;class pN extends _w{constructor(){super(new fn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Se(4,2),this._viewportCount=6,this._viewports=[new qt(2,1,1,1),new qt(0,1,1,1),new qt(3,1,1,1),new qt(1,1,1,1),new qt(3,0,1,1),new qt(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),vh.setFromMatrixPosition(e.matrixWorld),i.position.copy(vh),K0.copy(i.position),K0.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(K0),i.updateMatrixWorld(),r.makeTranslation(-vh.x,-vh.y,-vh.z),$S.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($S)}}class A2 extends Fa{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new pN}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mN extends _w{constructor(){super(new Ea(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class L2 extends Fa{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ht.DefaultUp),this.updateMatrix(),this.target=new Ht,this.shadow=new mN}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class R2 extends Fa{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class k2 extends Fa{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class I2{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new V)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class wv extends Fa{constructor(e=new I2,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Sv extends yr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new wo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=Sv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ge().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ge().setHex(o.value);break;case"v2":r.uniforms[s].value=new Se().fromArray(o.value);break;case"v3":r.uniforms[s].value=new V().fromArray(o.value);break;case"v4":r.uniforms[s].value=new qt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new ji().fromArray(o.value);break;case"m4":r.uniforms[s].value=new St().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Se().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Se().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:d2,SpriteMaterial:iw,RawShaderMaterial:h2,ShaderMaterial:_s,PointsMaterial:sw,MeshPhysicalMaterial:f2,MeshStandardMaterial:hw,MeshPhongMaterial:p2,MeshToonMaterial:m2,MeshNormalMaterial:g2,MeshLambertMaterial:v2,MeshDepthMaterial:ew,MeshDistanceMaterial:tw,MeshBasicMaterial:za,MeshMatcapMaterial:_2,LineDashedMaterial:y2,LineBasicMaterial:Ni,Material:si};return new t[e]}}class Oy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class D2 extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class N2 extends yr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new wo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,w){if(t[w]!==void 0)return t[w];const E=y.interleavedBuffers[w],M=s(y,E.buffer),C=zc(E.type,M),P=new gv(C,E.stride);return P.uuid=E.uuid,t[w]=P,P}function s(y,w){if(i[w]!==void 0)return i[w];const E=y.arrayBuffers[w],M=new Uint32Array(E).buffer;return i[w]=M,M}const o=e.isInstancedBufferGeometry?new D2:new Mt,l=e.data.index;if(l!==void 0){const y=zc(l.type,l.array);o.setIndex(new tn(y,1))}const d=e.data.attributes;for(const y in d){const w=d[y];let S;if(w.isInterleavedBufferAttribute){const E=r(e.data,w.data);S=new Jl(E,w.itemSize,w.offset,w.normalized)}else{const E=zc(w.type,w.array),M=w.isInstancedBufferAttribute?nd:tn;S=new M(E,w.itemSize,w.normalized)}w.name!==void 0&&(S.name=w.name),w.usage!==void 0&&S.setUsage(w.usage),w.updateRange!==void 0&&(S.updateRange.offset=w.updateRange.offset,S.updateRange.count=w.updateRange.count),o.setAttribute(y,S)}const f=e.data.morphAttributes;if(f)for(const y in f){const w=f[y],S=[];for(let E=0,M=w.length;E<M;E++){const C=w[E];let P;if(C.isInterleavedBufferAttribute){const A=r(e.data,C.data);P=new Jl(A,C.itemSize,C.offset,C.normalized)}else{const A=zc(C.type,C.array);P=new tn(A,C.itemSize,C.normalized)}C.name!==void 0&&(P.name=C.name),S.push(P)}o.morphAttributes[y]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,w=m.length;y!==w;++y){const S=m[y];o.addGroup(S.start,S.count,S.materialIndex)}const _=e.data.boundingSphere;if(_!==void 0){const y=new V;_.center!==void 0&&y.fromArray(_.center),o.boundingSphere=new iu(y,_.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class gN extends yr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?Oy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new wo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){let f=null;try{f=JSON.parse(d)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const g=f.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Oy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new wo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),d=l.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,o),d=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,d,l,i),g=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,g),t!==void 0){let m=!1;for(const _ in o)if(o[_].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),d=this.parseObject(e.object,r,l,o,t),f=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,f),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Gl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new vv().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new N2;for(let s=0,o=e.length;s<o;s++){let l;const d=e[s];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(d);break;default:d.type in KS?l=KS[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}l.uuid=d.uuid,d.name!==void 0&&(l.name=d.name),l.isBufferGeometry===!0&&d.userData!==void 0&&(l.userData=d.userData),i[d.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Sv;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const d=e[o];i[d.uuid]===void 0&&(i[d.uuid]=s.parse(d)),r[d.uuid]=i[d.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=vf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(d){return i.manager.itemStart(d),s.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function l(d){if(typeof d=="string"){const f=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(g)}else return d.data?{data:zc(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new vw(t);s=new _f(d),s.setCrossOrigin(this.crossOrigin);for(let f=0,g=e.length;f<g;f++){const m=e[f],_=m.url;if(Array.isArray(_)){const y=[];for(let w=0,S=_.length;w<S;w++){const E=_[w],M=l(E);M!==null&&(M instanceof HTMLImageElement?y.push(M):y.push(new Xc(M.data,M.width,M.height)))}r[m.uuid]=new Il(y)}else{const y=l(m.url);r[m.uuid]=new Il(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const l=o,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(d)}else return o.data?{data:zc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new _f(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const d=e[o],f=d.url;if(Array.isArray(f)){const g=[];for(let m=0,_=f.length;m<_;m++){const y=f[m],w=await s(y);w!==null&&(w instanceof HTMLImageElement?g.push(w):g.push(new Xc(w.data,w.width,w.height)))}i[d.uuid]=new Il(g)}else{const g=await s(d.url);i[d.uuid]=new Il(g)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const d=t[l.image],f=d.data;let g;Array.isArray(f)?(g=new Af,f.length===6&&(g.needsUpdate=!0)):(f&&f.data?g=new Xc:g=new On,f&&(g.needsUpdate=!0)),g.source=d,g.uuid=l.uuid,l.name!==void 0&&(g.name=l.name),l.mapping!==void 0&&(g.mapping=i(l.mapping,vN)),l.offset!==void 0&&g.offset.fromArray(l.offset),l.repeat!==void 0&&g.repeat.fromArray(l.repeat),l.center!==void 0&&g.center.fromArray(l.center),l.rotation!==void 0&&(g.rotation=l.rotation),l.wrap!==void 0&&(g.wrapS=i(l.wrap[0],eb),g.wrapT=i(l.wrap[1],eb)),l.format!==void 0&&(g.format=l.format),l.type!==void 0&&(g.type=l.type),l.encoding!==void 0&&(g.encoding=l.encoding),l.minFilter!==void 0&&(g.minFilter=i(l.minFilter,tb)),l.magFilter!==void 0&&(g.magFilter=i(l.magFilter,tb)),l.anisotropy!==void 0&&(g.anisotropy=l.anisotropy),l.flipY!==void 0&&(g.flipY=l.flipY),l.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(g.unpackAlignment=l.unpackAlignment),l.userData!==void 0&&(g.userData=l.userData),r[l.uuid]=g}return r}parseObject(e,t,i,r,s){let o;function l(_){return t[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",_),t[_]}function d(_){if(_!==void 0){if(Array.isArray(_)){const y=[];for(let w=0,S=_.length;w<S;w++){const E=_[w];i[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),y.push(i[E])}return y}return i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),i[_]}}function f(_){return r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",_),r[_]}let g,m;switch(e.type){case"Scene":o=new mv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ge(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new pv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new fv(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new fn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ea(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new R2(e.color,e.intensity);break;case"DirectionalLight":o=new L2(e.color,e.intensity);break;case"PointLight":o=new A2(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new k2(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new T2(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new P2(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new wv().fromJSON(e);break;case"SkinnedMesh":g=l(e.geometry),m=d(e.material),o=new ZC(g,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":g=l(e.geometry),m=d(e.material),o=new Yn(g,m);break;case"InstancedMesh":g=l(e.geometry),m=d(e.material);const _=e.count,y=e.instanceMatrix,w=e.instanceColor;o=new JC(g,m,_),o.instanceMatrix=new nd(new Float32Array(y.array),16),w!==void 0&&(o.instanceColor=new nd(new Float32Array(w.array),w.itemSize));break;case"LOD":o=new KC;break;case"Line":o=new La(l(e.geometry),d(e.material));break;case"LineLoop":o=new QC(l(e.geometry),d(e.material));break;case"LineSegments":o=new Hs(l(e.geometry),d(e.material));break;case"PointCloud":case"Points":o=new $C(l(e.geometry),d(e.material));break;case"Sprite":o=new YC(d(e.material));break;case"Group":o=new Fc;break;case"Bone":o=new rw;break;default:o=new Ht}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let y=0;y<_.length;y++)o.add(this.parseObject(_[y],t,i,r,s))}if(e.animations!==void 0){const _=e.animations;for(let y=0;y<_.length;y++){const w=_[y];o.animations.push(s[w])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const _=e.levels;for(let y=0;y<_.length;y++){const w=_[y],S=o.getObjectByProperty("uuid",w.object);S!==void 0&&o.addLevel(S,w.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const vN={UVMapping:lv,CubeReflectionMapping:xo,CubeRefractionMapping:Ta,EquirectangularReflectionMapping:ed,EquirectangularRefractionMapping:tf,CubeUVReflectionMapping:ad},eb={RepeatWrapping:nf,ClampToEdgeWrapping:Ai,MirroredRepeatWrapping:rf},tb={NearestFilter:Nn,NearestMipmapNearestFilter:Bg,NearestMipmapLinearFilter:Vg,LinearFilter:_n,LinearMipmapNearestFilter:jx,LinearMipmapLinearFilter:tu};class _N extends yr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ql.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){Ql.add(e,d),t&&t(d),s.manager.itemEnd(e)}).catch(function(d){r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Bm;const yw={getContext:function(){return Bm===void 0&&(Bm=new(window.AudioContext||window.webkitAudioContext)),Bm},setContext:function(n){Bm=n}};class yN extends yr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new wo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const d=l.slice(0);yw.getContext().decodeAudioData(d,function(g){t(g)})}catch(d){r?r(d):console.error(d),s.manager.itemError(e)}},i,r)}}class xN extends wv{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Ge().set(e),s=new Ge().set(t),o=new V(r.r,r.g,r.b),l=new V(s.r,s.g,s.b),d=Math.sqrt(Math.PI),f=d*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(l).multiplyScalar(d),this.sh.coefficients[1].copy(o).sub(l).multiplyScalar(f)}}class wN extends wv{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Ge().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const nb=new St,ib=new St,gl=new St;class SN{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,gl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Bl*t.fov*.5)/t.zoom;let l,d;ib.elements[12]=-r,nb.elements[12]=r,l=-o*t.aspect+s,d=o*t.aspect+s,gl.elements[0]=2*t.near/(d-l),gl.elements[8]=(d+l)/(d-l),this.cameraL.projectionMatrix.copy(gl),l=-o*t.aspect-s,d=o*t.aspect-s,gl.elements[0]=2*t.near/(d-l),gl.elements[8]=(d+l)/(d-l),this.cameraR.projectionMatrix.copy(gl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ib),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(nb)}}class xw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rb(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=rb();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function rb(){return(typeof performance>"u"?Date:performance).now()}const vl=new V,sb=new _i,bN=new V,_l=new V;class MN extends Ht{constructor(){super(),this.type="AudioListener",this.context=yw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vl,sb,bN),_l.set(0,0,-1).applyQuaternion(sb),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vl.x,r),t.positionY.linearRampToValueAtTime(vl.y,r),t.positionZ.linearRampToValueAtTime(vl.z,r),t.forwardX.linearRampToValueAtTime(_l.x,r),t.forwardY.linearRampToValueAtTime(_l.y,r),t.forwardZ.linearRampToValueAtTime(_l.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(vl.x,vl.y,vl.z),t.setOrientation(_l.x,_l.y,_l.z,i.x,i.y,i.z)}}class z2 extends Ht{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const yl=new V,ob=new _i,EN=new V,xl=new V;class CN extends z2{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(yl,ob,EN),xl.set(0,0,1).applyQuaternion(ob);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(yl.x,i),t.positionY.linearRampToValueAtTime(yl.y,i),t.positionZ.linearRampToValueAtTime(yl.z,i),t.orientationX.linearRampToValueAtTime(xl.x,i),t.orientationY.linearRampToValueAtTime(xl.y,i),t.orientationZ.linearRampToValueAtTime(xl.z,i)}else t.setPosition(yl.x,yl.y,yl.z),t.setOrientation(xl.x,xl.y,xl.z)}}class PN{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class O2{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)i[s+l]=i[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const d=t*this._origIndex;this._mixBufferRegion(i,r,d,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let d=t,f=t+t;d!==f;++d)if(i[d]!==i[d+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){_i.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;_i.multiplyQuaternionsFlat(e,o,e,t,e,i),_i.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let l=0;l!==s;++l){const d=t+l;e[d]=e[d]*o+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[i+o]*r}}}const ww="\\[\\]\\.:\\/",TN=new RegExp("["+ww+"]","g"),Sw="[^"+ww+"]",AN="[^"+ww.replace("\\.","")+"]",LN=/((?:WC+[\/:])*)/.source.replace("WC",Sw),RN=/(WCOD+)?/.source.replace("WCOD",AN),kN=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Sw),IN=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Sw),DN=new RegExp("^"+LN+RN+kN+IN+"$"),NN=["material","materials","bones","map"];class zN{constructor(e,t,i){const r=i||Ft.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ft{constructor(e,t,i){this.path=t,this.parsedPath=i||Ft.parseTrackName(t),this.node=Ft.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ft.Composite(e,t,i):new Ft(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(TN,"")}static parseTrackName(e){const t=DN.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);NN.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const d=i(l.children);if(d)return d}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Ft.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===f){f=g;break}break;case"map":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(d=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ft.Composite=zN;Ft.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ft.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ft.prototype.GetterByBindingType=[Ft.prototype._getValue_direct,Ft.prototype._getValue_array,Ft.prototype._getValue_arrayElement,Ft.prototype._getValue_toArray];Ft.prototype.SetterByBindingTypeAndVersioning=[[Ft.prototype._setValue_direct,Ft.prototype._setValue_direct_setNeedsUpdate,Ft.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_array,Ft.prototype._setValue_array_setNeedsUpdate,Ft.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_arrayElement,Ft.prototype._setValue_arrayElement_setNeedsUpdate,Ft.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_fromArray,Ft.prototype._setValue_fromArray_setNeedsUpdate,Ft.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ON{constructor(){this.isAnimationObjectGroup=!0,this.uuid=mr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,d=e.length,f=this.nCachedObjects_;for(let g=0,m=arguments.length;g!==m;++g){const _=arguments[g],y=_.uuid;let w=t[y];if(w===void 0){w=d++,t[y]=w,e.push(_);for(let S=0,E=o;S!==E;++S)s[S].push(new Ft(_,i[S],r[S]))}else if(w<f){l=e[w];const S=--f,E=e[S];t[E.uuid]=w,e[w]=E,t[y]=S,e[S]=_;for(let M=0,C=o;M!==C;++M){const P=s[M],A=P[S];let k=P[w];P[w]=A,k===void 0&&(k=new Ft(_,i[M],r[M])),P[S]=k}}else e[w]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const d=arguments[o],f=d.uuid,g=t[f];if(g!==void 0&&g>=s){const m=s++,_=e[m];t[_.uuid]=g,e[g]=_,t[f]=m,e[m]=d;for(let y=0,w=r;y!==w;++y){const S=i[y],E=S[m],M=S[g];S[g]=E,S[m]=M}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,d=arguments.length;l!==d;++l){const f=arguments[l],g=f.uuid,m=t[g];if(m!==void 0)if(delete t[g],m<s){const _=--s,y=e[_],w=--o,S=e[w];t[y.uuid]=m,e[m]=y,t[S.uuid]=_,e[_]=S,e.pop();for(let E=0,M=r;E!==M;++E){const C=i[E],P=C[_],A=C[w];C[m]=P,C[_]=A,C.pop()}}else{const _=--o,y=e[_];_>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let w=0,S=r;w!==S;++w){const E=i[w];E[m]=E[_],E.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,d=this._objects,f=d.length,g=this.nCachedObjects_,m=new Array(f);r=s.length,i[e]=r,o.push(e),l.push(t),s.push(m);for(let _=g,y=d.length;_!==y;++_){const w=d[_];m[_]=new Ft(w,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,d=o[l],f=e[l];t[f]=i,o[i]=d,o.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class FN{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),d={endingStart:Rl,endingEnd:Rl};for(let f=0;f!==o;++f){const g=s[f].createInterpolant(null);l[f]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=PC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const d=l.parameterPositions,f=l.sampleValues;return d[0]=s,d[1]=s+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const d=(e-s)*i;d<0||i===0?t=0:(this._startTime=null,t=i*d)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const d=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case qx:for(let g=0,m=d.length;g!==m;++g)d[g].evaluate(o),f[g].accumulateAdditive(l);break;case uv:default:for(let g=0,m=d.length;g!==m;++g)d[g].evaluate(o),f[g].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===TC;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===CC){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const d=this.repetitions-s;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=kl,r.endingEnd=kl):(e?r.endingStart=this.zeroSlopeAtStart?kl:Rl:r.endingStart=af,t?r.endingEnd=this.zeroSlopeAtEnd?kl:Rl:r.endingEnd=af)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,d=o.sampleValues;return l[0]=s,d[0]=t,l[1]=s+e,d[1]=i,this}}const UN=new Float32Array(1);class BN extends Vs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,d=i.uuid,f=this._bindingsByRootAndName;let g=f[d];g===void 0&&(g={},f[d]=g);for(let m=0;m!==s;++m){const _=r[m],y=_.name;let w=g[y];if(w!==void 0)++w.referenceCount,o[m]=w;else{if(w=o[m],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,d,y));continue}const S=t&&t._propertyBindings[m].binding.parsedPath;w=new O2(Ft.create(i,y,S),_.ValueTypeName,_.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,d,y),o[m]=w}l[m].resultBuffer=w.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],d=l.knownActions,f=d[d.length-1],g=e._byClipCacheIndex;f._byClipCacheIndex=g,d[g]=f,d.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,_=(e._localRoot||this._root).uuid;delete m[_],d.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,l=o[r],d=t[t.length-1],f=e._cacheIndex;d._cacheIndex=f,t[f]=d,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new mw(new Float32Array(2),new Float32Array(2),1,UN),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?vf.findByName(r,e):e;const l=o!==null?o.uuid:e,d=this._actionsByClip[l];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=uv),d!==void 0){const m=d.actionByRoot[s];if(m!==void 0&&m.blendMode===i)return m;f=d.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const g=new FN(this,o,t,i);return this._bindAction(g,f),this._addInactiveAction(g,l,s),g}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?vf.findByName(i,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,o);const l=this._bindings,d=this._nActiveBindings;for(let f=0;f!==d;++f)l[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let l=0,d=o.length;l!==d;++l){const f=o[l];this._deactivateAction(f);const g=f._cacheIndex,m=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,m._cacheIndex=g,t[g]=m,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot,d=l[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class bw{constructor(e){this.value=e}clone(){return new bw(this.value.clone===void 0?this.value:this.value.clone())}}let VN=0;class HN extends Vs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:VN++}),this.name="",this.usage=lf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class GN extends gv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class WN{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Mw{constructor(e,t,i=0,r=1/0){this.ray=new Pf(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Hl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Fy(e,this,i,t),i.sort(ab),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Fy(e[r],this,i,t);return i.sort(ab),i}}function ab(n,e){return n.distance-e.distance}function Fy(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)Fy(r[s],e,t,!0)}}class Uy{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Rn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class jN{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const lb=new Se;class XN{constructor(e=new Se(1/0,1/0),t=new Se(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=lb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return lb.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ub=new V,Vm=new V;class qN{constructor(e=new V,t=new V){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ub.subVectors(e,this.start),Vm.subVectors(this.end,this.start);const i=Vm.dot(Vm);let s=Vm.dot(ub)/i;return t&&(s=Rn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const cb=new V;class YN extends Ht{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new Mt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,d=32;o<d;o++,l++){const f=o/d*Math.PI*2,g=l/d*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(g),Math.sin(g),1)}i.setAttribute("position",new Ze(r,3));const s=new Ni({fog:!1,toneMapped:!1});this.cone=new Hs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),cb.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(cb),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const oa=new V,Hm=new St,Z0=new St;class KN extends Hs{constructor(e){const t=F2(e),i=new Mt,r=[],s=[],o=new Ge(0,0,1),l=new Ge(0,1,0);for(let f=0;f<t.length;f++){const g=t[f];g.parent&&g.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new Ze(r,3)),i.setAttribute("color",new Ze(s,3));const d=new Ni({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Z0.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Hm.multiplyMatrices(Z0,l.matrixWorld),oa.setFromMatrixPosition(Hm),r.setXYZ(o,oa.x,oa.y,oa.z),Hm.multiplyMatrices(Z0,l.parent.matrixWorld),oa.setFromMatrixPosition(Hm),r.setXYZ(o+1,oa.x,oa.y,oa.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function F2(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,F2(n.children[t]));return e}class ZN extends Yn{constructor(e,t,i){const r=new pd(t,4,2),s=new za({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const JN=new V,db=new Ge,hb=new Ge;class QN extends Ht{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new fd(t);r.rotateY(Math.PI*.5),this.material=new za({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new tn(o,3)),this.add(new Yn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");db.copy(this.light.color),hb.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?db:hb;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(JN.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $N extends Hs{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ge(i),r=new Ge(r);const s=t/2,o=e/t,l=e/2,d=[],f=[];for(let _=0,y=0,w=-l;_<=t;_++,w+=o){d.push(-l,0,w,l,0,w),d.push(w,0,-l,w,0,l);const S=_===s?i:r;S.toArray(f,y),y+=3,S.toArray(f,y),y+=3,S.toArray(f,y),y+=3,S.toArray(f,y),y+=3}const g=new Mt;g.setAttribute("position",new Ze(d,3)),g.setAttribute("color",new Ze(f,3));const m=new Ni({vertexColors:!0,toneMapped:!1});super(g,m),this.type="GridHelper"}}class ez extends Hs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ge(s),o=new Ge(o);const l=[],d=[];if(t>1)for(let m=0;m<t;m++){const _=m/t*(Math.PI*2),y=Math.sin(_)*e,w=Math.cos(_)*e;l.push(0,0,0),l.push(y,0,w);const S=m&1?s:o;d.push(S.r,S.g,S.b),d.push(S.r,S.g,S.b)}for(let m=0;m<i;m++){const _=m&1?s:o,y=e-e/i*m;for(let w=0;w<r;w++){let S=w/r*(Math.PI*2),E=Math.sin(S)*y,M=Math.cos(S)*y;l.push(E,0,M),d.push(_.r,_.g,_.b),S=(w+1)/r*(Math.PI*2),E=Math.sin(S)*y,M=Math.cos(S)*y,l.push(E,0,M),d.push(_.r,_.g,_.b)}}const f=new Mt;f.setAttribute("position",new Ze(l,3)),f.setAttribute("color",new Ze(d,3));const g=new Ni({vertexColors:!0,toneMapped:!1});super(f,g),this.type="PolarGridHelper"}}const fb=new V,Gm=new V,pb=new V;class tz extends Ht{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let r=new Mt;r.setAttribute("position",new Ze([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ni({fog:!1,toneMapped:!1});this.lightPlane=new La(r,s),this.add(this.lightPlane),r=new Mt,r.setAttribute("position",new Ze([0,0,0,0,0,1],3)),this.targetLine=new La(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){fb.setFromMatrixPosition(this.light.matrixWorld),Gm.setFromMatrixPosition(this.light.target.matrixWorld),pb.subVectors(Gm,fb),this.lightPlane.lookAt(Gm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gm),this.targetLine.scale.z=pb.length()}}const Wm=new V,Mn=new Tf;class nz extends Hs{constructor(e){const t=new Mt,i=new Ni({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(w,S){d(w),d(S)}function d(w){r.push(0,0,0),s.push(0,0,0),o[w]===void 0&&(o[w]=[]),o[w].push(r.length/3-1)}t.setAttribute("position",new Ze(r,3)),t.setAttribute("color",new Ze(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new Ge(16755200),g=new Ge(16711680),m=new Ge(43775),_=new Ge(16777215),y=new Ge(3355443);this.setColors(f,g,m,_,y)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Mn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),An("c",t,e,Mn,0,0,-1),An("t",t,e,Mn,0,0,1),An("n1",t,e,Mn,-i,-r,-1),An("n2",t,e,Mn,i,-r,-1),An("n3",t,e,Mn,-i,r,-1),An("n4",t,e,Mn,i,r,-1),An("f1",t,e,Mn,-i,-r,1),An("f2",t,e,Mn,i,-r,1),An("f3",t,e,Mn,-i,r,1),An("f4",t,e,Mn,i,r,1),An("u1",t,e,Mn,i*.7,r*1.1,-1),An("u2",t,e,Mn,-i*.7,r*1.1,-1),An("u3",t,e,Mn,0,r*2,-1),An("cf1",t,e,Mn,-i,0,1),An("cf2",t,e,Mn,i,0,1),An("cf3",t,e,Mn,0,-r,1),An("cf4",t,e,Mn,0,r,1),An("cn1",t,e,Mn,-i,0,-1),An("cn2",t,e,Mn,i,0,-1),An("cn3",t,e,Mn,0,-r,-1),An("cn4",t,e,Mn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function An(n,e,t,i,r,s,o){Wm.set(r,s,o).unproject(i);const l=e[n];if(l!==void 0){const d=t.getAttribute("position");for(let f=0,g=l.length;f<g;f++)d.setXYZ(l[f],Wm.x,Wm.y,Wm.z)}}const jm=new nu;class iz extends Hs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Mt;s.setIndex(new tn(i,1)),s.setAttribute("position",new tn(r,3)),super(s,new Ni({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&jm.setFromObject(this.object),jm.isEmpty())return;const t=jm.min,i=jm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class rz extends Hs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mt;s.setIndex(new tn(i,1)),s.setAttribute("position",new Ze(r,3)),super(s,new Ni({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class sz extends La{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mt;o.setAttribute("position",new Ze(s,3)),o.computeBoundingSphere(),super(o,new Ni({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Mt;d.setAttribute("position",new Ze(l,3)),d.computeBoundingSphere(),this.add(new Yn(d,new za({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const mb=new V;let Xm,J0;class oz extends Ht{constructor(e=new V(0,0,1),t=new V(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Xm===void 0&&(Xm=new Mt,Xm.setAttribute("position",new Ze([0,0,0,0,1,0],3)),J0=new ru(0,.5,1,5,1),J0.translate(0,-.5,0)),this.position.copy(t),this.line=new La(Xm,new Ni({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yn(J0,new za({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{mb.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(mb,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class az extends Hs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Mt;r.setAttribute("position",new Ze(t,3)),r.setAttribute("color",new Ze(i,3));const s=new Ni({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ge,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lz{constructor(){this.type="ShapePath",this.color=new Ge,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new df,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const C=[];for(let P=0,A=M.length;P<A;P++){const k=M[P],D=new Gl;D.curves=k.curves,C.push(D)}return C}function i(M,C){const P=C.length;let A=!1;for(let k=P-1,D=0;D<P;k=D++){let z=C[k],L=C[D],N=L.x-z.x,F=L.y-z.y;if(Math.abs(F)>Number.EPSILON){if(F<0&&(z=C[D],N=-N,L=C[k],F=-F),M.y<z.y||M.y>L.y)continue;if(M.y===z.y){if(M.x===z.x)return!0}else{const q=F*(M.x-z.x)-N*(M.y-z.y);if(q===0)return!0;if(q<0)continue;A=!A}}else{if(M.y!==z.y)continue;if(L.x<=M.x&&M.x<=z.x||z.x<=M.x&&M.x<=L.x)return!0}}return A}const r=Bs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,d;const f=[];if(s.length===1)return l=s[0],d=new Gl,d.curves=l.curves,f.push(d),f;let g=!r(s[0].getPoints());g=e?!g:g;const m=[],_=[];let y=[],w=0,S;_[w]=void 0,y[w]=[];for(let M=0,C=s.length;M<C;M++)l=s[M],S=l.getPoints(),o=r(S),o=e?!o:o,o?(!g&&_[w]&&w++,_[w]={s:new Gl,p:S},_[w].s.curves=l.curves,g&&w++,y[w]=[]):y[w].push({h:l,p:S[0]});if(!_[0])return t(s);if(_.length>1){let M=!1,C=0;for(let P=0,A=_.length;P<A;P++)m[P]=[];for(let P=0,A=_.length;P<A;P++){const k=y[P];for(let D=0;D<k.length;D++){const z=k[D];let L=!0;for(let N=0;N<_.length;N++)i(z.p,_[N].p)&&(P!==N&&C++,L?(L=!1,m[N].push(z)):M=!0);L&&m[P].push(z)}}C>0&&M===!1&&(y=m)}let E;for(let M=0,C=_.length;M<C;M++){d=_[M].s,f.push(d),E=y[M];for(let P=0,A=E.length;P<A;P++)d.holes.push(E[P].h)}return f}}const lo=uz();function uz(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let d=0;d<256;++d){const f=d-127;f<-27?(i[d]=0,i[d|256]=32768,r[d]=24,r[d|256]=24):f<-14?(i[d]=1024>>-f-14,i[d|256]=1024>>-f-14|32768,r[d]=-f-1,r[d|256]=-f-1):f<=15?(i[d]=f+15<<10,i[d|256]=f+15<<10|32768,r[d]=13,r[d|256]=13):f<128?(i[d]=31744,i[d|256]=64512,r[d]=24,r[d|256]=24):(i[d]=31744,i[d|256]=64512,r[d]=13,r[d|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let d=1;d<1024;++d){let f=d<<13,g=0;for(;(f&8388608)===0;)f<<=1,g-=8388608;f&=-8388609,g+=947912704,s[d]=f|g}for(let d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)o[d]=d<<23;o[31]=1199570944,o[32]=2147483648;for(let d=33;d<63;++d)o[d]=2147483648+(d-32<<23);o[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(l[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function cz(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Rn(n,-65504,65504),lo.floatView[0]=n;const e=lo.uint32View[0],t=e>>23&511;return lo.baseTable[t]+((e&8388607)>>lo.shiftTable[t])}function dz(n){const e=n>>10;return lo.uint32View[0]=lo.mantissaTable[lo.offsetTable[e]+(n&1023)]+lo.exponentTable[e],lo.floatView[0]}var Eh=Object.freeze({__proto__:null,toHalfFloat:cz,fromHalfFloat:dz});function hz(){console.error("THREE.ImmediateRenderObject has been removed.")}class fz extends Wr{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class pz extends Cf{constructor(e,t,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,r)}}class mz extends cv{constructor(e,t,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,r)}}class gz extends Oa{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class vz extends Lf{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class _z extends Rf{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class yz extends kf{constructor(e,t,i,r,s,o,l){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,l)}}class xz extends ru{constructor(e,t,i,r,s,o,l,d){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,l,d)}}class wz extends If{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Sz extends Df{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class bz extends hd{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Mz extends dd{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class Ez extends fd{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Cz extends ud{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class Pz extends bo{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class Tz extends Nf{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class Az extends zf{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class Lz extends pd{constructor(e,t,i,r,s,o,l){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,l)}}class Rz extends Of{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class kz extends Ff{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class Iz extends Uf{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class Dz extends Bf{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:av}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=av);const Wg=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Wx,AddEquation:Cl,AddOperation:oC,AdditiveAnimationBlendMode:qx,AdditiveBlending:iy,AlphaFormat:gC,AlwaysDepth:$E,AlwaysStencilFunc:kC,AmbientLight:R2,AmbientLightProbe:wN,AnimationClip:vf,AnimationLoader:cN,AnimationMixer:BN,AnimationObjectGroup:ON,AnimationUtils:oN,ArcCurve:t2,ArrayCamera:WC,ArrowHelper:oz,Audio:z2,AudioAnalyser:PN,AudioContext:yw,AudioListener:MN,AudioLoader:yN,AxesHelper:az,BackSide:pr,BasicDepthPacking:AC,BasicShadowMap:z3,Bone:rw,BooleanKeyframeTrack:su,Box2:XN,Box3:nu,Box3Helper:rz,BoxBufferGeometry:gz,BoxGeometry:Oa,BoxHelper:iz,BufferAttribute:tn,BufferGeometry:Mt,BufferGeometryLoader:N2,ByteType:dC,Cache:Ql,Camera:Tf,CameraHelper:nz,CanvasTexture:LD,CapsuleBufferGeometry:vz,CapsuleGeometry:Lf,CatmullRomCurve3:n2,CineonToneMapping:uC,CircleBufferGeometry:_z,CircleGeometry:Rf,ClampToEdgeWrapping:Ai,Clock:xw,Color:Ge,ColorKeyframeTrack:gw,ColorManagement:Ir,CompressedTexture:e2,CompressedTextureLoader:dN,ConeBufferGeometry:yz,ConeGeometry:kf,CubeCamera:OC,CubeReflectionMapping:xo,CubeRefractionMapping:Ta,CubeTexture:Af,CubeTextureLoader:E2,CubeUVReflectionMapping:ad,CubicBezierCurve:aw,CubicBezierCurve3:i2,CubicInterpolant:w2,CullFaceBack:ny,CullFaceFront:UE,CullFaceFrontBack:N3,CullFaceNone:FE,Curve:ys,CurvePath:s2,CustomBlending:BE,CustomToneMapping:cC,CylinderBufferGeometry:xz,CylinderGeometry:ru,Cylindrical:jN,Data3DTexture:cv,DataArrayTexture:Cf,DataTexture:Xc,DataTexture2DArray:pz,DataTexture3D:mz,DataTextureLoader:C2,DataUtils:Eh,DecrementStencilOp:Y3,DecrementWrapStencilOp:Z3,DefaultLoadingManager:M2,DepthFormat:Ma,DepthStencilFormat:Zl,DepthTexture:jC,DirectionalLight:L2,DirectionalLightHelper:tz,DiscreteInterpolant:S2,DodecahedronBufferGeometry:wz,DodecahedronGeometry:If,DoubleSide:Os,DstAlphaFactor:qE,DstColorFactor:KE,DynamicCopyUsage:dA,DynamicDrawUsage:sA,DynamicReadUsage:lA,EdgesGeometry:o2,EllipseCurve:_v,EqualDepth:tC,EqualStencilFunc:eA,EquirectangularReflectionMapping:ed,EquirectangularRefractionMapping:tf,Euler:ld,EventDispatcher:Vs,ExtrudeBufferGeometry:Sz,ExtrudeGeometry:Df,FileLoader:wo,Float16BufferAttribute:XA,Float32BufferAttribute:Ze,Float64BufferAttribute:qA,FloatType:Ur,Fog:pv,FogExp2:fv,FramebufferTexture:AD,FrontSide:Kl,Frustum:dv,GLBufferAttribute:WN,GLSL1:fA,GLSL3:Ay,GreaterDepth:iC,GreaterEqualDepth:nC,GreaterEqualStencilFunc:rA,GreaterStencilFunc:nA,GridHelper:$N,Group:Fc,HalfFloatType:hs,HemisphereLight:P2,HemisphereLightHelper:QN,HemisphereLightProbe:xN,IcosahedronBufferGeometry:bz,IcosahedronGeometry:hd,ImageBitmapLoader:_N,ImageLoader:_f,ImageUtils:Kx,ImmediateRenderObject:hz,IncrementStencilOp:q3,IncrementWrapStencilOp:K3,InstancedBufferAttribute:nd,InstancedBufferGeometry:D2,InstancedInterleavedBuffer:GN,InstancedMesh:JC,Int16BufferAttribute:WA,Int32BufferAttribute:jA,Int8BufferAttribute:VA,IntType:fC,InterleavedBuffer:gv,InterleavedBufferAttribute:Jl,Interpolant:Vf,InterpolateDiscrete:sf,InterpolateLinear:of,InterpolateSmooth:dg,InvertStencilOp:J3,KeepStencilOp:hg,KeyframeTrack:xs,LOD:KC,LatheBufferGeometry:Mz,LatheGeometry:dd,Layers:Hl,LessDepth:eC,LessEqualDepth:Ug,LessEqualStencilFunc:tA,LessStencilFunc:$3,Light:Fa,LightProbe:wv,Line:La,Line3:qN,LineBasicMaterial:Ni,LineCurve:yv,LineCurve3:r2,LineDashedMaterial:y2,LineLoop:QC,LineSegments:Hs,LinearEncoding:vs,LinearFilter:_n,LinearInterpolant:mw,LinearMipMapLinearFilter:B3,LinearMipMapNearestFilter:U3,LinearMipmapLinearFilter:tu,LinearMipmapNearestFilter:jx,LinearSRGBColorSpace:ma,LinearToneMapping:aC,Loader:yr,LoaderUtils:Oy,LoadingManager:vw,LoopOnce:CC,LoopPingPong:TC,LoopRepeat:PC,LuminanceAlphaFormat:yC,LuminanceFormat:_C,MOUSE:bl,Material:si,MaterialLoader:Sv,MathUtils:PA,Matrix3:ji,Matrix4:St,MaxEquation:ay,Mesh:Yn,MeshBasicMaterial:za,MeshDepthMaterial:ew,MeshDistanceMaterial:tw,MeshLambertMaterial:v2,MeshMatcapMaterial:_2,MeshNormalMaterial:g2,MeshPhongMaterial:p2,MeshPhysicalMaterial:f2,MeshStandardMaterial:hw,MeshToonMaterial:m2,MinEquation:oy,MirroredRepeatWrapping:rf,MixOperation:sC,MultiplyBlending:sy,MultiplyOperation:Ef,NearestFilter:Nn,NearestMipMapLinearFilter:F3,NearestMipMapNearestFilter:O3,NearestMipmapLinearFilter:Vg,NearestMipmapNearestFilter:Bg,NeverDepth:QE,NeverStencilFunc:Q3,NoBlending:mo,NoColorSpace:W3,NoToneMapping:ms,NormalAnimationBlendMode:uv,NormalBlending:Fl,NotEqualDepth:rC,NotEqualStencilFunc:iA,NumberKeyframeTrack:mf,Object3D:Ht,ObjectLoader:gN,ObjectSpaceNormalMap:RC,OctahedronBufferGeometry:Ez,OctahedronGeometry:fd,OneFactor:WE,OneMinusDstAlphaFactor:YE,OneMinusDstColorFactor:ZE,OneMinusSrcAlphaFactor:Gx,OneMinusSrcColorFactor:XE,OrthographicCamera:Ea,PCFShadowMap:Bx,PCFSoftShadowMap:Vx,PMREMGenerator:Ry,Path:df,PerspectiveCamera:fn,Plane:ua,PlaneBufferGeometry:Cz,PlaneGeometry:ud,PlaneHelper:sz,PointLight:A2,PointLightHelper:ZN,Points:$C,PointsMaterial:sw,PolarGridHelper:ez,PolyhedronBufferGeometry:Pz,PolyhedronGeometry:bo,PositionalAudio:CN,PropertyBinding:Ft,PropertyMixer:O2,QuadraticBezierCurve:lw,QuadraticBezierCurve3:uw,Quaternion:_i,QuaternionKeyframeTrack:md,QuaternionLinearInterpolant:b2,REVISION:av,RGBADepthPacking:LC,RGBAFormat:Br,RGBAIntegerFormat:MC,RGBA_ASTC_10x10_Format:Ey,RGBA_ASTC_10x5_Format:Sy,RGBA_ASTC_10x6_Format:by,RGBA_ASTC_10x8_Format:My,RGBA_ASTC_12x10_Format:Cy,RGBA_ASTC_12x12_Format:Py,RGBA_ASTC_4x4_Format:py,RGBA_ASTC_5x4_Format:my,RGBA_ASTC_5x5_Format:gy,RGBA_ASTC_6x5_Format:vy,RGBA_ASTC_6x6_Format:_y,RGBA_ASTC_8x5_Format:yy,RGBA_ASTC_8x6_Format:xy,RGBA_ASTC_8x8_Format:wy,RGBA_BPTC_Format:Ty,RGBA_ETC2_EAC_Format:fy,RGBA_PVRTC_2BPPV1_Format:dy,RGBA_PVRTC_4BPPV1_Format:cy,RGBA_S3TC_DXT1_Format:lg,RGBA_S3TC_DXT3_Format:ug,RGBA_S3TC_DXT5_Format:cg,RGBFormat:vC,RGB_ETC1_Format:EC,RGB_ETC2_Format:hy,RGB_PVRTC_2BPPV1_Format:uy,RGB_PVRTC_4BPPV1_Format:ly,RGB_S3TC_DXT1_Format:ag,RGFormat:SC,RGIntegerFormat:bC,RawShaderMaterial:h2,Ray:Pf,Raycaster:Mw,RectAreaLight:k2,RedFormat:xC,RedIntegerFormat:wC,ReinhardToneMapping:lC,RepeatWrapping:nf,ReplaceStencilOp:X3,ReverseSubtractEquation:HE,RingBufferGeometry:Tz,RingGeometry:Nf,SRGBColorSpace:Ns,Scene:mv,ShaderChunk:Pt,ShaderLib:ds,ShaderMaterial:_s,ShadowMaterial:d2,Shape:Gl,ShapeBufferGeometry:Az,ShapeGeometry:zf,ShapePath:lz,ShapeUtils:Bs,ShortType:hC,Skeleton:vv,SkeletonHelper:KN,SkinnedMesh:ZC,Source:Il,Sphere:iu,SphereBufferGeometry:Lz,SphereGeometry:pd,Spherical:Uy,SphericalHarmonics3:I2,SplineCurve:cw,SpotLight:T2,SpotLightHelper:YN,Sprite:YC,SpriteMaterial:iw,SrcAlphaFactor:Hx,SrcAlphaSaturateFactor:JE,SrcColorFactor:jE,StaticCopyUsage:cA,StaticDrawUsage:lf,StaticReadUsage:aA,StereoCamera:SN,StreamCopyUsage:hA,StreamDrawUsage:oA,StreamReadUsage:uA,StringKeyframeTrack:ou,SubtractEquation:VE,SubtractiveBlending:ry,TOUCH:Ml,TangentSpaceNormalMap:Na,TetrahedronBufferGeometry:Rz,TetrahedronGeometry:Of,Texture:On,TextureLoader:hN,TorusBufferGeometry:kz,TorusGeometry:Ff,TorusKnotBufferGeometry:Iz,TorusKnotGeometry:Uf,Triangle:Or,TriangleFanDrawMode:G3,TriangleStripDrawMode:H3,TrianglesDrawMode:V3,TubeBufferGeometry:Dz,TubeGeometry:Bf,UVMapping:lv,Uint16BufferAttribute:Zx,Uint32BufferAttribute:Jx,Uint8BufferAttribute:HA,Uint8ClampedBufferAttribute:GA,Uniform:bw,UniformsGroup:HN,UniformsLib:ze,UniformsUtils:zC,UnsignedByteType:Aa,UnsignedInt248Type:Ul,UnsignedIntType:pa,UnsignedShort4444Type:pC,UnsignedShort5551Type:mC,UnsignedShortType:Xx,VSMShadowMap:Nc,Vector2:Se,Vector3:V,Vector4:qt,VectorKeyframeTrack:gf,VideoTexture:TD,WebGL1Renderer:XC,WebGL3DRenderTarget:RA,WebGLArrayRenderTarget:LA,WebGLCubeRenderTarget:Qx,WebGLMultipleRenderTargets:kA,WebGLMultisampleRenderTarget:fz,WebGLRenderTarget:Wr,WebGLRenderer:nw,WebGLUtils:GC,WireframeGeometry:c2,WrapAroundEnding:af,ZeroCurvatureEnding:Rl,ZeroFactor:GE,ZeroSlopeEnding:kl,ZeroStencilOp:j3,_SRGBAFormat:Hg,sRGBEncoding:sn},Symbol.toStringTag,{value:"Module"}));var Nl={exports:{}},au={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */au.ConcurrentRoot=1;au.ContinuousEventPriority=4;au.DefaultEventPriority=16;au.DiscreteEventPriority=1;au.IdleEventPriority=536870912;au.LegacyRoot=0;(function(n){n.exports=au})(Nl);function Nz(n){let e;const t=new Set,i=(f,g)=>{const m=typeof f=="function"?f(e):f;if(m!==e){const _=e;e=g?m:Object.assign({},e,m),t.forEach(y=>y(e,_))}},r=()=>e,s=(f,g=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let _=g(e);function y(){const w=g(e);if(!m(_,w)){const S=_;f(_=w,S)}}return t.add(y),()=>t.delete(y)},d={setState:i,getState:r,subscribe:(f,g,m)=>g||m?s(f,g,m):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,d),d}const zz=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gb=zz?He.exports.useEffect:He.exports.useLayoutEffect;function U2(n){const e=typeof n=="function"?Nz(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=He.exports.useReducer(E=>E+1,0),o=e.getState(),l=He.exports.useRef(o),d=He.exports.useRef(i),f=He.exports.useRef(r),g=He.exports.useRef(!1),m=He.exports.useRef();m.current===void 0&&(m.current=i(o));let _,y=!1;(l.current!==o||d.current!==i||f.current!==r||g.current)&&(_=i(o),y=!r(m.current,_)),gb(()=>{y&&(m.current=_),l.current=o,d.current=i,f.current=r,g.current=!1});const w=He.exports.useRef(o);gb(()=>{const E=()=>{try{const C=e.getState(),P=d.current(C);f.current(m.current,P)||(l.current=C,m.current=P,s())}catch{g.current=!0,s()}},M=e.subscribe(E);return e.getState()!==w.current&&E(),M},[]);const S=y?_:m.current;return He.exports.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var B2={exports:{}},Q0={exports:{}},$0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function Oz(){return vb||(vb=1,function(n){function e(O,B){var H=O.length;O.push(B);e:for(;0<H;){var $=H-1>>>1,ie=O[$];if(0<r(ie,B))O[$]=B,O[H]=ie,H=$;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var B=O[0],H=O.pop();if(H!==B){O[0]=H;e:for(var $=0,ie=O.length,fe=ie>>>1;$<fe;){var be=2*($+1)-1,qe=O[be],ce=be+1,Ke=O[ce];if(0>r(qe,H))ce<ie&&0>r(Ke,qe)?(O[$]=Ke,O[ce]=H,$=ce):(O[$]=qe,O[be]=H,$=be);else if(ce<ie&&0>r(Ke,H))O[$]=Ke,O[ce]=H,$=ce;else break e}}return B}function r(O,B){var H=O.sortIndex-B.sortIndex;return H!==0?H:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var d=[],f=[],g=1,m=null,_=3,y=!1,w=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(O){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=O)i(f),B.sortIndex=B.expirationTime,e(d,B);else break;B=t(f)}}function A(O){if(S=!1,P(O),!w)if(t(d)!==null)w=!0,se(k);else{var B=t(f);B!==null&&ne(A,B.startTime-O)}}function k(O,B){w=!1,S&&(S=!1,M(L),L=-1),y=!0;var H=_;try{for(P(B),m=t(d);m!==null&&(!(m.expirationTime>B)||O&&!q());){var $=m.callback;if(typeof $=="function"){m.callback=null,_=m.priorityLevel;var ie=$(m.expirationTime<=B);B=n.unstable_now(),typeof ie=="function"?m.callback=ie:m===t(d)&&i(d),P(B)}else i(d);m=t(d)}if(m!==null)var fe=!0;else{var be=t(f);be!==null&&ne(A,be.startTime-B),fe=!1}return fe}finally{m=null,_=H,y=!1}}var D=!1,z=null,L=-1,N=5,F=-1;function q(){return!(n.unstable_now()-F<N)}function ge(){if(z!==null){var O=n.unstable_now();F=O;var B=!0;try{B=z(!0,O)}finally{B?te():(D=!1,z=null)}}else D=!1}var te;if(typeof C=="function")te=function(){C(ge)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,le=K.port2;K.port1.onmessage=ge,te=function(){le.postMessage(null)}}else te=function(){E(ge,0)};function se(O){z=O,D||(D=!0,te())}function ne(O,B){L=E(function(){O(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,se(k))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(O){switch(_){case 1:case 2:case 3:var B=3;break;default:B=_}var H=_;_=B;try{return O()}finally{_=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var H=_;_=O;try{return B()}finally{_=H}},n.unstable_scheduleCallback=function(O,B,H){var $=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?$+H:$):H=$,O){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=H+ie,O={id:g++,callback:B,priorityLevel:O,startTime:H,expirationTime:ie,sortIndex:-1},H>$?(O.sortIndex=H,e(f,O),t(d)===null&&O===t(f)&&(S?(M(L),L=-1):S=!0,ne(A,H-$))):(O.sortIndex=ie,e(d,O),w||y||(w=!0,se(k))),O},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(O){var B=_;return function(){var H=_;_=B;try{return O.apply(this,arguments)}finally{_=H}}}}($0)),$0}var _b;function Fz(){return _b||(_b=1,function(n){n.exports=Oz()}(Q0)),Q0.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uz=function(e){var t={},i=He.exports,r=Fz(),s=Object.assign;function o(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,v=1;v<arguments.length;v++)c+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),k=Symbol.iterator;function D(a){return a===null||typeof a!="object"?null:(a=k&&a[k]||a["@@iterator"],typeof a=="function"?a:null)}function z(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case g:return"Fragment";case f:return"Portal";case _:return"Profiler";case m:return"StrictMode";case E:return"Suspense";case M:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case w:return(a.displayName||"Context")+".Consumer";case y:return(a._context.displayName||"Context")+".Provider";case S:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case C:return c=a.displayName||null,c!==null?c:z(a.type)||"Memo";case P:c=a._payload,a=a._init;try{return z(a(c))}catch{}}return null}function L(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(c);case 8:return c===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function N(a){var c=a,v=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(v=c.return),a=c.return;while(a)}return c.tag===3?v:null}function F(a){if(N(a)!==a)throw Error(o(188))}function q(a){var c=a.alternate;if(!c){if(c=N(a),c===null)throw Error(o(188));return c!==a?null:a}for(var v=a,x=c;;){var T=v.return;if(T===null)break;var R=T.alternate;if(R===null){if(x=T.return,x!==null){v=x;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===v)return F(T),a;if(R===x)return F(T),c;R=R.sibling}throw Error(o(188))}if(v.return!==x.return)v=T,x=R;else{for(var W=!1,J=T.child;J;){if(J===v){W=!0,v=T,x=R;break}if(J===x){W=!0,x=T,v=R;break}J=J.sibling}if(!W){for(J=R.child;J;){if(J===v){W=!0,v=R,x=T;break}if(J===x){W=!0,x=R,v=T;break}J=J.sibling}if(!W)throw Error(o(189))}}if(v.alternate!==x)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?a:c}function ge(a){return a=q(a),a!==null?te(a):null}function te(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=te(a);if(c!==null)return c;a=a.sibling}return null}function K(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var c=K(a);if(c!==null)return c}a=a.sibling}return null}var le=Array.isArray,se=e.getPublicInstance,ne=e.getRootHostContext,O=e.getChildHostContext,B=e.prepareForCommit,H=e.resetAfterCommit,$=e.createInstance,ie=e.appendInitialChild,fe=e.finalizeInitialChildren,be=e.prepareUpdate,qe=e.shouldSetTextContent,ce=e.createTextInstance,Ke=e.scheduleTimeout,tt=e.cancelTimeout,nt=e.noTimeout,Te=e.isPrimaryRenderer,rt=e.supportsMutation,we=e.supportsPersistence,me=e.supportsHydration,Ae=e.getInstanceFromNode,Ye=e.preparePortalMount,Ne=e.getCurrentEventPriority,dt=e.detachDeletedInstance,Qe=e.supportsMicrotasks,Je=e.scheduleMicrotask,Tt=e.supportsTestSelectors,kt=e.findFiberRoot,j=e.getBoundingRect,U=e.getTextContent,de=e.isHiddenSubtree,Ee=e.matchAccessibilityRole,Le=e.setFocusIfFocusable,De=e.setupIntersectionObserver,lt=e.appendChild,he=e.appendChildToContainer,We=e.commitTextUpdate,Oe=e.commitMount,Y=e.commitUpdate,ue=e.insertBefore,Pe=e.insertInContainerBefore,Ve=e.removeChild,ft=e.removeChildFromContainer,Z=e.resetTextContent,Ue=e.hideInstance,_e=e.hideTextInstance,Ie=e.unhideInstance,ke=e.unhideTextInstance,ht=e.clearContainer,un=e.cloneInstance,Nt=e.createContainerChildSet,Ki=e.appendChildToContainerChildSet,jt=e.finalizeContainerChildren,xi=e.replaceContainerChildren,kn=e.cloneHiddenInstance,Mo=e.cloneHiddenTextInstance,ws=e.canHydrateInstance,lu=e.canHydrateTextInstance,gd=e.canHydrateSuspenseInstance,uu=e.isSuspenseInstancePending,Ua=e.isSuspenseInstanceFallback,G=e.registerSuspenseInstanceRetry,oe=e.getNextHydratableSibling,ye=e.getFirstHydratableChild,re=e.getFirstHydratableChildWithinContainer,xe=e.getFirstHydratableChildWithinSuspenseInstance,st=e.hydrateInstance,ut=e.hydrateTextInstance,_t=e.hydrateSuspenseInstance,at=e.getNextHydratableInstanceAfterSuspenseInstance,It=e.commitHydratedContainer,Ct=e.commitHydratedSuspenseInstance,At=e.clearSuspenseBoundary,Jt=e.clearSuspenseBoundaryFromContainer,jr=e.shouldDeleteUnhydratedTailInstances,Ss=e.didNotMatchHydratedContainerTextInstance,Xr=e.didNotMatchHydratedTextInstance,pn;function yt(a){if(pn===void 0)try{throw Error()}catch(v){var c=v.stack.trim().match(/\n( *(at )?)/);pn=c&&c[1]||""}return`
`+pn+a}var xr=!1;function nn(a,c){if(!a||xr)return"";xr=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Re){var x=Re}Reflect.construct(a,[],c)}else{try{c.call()}catch(Re){x=Re}a.call(c.prototype)}else{try{throw Error()}catch(Re){x=Re}a()}}catch(Re){if(Re&&x&&typeof Re.stack=="string"){for(var T=Re.stack.split(`
`),R=x.stack.split(`
`),W=T.length-1,J=R.length-1;1<=W&&0<=J&&T[W]!==R[J];)J--;for(;1<=W&&0<=J;W--,J--)if(T[W]!==R[J]){if(W!==1||J!==1)do if(W--,J--,0>J||T[W]!==R[J]){var ve=`
`+T[W].replace(" at new "," at ");return a.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",a.displayName)),ve}while(1<=W&&0<=J);break}}}finally{xr=!1,Error.prepareStackTrace=v}return(a=a?a.displayName||a.name:"")?yt(a):""}var Zn=Object.prototype.hasOwnProperty,wi=[],Si=-1;function bi(a){return{current:a}}function pt(a){0>Si||(a.current=wi[Si],wi[Si]=null,Si--)}function Et(a,c){Si++,wi[Si]=a.current,a.current=c}var zi={},zt=bi(zi),Pn=bi(!1),qr=zi;function Yr(a,c){var v=a.type.contextTypes;if(!v)return zi;var x=a.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var T={},R;for(R in v)T[R]=c[R];return x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=T),T}function oi(a){return a=a.childContextTypes,a!=null}function bs(){pt(Pn),pt(zt)}function Zi(a,c,v){if(zt.current!==zi)throw Error(o(168));Et(zt,c),Et(Pn,v)}function Eo(a,c,v){var x=a.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return v;x=x.getChildContext();for(var T in x)if(!(T in c))throw Error(o(108,L(a)||"Unknown",T));return s({},v,x)}function Kr(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||zi,qr=zt.current,Et(zt,a),Et(Pn,Pn.current),!0}function Ba(a,c,v){var x=a.stateNode;if(!x)throw Error(o(169));v?(a=Eo(a,c,qr),x.__reactInternalMemoizedMergedChildContext=a,pt(Pn),pt(zt),Et(zt,a)):pt(Pn),Et(Pn,v)}var Mi=Math.clz32?Math.clz32:Gf,Cv=Math.log,Va=Math.LN2;function Gf(a){return a>>>=0,a===0?32:31-(Cv(a)/Va|0)|0}var cu=64,Ha=4194304;function Co(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function du(a,c){var v=a.pendingLanes;if(v===0)return 0;var x=0,T=a.suspendedLanes,R=a.pingedLanes,W=v&268435455;if(W!==0){var J=W&~T;J!==0?x=Co(J):(R&=W,R!==0&&(x=Co(R)))}else W=v&~T,W!==0?x=Co(W):R!==0&&(x=Co(R));if(x===0)return 0;if(c!==0&&c!==x&&(c&T)===0&&(T=x&-x,R=c&-c,T>=R||T===16&&(R&4194240)!==0))return c;if((x&4)!==0&&(x|=v&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=x;0<c;)v=31-Mi(c),T=1<<v,x|=a[v],c&=~T;return x}function hu(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pv(a,c){for(var v=a.suspendedLanes,x=a.pingedLanes,T=a.expirationTimes,R=a.pendingLanes;0<R;){var W=31-Mi(R),J=1<<W,ve=T[W];ve===-1?((J&v)===0||(J&x)!==0)&&(T[W]=hu(J,c)):ve<=c&&(a.expiredLanes|=J),R&=~J}}function fu(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function pu(a){for(var c=[],v=0;31>v;v++)c.push(a);return c}function Ga(a,c,v){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Mi(c),a[c]=v}function Tv(a,c){var v=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var x=a.eventTimes;for(a=a.expirationTimes;0<v;){var T=31-Mi(v),R=1<<T;c[T]=0,x[T]=-1,a[T]=-1,v&=~R}}function vd(a,c){var v=a.entangledLanes|=c;for(a=a.entanglements;v;){var x=31-Mi(v),T=1<<x;T&c|a[x]&c&&(a[x]|=c),v&=~T}}var Dt=0;function Wf(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Wa=r.unstable_scheduleCallback,Po=r.unstable_cancelCallback,Av=r.unstable_shouldYield,ja=r.unstable_requestPaint,In=r.unstable_now,Xa=r.unstable_ImmediatePriority,jf=r.unstable_UserBlockingPriority,_d=r.unstable_NormalPriority,Lv=r.unstable_IdlePriority,mu=null,wr=null;function Rv(a){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(mu,a,void 0,(a.current.flags&128)===128)}catch{}}function kv(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Sr=typeof Object.is=="function"?Object.is:kv,Zr=null,gu=!1,yd=!1;function Xf(a){Zr===null?Zr=[a]:Zr.push(a)}function Iv(a){gu=!0,Xf(a)}function br(){if(!yd&&Zr!==null){yd=!0;var a=0,c=Dt;try{var v=Zr;for(Dt=1;a<v.length;a++){var x=v[a];do x=x(!0);while(x!==null)}Zr=null,gu=!1}catch(T){throw Zr!==null&&(Zr=Zr.slice(a+1)),Wa(Xa,br),T}finally{Dt=c,yd=!1}}return null}var Dv=l.ReactCurrentBatchConfig;function vu(a,c){if(Sr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var v=Object.keys(a),x=Object.keys(c);if(v.length!==x.length)return!1;for(x=0;x<v.length;x++){var T=v[x];if(!Zn.call(c,T)||!Sr(a[T],c[T]))return!1}return!0}function qf(a){switch(a.tag){case 5:return yt(a.type);case 16:return yt("Lazy");case 13:return yt("Suspense");case 19:return yt("SuspenseList");case 0:case 2:case 15:return a=nn(a.type,!1),a;case 11:return a=nn(a.type.render,!1),a;case 1:return a=nn(a.type,!0),a;default:return""}}function Ji(a,c){if(a&&a.defaultProps){c=s({},c),a=a.defaultProps;for(var v in a)c[v]===void 0&&(c[v]=a[v]);return c}return c}var _u=bi(null),yu=null,Gs=null,xd=null;function Qi(){xd=Gs=yu=null}function wd(a,c,v){Te?(Et(_u,c._currentValue),c._currentValue=v):(Et(_u,c._currentValue2),c._currentValue2=v)}function Sd(a){var c=_u.current;pt(_u),Te?a._currentValue=c:a._currentValue2=c}function Tn(a,c,v){for(;a!==null;){var x=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),a===v)break;a=a.return}}function To(a,c){yu=a,xd=Gs=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Ei=!0),a.firstContext=null)}function Jn(a){var c=Te?a._currentValue:a._currentValue2;if(xd!==a)if(a={context:a,memoizedValue:c,next:null},Gs===null){if(yu===null)throw Error(o(308));Gs=a,yu.dependencies={lanes:0,firstContext:a}}else Gs=Gs.next=a;return c}var $i=null,Mr=!1;function xu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yf(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Jr(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Ms(a,c){var v=a.updateQueue;v!==null&&(v=v.shared,dn!==null&&(a.mode&1)!==0&&(wt&2)===0?(a=v.interleaved,a===null?(c.next=c,$i===null?$i=[v]:$i.push(v)):(c.next=a.next,a.next=c),v.interleaved=c):(a=v.pending,a===null?c.next=c:(c.next=a.next,a.next=c),v.pending=c))}function Es(a,c,v){if(c=c.updateQueue,c!==null&&(c=c.shared,(v&4194240)!==0)){var x=c.lanes;x&=a.pendingLanes,v|=x,c.lanes=v,vd(a,v)}}function Qn(a,c){var v=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,v===x)){var T=null,R=null;if(v=v.firstBaseUpdate,v!==null){do{var W={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};R===null?T=R=W:R=R.next=W,v=v.next}while(v!==null);R===null?T=R=c:R=R.next=c}else T=R=c;v={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:x.shared,effects:x.effects},a.updateQueue=v;return}a=v.lastBaseUpdate,a===null?v.firstBaseUpdate=c:a.next=c,v.lastBaseUpdate=c}function Cs(a,c,v,x){var T=a.updateQueue;Mr=!1;var R=T.firstBaseUpdate,W=T.lastBaseUpdate,J=T.shared.pending;if(J!==null){T.shared.pending=null;var ve=J,Re=ve.next;ve.next=null,W===null?R=Re:W.next=Re,W=ve;var Xe=a.alternate;Xe!==null&&(Xe=Xe.updateQueue,J=Xe.lastBaseUpdate,J!==W&&(J===null?Xe.firstBaseUpdate=Re:J.next=Re,Xe.lastBaseUpdate=ve))}if(R!==null){var mt=T.baseState;W=0,Xe=Re=ve=null,J=R;do{var ot=J.lane,$t=J.eventTime;if((x&ot)===ot){Xe!==null&&(Xe=Xe.next={eventTime:$t,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var it=a,hi=J;switch(ot=c,$t=v,hi.tag){case 1:if(it=hi.payload,typeof it=="function"){mt=it.call($t,mt,ot);break e}mt=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=hi.payload,ot=typeof it=="function"?it.call($t,mt,ot):it,ot==null)break e;mt=s({},mt,ot);break e;case 2:Mr=!0}}J.callback!==null&&J.lane!==0&&(a.flags|=64,ot=T.effects,ot===null?T.effects=[J]:ot.push(J))}else $t={eventTime:$t,lane:ot,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Xe===null?(Re=Xe=$t,ve=mt):Xe=Xe.next=$t,W|=ot;if(J=J.next,J===null){if(J=T.shared.pending,J===null)break;ot=J,J=ot.next,ot.next=null,T.lastBaseUpdate=ot,T.shared.pending=null}}while(1);if(Xe===null&&(ve=mt),T.baseState=ve,T.firstBaseUpdate=Re,T.lastBaseUpdate=Xe,c=T.shared.interleaved,c!==null){T=c;do W|=T.lane,T=T.next;while(T!==c)}else R===null&&(T.shared.lanes=0);Xo|=W,a.lanes=W,a.memoizedState=mt}}function Er(a,c,v){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var x=a[c],T=x.callback;if(T!==null){if(x.callback=null,x=v,typeof T!="function")throw Error(o(191,T));T.call(x)}}}var Kf=new i.Component().refs;function wu(a,c,v,x){c=a.memoizedState,v=v(x,c),v=v==null?c:s({},c,v),a.memoizedState=v,a.lanes===0&&(a.updateQueue.baseState=v)}var Ao={isMounted:function(a){return(a=a._reactInternals)?N(a)===a:!1},enqueueSetState:function(a,c,v){a=a._reactInternals;var x=ei(),T=ks(a),R=Jr(x,T);R.payload=c,v!=null&&(R.callback=v),Ms(a,R),c=Bi(a,T,x),c!==null&&Es(c,a,T)},enqueueReplaceState:function(a,c,v){a=a._reactInternals;var x=ei(),T=ks(a),R=Jr(x,T);R.tag=1,R.payload=c,v!=null&&(R.callback=v),Ms(a,R),c=Bi(a,T,x),c!==null&&Es(c,a,T)},enqueueForceUpdate:function(a,c){a=a._reactInternals;var v=ei(),x=ks(a),T=Jr(v,x);T.tag=2,c!=null&&(T.callback=c),Ms(a,T),c=Bi(a,x,v),c!==null&&Es(c,a,x)}};function Ps(a,c,v,x,T,R,W){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,R,W):c.prototype&&c.prototype.isPureReactComponent?!vu(v,x)||!vu(T,R):!0}function Qt(a,c,v){var x=!1,T=zi,R=c.contextType;return typeof R=="object"&&R!==null?R=Jn(R):(T=oi(c)?qr:zt.current,x=c.contextTypes,R=(x=x!=null)?Yr(a,T):zi),c=new c(v,R),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Ao,a.stateNode=c,c._reactInternals=a,x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=T,a.__reactInternalMemoizedMaskedChildContext=R),c}function bd(a,c,v,x){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(v,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(v,x),c.state!==a&&Ao.enqueueReplaceState(c,c.state,null)}function mn(a,c,v,x){var T=a.stateNode;T.props=v,T.state=a.memoizedState,T.refs=Kf,xu(a);var R=c.contextType;typeof R=="object"&&R!==null?T.context=Jn(R):(R=oi(c)?qr:zt.current,T.context=Yr(a,R)),T.state=a.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(wu(a,c,R,v),T.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(c=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),c!==T.state&&Ao.enqueueReplaceState(T,T.state,null),Cs(a,v,T,x),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308)}var Ws=[],Fn=0,Su=null,Ts=0,ai=[],Oi=0,js=null,er=1,Qr="";function $r(a,c){Ws[Fn++]=Ts,Ws[Fn++]=Su,Su=a,Ts=c}function Lo(a,c,v){ai[Oi++]=er,ai[Oi++]=Qr,ai[Oi++]=js,js=a;var x=er;a=Qr;var T=32-Mi(x)-1;x&=~(1<<T),v+=1;var R=32-Mi(c)+T;if(30<R){var W=T-T%5;R=(x&(1<<W)-1).toString(32),x>>=W,T-=W,er=1<<32-Mi(c)+T|v<<T|x,Qr=R+a}else er=1<<R|v<<T|x,Qr=a}function Ro(a){a.return!==null&&($r(a,1),Lo(a,1,0))}function bu(a){for(;a===Su;)Su=Ws[--Fn],Ws[Fn]=null,Ts=Ws[--Fn],Ws[Fn]=null;for(;a===js;)js=ai[--Oi],ai[Oi]=null,Qr=ai[--Oi],ai[Oi]=null,er=ai[--Oi],ai[Oi]=null}var Sn=null,li=null,Kt=!1,Xs=!1,tr=null;function qa(a,c){var v=Lr(5,null,null,0);v.elementType="DELETED",v.stateNode=c,v.return=a,c=a.deletions,c===null?(a.deletions=[v],a.flags|=16):c.push(v)}function qs(a,c){switch(a.tag){case 5:return c=ws(c,a.type,a.pendingProps),c!==null?(a.stateNode=c,Sn=a,li=ye(c),!0):!1;case 6:return c=lu(c,a.pendingProps),c!==null?(a.stateNode=c,Sn=a,li=null,!0):!1;case 13:if(c=gd(c),c!==null){var v=js!==null?{id:er,overflow:Qr}:null;return a.memoizedState={dehydrated:c,treeContext:v,retryLane:1073741824},v=Lr(18,null,null,0),v.stateNode=c,v.return=a,a.child=v,Sn=a,li=null,!0}return!1;default:return!1}}function As(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ko(a){if(Kt){var c=li;if(c){var v=c;if(!qs(a,c)){if(As(a))throw Error(o(418));c=oe(v);var x=Sn;c&&qs(a,c)?qa(x,v):(a.flags=a.flags&-4097|2,Kt=!1,Sn=a)}}else{if(As(a))throw Error(o(418));a.flags=a.flags&-4097|2,Kt=!1,Sn=a}}}function Zf(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Sn=a}function Ya(a){if(!me||a!==Sn)return!1;if(!Kt)return Zf(a),Kt=!0,!1;if(a.tag!==3&&(a.tag!==5||jr(a.type)&&!qe(a.type,a.memoizedProps))){var c=li;if(c){if(As(a)){for(a=li;a;)a=oe(a);throw Error(o(418))}for(;c;)qa(a,c),c=oe(c)}}if(Zf(a),a.tag===13){if(!me)throw Error(o(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));li=at(a)}else li=Sn?oe(a.stateNode):null;return!0}function Io(){me&&(li=Sn=null,Xs=Kt=!1)}function Md(a){tr===null?tr=[a]:tr.push(a)}function nr(a,c,v){if(a=v.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var x=v.stateNode}if(!x)throw Error(o(147,a));var T=x,R=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===R?c.ref:(c=function(W){var J=T.refs;J===Kf&&(J=T.refs={}),W===null?delete J[R]:J[R]=W},c._stringRef=R,c)}if(typeof a!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,a))}return a}function Mu(a,c){throw a=Object.prototype.toString.call(c),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function Jf(a){var c=a._init;return c(a._payload)}function Qf(a){function c(ae,Q){if(a){var pe=ae.deletions;pe===null?(ae.deletions=[Q],ae.flags|=16):pe.push(Q)}}function v(ae,Q){if(!a)return null;for(;Q!==null;)c(ae,Q),Q=Q.sibling;return null}function x(ae,Q){for(ae=new Map;Q!==null;)Q.key!==null?ae.set(Q.key,Q):ae.set(Q.index,Q),Q=Q.sibling;return ae}function T(ae,Q){return ae=Zo(ae,Q),ae.index=0,ae.sibling=null,ae}function R(ae,Q,pe){return ae.index=pe,a?(pe=ae.alternate,pe!==null?(pe=pe.index,pe<Q?(ae.flags|=2,Q):pe):(ae.flags|=2,Q)):(ae.flags|=1048576,Q)}function W(ae){return a&&ae.alternate===null&&(ae.flags|=2),ae}function J(ae,Q,pe,Be){return Q===null||Q.tag!==6?(Q=Gv(pe,ae.mode,Be),Q.return=ae,Q):(Q=T(Q,pe),Q.return=ae,Q)}function ve(ae,Q,pe,Be){var et=pe.type;return et===g?Xe(ae,Q,pe.props.children,Be,pe.key):Q!==null&&(Q.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===P&&Jf(et)===Q.type)?(Be=T(Q,pe.props),Be.ref=nr(ae,Q,pe),Be.return=ae,Be):(Be=Vp(pe.type,pe.key,pe.props,null,ae.mode,Be),Be.ref=nr(ae,Q,pe),Be.return=ae,Be)}function Re(ae,Q,pe,Be){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==pe.containerInfo||Q.stateNode.implementation!==pe.implementation?(Q=Wv(pe,ae.mode,Be),Q.return=ae,Q):(Q=T(Q,pe.children||[]),Q.return=ae,Q)}function Xe(ae,Q,pe,Be,et){return Q===null||Q.tag!==7?(Q=hl(pe,ae.mode,Be,et),Q.return=ae,Q):(Q=T(Q,pe),Q.return=ae,Q)}function mt(ae,Q,pe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Gv(""+Q,ae.mode,pe),Q.return=ae,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case d:return pe=Vp(Q.type,Q.key,Q.props,null,ae.mode,pe),pe.ref=nr(ae,null,Q),pe.return=ae,pe;case f:return Q=Wv(Q,ae.mode,pe),Q.return=ae,Q;case P:var Be=Q._init;return mt(ae,Be(Q._payload),pe)}if(le(Q)||D(Q))return Q=hl(Q,ae.mode,pe,null),Q.return=ae,Q;Mu(ae,Q)}return null}function ot(ae,Q,pe,Be){var et=Q!==null?Q.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return et!==null?null:J(ae,Q,""+pe,Be);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case d:return pe.key===et?ve(ae,Q,pe,Be):null;case f:return pe.key===et?Re(ae,Q,pe,Be):null;case P:return et=pe._init,ot(ae,Q,et(pe._payload),Be)}if(le(pe)||D(pe))return et!==null?null:Xe(ae,Q,pe,Be,null);Mu(ae,pe)}return null}function $t(ae,Q,pe,Be,et){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return ae=ae.get(pe)||null,J(Q,ae,""+Be,et);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case d:return ae=ae.get(Be.key===null?pe:Be.key)||null,ve(Q,ae,Be,et);case f:return ae=ae.get(Be.key===null?pe:Be.key)||null,Re(Q,ae,Be,et);case P:var bt=Be._init;return $t(ae,Q,pe,bt(Be._payload),et)}if(le(Be)||D(Be))return ae=ae.get(pe)||null,Xe(Q,ae,Be,et,null);Mu(Q,Be)}return null}function it(ae,Q,pe,Be){for(var et=null,bt=null,gt=Q,Bt=Q=0,jn=null;gt!==null&&Bt<pe.length;Bt++){gt.index>Bt?(jn=gt,gt=null):jn=gt.sibling;var Vt=ot(ae,gt,pe[Bt],Be);if(Vt===null){gt===null&&(gt=jn);break}a&&gt&&Vt.alternate===null&&c(ae,gt),Q=R(Vt,Q,Bt),bt===null?et=Vt:bt.sibling=Vt,bt=Vt,gt=jn}if(Bt===pe.length)return v(ae,gt),Kt&&$r(ae,Bt),et;if(gt===null){for(;Bt<pe.length;Bt++)gt=mt(ae,pe[Bt],Be),gt!==null&&(Q=R(gt,Q,Bt),bt===null?et=gt:bt.sibling=gt,bt=gt);return Kt&&$r(ae,Bt),et}for(gt=x(ae,gt);Bt<pe.length;Bt++)jn=$t(gt,ae,Bt,pe[Bt],Be),jn!==null&&(a&&jn.alternate!==null&&gt.delete(jn.key===null?Bt:jn.key),Q=R(jn,Q,Bt),bt===null?et=jn:bt.sibling=jn,bt=jn);return a&&gt.forEach(function(Jo){return c(ae,Jo)}),Kt&&$r(ae,Bt),et}function hi(ae,Q,pe,Be){var et=D(pe);if(typeof et!="function")throw Error(o(150));if(pe=et.call(pe),pe==null)throw Error(o(151));for(var bt=et=null,gt=Q,Bt=Q=0,jn=null,Vt=pe.next();gt!==null&&!Vt.done;Bt++,Vt=pe.next()){gt.index>Bt?(jn=gt,gt=null):jn=gt.sibling;var Jo=ot(ae,gt,Vt.value,Be);if(Jo===null){gt===null&&(gt=jn);break}a&&gt&&Jo.alternate===null&&c(ae,gt),Q=R(Jo,Q,Bt),bt===null?et=Jo:bt.sibling=Jo,bt=Jo,gt=jn}if(Vt.done)return v(ae,gt),Kt&&$r(ae,Bt),et;if(gt===null){for(;!Vt.done;Bt++,Vt=pe.next())Vt=mt(ae,Vt.value,Be),Vt!==null&&(Q=R(Vt,Q,Bt),bt===null?et=Vt:bt.sibling=Vt,bt=Vt);return Kt&&$r(ae,Bt),et}for(gt=x(ae,gt);!Vt.done;Bt++,Vt=pe.next())Vt=$t(gt,ae,Bt,Vt.value,Be),Vt!==null&&(a&&Vt.alternate!==null&&gt.delete(Vt.key===null?Bt:Vt.key),Q=R(Vt,Q,Bt),bt===null?et=Vt:bt.sibling=Vt,bt=Vt);return a&&gt.forEach(function(mP){return c(ae,mP)}),Kt&&$r(ae,Bt),et}function Rr(ae,Q,pe,Be){if(typeof pe=="object"&&pe!==null&&pe.type===g&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case d:e:{for(var et=pe.key,bt=Q;bt!==null;){if(bt.key===et){if(et=pe.type,et===g){if(bt.tag===7){v(ae,bt.sibling),Q=T(bt,pe.props.children),Q.return=ae,ae=Q;break e}}else if(bt.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===P&&Jf(et)===bt.type){v(ae,bt.sibling),Q=T(bt,pe.props),Q.ref=nr(ae,bt,pe),Q.return=ae,ae=Q;break e}v(ae,bt);break}else c(ae,bt);bt=bt.sibling}pe.type===g?(Q=hl(pe.props.children,ae.mode,Be,pe.key),Q.return=ae,ae=Q):(Be=Vp(pe.type,pe.key,pe.props,null,ae.mode,Be),Be.ref=nr(ae,Q,pe),Be.return=ae,ae=Be)}return W(ae);case f:e:{for(bt=pe.key;Q!==null;){if(Q.key===bt)if(Q.tag===4&&Q.stateNode.containerInfo===pe.containerInfo&&Q.stateNode.implementation===pe.implementation){v(ae,Q.sibling),Q=T(Q,pe.children||[]),Q.return=ae,ae=Q;break e}else{v(ae,Q);break}else c(ae,Q);Q=Q.sibling}Q=Wv(pe,ae.mode,Be),Q.return=ae,ae=Q}return W(ae);case P:return bt=pe._init,Rr(ae,Q,bt(pe._payload),Be)}if(le(pe))return it(ae,Q,pe,Be);if(D(pe))return hi(ae,Q,pe,Be);Mu(ae,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,Q!==null&&Q.tag===6?(v(ae,Q.sibling),Q=T(Q,pe),Q.return=ae,ae=Q):(v(ae,Q),Q=Gv(pe,ae.mode,Be),Q.return=ae,ae=Q),W(ae)):v(ae,Q)}return Rr}var Do=Qf(!0),Ed=Qf(!1),Ka={},Fi=bi(Ka),ir=bi(Ka),Ys=bi(Ka);function Cr(a){if(a===Ka)throw Error(o(174));return a}function No(a,c){Et(Ys,c),Et(ir,a),Et(Fi,Ka),a=ne(c),pt(Fi),Et(Fi,a)}function zo(){pt(Fi),pt(ir),pt(Ys)}function Cd(a){var c=Cr(Ys.current),v=Cr(Fi.current);c=O(v,a.type,c),v!==c&&(Et(ir,a),Et(Fi,c))}function Pd(a){ir.current===a&&(pt(Fi),pt(ir))}var Zt=bi(0);function xt(a){for(var c=a;c!==null;){if(c.tag===13){var v=c.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||uu(v)||Ua(v)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Pr=[];function Td(){for(var a=0;a<Pr.length;a++){var c=Pr[a];Te?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Pr.length=0}var Eu=l.ReactCurrentDispatcher,ui=l.ReactCurrentBatchConfig,Ui=0,Xt=null,Gn=null,Gt=null,Cu=!1,Oo=!1,Fo=0,$f=0;function Un(){throw Error(o(321))}function Pu(a,c){if(c===null)return!1;for(var v=0;v<c.length&&v<a.length;v++)if(!Sr(a[v],c[v]))return!1;return!0}function Tu(a,c,v,x,T,R){if(Ui=R,Xt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Eu.current=a===null||a.memoizedState===null?Ho:zv,a=v(x,T),Oo){R=0;do{if(Oo=!1,Fo=0,25<=R)throw Error(o(301));R+=1,Gt=Gn=null,c.updateQueue=null,Eu.current=Ov,a=v(x,T)}while(Oo)}if(Eu.current=Nu,c=Gn!==null&&Gn.next!==null,Ui=0,Gt=Gn=Xt=null,Cu=!1,c)throw Error(o(300));return a}function Au(){var a=Fo!==0;return Fo=0,a}function Tr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Xt.memoizedState=Gt=a:Gt=Gt.next=a,Gt}function rr(){if(Gn===null){var a=Xt.alternate;a=a!==null?a.memoizedState:null}else a=Gn.next;var c=Gt===null?Xt.memoizedState:Gt.next;if(c!==null)Gt=c,Gn=a;else{if(a===null)throw Error(o(310));Gn=a,a={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Gt===null?Xt.memoizedState=Gt=a:Gt=Gt.next=a}return Gt}function Ls(a,c){return typeof c=="function"?c(a):c}function Lu(a){var c=rr(),v=c.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=a;var x=Gn,T=x.baseQueue,R=v.pending;if(R!==null){if(T!==null){var W=T.next;T.next=R.next,R.next=W}x.baseQueue=T=R,v.pending=null}if(T!==null){R=T.next,x=x.baseState;var J=W=null,ve=null,Re=R;do{var Xe=Re.lane;if((Ui&Xe)===Xe)ve!==null&&(ve=ve.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),x=Re.hasEagerState?Re.eagerState:a(x,Re.action);else{var mt={lane:Xe,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ve===null?(J=ve=mt,W=x):ve=ve.next=mt,Xt.lanes|=Xe,Xo|=Xe}Re=Re.next}while(Re!==null&&Re!==R);ve===null?W=x:ve.next=J,Sr(x,c.memoizedState)||(Ei=!0),c.memoizedState=x,c.baseState=W,c.baseQueue=ve,v.lastRenderedState=x}if(a=v.interleaved,a!==null){T=a;do R=T.lane,Xt.lanes|=R,Xo|=R,T=T.next;while(T!==a)}else T===null&&(v.lanes=0);return[c.memoizedState,v.dispatch]}function Za(a){var c=rr(),v=c.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=a;var x=v.dispatch,T=v.pending,R=c.memoizedState;if(T!==null){v.pending=null;var W=T=T.next;do R=a(R,W.action),W=W.next;while(W!==T);Sr(R,c.memoizedState)||(Ei=!0),c.memoizedState=R,c.baseQueue===null&&(c.baseState=R),v.lastRenderedState=R}return[R,x]}function ep(){}function Ad(a,c){var v=Xt,x=rr(),T=c(),R=!Sr(x.memoizedState,T);if(R&&(x.memoizedState=T,Ei=!0),x=x.queue,Bo(kd.bind(null,v,x,a),[a]),x.getSnapshot!==c||R||Gt!==null&&Gt.memoizedState.tag&1){if(v.flags|=2048,Ks(9,Rd.bind(null,v,x,T,c),void 0,null),dn===null)throw Error(o(349));(Ui&30)!==0||Ld(v,c,T)}return T}function Ld(a,c,v){a.flags|=16384,a={getSnapshot:c,value:v},c=Xt.updateQueue,c===null?(c={lastEffect:null,stores:null},Xt.updateQueue=c,c.stores=[a]):(v=c.stores,v===null?c.stores=[a]:v.push(a))}function Rd(a,c,v,x){c.value=v,c.getSnapshot=x,tp(c)&&Bi(a,1,-1)}function kd(a,c,v){return v(function(){tp(c)&&Bi(a,1,-1)})}function tp(a){var c=a.getSnapshot;a=a.value;try{var v=c();return!Sr(a,v)}catch{return!0}}function Id(a){var c=Tr();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:a},c.queue=a,a=a.dispatch=Nv.bind(null,Xt,a),[c.memoizedState,a]}function Ks(a,c,v,x){return a={tag:a,create:c,destroy:v,deps:x,next:null},c=Xt.updateQueue,c===null?(c={lastEffect:null,stores:null},Xt.updateQueue=c,c.lastEffect=a.next=a):(v=c.lastEffect,v===null?c.lastEffect=a.next=a:(x=v.next,v.next=a,a.next=x,c.lastEffect=a)),a}function Dd(){return rr().memoizedState}function Ru(a,c,v,x){var T=Tr();Xt.flags|=a,T.memoizedState=Ks(1|c,v,void 0,x===void 0?null:x)}function Uo(a,c,v,x){var T=rr();x=x===void 0?null:x;var R=void 0;if(Gn!==null){var W=Gn.memoizedState;if(R=W.destroy,x!==null&&Pu(x,W.deps)){T.memoizedState=Ks(c,v,R,x);return}}Xt.flags|=a,T.memoizedState=Ks(1|c,v,R,x)}function ku(a,c){return Ru(8390656,8,a,c)}function Bo(a,c){return Uo(2048,8,a,c)}function Iu(a,c){return Uo(4,2,a,c)}function Nd(a,c){return Uo(4,4,a,c)}function np(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Ja(a,c,v){return v=v!=null?v.concat([a]):null,Uo(4,4,np.bind(null,c,a),v)}function zd(){}function ip(a,c){var v=rr();c=c===void 0?null:c;var x=v.memoizedState;return x!==null&&c!==null&&Pu(c,x[1])?x[0]:(v.memoizedState=[a,c],a)}function rp(a,c){var v=rr();c=c===void 0?null:c;var x=v.memoizedState;return x!==null&&c!==null&&Pu(c,x[1])?x[0]:(a=a(),v.memoizedState=[a,c],a)}function sp(a,c){var v=Dt;Dt=v!==0&&4>v?v:4,a(!0);var x=ui.transition;ui.transition={};try{a(!1),c()}finally{Dt=v,ui.transition=x}}function op(){return rr().memoizedState}function ap(a,c,v){var x=ks(a);v={lane:x,action:v,hasEagerState:!1,eagerState:null,next:null},lp(a)?Du(c,v):(Vo(a,c,v),v=ei(),a=Bi(a,x,v),a!==null&&up(a,c,x))}function Nv(a,c,v){var x=ks(a),T={lane:x,action:v,hasEagerState:!1,eagerState:null,next:null};if(lp(a))Du(c,T);else{Vo(a,c,T);var R=a.alternate;if(a.lanes===0&&(R===null||R.lanes===0)&&(R=c.lastRenderedReducer,R!==null))try{var W=c.lastRenderedState,J=R(W,v);if(T.hasEagerState=!0,T.eagerState=J,Sr(J,W))return}catch{}finally{}v=ei(),a=Bi(a,x,v),a!==null&&up(a,c,x)}}function lp(a){var c=a.alternate;return a===Xt||c!==null&&c===Xt}function Du(a,c){Oo=Cu=!0;var v=a.pending;v===null?c.next=c:(c.next=v.next,v.next=c),a.pending=c}function Vo(a,c,v){dn!==null&&(a.mode&1)!==0&&(wt&2)===0?(a=c.interleaved,a===null?(v.next=v,$i===null?$i=[c]:$i.push(c)):(v.next=a.next,a.next=v),c.interleaved=v):(a=c.pending,a===null?v.next=v:(v.next=a.next,a.next=v),c.pending=v)}function up(a,c,v){if((v&4194240)!==0){var x=c.lanes;x&=a.pendingLanes,v|=x,c.lanes=v,vd(a,v)}}var Nu={readContext:Jn,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},Ho={readContext:Jn,useCallback:function(a,c){return Tr().memoizedState=[a,c===void 0?null:c],a},useContext:Jn,useEffect:ku,useImperativeHandle:function(a,c,v){return v=v!=null?v.concat([a]):null,Ru(4194308,4,np.bind(null,c,a),v)},useLayoutEffect:function(a,c){return Ru(4194308,4,a,c)},useInsertionEffect:function(a,c){return Ru(4,2,a,c)},useMemo:function(a,c){var v=Tr();return c=c===void 0?null:c,a=a(),v.memoizedState=[a,c],a},useReducer:function(a,c,v){var x=Tr();return c=v!==void 0?v(c):c,x.memoizedState=x.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},x.queue=a,a=a.dispatch=ap.bind(null,Xt,a),[x.memoizedState,a]},useRef:function(a){var c=Tr();return a={current:a},c.memoizedState=a},useState:Id,useDebugValue:zd,useDeferredValue:function(a){var c=Id(a),v=c[0],x=c[1];return ku(function(){var T=ui.transition;ui.transition={};try{x(a)}finally{ui.transition=T}},[a]),v},useTransition:function(){var a=Id(!1),c=a[0];return a=sp.bind(null,a[1]),Tr().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,v){var x=Xt,T=Tr();if(Kt){if(v===void 0)throw Error(o(407));v=v()}else{if(v=c(),dn===null)throw Error(o(349));(Ui&30)!==0||Ld(x,c,v)}T.memoizedState=v;var R={value:v,getSnapshot:c};return T.queue=R,ku(kd.bind(null,x,R,a),[a]),x.flags|=2048,Ks(9,Rd.bind(null,x,R,v,c),void 0,null),v},useId:function(){var a=Tr(),c=dn.identifierPrefix;if(Kt){var v=Qr,x=er;v=(x&~(1<<32-Mi(x)-1)).toString(32)+v,c=":"+c+"R"+v,v=Fo++,0<v&&(c+="H"+v.toString(32)),c+=":"}else v=$f++,c=":"+c+"r"+v.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},zv={readContext:Jn,useCallback:ip,useContext:Jn,useEffect:Bo,useImperativeHandle:Ja,useInsertionEffect:Iu,useLayoutEffect:Nd,useMemo:rp,useReducer:Lu,useRef:Dd,useState:function(){return Lu(Ls)},useDebugValue:zd,useDeferredValue:function(a){var c=Lu(Ls),v=c[0],x=c[1];return Bo(function(){var T=ui.transition;ui.transition={};try{x(a)}finally{ui.transition=T}},[a]),v},useTransition:function(){var a=Lu(Ls)[0],c=rr().memoizedState;return[a,c]},useMutableSource:ep,useSyncExternalStore:Ad,useId:op,unstable_isNewReconciler:!1},Ov={readContext:Jn,useCallback:ip,useContext:Jn,useEffect:Bo,useImperativeHandle:Ja,useInsertionEffect:Iu,useLayoutEffect:Nd,useMemo:rp,useReducer:Za,useRef:Dd,useState:function(){return Za(Ls)},useDebugValue:zd,useDeferredValue:function(a){var c=Za(Ls),v=c[0],x=c[1];return Bo(function(){var T=ui.transition;ui.transition={};try{x(a)}finally{ui.transition=T}},[a]),v},useTransition:function(){var a=Za(Ls)[0],c=rr().memoizedState;return[a,c]},useMutableSource:ep,useSyncExternalStore:Ad,useId:op,unstable_isNewReconciler:!1};function Od(a,c){try{var v="",x=c;do v+=qf(x),x=x.return;while(x);var T=v}catch(R){T=`
Error generating stack: `+R.message+`
`+R.stack}return{value:a,source:c,stack:T}}function Fd(a,c){try{console.error(c.value)}catch(v){setTimeout(function(){throw v})}}var Ud=typeof WeakMap=="function"?WeakMap:Map;function cp(a,c,v){v=Jr(-1,v),v.tag=3,v.payload={element:null};var x=c.value;return v.callback=function(){Ju||(Ju=!0,$d=x),Fd(a,c)},v}function zu(a,c,v){v=Jr(-1,v),v.tag=3;var x=a.type.getDerivedStateFromError;if(typeof x=="function"){var T=c.value;v.payload=function(){return x(T)},v.callback=function(){Fd(a,c)}}var R=a.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(v.callback=function(){Fd(a,c),typeof x!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var W=c.stack;this.componentDidCatch(c.value,{componentStack:W!==null?W:""})}),v}function dp(a,c,v){var x=a.pingCache;if(x===null){x=a.pingCache=new Ud;var T=new Set;x.set(c,T)}else T=x.get(c),T===void 0&&(T=new Set,x.set(c,T));T.has(v)||(T.add(v),a=aP.bind(null,a,c,v),c.then(a,a))}function hp(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Ou(a,c,v,x,T){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(c=Jr(-1,1),c.tag=2,Ms(v,c))),v.lanes|=1),a):(a.flags|=65536,a.lanes=T,a)}function sr(a){a.flags|=4}function fp(a,c){if(a!==null&&a.child===c.child)return!0;if((c.flags&16)!==0)return!1;for(a=c.child;a!==null;){if((a.flags&12854)!==0||(a.subtreeFlags&12854)!==0)return!1;a=a.sibling}return!0}var Qa,$a,Go,Fu;if(rt)Qa=function(a,c){for(var v=c.child;v!==null;){if(v.tag===5||v.tag===6)ie(a,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},$a=function(){},Go=function(a,c,v,x,T){if(a=a.memoizedProps,a!==x){var R=c.stateNode,W=Cr(Fi.current);v=be(R,v,a,x,T,W),(c.updateQueue=v)&&sr(c)}},Fu=function(a,c,v,x){v!==x&&sr(c)};else if(we){Qa=function(a,c,v,x){for(var T=c.child;T!==null;){if(T.tag===5){var R=T.stateNode;v&&x&&(R=kn(R,T.type,T.memoizedProps,T)),ie(a,R)}else if(T.tag===6)R=T.stateNode,v&&x&&(R=Mo(R,T.memoizedProps,T)),ie(a,R);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)R=T.child,R!==null&&(R.return=T),Qa(a,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===c)break;for(;T.sibling===null;){if(T.return===null||T.return===c)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var pp=function(a,c,v,x){for(var T=c.child;T!==null;){if(T.tag===5){var R=T.stateNode;v&&x&&(R=kn(R,T.type,T.memoizedProps,T)),Ki(a,R)}else if(T.tag===6)R=T.stateNode,v&&x&&(R=Mo(R,T.memoizedProps,T)),Ki(a,R);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)R=T.child,R!==null&&(R.return=T),pp(a,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===c)break;for(;T.sibling===null;){if(T.return===null||T.return===c)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};$a=function(a,c){var v=c.stateNode;if(!fp(a,c)){a=v.containerInfo;var x=Nt(a);pp(x,c,!1,!1),v.pendingChildren=x,sr(c),jt(a,x)}},Go=function(a,c,v,x,T){var R=a.stateNode,W=a.memoizedProps;if((a=fp(a,c))&&W===x)c.stateNode=R;else{var J=c.stateNode,ve=Cr(Fi.current),Re=null;W!==x&&(Re=be(J,v,W,x,T,ve)),a&&Re===null?c.stateNode=R:(R=un(R,Re,v,W,x,c,a,J),fe(R,v,x,T,ve)&&sr(c),c.stateNode=R,a?sr(c):Qa(R,c,!1,!1))}},Fu=function(a,c,v,x){v!==x?(a=Cr(Ys.current),v=Cr(Fi.current),c.stateNode=ce(x,a,v,c),sr(c)):c.stateNode=a.stateNode}}else $a=function(){},Go=function(){},Fu=function(){};function Zs(a,c){if(!Kt)switch(a.tailMode){case"hidden":c=a.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?a.tail=null:v.sibling=null;break;case"collapsed":v=a.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function Wn(a){var c=a.alternate!==null&&a.alternate.child===a.child,v=0,x=0;if(c)for(var T=a.child;T!==null;)v|=T.lanes|T.childLanes,x|=T.subtreeFlags&14680064,x|=T.flags&14680064,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)v|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=x,a.childLanes=v,c}function Fv(a,c,v){var x=c.pendingProps;switch(bu(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(c),null;case 1:return oi(c.type)&&bs(),Wn(c),null;case 3:return x=c.stateNode,zo(),pt(Pn),pt(zt),Td(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(a===null||a.child===null)&&(Ya(c)?sr(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,tr!==null&&(p(tr),tr=null))),$a(a,c),Wn(c),null;case 5:Pd(c),v=Cr(Ys.current);var T=c.type;if(a!==null&&c.stateNode!=null)Go(a,c,T,x,v),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(o(166));return Wn(c),null}if(a=Cr(Fi.current),Ya(c)){if(!me)throw Error(o(175));a=st(c.stateNode,c.type,c.memoizedProps,v,a,c,!Xs),c.updateQueue=a,a!==null&&sr(c)}else{var R=$(T,x,v,a,c);Qa(R,c,!1,!1),c.stateNode=R,fe(R,T,x,v,a)&&sr(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Wn(c),null;case 6:if(a&&c.stateNode!=null)Fu(a,c,a.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(o(166));if(a=Cr(Ys.current),v=Cr(Fi.current),Ya(c)){if(!me)throw Error(o(176));if(a=c.stateNode,x=c.memoizedProps,(v=ut(a,x,c,!Xs))&&(T=Sn,T!==null))switch(R=(T.mode&1)!==0,T.tag){case 3:Ss(T.stateNode.containerInfo,a,x,R);break;case 5:Xr(T.type,T.memoizedProps,T.stateNode,a,x,R)}v&&sr(c)}else c.stateNode=ce(x,a,v,c)}return Wn(c),null;case 13:if(pt(Zt),x=c.memoizedState,Kt&&li!==null&&(c.mode&1)!==0&&(c.flags&128)===0){for(a=li;a;)a=oe(a);return Io(),c.flags|=98560,c}if(x!==null&&x.dehydrated!==null){if(x=Ya(c),a===null){if(!x)throw Error(o(318));if(!me)throw Error(o(344));if(a=c.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));_t(a,c)}else Io(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;return Wn(c),null}return tr!==null&&(p(tr),tr=null),(c.flags&128)!==0?(c.lanes=v,c):(x=x!==null,v=!1,a===null?Ya(c):v=a.memoizedState!==null,x&&!v&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(Zt.current&1)!==0?gn===0&&(gn=3):ct())),c.updateQueue!==null&&(c.flags|=4),Wn(c),null);case 4:return zo(),$a(a,c),a===null&&Ye(c.stateNode.containerInfo),Wn(c),null;case 10:return Sd(c.type._context),Wn(c),null;case 17:return oi(c.type)&&bs(),Wn(c),null;case 19:if(pt(Zt),T=c.memoizedState,T===null)return Wn(c),null;if(x=(c.flags&128)!==0,R=T.rendering,R===null)if(x)Zs(T,!1);else{if(gn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(R=xt(a),R!==null){for(c.flags|=128,Zs(T,!1),a=R.updateQueue,a!==null&&(c.updateQueue=a,c.flags|=4),c.subtreeFlags=0,a=v,x=c.child;x!==null;)v=x,T=a,v.flags&=14680066,R=v.alternate,R===null?(v.childLanes=0,v.lanes=T,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=R.childLanes,v.lanes=R.lanes,v.child=R.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=R.memoizedProps,v.memoizedState=R.memoizedState,v.updateQueue=R.updateQueue,v.type=R.type,T=R.dependencies,v.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),x=x.sibling;return Et(Zt,Zt.current&1|2),c.child}a=a.sibling}T.tail!==null&&In()>Qd&&(c.flags|=128,x=!0,Zs(T,!1),c.lanes=4194304)}else{if(!x)if(a=xt(R),a!==null){if(c.flags|=128,x=!0,a=a.updateQueue,a!==null&&(c.updateQueue=a,c.flags|=4),Zs(T,!0),T.tail===null&&T.tailMode==="hidden"&&!R.alternate&&!Kt)return Wn(c),null}else 2*In()-T.renderingStartTime>Qd&&v!==1073741824&&(c.flags|=128,x=!0,Zs(T,!1),c.lanes=4194304);T.isBackwards?(R.sibling=c.child,c.child=R):(a=T.last,a!==null?a.sibling=R:c.child=R,T.last=R)}return T.tail!==null?(c=T.tail,T.rendering=c,T.tail=c.sibling,T.renderingStartTime=In(),c.sibling=null,a=Zt.current,Et(Zt,x?a&1|2:a&1),c):(Wn(c),null);case 22:case 23:return X(),x=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(Ci&1073741824)!==0&&(Wn(c),rt&&c.subtreeFlags&6&&(c.flags|=8192)):Wn(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var Uv=l.ReactCurrentOwner,Ei=!1;function $n(a,c,v,x){c.child=a===null?Ed(c,null,v,x):Do(c,a.child,v,x)}function mp(a,c,v,x,T){v=v.render;var R=c.ref;return To(c,T),x=Tu(a,c,v,x,R,T),v=Au(),a!==null&&!Ei?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~T,ar(a,c,T)):(Kt&&v&&Ro(c),c.flags|=1,$n(a,c,x,T),c.child)}function gp(a,c,v,x,T){if(a===null){var R=v.type;return typeof R=="function"&&!Hv(R)&&R.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(c.tag=15,c.type=R,vp(a,c,R,x,T)):(a=Vp(v.type,null,x,c,c.mode,T),a.ref=c.ref,a.return=c,c.child=a)}if(R=a.child,(a.lanes&T)===0){var W=R.memoizedProps;if(v=v.compare,v=v!==null?v:vu,v(W,x)&&a.ref===c.ref)return ar(a,c,T)}return c.flags|=1,a=Zo(R,x),a.ref=c.ref,a.return=c,c.child=a}function vp(a,c,v,x,T){if(a!==null&&vu(a.memoizedProps,x)&&a.ref===c.ref)if(Ei=!1,(a.lanes&T)!==0)(a.flags&131072)!==0&&(Ei=!0);else return c.lanes=a.lanes,ar(a,c,T);return Bd(a,c,v,x,T)}function _p(a,c,v){var x=c.pendingProps,T=x.children,R=a!==null?a.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null},Et(jo,Ci),Ci|=v;else if((v&1073741824)!==0)c.memoizedState={baseLanes:0,cachePool:null},x=R!==null?R.baseLanes:v,Et(jo,Ci),Ci|=x;else return a=R!==null?R.baseLanes|v:v,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null},c.updateQueue=null,Et(jo,Ci),Ci|=a,null;else R!==null?(x=R.baseLanes|v,c.memoizedState=null):x=v,Et(jo,Ci),Ci|=x;return $n(a,c,T,v),c.child}function yp(a,c){var v=c.ref;(a===null&&v!==null||a!==null&&a.ref!==v)&&(c.flags|=512,c.flags|=2097152)}function Bd(a,c,v,x,T){var R=oi(v)?qr:zt.current;return R=Yr(c,R),To(c,T),v=Tu(a,c,v,x,R,T),x=Au(),a!==null&&!Ei?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~T,ar(a,c,T)):(Kt&&x&&Ro(c),c.flags|=1,$n(a,c,v,T),c.child)}function xp(a,c,v,x,T){if(oi(v)){var R=!0;Kr(c)}else R=!1;if(To(c,T),c.stateNode===null)a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2),Qt(c,v,x),mn(c,v,x,T),x=!0;else if(a===null){var W=c.stateNode,J=c.memoizedProps;W.props=J;var ve=W.context,Re=v.contextType;typeof Re=="object"&&Re!==null?Re=Jn(Re):(Re=oi(v)?qr:zt.current,Re=Yr(c,Re));var Xe=v.getDerivedStateFromProps,mt=typeof Xe=="function"||typeof W.getSnapshotBeforeUpdate=="function";mt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(J!==x||ve!==Re)&&bd(c,W,x,Re),Mr=!1;var ot=c.memoizedState;W.state=ot,Cs(c,x,W,T),ve=c.memoizedState,J!==x||ot!==ve||Pn.current||Mr?(typeof Xe=="function"&&(wu(c,v,Xe,x),ve=c.memoizedState),(J=Mr||Ps(c,v,J,x,ot,ve,Re))?(mt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(c.flags|=4194308)):(typeof W.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=ve),W.props=x,W.state=ve,W.context=Re,x=J):(typeof W.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{W=c.stateNode,Yf(a,c),J=c.memoizedProps,Re=c.type===c.elementType?J:Ji(c.type,J),W.props=Re,mt=c.pendingProps,ot=W.context,ve=v.contextType,typeof ve=="object"&&ve!==null?ve=Jn(ve):(ve=oi(v)?qr:zt.current,ve=Yr(c,ve));var $t=v.getDerivedStateFromProps;(Xe=typeof $t=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(J!==mt||ot!==ve)&&bd(c,W,x,ve),Mr=!1,ot=c.memoizedState,W.state=ot,Cs(c,x,W,T);var it=c.memoizedState;J!==mt||ot!==it||Pn.current||Mr?(typeof $t=="function"&&(wu(c,v,$t,x),it=c.memoizedState),(Re=Mr||Ps(c,v,Re,x,ot,it,ve)||!1)?(Xe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(x,it,ve),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(x,it,ve)),typeof W.componentDidUpdate=="function"&&(c.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof W.componentDidUpdate!="function"||J===a.memoizedProps&&ot===a.memoizedState||(c.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||J===a.memoizedProps&&ot===a.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=it),W.props=x,W.state=it,W.context=ve,x=Re):(typeof W.componentDidUpdate!="function"||J===a.memoizedProps&&ot===a.memoizedState||(c.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||J===a.memoizedProps&&ot===a.memoizedState||(c.flags|=1024),x=!1)}return el(a,c,v,x,R,T)}function el(a,c,v,x,T,R){yp(a,c);var W=(c.flags&128)!==0;if(!x&&!W)return T&&Ba(c,v,!1),ar(a,c,R);x=c.stateNode,Uv.current=c;var J=W&&typeof v.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,a!==null&&W?(c.child=Do(c,a.child,null,R),c.child=Do(c,null,J,R)):$n(a,c,J,R),c.memoizedState=x.state,T&&Ba(c,v,!0),c.child}function wp(a){var c=a.stateNode;c.pendingContext?Zi(a,c.pendingContext,c.pendingContext!==c.context):c.context&&Zi(a,c.context,!1),No(a,c.containerInfo)}function Sp(a,c,v,x,T){return Io(),Md(T),c.flags|=256,$n(a,c,v,x),c.child}var Uu={dehydrated:null,treeContext:null,retryLane:0};function Bu(a){return{baseLanes:a,cachePool:null}}function bp(a,c,v){var x=c.pendingProps,T=Zt.current,R=!1,W=(c.flags&128)!==0,J;if((J=W)||(J=a!==null&&a.memoizedState===null?!1:(T&2)!==0),J?(R=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(T|=1),Et(Zt,T&1),a===null)return ko(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:Ua(a)?c.lanes=8:c.lanes=1073741824,null):(T=x.children,a=x.fallback,R?(x=c.mode,R=c.child,T={mode:"hidden",children:T},(x&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=T):R=Hp(T,x,0,null),a=hl(a,x,v,null),R.return=c,a.return=c,R.sibling=a,c.child=R,c.child.memoizedState=Bu(v),c.memoizedState=Uu,a):Vd(c,T));if(T=a.memoizedState,T!==null){if(J=T.dehydrated,J!==null){if(W)return c.flags&256?(c.flags&=-257,or(a,c,v,Error(o(422)))):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(R=x.fallback,T=c.mode,x=Hp({mode:"visible",children:x.children},T,0,null),R=hl(R,T,v,null),R.flags|=2,x.return=c,R.return=c,x.sibling=R,c.child=x,(c.mode&1)!==0&&Do(c,a.child,null,v),c.child.memoizedState=Bu(v),c.memoizedState=Uu,R);if((c.mode&1)===0)c=or(a,c,v,null);else if(Ua(J))c=or(a,c,v,Error(o(419)));else if(x=(v&a.childLanes)!==0,Ei||x){if(x=dn,x!==null){switch(v&-v){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}x=(R&(x.suspendedLanes|v))!==0?0:R,x!==0&&x!==T.retryLane&&(T.retryLane=x,Bi(a,x,-1))}ct(),c=or(a,c,v,Error(o(421)))}else uu(J)?(c.flags|=128,c.child=a.child,c=lP.bind(null,a),G(J,c),c=null):(v=T.treeContext,me&&(li=xe(J),Sn=c,Kt=!0,tr=null,Xs=!1,v!==null&&(ai[Oi++]=er,ai[Oi++]=Qr,ai[Oi++]=js,er=v.id,Qr=v.overflow,js=c)),c=Vd(c,c.pendingProps.children),c.flags|=4096);return c}return R?(x=Ep(a,c,x.children,x.fallback,v),R=c.child,T=a.child.memoizedState,R.memoizedState=T===null?Bu(v):{baseLanes:T.baseLanes|v,cachePool:null},R.childLanes=a.childLanes&~v,c.memoizedState=Uu,x):(v=Mp(a,c,x.children,v),c.memoizedState=null,v)}return R?(x=Ep(a,c,x.children,x.fallback,v),R=c.child,T=a.child.memoizedState,R.memoizedState=T===null?Bu(v):{baseLanes:T.baseLanes|v,cachePool:null},R.childLanes=a.childLanes&~v,c.memoizedState=Uu,x):(v=Mp(a,c,x.children,v),c.memoizedState=null,v)}function Vd(a,c){return c=Hp({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Mp(a,c,v,x){var T=a.child;return a=T.sibling,v=Zo(T,{mode:"visible",children:v}),(c.mode&1)===0&&(v.lanes=x),v.return=c,v.sibling=null,a!==null&&(x=c.deletions,x===null?(c.deletions=[a],c.flags|=16):x.push(a)),c.child=v}function Ep(a,c,v,x,T){var R=c.mode;a=a.child;var W=a.sibling,J={mode:"hidden",children:v};return(R&1)===0&&c.child!==a?(v=c.child,v.childLanes=0,v.pendingProps=J,c.deletions=null):(v=Zo(a,J),v.subtreeFlags=a.subtreeFlags&14680064),W!==null?x=Zo(W,x):(x=hl(x,R,T,null),x.flags|=2),x.return=c,v.return=c,v.sibling=x,c.child=v,x}function or(a,c,v,x){return x!==null&&Md(x),Do(c,a.child,null,v),a=Vd(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function Hd(a,c,v){a.lanes|=c;var x=a.alternate;x!==null&&(x.lanes|=c),Tn(a.return,c,v)}function Gd(a,c,v,x,T){var R=a.memoizedState;R===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:v,tailMode:T}:(R.isBackwards=c,R.rendering=null,R.renderingStartTime=0,R.last=x,R.tail=v,R.tailMode=T)}function Cp(a,c,v){var x=c.pendingProps,T=x.revealOrder,R=x.tail;if($n(a,c,x.children,v),x=Zt.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Hd(a,v,c);else if(a.tag===19)Hd(a,v,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}x&=1}if(Et(Zt,x),(c.mode&1)===0)c.memoizedState=null;else switch(T){case"forwards":for(v=c.child,T=null;v!==null;)a=v.alternate,a!==null&&xt(a)===null&&(T=v),v=v.sibling;v=T,v===null?(T=c.child,c.child=null):(T=v.sibling,v.sibling=null),Gd(c,!1,T,v,R);break;case"backwards":for(v=null,T=c.child,c.child=null;T!==null;){if(a=T.alternate,a!==null&&xt(a)===null){c.child=T;break}a=T.sibling,T.sibling=v,v=T,T=a}Gd(c,!0,v,null,R);break;case"together":Gd(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ar(a,c,v){if(a!==null&&(c.dependencies=a.dependencies),Xo|=c.lanes,(v&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(o(153));if(c.child!==null){for(a=c.child,v=Zo(a,a.pendingProps),c.child=v,v.return=c;a.sibling!==null;)a=a.sibling,v=v.sibling=Zo(a,a.pendingProps),v.return=c;v.sibling=null}return c.child}function Pp(a,c,v){switch(c.tag){case 3:wp(c),Io();break;case 5:Cd(c);break;case 1:oi(c.type)&&Kr(c);break;case 4:No(c,c.stateNode.containerInfo);break;case 10:wd(c,c.type._context,c.memoizedProps.value);break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(Et(Zt,Zt.current&1),c.flags|=128,null):(v&c.child.childLanes)!==0?bp(a,c,v):(Et(Zt,Zt.current&1),a=ar(a,c,v),a!==null?a.sibling:null);Et(Zt,Zt.current&1);break;case 19:if(x=(v&c.childLanes)!==0,(a.flags&128)!==0){if(x)return Cp(a,c,v);c.flags|=128}var T=c.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Et(Zt,Zt.current),x)break;return null;case 22:case 23:return c.lanes=0,_p(a,c,v)}return ar(a,c,v)}function Tp(a,c){switch(bu(c),c.tag){case 1:return oi(c.type)&&bs(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return zo(),pt(Pn),pt(zt),Td(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return Pd(c),null;case 13:if(pt(Zt),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(o(340));Io()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return pt(Zt),null;case 4:return zo(),null;case 10:return Sd(c.type._context),null;case 22:case 23:return X(),null;case 24:return null;default:return null}}var Vu=!1,Js=!1,Bv=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function lr(a,c){var v=a.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(x){Hi(a,c,x)}else v.current=null}function Hu(a,c,v){try{v()}catch(x){Hi(a,c,x)}}var Qs=!1;function Vv(a,c){for(B(a.containerInfo),Fe=c;Fe!==null;)if(a=Fe,c=a.child,(a.subtreeFlags&1028)!==0&&c!==null)c.return=a,Fe=c;else for(;Fe!==null;){a=Fe;try{var v=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,T=v.memoizedState,R=a.stateNode,W=R.getSnapshotBeforeUpdate(a.elementType===a.type?x:Ji(a.type,x),T);R.__reactInternalSnapshotBeforeUpdate=W}break;case 3:rt&&ht(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(J){Hi(a,a.return,J)}if(c=a.sibling,c!==null){c.return=a.return,Fe=c;break}Fe=a.return}return v=Qs,Qs=!1,v}function ci(a,c,v){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var T=x=x.next;do{if((T.tag&a)===a){var R=T.destroy;T.destroy=void 0,R!==void 0&&Hu(c,v,R)}T=T.next}while(T!==x)}}function tl(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var v=c=c.next;do{if((v.tag&a)===a){var x=v.create;v.destroy=x()}v=v.next}while(v!==c)}}function Gu(a){var c=a.ref;if(c!==null){var v=a.stateNode;switch(a.tag){case 5:a=se(v);break;default:a=v}typeof c=="function"?c(a):c.current=a}}function Ap(a,c,v){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(mu,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(a=c.updateQueue,a!==null&&(a=a.lastEffect,a!==null)){var x=a=a.next;do{var T=x,R=T.destroy;T=T.tag,R!==void 0&&((T&2)!==0||(T&4)!==0)&&Hu(c,v,R),x=x.next}while(x!==a)}break;case 1:if(lr(c,v),a=c.stateNode,typeof a.componentWillUnmount=="function")try{a.props=c.memoizedProps,a.state=c.memoizedState,a.componentWillUnmount()}catch(W){Hi(c,v,W)}break;case 5:lr(c,v);break;case 4:rt?jd(a,c,v):we&&we&&(c=c.stateNode.containerInfo,v=Nt(c),xi(c,v))}}function Lp(a,c,v){for(var x=c;;)if(Ap(a,x,v),x.child===null||rt&&x.tag===4){if(x===c)break;for(;x.sibling===null;){if(x.return===null||x.return===c)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else x.child.return=x,x=x.child}function Rp(a){var c=a.alternate;c!==null&&(a.alternate=null,Rp(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&dt(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function kp(a){return a.tag===5||a.tag===3||a.tag===4}function Ar(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||kp(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ip(a){if(rt){e:{for(var c=a.return;c!==null;){if(kp(c))break e;c=c.return}throw Error(o(160))}var v=c;switch(v.tag){case 5:c=v.stateNode,v.flags&32&&(Z(c),v.flags&=-33),v=Ar(a),Wd(a,v,c);break;case 3:case 4:c=v.stateNode.containerInfo,v=Ar(a),Wu(a,v,c);break;default:throw Error(o(161))}}}function Wu(a,c,v){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?Pe(v,a,c):he(v,a);else if(x!==4&&(a=a.child,a!==null))for(Wu(a,c,v),a=a.sibling;a!==null;)Wu(a,c,v),a=a.sibling}function Wd(a,c,v){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?ue(v,a,c):lt(v,a);else if(x!==4&&(a=a.child,a!==null))for(Wd(a,c,v),a=a.sibling;a!==null;)Wd(a,c,v),a=a.sibling}function jd(a,c,v){for(var x=c,T=!1,R,W;;){if(!T){T=x.return;e:for(;;){if(T===null)throw Error(o(160));switch(R=T.stateNode,T.tag){case 5:W=!1;break e;case 3:R=R.containerInfo,W=!0;break e;case 4:R=R.containerInfo,W=!0;break e}T=T.return}T=!0}if(x.tag===5||x.tag===6)Lp(a,x,v),W?ft(R,x.stateNode):Ve(R,x.stateNode);else if(x.tag===18)W?Jt(R,x.stateNode):At(R,x.stateNode);else if(x.tag===4){if(x.child!==null){R=x.stateNode.containerInfo,W=!0,x.child.return=x,x=x.child;continue}}else if(Ap(a,x,v),x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break;for(;x.sibling===null;){if(x.return===null||x.return===c)return;x=x.return,x.tag===4&&(T=!1)}x.sibling.return=x.return,x=x.sibling}}function Xd(a,c){if(rt){switch(c.tag){case 0:case 11:case 14:case 15:ci(3,c,c.return),tl(3,c),ci(5,c,c.return);return;case 1:return;case 5:var v=c.stateNode;if(v!=null){var x=c.memoizedProps;a=a!==null?a.memoizedProps:x;var T=c.type,R=c.updateQueue;c.updateQueue=null,R!==null&&Y(v,R,T,a,x,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));v=c.memoizedProps,We(c.stateNode,a!==null?a.memoizedProps:v,v);return;case 3:me&&a!==null&&a.memoizedState.isDehydrated&&It(c.stateNode.containerInfo);return;case 12:return;case 13:ju(c);return;case 19:ju(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:ci(3,c,c.return),tl(3,c),ci(5,c,c.return);return;case 12:return;case 13:ju(c);return;case 19:ju(c);return;case 3:me&&a!==null&&a.memoizedState.isDehydrated&&It(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(we){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,xi(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function ju(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var v=a.stateNode;v===null&&(v=a.stateNode=new Bv),c.forEach(function(x){var T=uP.bind(null,a,x);v.has(x)||(v.add(x),x.then(T,T))})}}function Wo(a,c){for(Fe=c;Fe!==null;){c=Fe;var v=c.deletions;if(v!==null)for(var x=0;x<v.length;x++){var T=v[x];try{var R=a;rt?jd(R,T,c):Lp(R,T,c);var W=T.alternate;W!==null&&(W.return=null),T.return=null}catch(et){Hi(T,c,et)}}if(v=c.child,(c.subtreeFlags&12854)!==0&&v!==null)v.return=c,Fe=v;else for(;Fe!==null;){c=Fe;try{var J=c.flags;if(J&32&&rt&&Z(c.stateNode),J&512){var ve=c.alternate;if(ve!==null){var Re=ve.ref;Re!==null&&(typeof Re=="function"?Re(null):Re.current=null)}}if(J&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var Xe=c.alternate;(Xe===null||Xe.memoizedState===null)&&(Jd=In())}break;case 22:var mt=c.memoizedState!==null,ot=c.alternate,$t=ot!==null&&ot.memoizedState!==null;if(v=c,rt){e:if(x=v,T=mt,R=null,rt)for(var it=x;;){if(it.tag===5){if(R===null){R=it;var hi=it.stateNode;T?Ue(hi):Ie(it.stateNode,it.memoizedProps)}}else if(it.tag===6){if(R===null){var Rr=it.stateNode;T?_e(Rr):ke(Rr,it.memoizedProps)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===x)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===x)break;for(;it.sibling===null;){if(it.return===null||it.return===x)break e;R===it&&(R=null),it=it.return}R===it&&(R=null),it.sibling.return=it.return,it=it.sibling}}if(mt&&!$t&&(v.mode&1)!==0){Fe=v;for(var ae=v.child;ae!==null;){for(v=Fe=ae;Fe!==null;){x=Fe;var Q=x.child;switch(x.tag){case 0:case 11:case 14:case 15:ci(4,x,x.return);break;case 1:lr(x,x.return);var pe=x.stateNode;if(typeof pe.componentWillUnmount=="function"){var Be=x.return;try{pe.props=x.memoizedProps,pe.state=x.memoizedState,pe.componentWillUnmount()}catch(et){Hi(x,Be,et)}}break;case 5:lr(x,x.return);break;case 22:if(x.memoizedState!==null){Op(v);continue}}Q!==null?(Q.return=x,Fe=Q):Op(v)}ae=ae.sibling}}}switch(J&4102){case 2:Ip(c),c.flags&=-3;break;case 6:Ip(c),c.flags&=-3,Xd(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,Xd(c.alternate,c);break;case 4:Xd(c.alternate,c)}}catch(et){Hi(c,c.return,et)}if(v=c.sibling,v!==null){v.return=c.return,Fe=v;break}Fe=c.return}}}function Dp(a,c,v){Fe=a,Np(a)}function Np(a,c,v){for(var x=(a.mode&1)!==0;Fe!==null;){var T=Fe,R=T.child;if(T.tag===22&&x){var W=T.memoizedState!==null||Vu;if(!W){var J=T.alternate,ve=J!==null&&J.memoizedState!==null||Js;J=Vu;var Re=Js;if(Vu=W,(Js=ve)&&!Re)for(Fe=T;Fe!==null;)W=Fe,ve=W.child,W.tag===22&&W.memoizedState!==null?Xu(T):ve!==null?(ve.return=W,Fe=ve):Xu(T);for(;R!==null;)Fe=R,Np(R),R=R.sibling;Fe=T,Vu=J,Js=Re}zp(a)}else(T.subtreeFlags&8772)!==0&&R!==null?(R.return=T,Fe=R):zp(a)}}function zp(a){for(;Fe!==null;){var c=Fe;if((c.flags&8772)!==0){var v=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Js||tl(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!Js)if(v===null)x.componentDidMount();else{var T=c.elementType===c.type?v.memoizedProps:Ji(c.type,v.memoizedProps);x.componentDidUpdate(T,v.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var R=c.updateQueue;R!==null&&Er(c,R,x);break;case 3:var W=c.updateQueue;if(W!==null){if(v=null,c.child!==null)switch(c.child.tag){case 5:v=se(c.child.stateNode);break;case 1:v=c.child.stateNode}Er(c,W,v)}break;case 5:var J=c.stateNode;v===null&&c.flags&4&&Oe(J,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(me&&c.memoizedState===null){var ve=c.alternate;if(ve!==null){var Re=ve.memoizedState;if(Re!==null){var Xe=Re.dehydrated;Xe!==null&&Ct(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Js||c.flags&512&&Gu(c)}catch(mt){Hi(c,c.return,mt)}}if(c===a){Fe=null;break}if(v=c.sibling,v!==null){v.return=c.return,Fe=v;break}Fe=c.return}}function Op(a){for(;Fe!==null;){var c=Fe;if(c===a){Fe=null;break}var v=c.sibling;if(v!==null){v.return=c.return,Fe=v;break}Fe=c.return}}function Xu(a){for(;Fe!==null;){var c=Fe;try{switch(c.tag){case 0:case 11:case 15:var v=c.return;try{tl(4,c)}catch(ve){Hi(c,v,ve)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var T=c.return;try{x.componentDidMount()}catch(ve){Hi(c,T,ve)}}var R=c.return;try{Gu(c)}catch(ve){Hi(c,R,ve)}break;case 5:var W=c.return;try{Gu(c)}catch(ve){Hi(c,W,ve)}}}catch(ve){Hi(c,c.return,ve)}if(c===a){Fe=null;break}var J=c.sibling;if(J!==null){J.return=c.return,Fe=J;break}Fe=c.return}}var qu=0,es=1,nl=2,Yu=3,Ku=4;if(typeof Symbol=="function"&&Symbol.for){var il=Symbol.for;qu=il("selector.component"),es=il("selector.has_pseudo_class"),nl=il("selector.role"),Yu=il("selector.test_id"),Ku=il("selector.text")}function qd(a){var c=Ae(a);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(a=kt(a),a===null)throw Error(o(362));return a.stateNode.current}function Yd(a,c){switch(c.$$typeof){case qu:if(a.type===c.value)return!0;break;case es:e:{c=c.value,a=[a,0];for(var v=0;v<a.length;){var x=a[v++],T=a[v++],R=c[T];if(x.tag!==5||!de(x)){for(;R!=null&&Yd(x,R);)T++,R=c[T];if(T===c.length){c=!0;break e}else for(x=x.child;x!==null;)a.push(x,T),x=x.sibling}}c=!1}return c;case nl:if(a.tag===5&&Ee(a.stateNode,c.value))return!0;break;case Ku:if((a.tag===5||a.tag===6)&&(a=U(a),a!==null&&0<=a.indexOf(c.value)))return!0;break;case Yu:if(a.tag===5&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Kd(a){switch(a.$$typeof){case qu:return"<"+(z(a.value)||"Unknown")+">";case es:return":has("+(Kd(a)||"")+")";case nl:return'[role="'+a.value+'"]';case Ku:return'"'+a.value+'"';case Yu:return'[data-testname="'+a.value+'"]';default:throw Error(o(365))}}function Fp(a,c){var v=[];a=[a,0];for(var x=0;x<a.length;){var T=a[x++],R=a[x++],W=c[R];if(T.tag!==5||!de(T)){for(;W!=null&&Yd(T,W);)R++,W=c[R];if(R===c.length)v.push(T);else for(T=T.child;T!==null;)a.push(T,R),T=T.sibling}}return v}function $s(a,c){if(!Tt)throw Error(o(363));a=qd(a),a=Fp(a,c),c=[],a=Array.from(a);for(var v=0;v<a.length;){var x=a[v++];if(x.tag===5)de(x)||c.push(x.stateNode);else for(x=x.child;x!==null;)a.push(x),x=x.sibling}return c}var Up=Math.ceil,Zu=l.ReactCurrentDispatcher,rl=l.ReactCurrentOwner,cn=l.ReactCurrentBatchConfig,wt=0,dn=null,bn=null,rn=0,Ci=0,jo=bi(0),gn=0,sl=null,Xo=0,ol=0,Zd=0,al=null,di=null,Jd=0,Qd=1/0;function qo(){Qd=In()+500}var Ju=!1,$d=null,Rs=null,ll=!1,ts=null,ul=0,cl=0,eh=null,Qu=-1,$u=0;function ei(){return(wt&6)!==0?In():Qu!==-1?Qu:Qu=In()}function ks(a){return(a.mode&1)===0?1:(wt&2)!==0&&rn!==0?rn&-rn:Dv.transition!==null?($u===0&&(a=cu,cu<<=1,(cu&4194240)===0&&(cu=64),$u=a),$u):(a=Dt,a!==0?a:Ne())}function Bi(a,c,v){if(50<cl)throw cl=0,eh=null,Error(o(185));var x=ec(a,c);return x===null?null:(Ga(x,c,v),((wt&2)===0||x!==dn)&&(x===dn&&((wt&2)===0&&(ol|=c),gn===4&&h(x,rn)),ti(x,v),c===1&&wt===0&&(a.mode&1)===0&&(qo(),gu&&br())),x)}function ec(a,c){a.lanes|=c;var v=a.alternate;for(v!==null&&(v.lanes|=c),v=a,a=a.return;a!==null;)a.childLanes|=c,v=a.alternate,v!==null&&(v.childLanes|=c),v=a,a=a.return;return v.tag===3?v.stateNode:null}function ti(a,c){var v=a.callbackNode;Pv(a,c);var x=du(a,a===dn?rn:0);if(x===0)v!==null&&Po(v),a.callbackNode=null,a.callbackPriority=0;else if(c=x&-x,a.callbackPriority!==c){if(v!=null&&Po(v),c===1)a.tag===0?Iv(b.bind(null,a)):Xf(b.bind(null,a)),Qe?Je(function(){wt===0&&br()}):Wa(Xa,br),v=null;else{switch(Wf(x)){case 1:v=Xa;break;case 4:v=jf;break;case 16:v=_d;break;case 536870912:v=Lv;break;default:v=_d}v=Dw(v,Bp.bind(null,a))}a.callbackPriority=c,a.callbackNode=v}}function Bp(a,c){if(Qu=-1,$u=0,(wt&6)!==0)throw Error(o(327));var v=a.callbackNode;if(dl()&&a.callbackNode!==v)return null;var x=du(a,a===dn?rn:0);if(x===0)return null;if((x&30)!==0||(x&a.expiredLanes)!==0||c)c=Lt(a,x);else{c=x;var T=wt;wt|=2;var R=$e();(dn!==a||rn!==c)&&(qo(),ee(a,c));do try{ns();break}catch(J){Me(a,J)}while(1);Qi(),Zu.current=R,wt=T,bn!==null?c=0:(dn=null,rn=0,c=gn)}if(c!==0){if(c===2&&(T=fu(a),T!==0&&(x=T,c=th(a,T))),c===1)throw v=sl,ee(a,0),h(a,x),ti(a,In()),v;if(c===6)h(a,x);else{if(T=a.current.alternate,(x&30)===0&&!u(T)&&(c=Lt(a,x),c===2&&(R=fu(a),R!==0&&(x=R,c=th(a,R))),c===1))throw v=sl,ee(a,0),h(a,x),ti(a,In()),v;switch(a.finishedWork=T,a.finishedLanes=x,c){case 0:case 1:throw Error(o(345));case 2:Vi(a,di);break;case 3:if(h(a,x),(x&130023424)===x&&(c=Jd+500-In(),10<c)){if(du(a,0)!==0)break;if(T=a.suspendedLanes,(T&x)!==x){ei(),a.pingedLanes|=a.suspendedLanes&T;break}a.timeoutHandle=Ke(Vi.bind(null,a,di),c);break}Vi(a,di);break;case 4:if(h(a,x),(x&4194240)===x)break;for(c=a.eventTimes,T=-1;0<x;){var W=31-Mi(x);R=1<<W,W=c[W],W>T&&(T=W),x&=~R}if(x=T,x=In()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*Up(x/1960))-x,10<x){a.timeoutHandle=Ke(Vi.bind(null,a,di),x);break}Vi(a,di);break;case 5:Vi(a,di);break;default:throw Error(o(329))}}}return ti(a,In()),a.callbackNode===v?Bp.bind(null,a):null}function th(a,c){var v=al;return a.current.memoizedState.isDehydrated&&(ee(a,c).flags|=256),a=Lt(a,c),a!==2&&(c=di,di=v,c!==null&&p(c)),a}function p(a){di===null?di=a:di.push.apply(di,a)}function u(a){for(var c=a;;){if(c.flags&16384){var v=c.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var x=0;x<v.length;x++){var T=v[x],R=T.getSnapshot;T=T.value;try{if(!Sr(R(),T))return!1}catch{return!1}}}if(v=c.child,c.subtreeFlags&16384&&v!==null)v.return=c,c=v;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function h(a,c){for(c&=~Zd,c&=~ol,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var v=31-Mi(c),x=1<<v;a[v]=-1,c&=~x}}function b(a){if((wt&6)!==0)throw Error(o(327));dl();var c=du(a,0);if((c&1)===0)return ti(a,In()),null;var v=Lt(a,c);if(a.tag!==0&&v===2){var x=fu(a);x!==0&&(c=x,v=th(a,x))}if(v===1)throw v=sl,ee(a,0),h(a,c),ti(a,In()),v;if(v===6)throw Error(o(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Vi(a,di),ti(a,In()),null}function I(a){ts!==null&&ts.tag===0&&(wt&6)===0&&dl();var c=wt;wt|=1;var v=cn.transition,x=Dt;try{if(cn.transition=null,Dt=1,a)return a()}finally{Dt=x,cn.transition=v,wt=c,(wt&6)===0&&br()}}function X(){Ci=jo.current,pt(jo)}function ee(a,c){a.finishedWork=null,a.finishedLanes=0;var v=a.timeoutHandle;if(v!==nt&&(a.timeoutHandle=nt,tt(v)),bn!==null)for(v=bn.return;v!==null;){var x=v;switch(bu(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&bs();break;case 3:zo(),pt(Pn),pt(zt),Td();break;case 5:Pd(x);break;case 4:zo();break;case 13:pt(Zt);break;case 19:pt(Zt);break;case 10:Sd(x.type._context);break;case 22:case 23:X()}v=v.return}if(dn=a,bn=a=Zo(a.current,null),rn=Ci=c,gn=0,sl=null,Zd=ol=Xo=0,di=al=null,$i!==null){for(c=0;c<$i.length;c++)if(v=$i[c],x=v.interleaved,x!==null){v.interleaved=null;var T=x.next,R=v.pending;if(R!==null){var W=R.next;R.next=T,x.next=W}v.pending=x}$i=null}return a}function Me(a,c){do{var v=bn;try{if(Qi(),Eu.current=Nu,Cu){for(var x=Xt.memoizedState;x!==null;){var T=x.queue;T!==null&&(T.pending=null),x=x.next}Cu=!1}if(Ui=0,Gt=Gn=Xt=null,Oo=!1,Fo=0,rl.current=null,v===null||v.return===null){gn=1,sl=c,bn=null;break}e:{var R=a,W=v.return,J=v,ve=c;if(c=rn,J.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Re=ve,Xe=J,mt=Xe.tag;if((Xe.mode&1)===0&&(mt===0||mt===11||mt===15)){var ot=Xe.alternate;ot?(Xe.updateQueue=ot.updateQueue,Xe.memoizedState=ot.memoizedState,Xe.lanes=ot.lanes):(Xe.updateQueue=null,Xe.memoizedState=null)}var $t=hp(W);if($t!==null){$t.flags&=-257,Ou($t,W,J,R,c),$t.mode&1&&dp(R,Re,c),c=$t,ve=Re;var it=c.updateQueue;if(it===null){var hi=new Set;hi.add(ve),c.updateQueue=hi}else it.add(ve);break e}else{if((c&1)===0){dp(R,Re,c),ct();break e}ve=Error(o(426))}}else if(Kt&&J.mode&1){var Rr=hp(W);if(Rr!==null){(Rr.flags&65536)===0&&(Rr.flags|=256),Ou(Rr,W,J,R,c),Md(ve);break e}}R=ve,gn!==4&&(gn=2),al===null?al=[R]:al.push(R),ve=Od(ve,J),J=W;do{switch(J.tag){case 3:J.flags|=65536,c&=-c,J.lanes|=c;var ae=cp(J,ve,c);Qn(J,ae);break e;case 1:R=ve;var Q=J.type,pe=J.stateNode;if((J.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Rs===null||!Rs.has(pe)))){J.flags|=65536,c&=-c,J.lanes|=c;var Be=zu(J,R,c);Qn(J,Be);break e}}J=J.return}while(J!==null)}Ko(v)}catch(et){c=et,bn===v&&v!==null&&(bn=v=v.return);continue}break}while(1)}function $e(){var a=Zu.current;return Zu.current=Nu,a===null?Nu:a}function ct(){(gn===0||gn===3||gn===2)&&(gn=4),dn===null||(Xo&268435455)===0&&(ol&268435455)===0||h(dn,rn)}function Lt(a,c){var v=wt;wt|=2;var x=$e();dn===a&&rn===c||ee(a,c);do try{Ot();break}catch(T){Me(a,T)}while(1);if(Qi(),wt=v,Zu.current=x,bn!==null)throw Error(o(261));return dn=null,rn=0,gn}function Ot(){for(;bn!==null;)Yo(bn)}function ns(){for(;bn!==null&&!Av();)Yo(bn)}function Yo(a){var c=Iw(a.alternate,a,Ci);a.memoizedProps=a.pendingProps,c===null?Ko(a):bn=c,rl.current=null}function Ko(a){var c=a;do{var v=c.alternate;if(a=c.return,(c.flags&32768)===0){if(v=Fv(v,c,Ci),v!==null){bn=v;return}}else{if(v=Tp(v,c),v!==null){v.flags&=32767,bn=v;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{gn=6,bn=null;return}}if(c=c.sibling,c!==null){bn=c;return}bn=c=a}while(c!==null);gn===0&&(gn=5)}function Vi(a,c){var v=Dt,x=cn.transition;try{cn.transition=null,Dt=1,oP(a,c,v)}finally{cn.transition=x,Dt=v}return null}function oP(a,c,v){do dl();while(ts!==null);if((wt&6)!==0)throw Error(o(327));var x=a.finishedWork,T=a.finishedLanes;if(x===null)return null;if(a.finishedWork=null,a.finishedLanes=0,x===a.current)throw Error(o(177));a.callbackNode=null,a.callbackPriority=0;var R=x.lanes|x.childLanes;if(Tv(a,R),a===dn&&(bn=dn=null,rn=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||ll||(ll=!0,Dw(_d,function(){return dl(),null})),R=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||R){R=cn.transition,cn.transition=null;var W=Dt;Dt=1;var J=wt;wt|=4,rl.current=null,Vv(a,x),Wo(a,x),H(a.containerInfo),a.current=x,Dp(x),ja(),wt=J,Dt=W,cn.transition=R}else a.current=x;if(ll&&(ll=!1,ts=a,ul=T),R=a.pendingLanes,R===0&&(Rs=null),Rv(x.stateNode),ti(a,In()),c!==null)for(v=a.onRecoverableError,x=0;x<c.length;x++)v(c[x]);if(Ju)throw Ju=!1,a=$d,$d=null,a;return(ul&1)!==0&&a.tag!==0&&dl(),R=a.pendingLanes,(R&1)!==0?a===eh?cl++:(cl=0,eh=a):cl=0,br(),null}function dl(){if(ts!==null){var a=Wf(ul),c=cn.transition,v=Dt;try{if(cn.transition=null,Dt=16>a?16:a,ts===null)var x=!1;else{if(a=ts,ts=null,ul=0,(wt&6)!==0)throw Error(o(331));var T=wt;for(wt|=4,Fe=a.current;Fe!==null;){var R=Fe,W=R.child;if((Fe.flags&16)!==0){var J=R.deletions;if(J!==null){for(var ve=0;ve<J.length;ve++){var Re=J[ve];for(Fe=Re;Fe!==null;){var Xe=Fe;switch(Xe.tag){case 0:case 11:case 15:ci(8,Xe,R)}var mt=Xe.child;if(mt!==null)mt.return=Xe,Fe=mt;else for(;Fe!==null;){Xe=Fe;var ot=Xe.sibling,$t=Xe.return;if(Rp(Xe),Xe===Re){Fe=null;break}if(ot!==null){ot.return=$t,Fe=ot;break}Fe=$t}}}var it=R.alternate;if(it!==null){var hi=it.child;if(hi!==null){it.child=null;do{var Rr=hi.sibling;hi.sibling=null,hi=Rr}while(hi!==null)}}Fe=R}}if((R.subtreeFlags&2064)!==0&&W!==null)W.return=R,Fe=W;else e:for(;Fe!==null;){if(R=Fe,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:ci(9,R,R.return)}var ae=R.sibling;if(ae!==null){ae.return=R.return,Fe=ae;break e}Fe=R.return}}var Q=a.current;for(Fe=Q;Fe!==null;){W=Fe;var pe=W.child;if((W.subtreeFlags&2064)!==0&&pe!==null)pe.return=W,Fe=pe;else e:for(W=Q;Fe!==null;){if(J=Fe,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:tl(9,J)}}catch(et){Hi(J,J.return,et)}if(J===W){Fe=null;break e}var Be=J.sibling;if(Be!==null){Be.return=J.return,Fe=Be;break e}Fe=J.return}}if(wt=T,br(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(mu,a)}catch{}x=!0}return x}finally{Dt=v,cn.transition=c}}return!1}function Rw(a,c,v){c=Od(v,c),c=cp(a,c,1),Ms(a,c),c=ei(),a=ec(a,1),a!==null&&(Ga(a,1,c),ti(a,c))}function Hi(a,c,v){if(a.tag===3)Rw(a,a,v);else for(;c!==null;){if(c.tag===3){Rw(c,a,v);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Rs===null||!Rs.has(x))){a=Od(v,a),a=zu(c,a,1),Ms(c,a),a=ei(),c=ec(c,1),c!==null&&(Ga(c,1,a),ti(c,a));break}}c=c.return}}function aP(a,c,v){var x=a.pingCache;x!==null&&x.delete(c),c=ei(),a.pingedLanes|=a.suspendedLanes&v,dn===a&&(rn&v)===v&&(gn===4||gn===3&&(rn&130023424)===rn&&500>In()-Jd?ee(a,0):Zd|=v),ti(a,c)}function kw(a,c){c===0&&((a.mode&1)===0?c=1:(c=Ha,Ha<<=1,(Ha&130023424)===0&&(Ha=4194304)));var v=ei();a=ec(a,c),a!==null&&(Ga(a,c,v),ti(a,v))}function lP(a){var c=a.memoizedState,v=0;c!==null&&(v=c.retryLane),kw(a,v)}function uP(a,c){var v=0;switch(a.tag){case 13:var x=a.stateNode,T=a.memoizedState;T!==null&&(v=T.retryLane);break;case 19:x=a.stateNode;break;default:throw Error(o(314))}x!==null&&x.delete(c),kw(a,v)}var Iw;Iw=function(a,c,v){if(a!==null)if(a.memoizedProps!==c.pendingProps||Pn.current)Ei=!0;else{if((a.lanes&v)===0&&(c.flags&128)===0)return Ei=!1,Pp(a,c,v);Ei=(a.flags&131072)!==0}else Ei=!1,Kt&&(c.flags&1048576)!==0&&Lo(c,Ts,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2),a=c.pendingProps;var T=Yr(c,zt.current);To(c,v),T=Tu(null,c,x,a,T,v);var R=Au();return c.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,oi(x)?(R=!0,Kr(c)):R=!1,c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,xu(c),T.updater=Ao,c.stateNode=T,T._reactInternals=c,mn(c,x,a,v),c=el(null,c,x,!0,R,v)):(c.tag=0,Kt&&R&&Ro(c),$n(null,c,T,v),c=c.child),c;case 16:x=c.elementType;e:{switch(a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2),a=c.pendingProps,T=x._init,x=T(x._payload),c.type=x,T=c.tag=dP(x),a=Ji(x,a),T){case 0:c=Bd(null,c,x,a,v);break e;case 1:c=xp(null,c,x,a,v);break e;case 11:c=mp(null,c,x,a,v);break e;case 14:c=gp(null,c,x,Ji(x.type,a),v);break e}throw Error(o(306,x,""))}return c;case 0:return x=c.type,T=c.pendingProps,T=c.elementType===x?T:Ji(x,T),Bd(a,c,x,T,v);case 1:return x=c.type,T=c.pendingProps,T=c.elementType===x?T:Ji(x,T),xp(a,c,x,T,v);case 3:e:{if(wp(c),a===null)throw Error(o(387));x=c.pendingProps,R=c.memoizedState,T=R.element,Yf(a,c),Cs(c,x,null,v);var W=c.memoizedState;if(x=W.element,me&&R.isDehydrated)if(R={element:x,isDehydrated:!1,cache:W.cache,transitions:W.transitions},c.updateQueue.baseState=R,c.memoizedState=R,c.flags&256){T=Error(o(423)),c=Sp(a,c,x,v,T);break e}else if(x!==T){T=Error(o(424)),c=Sp(a,c,x,v,T);break e}else for(me&&(li=re(c.stateNode.containerInfo),Sn=c,Kt=!0,tr=null,Xs=!1),v=Ed(c,null,x,v),c.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Io(),x===T){c=ar(a,c,v);break e}$n(a,c,x,v)}c=c.child}return c;case 5:return Cd(c),a===null&&ko(c),x=c.type,T=c.pendingProps,R=a!==null?a.memoizedProps:null,W=T.children,qe(x,T)?W=null:R!==null&&qe(x,R)&&(c.flags|=32),yp(a,c),$n(a,c,W,v),c.child;case 6:return a===null&&ko(c),null;case 13:return bp(a,c,v);case 4:return No(c,c.stateNode.containerInfo),x=c.pendingProps,a===null?c.child=Do(c,null,x,v):$n(a,c,x,v),c.child;case 11:return x=c.type,T=c.pendingProps,T=c.elementType===x?T:Ji(x,T),mp(a,c,x,T,v);case 7:return $n(a,c,c.pendingProps,v),c.child;case 8:return $n(a,c,c.pendingProps.children,v),c.child;case 12:return $n(a,c,c.pendingProps.children,v),c.child;case 10:e:{if(x=c.type._context,T=c.pendingProps,R=c.memoizedProps,W=T.value,wd(c,x,W),R!==null)if(Sr(R.value,W)){if(R.children===T.children&&!Pn.current){c=ar(a,c,v);break e}}else for(R=c.child,R!==null&&(R.return=c);R!==null;){var J=R.dependencies;if(J!==null){W=R.child;for(var ve=J.firstContext;ve!==null;){if(ve.context===x){if(R.tag===1){ve=Jr(-1,v&-v),ve.tag=2;var Re=R.updateQueue;if(Re!==null){Re=Re.shared;var Xe=Re.pending;Xe===null?ve.next=ve:(ve.next=Xe.next,Xe.next=ve),Re.pending=ve}}R.lanes|=v,ve=R.alternate,ve!==null&&(ve.lanes|=v),Tn(R.return,v,c),J.lanes|=v;break}ve=ve.next}}else if(R.tag===10)W=R.type===c.type?null:R.child;else if(R.tag===18){if(W=R.return,W===null)throw Error(o(341));W.lanes|=v,J=W.alternate,J!==null&&(J.lanes|=v),Tn(W,v,c),W=R.sibling}else W=R.child;if(W!==null)W.return=R;else for(W=R;W!==null;){if(W===c){W=null;break}if(R=W.sibling,R!==null){R.return=W.return,W=R;break}W=W.return}R=W}$n(a,c,T.children,v),c=c.child}return c;case 9:return T=c.type,x=c.pendingProps.children,To(c,v),T=Jn(T),x=x(T),c.flags|=1,$n(a,c,x,v),c.child;case 14:return x=c.type,T=Ji(x,c.pendingProps),T=Ji(x.type,T),gp(a,c,x,T,v);case 15:return vp(a,c,c.type,c.pendingProps,v);case 17:return x=c.type,T=c.pendingProps,T=c.elementType===x?T:Ji(x,T),a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,oi(x)?(a=!0,Kr(c)):a=!1,To(c,v),Qt(c,x,T),mn(c,x,T,v),el(null,c,x,!0,a,v);case 19:return Cp(a,c,v);case 22:return _p(a,c,v)}throw Error(o(156,c.tag))};function Dw(a,c){return Wa(a,c)}function cP(a,c,v,x){this.tag=a,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(a,c,v,x){return new cP(a,c,v,x)}function Hv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function dP(a){if(typeof a=="function")return Hv(a)?1:0;if(a!=null){if(a=a.$$typeof,a===S)return 11;if(a===C)return 14}return 2}function Zo(a,c){var v=a.alternate;return v===null?(v=Lr(a.tag,c,a.key,a.mode),v.elementType=a.elementType,v.type=a.type,v.stateNode=a.stateNode,v.alternate=a,a.alternate=v):(v.pendingProps=c,v.type=a.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=a.flags&14680064,v.childLanes=a.childLanes,v.lanes=a.lanes,v.child=a.child,v.memoizedProps=a.memoizedProps,v.memoizedState=a.memoizedState,v.updateQueue=a.updateQueue,c=a.dependencies,v.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},v.sibling=a.sibling,v.index=a.index,v.ref=a.ref,v}function Vp(a,c,v,x,T,R){var W=2;if(x=a,typeof a=="function")Hv(a)&&(W=1);else if(typeof a=="string")W=5;else e:switch(a){case g:return hl(v.children,T,R,c);case m:W=8,T|=8;break;case _:return a=Lr(12,v,c,T|2),a.elementType=_,a.lanes=R,a;case E:return a=Lr(13,v,c,T),a.elementType=E,a.lanes=R,a;case M:return a=Lr(19,v,c,T),a.elementType=M,a.lanes=R,a;case A:return Hp(v,T,R,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case y:W=10;break e;case w:W=9;break e;case S:W=11;break e;case C:W=14;break e;case P:W=16,x=null;break e}throw Error(o(130,a==null?a:typeof a,""))}return c=Lr(W,v,c,T),c.elementType=a,c.type=x,c.lanes=R,c}function hl(a,c,v,x){return a=Lr(7,a,x,c),a.lanes=v,a}function Hp(a,c,v,x){return a=Lr(22,a,x,c),a.elementType=A,a.lanes=v,a.stateNode={},a}function Gv(a,c,v){return a=Lr(6,a,null,c),a.lanes=v,a}function Wv(a,c,v){return c=Lr(4,a.children!==null?a.children:[],a.key,c),c.lanes=v,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function hP(a,c,v,x,T){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=nt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=x,this.onRecoverableError=T,me&&(this.mutableSourceEagerHydrationData=null)}function Nw(a,c,v,x,T,R,W,J,ve){return a=new hP(a,c,v,J,ve),c===1?(c=1,R===!0&&(c|=8)):c=0,R=Lr(3,null,null,c),a.current=R,R.stateNode=a,R.memoizedState={element:x,isDehydrated:v,cache:null,transitions:null},xu(R),a}function zw(a){if(!a)return zi;a=a._reactInternals;e:{if(N(a)!==a||a.tag!==1)throw Error(o(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(oi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(a.tag===1){var v=a.type;if(oi(v))return Eo(a,v,c)}return c}function Ow(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=ge(c),a===null?null:a.stateNode}function Fw(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var v=a.retryLane;a.retryLane=v!==0&&v<c?v:c}}function jv(a,c){Fw(a,c),(a=a.alternate)&&Fw(a,c)}function fP(a){return a=ge(a),a===null?null:a.stateNode}function pP(){return null}return t.attemptContinuousHydration=function(a){if(a.tag===13){var c=ei();Bi(a,134217728,c),jv(a,134217728)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var c=ei(),v=ks(a);Bi(a,v,c),jv(a,v)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var v=Co(c.pendingLanes);v!==0&&(vd(c,v|1),ti(c,In()),(wt&6)===0&&(qo(),br()))}break;case 13:var x=ei();I(function(){return Bi(a,1,x)}),jv(a,1)}},t.batchedUpdates=function(a,c){var v=wt;wt|=1;try{return a(c)}finally{wt=v,wt===0&&(qo(),gu&&br())}},t.createComponentSelector=function(a){return{$$typeof:qu,value:a}},t.createContainer=function(a,c,v,x,T,R,W){return Nw(a,c,!1,null,v,x,T,R,W)},t.createHasPseudoClassSelector=function(a){return{$$typeof:es,value:a}},t.createHydrationContainer=function(a,c,v,x,T,R,W,J,ve){return a=Nw(v,x,!0,a,T,R,W,J,ve),a.context=zw(null),v=a.current,x=ei(),T=ks(v),R=Jr(x,T),R.callback=c!=null?c:null,Ms(v,R),a.current.lanes=T,Ga(a,T,x),ti(a,x),a},t.createPortal=function(a,c,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:x==null?null:""+x,children:a,containerInfo:c,implementation:v}},t.createRoleSelector=function(a){return{$$typeof:nl,value:a}},t.createTestNameSelector=function(a){return{$$typeof:Yu,value:a}},t.createTextSelector=function(a){return{$$typeof:Ku,value:a}},t.deferredUpdates=function(a){var c=Dt,v=cn.transition;try{return cn.transition=null,Dt=16,a()}finally{Dt=c,cn.transition=v}},t.discreteUpdates=function(a,c,v,x,T){var R=Dt,W=cn.transition;try{return cn.transition=null,Dt=1,a(c,v,x,T)}finally{Dt=R,cn.transition=W,wt===0&&qo()}},t.findAllNodes=$s,t.findBoundingRects=function(a,c){if(!Tt)throw Error(o(363));c=$s(a,c),a=[];for(var v=0;v<c.length;v++)a.push(j(c[v]));for(c=a.length-1;0<c;c--){v=a[c];for(var x=v.x,T=x+v.width,R=v.y,W=R+v.height,J=c-1;0<=J;J--)if(c!==J){var ve=a[J],Re=ve.x,Xe=Re+ve.width,mt=ve.y,ot=mt+ve.height;if(x>=Re&&R>=mt&&T<=Xe&&W<=ot){a.splice(c,1);break}else if(x!==Re||v.width!==ve.width||ot<R||mt>W){if(!(R!==mt||v.height!==ve.height||Xe<x||Re>T)){Re>x&&(ve.width+=Re-x,ve.x=x),Xe<T&&(ve.width=T-Re),a.splice(c,1);break}}else{mt>R&&(ve.height+=mt-R,ve.y=R),ot<W&&(ve.height=W-mt),a.splice(c,1);break}}}return a},t.findHostInstance=Ow,t.findHostInstanceWithNoPortals=function(a){return a=q(a),a=a!==null?K(a):null,a===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return Ow(a)},t.flushControlled=function(a){var c=wt;wt|=1;var v=cn.transition,x=Dt;try{cn.transition=null,Dt=1,a()}finally{Dt=x,cn.transition=v,wt=c,wt===0&&(qo(),br())}},t.flushPassiveEffects=dl,t.flushSync=I,t.focusWithin=function(a,c){if(!Tt)throw Error(o(363));for(a=qd(a),c=Fp(a,c),c=Array.from(c),a=0;a<c.length;){var v=c[a++];if(!de(v)){if(v.tag===5&&Le(v.stateNode))return!0;for(v=v.child;v!==null;)c.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Dt},t.getFindAllNodesFailureDescription=function(a,c){if(!Tt)throw Error(o(363));var v=0,x=[];a=[qd(a),0];for(var T=0;T<a.length;){var R=a[T++],W=a[T++],J=c[W];if((R.tag!==5||!de(R))&&(Yd(R,J)&&(x.push(Kd(J)),W++,W>v&&(v=W)),W<c.length))for(R=R.child;R!==null;)a.push(R,W),R=R.sibling}if(v<c.length){for(a=[];v<c.length;v++)a.push(Kd(c[v]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},t.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return se(a.child.stateNode);default:return a.child.stateNode}},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:fP,findFiberByHostInstance:a.findFiberByHostInstance||pP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)a=!0;else{try{mu=c.inject(a),wr=c}catch{}a=!!c.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,c,v,x){if(!Tt)throw Error(o(363));a=$s(a,c);var T=De(a,v,x).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(a,c){var v=c._getVersion;v=v(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,v]:a.mutableSourceEagerHydrationData.push(c,v)},t.runWithPriority=function(a,c){var v=Dt;try{return Dt=a,c()}finally{Dt=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,c,v,x){var T=c.current,R=ei(),W=ks(T);return v=zw(v),c.context===null?c.context=v:c.pendingContext=v,c=Jr(R,W),c.payload={element:a},x=x===void 0?null:x,x!==null&&(c.callback=x),Ms(T,c),a=Bi(T,W,R),a!==null&&Es(a,T,W),W},t};(function(n){n.exports=Uz})(B2);const Bz=Tb(B2.exports);var By={exports:{}},V2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,B){var H=O.length;O.push(B);e:for(;0<H;){var $=H-1>>>1,ie=O[$];if(0<r(ie,B))O[$]=B,O[H]=ie,H=$;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var B=O[0],H=O.pop();if(H!==B){O[0]=H;e:for(var $=0,ie=O.length,fe=ie>>>1;$<fe;){var be=2*($+1)-1,qe=O[be],ce=be+1,Ke=O[ce];if(0>r(qe,H))ce<ie&&0>r(Ke,qe)?(O[$]=Ke,O[ce]=H,$=ce):(O[$]=qe,O[be]=H,$=be);else if(ce<ie&&0>r(Ke,H))O[$]=Ke,O[ce]=H,$=ce;else break e}}return B}function r(O,B){var H=O.sortIndex-B.sortIndex;return H!==0?H:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var d=[],f=[],g=1,m=null,_=3,y=!1,w=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(O){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=O)i(f),B.sortIndex=B.expirationTime,e(d,B);else break;B=t(f)}}function A(O){if(S=!1,P(O),!w)if(t(d)!==null)w=!0,se(k);else{var B=t(f);B!==null&&ne(A,B.startTime-O)}}function k(O,B){w=!1,S&&(S=!1,M(L),L=-1),y=!0;var H=_;try{for(P(B),m=t(d);m!==null&&(!(m.expirationTime>B)||O&&!q());){var $=m.callback;if(typeof $=="function"){m.callback=null,_=m.priorityLevel;var ie=$(m.expirationTime<=B);B=n.unstable_now(),typeof ie=="function"?m.callback=ie:m===t(d)&&i(d),P(B)}else i(d);m=t(d)}if(m!==null)var fe=!0;else{var be=t(f);be!==null&&ne(A,be.startTime-B),fe=!1}return fe}finally{m=null,_=H,y=!1}}var D=!1,z=null,L=-1,N=5,F=-1;function q(){return!(n.unstable_now()-F<N)}function ge(){if(z!==null){var O=n.unstable_now();F=O;var B=!0;try{B=z(!0,O)}finally{B?te():(D=!1,z=null)}}else D=!1}var te;if(typeof C=="function")te=function(){C(ge)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,le=K.port2;K.port1.onmessage=ge,te=function(){le.postMessage(null)}}else te=function(){E(ge,0)};function se(O){z=O,D||(D=!0,te())}function ne(O,B){L=E(function(){O(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,se(k))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(O){switch(_){case 1:case 2:case 3:var B=3;break;default:B=_}var H=_;_=B;try{return O()}finally{_=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var H=_;_=O;try{return B()}finally{_=H}},n.unstable_scheduleCallback=function(O,B,H){var $=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?$+H:$):H=$,O){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=H+ie,O={id:g++,callback:B,priorityLevel:O,startTime:H,expirationTime:ie,sortIndex:-1},H>$?(O.sortIndex=H,e(f,O),t(d)===null&&O===t(f)&&(S?(M(L),L=-1):S=!0,ne(A,H-$))):(O.sortIndex=ie,e(d,O),w||y||(w=!0,se(k))),O},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(O){var B=_;return function(){var H=_;_=B;try{return O.apply(this,arguments)}finally{_=H}}}})(V2);(function(n){n.exports=V2})(By);function H2(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const uo=[];function G2(n,e,t=!1,i={}){for(const s of uo)if(H2(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=uo.indexOf(r);s!==-1&&uo.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(uo.push(r),!t)throw r.promise}const Vz=(n,e,t)=>G2(n,e,!1,t),Hz=(n,e,t)=>void G2(n,e,!0,t),Gz=n=>{if(n===void 0||n.length===0)uo.splice(0,uo.length);else{const e=uo.find(t=>H2(n,t.keys,t.equal));if(e){const t=uo.indexOf(e);t!==-1&&uo.splice(t,1)}}};var bv={exports:{}},Mv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wz=He.exports,jz=Symbol.for("react.element"),Xz=Symbol.for("react.fragment"),qz=Object.prototype.hasOwnProperty,Yz=Wz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kz={key:!0,ref:!0,__self:!0,__source:!0};function W2(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)qz.call(e,i)&&!Kz.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:jz,type:n,key:s,ref:o,props:r,_owner:Yz.current}}Mv.Fragment=Xz;Mv.jsx=W2;Mv.jsxs=W2;(function(n){n.exports=Mv})(bv);const jg=bv.exports.Fragment,Wt=bv.exports.jsx,Ev=bv.exports.jsxs;var yb,xb;const j2=n=>n&&n.isOrthographicCamera,Zz=n=>n&&n.hasOwnProperty("current"),Hf=typeof window<"u"&&((yb=window.document)!=null&&yb.createElement||((xb=window.navigator)==null?void 0:xb.product)==="ReactNative")?He.exports.useLayoutEffect:He.exports.useEffect;function X2(n){const e=He.exports.useRef(n);return Hf(()=>void(e.current=n),[n]),e}function Jz({set:n}){return Hf(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class q2 extends He.exports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}q2.getDerivedStateFromError=()=>({error:!0});const Y2="__default",Qz=n=>n&&!!n.memoized&&!!n.changes;function K2(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const _h=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Cn={obj:n=>n===Object(n)&&!Cn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Cn.str(n)||Cn.num(n))return n===e;const s=Cn.obj(n);if(s&&i==="reference")return n===e;const o=Cn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;for(l in r?e:n)if(n[l]!==e[l])return!1;if(Cn.und(l)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function $z(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function e4(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function wc(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function Vy(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const wb=/-\d+$/;function e_(n,e,t){if(Cn.str(t)){if(wb.test(t)){const s=t.replace(wb,""),{target:o,key:l}=Vy(n,s);Array.isArray(o[l])||(o[l]=[])}const{target:i,key:r}=Vy(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function Sb(n,e,t){var i,r;if(Cn.str(t)){const{target:s,key:o}=Vy(n,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function Z2(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:l,...d}={},f=!1){var g;const m=(g=n==null?void 0:n.__r3f)!=null?g:{},_=Object.entries(r),y=[];if(f){const S=Object.keys(d);for(let E=0;E<S.length;E++)r.hasOwnProperty(S[E])||_.unshift([S[E],Y2+"remove"])}_.forEach(([S,E])=>{var M;if((M=n.__r3f)!=null&&M.primitive&&S==="object"||Cn.equ(E,d[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return y.push([S,E,!0,[]]);let C=[];S.includes("-")&&(C=S.split("-")),y.push([S,E,!1,C])});const w={...r};return m.memoizedProps&&m.memoizedProps.args&&(w.args=m.memoizedProps.args),m.memoizedProps&&m.memoizedProps.attach&&(w.attach=m.memoizedProps.attach),{memoized:w,changes:y}}function t_(n,e){var t,i;const r=(t=n.__r3f)!=null?t:{},s=r.root,o=(i=s==null||s.getState==null?void 0:s.getState())!=null?i:{},{memoized:l,changes:d}=Qz(e)?e:Z2(n,e),f=r.eventCount;if(n.__r3f&&(n.__r3f.memoizedProps=l),d.forEach(([g,m,_,y])=>{let w=n,S=w[g];if(y.length&&(S=y.reduce((C,P)=>C[P],n),!(S&&S.set))){const[C,...P]=y.reverse();w=P.reverse().reduce((A,k)=>A[k],n),g=C}if(m===Y2+"remove")if(S&&S.constructor){var E;m=new S.constructor(...(E=l.args)!=null?E:[])}else if(w.constructor){var M;const C=new w.constructor(...(M=w.__r3f.memoizedProps.args)!=null?M:[]);m=C[S],C.dispose&&C.dispose()}else m=0;if(_)m?r.handlers[g]=m:delete r.handlers[g],r.eventCount=Object.keys(r.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Hl)){if(Array.isArray(m))S.fromArray?S.fromArray(m):S.set(...m);else if(S.copy&&m&&m.constructor&&S.constructor.name===m.constructor.name)S.copy(m);else if(m!==void 0){const C=S instanceof Ge;!C&&S.setScalar?S.setScalar(m):S instanceof Hl&&m instanceof Hl?S.mask=m.mask:S.set(m),!("ColorManagement"in Wg)&&!o.linear&&C&&S.convertSRGBToLinear()}}else w[g]=m,!o.linear&&w[g]instanceof On&&(w[g].encoding=sn);Sc(n)}),r.parent&&o.internal&&n.raycast&&f!==r.eventCount){const g=o.internal.interaction.indexOf(n);g>-1&&o.internal.interaction.splice(g,1),r.eventCount&&o.internal.interaction.push(n)}return d.length&&n.parent&&Hy(n),n}function Sc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Hy(n){n.onUpdate==null||n.onUpdate(n)}function J2(n,e){n.manual||(j2(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function t4(n,e,t){const i=t.pop(),r=t.reduce((s,o)=>s[o],n);return r[i]=e}function n_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function n4(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Nl.exports.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Nl.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Nl.exports.ContinuousEventPriority;default:return Nl.exports.DefaultEventPriority}}function Q2(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function i4(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{Q2(t.capturedMap,e,i,r)})}function r4(n){function e(d){const{internal:f}=n.getState(),g=d.offsetX-f.initialClick[0],m=d.offsetY-f.initialClick[1];return Math.round(Math.sqrt(g*g+m*m))}function t(d){return d.filter(f=>["Move","Over","Enter","Out","Leave"].some(g=>{var m;return(m=f.__r3f)==null?void 0:m.handlers["onPointer"+g]}))}function i(d,f){const g=n.getState(),m=new Set,_=[],y=f?f(g.internal.interaction):g.internal.interaction;y.forEach(E=>{const M=_h(E);M&&(M.raycaster.camera=void 0)}),g.previousRoot||g.events.compute==null||g.events.compute(d,g);let w=y.flatMap(E=>{const M=_h(E);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var C;M.events.compute==null||M.events.compute(d,M,(C=M.previousRoot)==null?void 0:C.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(E,!0):[]}).sort((E,M)=>{const C=_h(E.object),P=_h(M.object);return!C||!P?0:P.events.priority-C.events.priority||E.distance-M.distance}).filter(E=>{const M=n_(E);return m.has(M)?!1:(m.add(M),!0)});g.events.filter&&(w=g.events.filter(w,g));for(const E of w){let M=E.object;for(;M;){var S;(S=M.__r3f)!=null&&S.eventCount&&_.push({...E,eventObject:M}),M=M.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let E of g.internal.capturedMap.get(d.pointerId).values())_.push(E.intersection);return _}function r(d,f,g,m){if(d.length){const _={stopped:!1};for(const y of d){const w=_h(y.object);if(w){const{raycaster:S,pointer:E,camera:M,internal:C}=w,P=new V(E.x,E.y,0).unproject(M),A=N=>{var F,q;return(F=(q=C.capturedMap.get(N))==null?void 0:q.has(y.eventObject))!=null?F:!1},k=N=>{const F={intersection:y,target:f.target};C.capturedMap.has(N)?C.capturedMap.get(N).set(y.eventObject,F):C.capturedMap.set(N,new Map([[y.eventObject,F]])),f.target.setPointerCapture(N)},D=N=>{const F=C.capturedMap.get(N);F&&Q2(C.capturedMap,y.eventObject,F,N)};let z={};for(let N in f){let F=f[N];typeof F!="function"&&(z[N]=F)}let L={...y,...z,pointer:E,intersections:d,stopped:_.stopped,delta:g,unprojectedPoint:P,ray:S.ray,camera:M,stopPropagation:()=>{const N="pointerId"in f&&C.capturedMap.get(f.pointerId);if((!N||N.has(y.eventObject))&&(L.stopped=_.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(F=>F.eventObject===y.eventObject))){const F=d.slice(0,d.indexOf(y));s([...F,y])}},target:{hasPointerCapture:A,setPointerCapture:k,releasePointerCapture:D},currentTarget:{hasPointerCapture:A,setPointerCapture:k,releasePointerCapture:D},nativeEvent:f};if(m(L),_.stopped===!0)break}}}return d}function s(d){const{internal:f}=n.getState();Array.from(f.hovered.values()).forEach(g=>{if(!d.length||!d.find(m=>m.object===g.object&&m.index===g.index&&m.instanceId===g.instanceId)){const _=g.eventObject.__r3f,y=_==null?void 0:_.handlers;if(f.hovered.delete(n_(g)),_!=null&&_.eventCount){const w={...g,intersections:d};y.onPointerOut==null||y.onPointerOut(w),y.onPointerLeave==null||y.onPointerLeave(w)}}})}const o=d=>{switch(d){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:g}=n.getState();"pointerId"in f&&!g.capturedMap.has(f.pointerId)&&(g.capturedMap.delete(f.pointerId),s([]))}}return f=>{const{onPointerMissed:g,internal:m}=n.getState();m.lastEvent.current=f;const _=d==="onPointerMove",y=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",S=i(f,_?t:void 0),E=y?e(f):0;d==="onPointerDown"&&(m.initialClick=[f.offsetX,f.offsetY],m.initialHits=S.map(M=>M.eventObject)),y&&!S.length&&E<=2&&(l(f,m.interaction),g&&g(f)),_&&s(S),r(S,f,E,M=>{const C=M.eventObject,P=C.__r3f,A=P==null?void 0:P.handlers;if(!!(P!=null&&P.eventCount))if(_){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const k=n_(M),D=m.hovered.get(k);D?D.stopped&&M.stopPropagation():(m.hovered.set(k,M),A.onPointerOver==null||A.onPointerOver(M),A.onPointerEnter==null||A.onPointerEnter(M))}A.onPointerMove==null||A.onPointerMove(M)}else{const k=A[d];k?(!y||m.initialHits.includes(C))&&(l(f,m.interaction.filter(D=>!m.initialHits.includes(D))),k(M)):y&&m.initialHits.includes(C)&&l(f,m.interaction.filter(D=>!m.initialHits.includes(D)))}})}};function l(d,f){f.forEach(g=>{var m;return(m=g.__r3f)==null||m.handlers.onPointerMissed==null?void 0:m.handlers.onPointerMissed(d)})}return{handlePointer:o}}let Gy={},$2=n=>void(Gy={...Gy,...n});function s4(n,e){function t(g,{args:m=[],attach:_,...y},w){let S=`${g[0].toUpperCase()}${g.slice(1)}`,E;if(g==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const M=y.object;E=wc(M,{type:g,root:w,attach:_,primitive:!0})}else{const M=Gy[S];if(!M)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");E=wc(new M(...m),{type:g,root:w,attach:_,memoizedProps:{args:m}})}return E.__r3f.attach===void 0&&(E instanceof Mt?E.__r3f.attach="geometry":E instanceof si&&(E.__r3f.attach="material")),S!=="inject"&&t_(E,y),E}function i(g,m){let _=!1;if(m){var y,w;(y=m.__r3f)!=null&&y.attach?e_(g,m,m.__r3f.attach):m.isObject3D&&g.isObject3D&&(g.add(m),_=!0),_||(w=g.__r3f)==null||w.objects.push(m),m.__r3f||wc(m,{}),m.__r3f.parent=g,Hy(m),Sc(m)}}function r(g,m,_){let y=!1;if(m){var w,S;if((w=m.__r3f)!=null&&w.attach)e_(g,m,m.__r3f.attach);else if(m.isObject3D&&g.isObject3D){m.parent=g,m.dispatchEvent({type:"added"});const E=g.children.filter(C=>C!==m),M=E.indexOf(_);g.children=[...E.slice(0,M),m,...E.slice(M)],y=!0}y||(S=g.__r3f)==null||S.objects.push(m),m.__r3f||wc(m,{}),m.__r3f.parent=g,Hy(m),Sc(m)}}function s(g,m,_=!1){g&&[...g].forEach(y=>o(m,y,_))}function o(g,m,_){if(m){var y,w,S;if(m.__r3f&&(m.__r3f.parent=null),(y=g.__r3f)!=null&&y.objects&&(g.__r3f.objects=g.__r3f.objects.filter(A=>A!==m)),(w=m.__r3f)!=null&&w.attach)Sb(g,m,m.__r3f.attach);else if(m.isObject3D&&g.isObject3D){var E;g.remove(m),(E=m.__r3f)!=null&&E.root&&i4(m.__r3f.root,m)}const C=(S=m.__r3f)==null?void 0:S.primitive,P=_===void 0?m.dispose!==null&&!C:_;if(!C){var M;s((M=m.__r3f)==null?void 0:M.objects,m,P),s(m.children,m,P)}m.__r3f&&(delete m.__r3f.root,delete m.__r3f.objects,delete m.__r3f.handlers,delete m.__r3f.memoizedProps,C||delete m.__r3f),P&&m.dispose&&m.type!=="Scene"&&By.exports.unstable_scheduleCallback(By.exports.unstable_IdlePriority,()=>{try{m.dispose()}catch{}}),Sc(g)}}function l(g,m,_,y){var w;const S=(w=g.__r3f)==null?void 0:w.parent;if(!S)return;const E=t(m,_,g.__r3f.root);if(g.children){for(const M of g.children)M.__r3f&&i(E,M);g.children=g.children.filter(M=>!M.__r3f)}g.__r3f.objects.forEach(M=>i(E,M)),g.__r3f.objects=[],o(S,g),i(S,E),E.raycast&&E.__r3f.eventCount&&E.__r3f.root.getState().internal.interaction.push(E),[y,y.alternate].forEach(M=>{M!==null&&(M.stateNode=E,M.ref&&(typeof M.ref=="function"?M.ref(E):M.ref.current=E))})}const d=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Bz({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(g,m)=>{if(!m)return;const _=g.getState().scene;!_.__r3f||(_.__r3f.root=g,i(_,m))},removeChildFromContainer:(g,m)=>{!m||o(g.getState().scene,m)},insertInContainerBefore:(g,m,_)=>{if(!m||!_)return;const y=g.getState().scene;!y.__r3f||r(y,m,_)},getRootHostContext:()=>null,getChildHostContext:g=>g,finalizeInitialChildren(g){var m;const _=(m=g==null?void 0:g.__r3f)!=null?m:{};return Boolean(_.handlers)},prepareUpdate(g,m,_,y){if(g.__r3f.primitive&&y.object&&y.object!==g)return[!0];{const{args:w=[],children:S,...E}=y,{args:M=[],children:C,...P}=_;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((k,D)=>k!==M[D]))return[!0];const A=Z2(g,E,P,!0);return A.changes.length?[!1,A]:null}},commitUpdate(g,[m,_],y,w,S,E){m?l(g,y,S,E):t_(g,_)},commitMount(g,m,_,y){var w;const S=(w=g.__r3f)!=null?w:{};g.raycast&&S.handlers&&S.eventCount&&g.__r3f.root.getState().internal.interaction.push(g)},getPublicInstance:g=>g,prepareForCommit:()=>null,preparePortalMount:g=>wc(g.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(g){var m;const{attach:_,parent:y}=(m=g.__r3f)!=null?m:{};_&&y&&Sb(y,g,_),g.isObject3D&&(g.visible=!1),Sc(g)},unhideInstance(g,m){var _;const{attach:y,parent:w}=(_=g.__r3f)!=null?_:{};y&&w&&e_(w,g,y),(g.isObject3D&&m.visible==null||m.visible)&&(g.visible=!0),Sc(g)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>e?e():Nl.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Cn.fun(performance.now)?performance.now:Cn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Cn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Cn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:t_}}const o4=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],eP=n=>!!(n!=null&&n.render),Ew=He.exports.createContext(null),a4=(n,e)=>{const t=U2((l,d)=>{const f=new V,g=new V,m=new V;function _(M=d().camera,C=g,P=d().size){const{width:A,height:k,top:D,left:z}=P,L=A/k;C instanceof V?m.copy(C):m.set(...C);const N=M.getWorldPosition(f).distanceTo(m);if(j2(M))return{width:A/M.zoom,height:k/M.zoom,top:D,left:z,factor:1,distance:N,aspect:L};{const F=M.fov*Math.PI/180,q=2*Math.tan(F/2)*N,ge=q*(A/k);return{width:ge,height:q,top:D,left:z,factor:A/ge,distance:N,aspect:L}}}let y;const w=M=>l(C=>({performance:{...C.performance,current:M}})),S=new Se;return{set:l,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(M=1)=>n(d(),M),advance:(M,C)=>e(M,C,d()),legacy:!1,linear:!1,flat:!1,scene:wc(new mv),controls:null,clock:new xw,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();y&&clearTimeout(y),M.performance.current!==M.performance.min&&w(M.performance.min),y=setTimeout(()=>w(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:M=>l(C=>({...C,events:{...C.events,...M}})),setSize:(M,C,P,A,k)=>{const D=d().camera,z={width:M,height:C,top:A||0,left:k||0,updateStyle:P};l(L=>({size:z,viewport:{...L.viewport,..._(D,g,z)}}))},setDpr:M=>l(C=>{const P=K2(M);return{viewport:{...C.viewport,dpr:P,initialDpr:C.viewport.initialDpr||P}}}),setFrameloop:(M="always")=>{const C=d().clock;C.stop(),C.elapsedTime=0,M!=="never"&&(C.start(),C.elapsedTime=0),l(()=>({frameloop:M}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:He.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(M,C,P)=>{const A=d().internal;return A.priority=A.priority+(C>0?1:0),A.subscribers.push({ref:M,priority:C,store:P}),A.subscribers=A.subscribers.sort((k,D)=>k.priority-D.priority),()=>{const k=d().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(C>0?1:0),k.subscribers=k.subscribers.filter(D=>D.ref!==M))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:l,size:d,viewport:f,gl:g,set:m}=t.getState();(d!==r||f.dpr!==s)&&(r=d,s=f.dpr,J2(l,d),g.setPixelRatio(f.dpr),g.setSize(d.width,d.height,d.updateStyle)),l!==o&&(o=l,m(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};let qm,l4=new Set,u4=new Set,c4=new Set;function i_(n,e){!n.size||n.forEach(({callback:t})=>t(e))}function yh(n,e){switch(n){case"before":return i_(l4,e);case"after":return i_(u4,e);case"tail":return i_(c4,e)}}let r_,s_;function o_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),r_=e.internal.subscribers,qm=0;qm<r_.length;qm++)s_=r_[qm],s_.ref.current(s_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function d4(n){let e=!1,t,i,r;function s(d){if(i=requestAnimationFrame(s),e=!0,t=0,yh("before",d),n.forEach(f=>{var g;r=f.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((g=r.gl.xr)!=null&&g.isPresenting)&&(t+=o_(d,r))}),yh("after",d),t===0)return yh("tail",d),e=!1,cancelAnimationFrame(i)}function o(d,f=1){var g;if(!d)return n.forEach(m=>o(m.store.getState()),f);(g=d.gl.xr)!=null&&g.isPresenting||!d.internal.active||d.frameloop==="never"||(d.internal.frames=Math.min(60,d.internal.frames+f),e||(e=!0,requestAnimationFrame(s)))}function l(d,f=!0,g,m){f&&yh("before",d),g?o_(d,g,m):n.forEach(_=>o_(d,_.store.getState())),f&&yh("after",d)}return{loop:s,invalidate:o,advance:l}}function Cw(){const n=He.exports.useContext(Ew);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function us(n=t=>t,e){return Cw()(n,e)}function Pw(n,e=0){const t=Cw(),i=t.getState().internal.subscribe,r=X2(n);return Hf(()=>i(r,e,t),[e,i,t]),null}function tP(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((o,l)=>r.load(s,d=>{d.scene&&Object.assign(d,$z(d.scene)),o(d)},e,d=>l(new Error(`Could not load ${s}: ${d.message})`))))))}}function Tw(n,e,t,i){const r=Array.isArray(e)?e:[e],s=Vz(tP(t,i),[n,...r],{equal:Cn.equ});return Array.isArray(e)?s:s[0]}Tw.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Hz(tP(t),[n,...i])};Tw.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Gz([n,...t])};const id=new Map,{invalidate:bb,advance:Mb}=d4(id),{reconciler:yf,applyProps:Ym}=s4(id,n4),xc={objects:"shallow",strict:!1},h4=(n,e)=>{const t=typeof n=="function"?n(e):n;return eP(t)?t:new nw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function f4(n){return n instanceof HTMLCanvasElement}function p4(n,e){if(e)return e;if(f4(n)&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}return{width:0,height:0,top:0,left:0}}function m4(n){const e=id.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||a4(bb,Mb),o=t||yf.createContainer(s,Nl.exports.ConcurrentRoot,null,!1,null,"",r,null);e||id.set(n,{fiber:o,store:s});let l,d=!1;return{configure(f={}){let{gl:g,size:m,events:_,onCreated:y,shadows:w=!1,linear:S=!1,flat:E=!1,legacy:M=!1,orthographic:C=!1,frameloop:P="always",dpr:A=[1,2],performance:k,raycaster:D,camera:z,onPointerMissed:L}=f,N=s.getState(),F=N.gl;N.gl||N.set({gl:F=h4(g,n)});let q=N.raycaster;q||N.set({raycaster:q=new Mw});const{params:ge,...te}=D||{};if(Cn.equ(te,q,xc)||Ym(q,{...te}),Cn.equ(ge,q.params,xc)||Ym(q,{params:{...q.params,...ge}}),!N.camera){const ne=z instanceof Tf,O=ne?z:C?new Ea(0,0,0,0,.1,1e3):new fn(75,0,.1,1e3);ne||(O.position.z=5,z&&Ym(O,z),z!=null&&z.rotation||O.lookAt(0,0,0)),N.set({camera:O})}if(!N.xr){const ne=(H,$)=>{const ie=s.getState();ie.frameloop!=="never"&&Mb(H,!0,ie,$)},O=()=>{const H=s.getState();H.gl.xr.enabled=H.gl.xr.isPresenting,H.gl.xr.setAnimationLoop(H.gl.xr.isPresenting?ne:null),H.gl.xr.isPresenting||bb(H)},B={connect(){const H=s.getState().gl;H.xr.addEventListener("sessionstart",O),H.xr.addEventListener("sessionend",O)},disconnect(){const H=s.getState().gl;H.xr.removeEventListener("sessionstart",O),H.xr.removeEventListener("sessionend",O)}};F.xr&&B.connect(),N.set({xr:B})}if(F.shadowMap){const ne=Cn.boo(w);if(ne&&F.shadowMap.enabled!==w||!Cn.equ(w,F.shadowMap,xc)){const O=F.shadowMap.enabled;F.shadowMap.enabled=!!w,ne?F.shadowMap.type=Vx:Object.assign(F.shadowMap,w),O!==F.shadowMap.enabled&&(F.shadowMap.needsUpdate=!0)}}"ColorManagement"in Wg&&t4(Wg,M,["ColorManagement","legacyMode"]);const K=S?vs:sn,le=E?ms:Wx;F.outputEncoding!==K&&(F.outputEncoding=K),F.toneMapping!==le&&(F.toneMapping=le),N.legacy!==M&&N.set(()=>({legacy:M})),N.linear!==S&&N.set(()=>({linear:S})),N.flat!==E&&N.set(()=>({flat:E})),g&&!Cn.fun(g)&&!eP(g)&&!Cn.equ(g,F,xc)&&Ym(F,g),_&&!N.events.handlers&&N.set({events:_(s)}),A&&N.viewport.dpr!==K2(A)&&N.setDpr(A);const se=p4(n,m);return Cn.equ(se,N.size,xc)||N.setSize(se.width,se.height,se.updateStyle,se.top,se.left),N.frameloop!==P&&N.setFrameloop(P),N.onPointerMissed||N.set({onPointerMissed:L}),k&&!Cn.equ(k,N.performance,xc)&&N.set(ne=>({performance:{...ne.performance,...k}})),l=y,d=!0,this},render(f){return d||this.configure(),yf.updateContainer(Wt(g4,{store:s,children:f,onCreated:l,rootElement:n}),o,null,()=>{}),s},unmount(){nP(n)}}}function g4({store:n,children:e,onCreated:t,rootElement:i}){return Hf(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),He.exports.createElement(Ew.Provider,{value:n},e)}function nP(n,e){const t=id.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),yf.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,l,d;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(d=r.gl)!=null&&d.xr&&r.xr.disconnect(),e4(r),id.delete(n),e&&e(n)}catch{}},500)})}}function v4(n,e,t){return Wt(_4,{children:n,container:e,state:t},e.uuid)}function _4({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=Cw(),[l]=He.exports.useState(()=>new Mw),[d]=He.exports.useState(()=>new Se),f=He.exports.useCallback((m,_)=>{const y={...m};Object.keys(m).forEach(S=>{(o4.includes(S)||m[S]!==_[S])&&delete y[S]});let w;if(_&&r){const S=_.camera;w=m.viewport.getCurrentViewport(S,new V,r),S!==m.camera&&J2(S,r)}return{...y,scene:t,raycaster:l,pointer:d,mouse:d,previousRoot:o,events:{...m.events,..._==null?void 0:_.events,...i},size:{...m.size,...r},viewport:{...m.viewport,...w},...s}},[n]),[g]=He.exports.useState(()=>{const m=o.getState();return U2((y,w)=>({...m,scene:t,raycaster:l,pointer:d,mouse:d,previousRoot:o,events:{...m.events,...i},size:{...m.size,...r},...s,set:y,get:w,setEvents:S=>y(E=>({...E,events:{...E.events,...S}}))}))});return He.exports.useEffect(()=>{const m=o.subscribe(_=>g.setState(y=>f(_,y)));return()=>{m(),g.destroy()}},[]),He.exports.useEffect(()=>{g.setState(m=>f(o.getState(),m))},[f]),Wt(jg,{children:yf.createPortal(He.exports.createElement(Ew.Provider,{value:g},e),g,null)})}yf.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:He.exports.version});function Wy(n,e,t){var i,r,s,o,l;e==null&&(e=100);function d(){var g=Date.now()-o;g<e&&g>=0?i=setTimeout(d,e-g):(i=null,t||(l=n.apply(s,r),s=r=null))}var f=function(){s=this,r=arguments,o=Date.now();var g=t&&!i;return i||(i=setTimeout(d,e)),g&&(l=n.apply(s,r),s=r=null),l};return f.clear=function(){i&&(clearTimeout(i),i=null)},f.flush=function(){i&&(l=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},f}Wy.debounce=Wy;var Eb=Wy;function y4(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,l]=He.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=He.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,g=e?typeof e=="number"?e:e.resize:null,m=He.exports.useRef(!1);He.exports.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[_,y,w]=He.exports.useMemo(()=>{const C=()=>{if(!d.current.element)return;const{left:P,top:A,width:k,height:D,bottom:z,right:L,x:N,y:F}=d.current.element.getBoundingClientRect(),q={left:P,top:A,width:k,height:D,bottom:z,right:L,x:N,y:F};d.current.element instanceof HTMLElement&&r&&(q.height=d.current.element.offsetHeight,q.width=d.current.element.offsetWidth),Object.freeze(q),m.current&&!b4(d.current.lastBounds,q)&&l(d.current.lastBounds=q)};return[C,g?Eb(C,g):C,f?Eb(C,f):C]},[l,r,f,g]);function S(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",w,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null)}function E(){!d.current.element||(d.current.resizeObserver=new s(w),d.current.resizeObserver.observe(d.current.element),t&&d.current.scrollContainers&&d.current.scrollContainers.forEach(C=>C.addEventListener("scroll",w,{capture:!0,passive:!0})))}const M=C=>{!C||C===d.current.element||(S(),d.current.element=C,d.current.scrollContainers=iP(C),E())};return w4(w,Boolean(t)),x4(y),He.exports.useEffect(()=>{S(),E()},[t,w,y]),He.exports.useEffect(()=>S,[]),[M,o,_]}function x4(n){He.exports.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function w4(n,e){He.exports.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function iP(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...iP(n.parentElement)]}const S4=["x","y","top","bottom","left","right","width","height"],b4=(n,e)=>S4.every(t=>n[t]===e[t]),a_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function M4(n){const{handlePointer:e}=r4(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(a_).reduce((t,i)=>({...t,[i]:e(i)}),{}),connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,l])=>{const[d,f]=a_[o];t.addEventListener(d,l,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[l]=a_[s];i.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const E4=He.exports.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=M4,eventSource:l,eventPrefix:d,shadows:f,linear:g,flat:m,legacy:_,orthographic:y,frameloop:w,dpr:S,performance:E,raycaster:M,camera:C,onPointerMissed:P,onCreated:A,...k},D){He.exports.useMemo(()=>$2(Wg),[]);const[z,L]=y4({scroll:!0,debounce:{scroll:50,resize:0},...i}),N=He.exports.useRef(null),F=He.exports.useRef(null),[q,ge]=He.exports.useState(null);He.exports.useImperativeHandle(D,()=>N.current);const te=X2(P),[K,le]=He.exports.useState(!1),[se,ne]=He.exports.useState(!1);if(K)throw K;if(se)throw se;const O=He.exports.useRef(null);return L.width>0&&L.height>0&&q&&(O.current||(O.current=m4(q)),O.current.configure({gl:s,events:o,shadows:f,linear:g,flat:m,legacy:_,orthographic:y,frameloop:w,dpr:S,performance:E,raycaster:M,camera:C,size:L,onPointerMissed:(...H)=>te.current==null?void 0:te.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(l?Zz(l)?l.current:l:F.current),d&&H.setEvents({compute:($,ie)=>{const fe=$[d+"X"],be=$[d+"Y"];ie.pointer.set(fe/ie.size.width*2-1,-(be/ie.size.height)*2+1),ie.raycaster.setFromCamera(ie.pointer,ie.camera)}}),A==null||A(H)}}),O.current.render(Wt(q2,{set:ne,children:Wt(He.exports.Suspense,{fallback:Wt(Jz,{set:le}),children:e})}))),Hf(()=>{ge(N.current)},[]),He.exports.useEffect(()=>{if(q)return()=>nP(q)},[q]),Wt("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:l?"none":"auto",...r},...k,children:Wt("div",{ref:z,style:{width:"100%",height:"100%"},children:Wt("canvas",{ref:N,style:{display:"block"},children:t})})})});function vt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const C4=n=>n&&n.isCubeTexture;class P4 extends Yn{constructor(e,t){var i,r;const s=C4(e),l=((i=s?(r=e.image[0])===null||r===void 0?void 0:r.width:e.image.width)!=null?i:1024)/4,d=Math.floor(Math.log2(l)),f=Math.pow(2,d),g=3*Math.max(f,16*7),m=4*f,_=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/g}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${d}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,w=_.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,S={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},E=new hd(1,16),M=new _s({uniforms:S,fragmentShader:w,vertexShader:y,side:Os});super(E,M)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}const Cb=(n,e)=>(n%e+e)%e;class T4 extends Vs{constructor(e,t){super(),vt(this,"object",void 0),vt(this,"domElement",void 0),vt(this,"enabled",!0),vt(this,"target",new V),vt(this,"minDistance",0),vt(this,"maxDistance",1/0),vt(this,"minZoom",0),vt(this,"maxZoom",1/0),vt(this,"minPolarAngle",0),vt(this,"maxPolarAngle",Math.PI),vt(this,"minAzimuthAngle",-1/0),vt(this,"maxAzimuthAngle",1/0),vt(this,"enableDamping",!1),vt(this,"dampingFactor",.05),vt(this,"enableZoom",!0),vt(this,"zoomSpeed",1),vt(this,"enableRotate",!0),vt(this,"rotateSpeed",1),vt(this,"enablePan",!0),vt(this,"panSpeed",1),vt(this,"screenSpacePanning",!0),vt(this,"keyPanSpeed",7),vt(this,"autoRotate",!1),vt(this,"autoRotateSpeed",2),vt(this,"reverseOrbit",!1),vt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),vt(this,"mouseButtons",{LEFT:bl.ROTATE,MIDDLE:bl.DOLLY,RIGHT:bl.PAN}),vt(this,"touches",{ONE:Ml.ROTATE,TWO:Ml.DOLLY_PAN}),vt(this,"target0",void 0),vt(this,"position0",void 0),vt(this,"zoom0",void 0),vt(this,"_domElementKeyEvents",null),vt(this,"getPolarAngle",void 0),vt(this,"getAzimuthalAngle",void 0),vt(this,"setPolarAngle",void 0),vt(this,"setAzimuthalAngle",void 0),vt(this,"getDistance",void 0),vt(this,"listenToKeyEvents",void 0),vt(this,"saveState",void 0),vt(this,"reset",void 0),vt(this,"update",void 0),vt(this,"connect",void 0),vt(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof fn?this.object.zoom:1,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=Y=>{let ue=Cb(Y,2*Math.PI),Pe=g.phi;Pe<0&&(Pe+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let Ve=Math.abs(ue-Pe);2*Math.PI-Ve<Ve&&(ue<Pe?ue+=2*Math.PI:Pe+=2*Math.PI),m.phi=ue-Pe,i.update()},this.setAzimuthalAngle=Y=>{let ue=Cb(Y,2*Math.PI),Pe=g.theta;Pe<0&&(Pe+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let Ve=Math.abs(ue-Pe);2*Math.PI-Ve<Ve&&(ue<Pe?ue+=2*Math.PI:Pe+=2*Math.PI),m.theta=ue-Pe,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Y=>{Y.addEventListener("keydown",de),this._domElementKeyEvents=Y},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof fn?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof fn&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(r),i.update(),d=l.NONE},this.update=(()=>{const Y=new V,ue=new _i().setFromUnitVectors(e.up,new V(0,1,0)),Pe=ue.clone().invert(),Ve=new V,ft=new _i,Z=2*Math.PI;return function(){const _e=i.object.position;Y.copy(_e).sub(i.target),Y.applyQuaternion(ue),g.setFromVector3(Y),i.autoRotate&&d===l.NONE&&ge(F()),i.enableDamping?(g.theta+=m.theta*i.dampingFactor,g.phi+=m.phi*i.dampingFactor):(g.theta+=m.theta,g.phi+=m.phi);let Ie=i.minAzimuthAngle,ke=i.maxAzimuthAngle;return isFinite(Ie)&&isFinite(ke)&&(Ie<-Math.PI?Ie+=Z:Ie>Math.PI&&(Ie-=Z),ke<-Math.PI?ke+=Z:ke>Math.PI&&(ke-=Z),Ie<=ke?g.theta=Math.max(Ie,Math.min(ke,g.theta)):g.theta=g.theta>(Ie+ke)/2?Math.max(Ie,g.theta):Math.min(ke,g.theta)),g.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=_,g.radius=Math.max(i.minDistance,Math.min(i.maxDistance,g.radius)),i.enableDamping===!0?i.target.addScaledVector(y,i.dampingFactor):i.target.add(y),Y.setFromSpherical(g),Y.applyQuaternion(Pe),_e.copy(i.target).add(Y),i.object.lookAt(i.target),i.enableDamping===!0?(m.theta*=1-i.dampingFactor,m.phi*=1-i.dampingFactor,y.multiplyScalar(1-i.dampingFactor)):(m.set(0,0,0),y.set(0,0,0)),_=1,w||Ve.distanceToSquared(i.object.position)>f||8*(1-ft.dot(i.object.quaternion))>f?(i.dispatchEvent(r),Ve.copy(i.object.position),ft.copy(i.object.quaternion),w=!1,!0):!1}})(),this.connect=Y=>{Y===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=Y,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",De),i.domElement.addEventListener("pointerdown",dt),i.domElement.addEventListener("pointercancel",Tt),i.domElement.addEventListener("wheel",U)},this.dispose=()=>{var Y,ue,Pe,Ve,ft,Z;(Y=i.domElement)===null||Y===void 0||Y.removeEventListener("contextmenu",De),(ue=i.domElement)===null||ue===void 0||ue.removeEventListener("pointerdown",dt),(Pe=i.domElement)===null||Pe===void 0||Pe.removeEventListener("pointercancel",Tt),(Ve=i.domElement)===null||Ve===void 0||Ve.removeEventListener("wheel",U),(ft=i.domElement)===null||ft===void 0||ft.ownerDocument.removeEventListener("pointermove",Qe),(Z=i.domElement)===null||Z===void 0||Z.ownerDocument.removeEventListener("pointerup",Je),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",de)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=l.NONE;const f=1e-6,g=new Uy,m=new Uy;let _=1;const y=new V;let w=!1;const S=new Se,E=new Se,M=new Se,C=new Se,P=new Se,A=new Se,k=new Se,D=new Se,z=new Se,L=[],N={};function F(){return 2*Math.PI/60/60*i.autoRotateSpeed}function q(){return Math.pow(.95,i.zoomSpeed)}function ge(Y){i.reverseOrbit?m.theta+=Y:m.theta-=Y}function te(Y){i.reverseOrbit?m.phi+=Y:m.phi-=Y}const K=(()=>{const Y=new V;return function(Pe,Ve){Y.setFromMatrixColumn(Ve,0),Y.multiplyScalar(-Pe),y.add(Y)}})(),le=(()=>{const Y=new V;return function(Pe,Ve){i.screenSpacePanning===!0?Y.setFromMatrixColumn(Ve,1):(Y.setFromMatrixColumn(Ve,0),Y.crossVectors(i.object.up,Y)),Y.multiplyScalar(Pe),y.add(Y)}})(),se=(()=>{const Y=new V;return function(Pe,Ve){const ft=i.domElement;if(ft&&i.object instanceof fn&&i.object.isPerspectiveCamera){const Z=i.object.position;Y.copy(Z).sub(i.target);let Ue=Y.length();Ue*=Math.tan(i.object.fov/2*Math.PI/180),K(2*Pe*Ue/ft.clientHeight,i.object.matrix),le(2*Ve*Ue/ft.clientHeight,i.object.matrix)}else ft&&i.object instanceof Ea&&i.object.isOrthographicCamera?(K(Pe*(i.object.right-i.object.left)/i.object.zoom/ft.clientWidth,i.object.matrix),le(Ve*(i.object.top-i.object.bottom)/i.object.zoom/ft.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function ne(Y){i.object instanceof fn&&i.object.isPerspectiveCamera?_/=Y:i.object instanceof Ea&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*Y)),i.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(Y){i.object instanceof fn&&i.object.isPerspectiveCamera?_*=Y:i.object instanceof Ea&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/Y)),i.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function B(Y){S.set(Y.clientX,Y.clientY)}function H(Y){k.set(Y.clientX,Y.clientY)}function $(Y){C.set(Y.clientX,Y.clientY)}function ie(Y){E.set(Y.clientX,Y.clientY),M.subVectors(E,S).multiplyScalar(i.rotateSpeed);const ue=i.domElement;ue&&(ge(2*Math.PI*M.x/ue.clientHeight),te(2*Math.PI*M.y/ue.clientHeight)),S.copy(E),i.update()}function fe(Y){D.set(Y.clientX,Y.clientY),z.subVectors(D,k),z.y>0?ne(q()):z.y<0&&O(q()),k.copy(D),i.update()}function be(Y){P.set(Y.clientX,Y.clientY),A.subVectors(P,C).multiplyScalar(i.panSpeed),se(A.x,A.y),C.copy(P),i.update()}function qe(Y){Y.deltaY<0?O(q()):Y.deltaY>0&&ne(q()),i.update()}function ce(Y){let ue=!1;switch(Y.code){case i.keys.UP:se(0,i.keyPanSpeed),ue=!0;break;case i.keys.BOTTOM:se(0,-i.keyPanSpeed),ue=!0;break;case i.keys.LEFT:se(i.keyPanSpeed,0),ue=!0;break;case i.keys.RIGHT:se(-i.keyPanSpeed,0),ue=!0;break}ue&&(Y.preventDefault(),i.update())}function Ke(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const Y=.5*(L[0].pageX+L[1].pageX),ue=.5*(L[0].pageY+L[1].pageY);S.set(Y,ue)}}function tt(){if(L.length==1)C.set(L[0].pageX,L[0].pageY);else{const Y=.5*(L[0].pageX+L[1].pageX),ue=.5*(L[0].pageY+L[1].pageY);C.set(Y,ue)}}function nt(){const Y=L[0].pageX-L[1].pageX,ue=L[0].pageY-L[1].pageY,Pe=Math.sqrt(Y*Y+ue*ue);k.set(0,Pe)}function Te(){i.enableZoom&&nt(),i.enablePan&&tt()}function rt(){i.enableZoom&&nt(),i.enableRotate&&Ke()}function we(Y){if(L.length==1)E.set(Y.pageX,Y.pageY);else{const Pe=Oe(Y),Ve=.5*(Y.pageX+Pe.x),ft=.5*(Y.pageY+Pe.y);E.set(Ve,ft)}M.subVectors(E,S).multiplyScalar(i.rotateSpeed);const ue=i.domElement;ue&&(ge(2*Math.PI*M.x/ue.clientHeight),te(2*Math.PI*M.y/ue.clientHeight)),S.copy(E)}function me(Y){if(L.length==1)P.set(Y.pageX,Y.pageY);else{const ue=Oe(Y),Pe=.5*(Y.pageX+ue.x),Ve=.5*(Y.pageY+ue.y);P.set(Pe,Ve)}A.subVectors(P,C).multiplyScalar(i.panSpeed),se(A.x,A.y),C.copy(P)}function Ae(Y){const ue=Oe(Y),Pe=Y.pageX-ue.x,Ve=Y.pageY-ue.y,ft=Math.sqrt(Pe*Pe+Ve*Ve);D.set(0,ft),z.set(0,Math.pow(D.y/k.y,i.zoomSpeed)),ne(z.y),k.copy(D)}function Ye(Y){i.enableZoom&&Ae(Y),i.enablePan&&me(Y)}function Ne(Y){i.enableZoom&&Ae(Y),i.enableRotate&&we(Y)}function dt(Y){if(i.enabled!==!1){if(L.length===0){var ue,Pe;(ue=i.domElement)===null||ue===void 0||ue.ownerDocument.addEventListener("pointermove",Qe),(Pe=i.domElement)===null||Pe===void 0||Pe.ownerDocument.addEventListener("pointerup",Je)}lt(Y),Y.pointerType==="touch"?Ee(Y):kt(Y)}}function Qe(Y){i.enabled!==!1&&(Y.pointerType==="touch"?Le(Y):j(Y))}function Je(Y){if(he(Y),L.length===0){var ue,Pe,Ve;(ue=i.domElement)===null||ue===void 0||ue.releasePointerCapture(Y.pointerId),(Pe=i.domElement)===null||Pe===void 0||Pe.ownerDocument.removeEventListener("pointermove",Qe),(Ve=i.domElement)===null||Ve===void 0||Ve.ownerDocument.removeEventListener("pointerup",Je)}i.dispatchEvent(o),d=l.NONE}function Tt(Y){he(Y)}function kt(Y){let ue;switch(Y.button){case 0:ue=i.mouseButtons.LEFT;break;case 1:ue=i.mouseButtons.MIDDLE;break;case 2:ue=i.mouseButtons.RIGHT;break;default:ue=-1}switch(ue){case bl.DOLLY:if(i.enableZoom===!1)return;H(Y),d=l.DOLLY;break;case bl.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(i.enablePan===!1)return;$(Y),d=l.PAN}else{if(i.enableRotate===!1)return;B(Y),d=l.ROTATE}break;case bl.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(i.enableRotate===!1)return;B(Y),d=l.ROTATE}else{if(i.enablePan===!1)return;$(Y),d=l.PAN}break;default:d=l.NONE}d!==l.NONE&&i.dispatchEvent(s)}function j(Y){if(i.enabled!==!1)switch(d){case l.ROTATE:if(i.enableRotate===!1)return;ie(Y);break;case l.DOLLY:if(i.enableZoom===!1)return;fe(Y);break;case l.PAN:if(i.enablePan===!1)return;be(Y);break}}function U(Y){i.enabled===!1||i.enableZoom===!1||d!==l.NONE&&d!==l.ROTATE||(Y.preventDefault(),i.dispatchEvent(s),qe(Y),i.dispatchEvent(o))}function de(Y){i.enabled===!1||i.enablePan===!1||ce(Y)}function Ee(Y){switch(We(Y),L.length){case 1:switch(i.touches.ONE){case Ml.ROTATE:if(i.enableRotate===!1)return;Ke(),d=l.TOUCH_ROTATE;break;case Ml.PAN:if(i.enablePan===!1)return;tt(),d=l.TOUCH_PAN;break;default:d=l.NONE}break;case 2:switch(i.touches.TWO){case Ml.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Te(),d=l.TOUCH_DOLLY_PAN;break;case Ml.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;rt(),d=l.TOUCH_DOLLY_ROTATE;break;default:d=l.NONE}break;default:d=l.NONE}d!==l.NONE&&i.dispatchEvent(s)}function Le(Y){switch(We(Y),d){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;we(Y),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;me(Y),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ye(Y),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ne(Y),i.update();break;default:d=l.NONE}}function De(Y){i.enabled!==!1&&Y.preventDefault()}function lt(Y){L.push(Y)}function he(Y){delete N[Y.pointerId];for(let ue=0;ue<L.length;ue++)if(L[ue].pointerId==Y.pointerId){L.splice(ue,1);return}}function We(Y){let ue=N[Y.pointerId];ue===void 0&&(ue=new Se,N[Y.pointerId]=ue),ue.set(Y.pageX,Y.pageY)}function Oe(Y){const ue=Y.pointerId===L[0].pointerId?L[1]:L[0];return N[ue.pointerId]}t!==void 0&&this.connect(t),this.update()}}class A4 extends C2{constructor(e){super(e),this.type=hs}parse(e){const l=function(P,A){switch(P){case 1:console.error("THREE.RGBELoader Read Error: "+(A||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(A||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(A||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(A||""))}return-1},m=`
`,_=function(P,A,k){A=A||1024;let z=P.pos,L=-1,N=0,F="",q=String.fromCharCode.apply(null,new Uint16Array(P.subarray(z,z+128)));for(;0>(L=q.indexOf(m))&&N<A&&z<P.byteLength;)F+=q,N+=q.length,z+=128,q+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(z,z+128)));return-1<L?(k!==!1&&(P.pos+=N+L+1),F+q.slice(0,L)):!1},y=function(P){const A=/^#\?(\S+)/,k=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,L=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,N={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let F,q;if(P.pos>=P.byteLength||!(F=_(P)))return l(1,"no header found");if(!(q=F.match(A)))return l(3,"bad initial token");for(N.valid|=1,N.programtype=q[1],N.string+=F+`
`;F=_(P),F!==!1;){if(N.string+=F+`
`,F.charAt(0)==="#"){N.comments+=F+`
`;continue}if((q=F.match(k))&&(N.gamma=parseFloat(q[1])),(q=F.match(D))&&(N.exposure=parseFloat(q[1])),(q=F.match(z))&&(N.valid|=2,N.format=q[1]),(q=F.match(L))&&(N.valid|=4,N.height=parseInt(q[1],10),N.width=parseInt(q[2],10)),N.valid&2&&N.valid&4)break}return N.valid&2?N.valid&4?N:l(3,"missing image size specifier"):l(3,"missing format specifier")},w=function(P,A,k){const D=A;if(D<8||D>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);if(D!==(P[2]<<8|P[3]))return l(3,"wrong scanline width");const z=new Uint8Array(4*A*k);if(!z.length)return l(4,"unable to allocate buffer space");let L=0,N=0;const F=4*D,q=new Uint8Array(4),ge=new Uint8Array(F);let te=k;for(;te>0&&N<P.byteLength;){if(N+4>P.byteLength)return l(1);if(q[0]=P[N++],q[1]=P[N++],q[2]=P[N++],q[3]=P[N++],q[0]!=2||q[1]!=2||(q[2]<<8|q[3])!=D)return l(3,"bad rgbe scanline format");let K=0,le;for(;K<F&&N<P.byteLength;){le=P[N++];const ne=le>128;if(ne&&(le-=128),le===0||K+le>F)return l(3,"bad scanline data");if(ne){const O=P[N++];for(let B=0;B<le;B++)ge[K++]=O}else ge.set(P.subarray(N,N+le),K),K+=le,N+=le}const se=D;for(let ne=0;ne<se;ne++){let O=0;z[L]=ge[ne+O],O+=D,z[L+1]=ge[ne+O],O+=D,z[L+2]=ge[ne+O],O+=D,z[L+3]=ge[ne+O],L+=4}te--}return z},S=function(P,A,k,D){const z=P[A+3],L=Math.pow(2,z-128)/255;k[D+0]=P[A+0]*L,k[D+1]=P[A+1]*L,k[D+2]=P[A+2]*L,k[D+3]=1},E=function(P,A,k,D){const z=P[A+3],L=Math.pow(2,z-128)/255;k[D+0]=Eh.toHalfFloat(Math.min(P[A+0]*L,65504)),k[D+1]=Eh.toHalfFloat(Math.min(P[A+1]*L,65504)),k[D+2]=Eh.toHalfFloat(Math.min(P[A+2]*L,65504)),k[D+3]=Eh.toHalfFloat(1)},M=new Uint8Array(e);M.pos=0;const C=y(M);if(C!==-1){const P=C.width,A=C.height,k=w(M.subarray(M.pos),P,A);if(k!==-1){let D,z,L;switch(this.type){case Ur:L=k.length/4;const N=new Float32Array(L*4);for(let q=0;q<L;q++)S(k,q*4,N,q*4);D=N,z=Ur;break;case hs:L=k.length/4;const F=new Uint16Array(L*4);for(let q=0;q<L;q++)E(k,q*4,F,q*4);D=F,z=hs;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:P,height:A,data:D,header:C.string,gamma:C.gamma,exposure:C.exposure,type:z}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,l){switch(o.type){case Ur:case hs:o.encoding=vs,o.minFilter=_n,o.magFilter=_n,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,l)}return super.load(e,s,i,r)}}const L4=He.exports.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,onChange:s,onStart:o,onEnd:l,...d},f)=>{const g=us(A=>A.invalidate),m=us(A=>A.camera),_=us(A=>A.gl),y=us(A=>A.events),w=us(A=>A.set),S=us(A=>A.get),E=us(A=>A.performance),M=e||m,C=i||y.connected||_.domElement,P=He.exports.useMemo(()=>new T4(M),[M]);return Pw(()=>{P.enabled&&P.update()},-1),He.exports.useEffect(()=>(P.connect(C),()=>void P.dispose()),[C,t,P,g]),He.exports.useEffect(()=>{const A=k=>{g(),t&&E.regress(),s&&s(k)};return P.addEventListener("change",A),o&&P.addEventListener("start",o),l&&P.addEventListener("end",l),()=>{o&&P.removeEventListener("start",o),l&&P.removeEventListener("end",l),P.removeEventListener("change",A)}},[s,o,l,P,g]),He.exports.useEffect(()=>{if(n){const A=S().controls;return w({controls:P}),()=>w({controls:A})}},[n,P]),Wt("primitive",{ref:f,object:P,enableDamping:r,...d})}),l_={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},R4="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/",k4=n=>n.current&&n.current.isScene,Aw=n=>k4(n)?n.current:n;function Lw({scene:n,background:e=!1,map:t}){const i=us(r=>r.scene);return He.exports.useLayoutEffect(()=>{if(t){const r=Aw(n||i),s=r.background,o=r.environment;return e!=="only"&&(r.environment=t),e&&(r.background=t),()=>{e!=="only"&&(r.environment=o),e&&(r.background=s)}}},[i,n,t,e]),null}function rP({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}){if(t){if(!(t in l_))throw new Error("Preset must be one of: "+Object.keys(l_).join(", "));n=l_[t],e=R4}const s=Array.isArray(n),l=Tw(s?E2:A4,s?[n]:n,f=>{f.setPath(e),r&&r(f)}),d=s?l[0]:l;return d.mapping=s?xo:ed,d.encoding=(i!=null?i:s)?sn:vs,d}function sP({background:n=!1,scene:e,...t}){const i=rP(t),r=us(s=>s.scene);return He.exports.useLayoutEffect(()=>{const s=Aw(e||r),o=s.background,l=s.environment;return n!=="only"&&(s.environment=i),n&&(s.background=i),()=>{n!=="only"&&(s.environment=l),n&&(s.background=o)}},[i,n,e,r]),null}function I4({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,scene:l,files:d,path:f,preset:g=void 0,extensions:m}){const _=us(C=>C.gl),y=us(C=>C.scene),w=He.exports.useRef(null),[S]=He.exports.useState(()=>new mv),E=He.exports.useMemo(()=>{const C=new Qx(i);return C.texture.type=hs,C},[i]);He.exports.useLayoutEffect(()=>{r===1&&w.current.update(_,S);const C=Aw(l||y),P=C.background,A=C.environment;return o!=="only"&&(C.environment=E.texture),o&&(C.background=E.texture),()=>{o!=="only"&&(C.environment=A),o&&(C.background=P)}},[n,S,E.texture,l,y,o,r,_]);let M=1;return Pw(()=>{(r===1/0||M<r)&&(w.current.update(_,S),M++)}),Wt(jg,{children:v4(Ev(jg,{children:[n,Wt("cubeCamera",{ref:w,args:[e,t,E]}),d||g?Wt(sP,{background:!0,files:d,preset:g,path:f,extensions:m}):s?Wt(Lw,{background:!0,map:s,extensions:m}):null]}),S)})}function D4(n){var e,t,i,r;const s=rP(n),o=n.map||s;He.exports.useMemo(()=>{$2({GroundProjectedEnvImpl:P4})},[]);const l=He.exports.useMemo(()=>[o],[o]),d=(e=n.ground)==null?void 0:e.height,f=(t=n.ground)==null?void 0:t.radius,g=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return Ev(jg,{children:[Wt(Lw,{...n,map:o}),Wt("groundProjectedEnvImpl",{args:l,scale:g,height:d,radius:f})]})}function N4(n){return n.ground?Wt(D4,{...n}):n.map?Wt(Lw,{...n}):n.children?Wt(I4,{...n}):Wt(sP,{...n})}var jy={exports:{}};/*! Tweakpane 3.1.0 (c) 2016 cocopon, licensed under the MIT license. */(function(n,e){(function(t,i){i(e)})(gP,function(t){class i{constructor(u){const[h,b]=u.split("-"),I=h.split(".");this.major=parseInt(I[0],10),this.minor=parseInt(I[1],10),this.patch=parseInt(I[2],10),this.prerelease=b!=null?b:null}toString(){const u=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[u,this.prerelease].join("-"):u}}class r{constructor(u){this.controller_=u}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(u){this.controller_.viewProps.set("disabled",u)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(u){this.controller_.viewProps.set("hidden",u)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class s{constructor(u){this.target=u}}class o extends s{constructor(u,h,b,I){super(u),this.value=h,this.presetKey=b,this.last=I!=null?I:!0}}class l extends s{constructor(u,h,b){super(u),this.value=h,this.presetKey=b}}class d extends s{constructor(u,h){super(u),this.expanded=h}}class f extends s{constructor(u,h){super(u),this.index=h}}function g(p){return p}function m(p){return p==null}function _(p,u){if(p.length!==u.length)return!1;for(let h=0;h<p.length;h++)if(p[h]!==u[h])return!1;return!0}const y={alreadydisposed:()=>"View has been already disposed",invalidparams:p=>`Invalid parameters for '${p.name}'`,nomatchingcontroller:p=>`No matching controller for '${p.key}'`,nomatchingview:p=>`No matching view for '${JSON.stringify(p.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:p=>`Property '${p.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class w{constructor(u){var h;this.message=(h=y[u.type](u.context))!==null&&h!==void 0?h:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=u.type}static alreadyDisposed(){return new w({type:"alreadydisposed"})}static notBindable(){return new w({type:"notbindable"})}static propertyNotFound(u){return new w({type:"propertynotfound",context:{name:u}})}static shouldNeverHappen(){return new w({type:"shouldneverhappen"})}}class S{constructor(u,h,b){this.obj_=u,this.key_=h,this.presetKey_=b!=null?b:h}static isBindable(u){return!(u===null||typeof u!="object")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(u){this.obj_[this.key_]=u}writeProperty(u,h){const b=this.read();if(!S.isBindable(b))throw w.notBindable();if(!(u in b))throw w.propertyNotFound(u);b[u]=h}}class E extends r{get label(){return this.controller_.props.get("label")}set label(u){this.controller_.props.set("label",u)}get title(){var u;return(u=this.controller_.valueController.props.get("title"))!==null&&u!==void 0?u:""}set title(u){this.controller_.valueController.props.set("title",u)}on(u,h){const b=h.bind(this);return this.controller_.valueController.emitter.on(u,()=>{b(new s(this))}),this}}class M{constructor(){this.observers_={}}on(u,h){let b=this.observers_[u];return b||(b=this.observers_[u]=[]),b.push({handler:h}),this}off(u,h){const b=this.observers_[u];return b&&(this.observers_[u]=b.filter(I=>I.handler!==h)),this}emit(u,h){const b=this.observers_[u];!b||b.forEach(I=>{I.handler(h)})}}const C="tp";function P(p){return(h,b)=>[C,"-",p,"v",h?`_${h}`:"",b?`-${b}`:""].join("")}function A(p,u){return h=>u(p(h))}function k(p){return p.rawValue}function D(p,u){p.emitter.on("change",A(k,u)),u(p.rawValue)}function z(p,u,h){D(p.value(u),h)}function L(p,u,h){h?p.classList.add(u):p.classList.remove(u)}function N(p,u){return h=>{L(p,u,h)}}function F(p,u){D(p,h=>{u.textContent=h!=null?h:""})}const q=P("btn");class ge{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(q()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("button");b.classList.add(q("b")),h.viewProps.bindDisabled(b),this.element.appendChild(b),this.buttonElement=b;const I=u.createElement("div");I.classList.add(q("t")),F(h.props.value("title"),I),this.buttonElement.appendChild(I)}}class te{constructor(u,h){this.emitter=new M,this.onClick_=this.onClick_.bind(this),this.props=h.props,this.viewProps=h.viewProps,this.view=new ge(u,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class K{constructor(u,h){var b;this.constraint_=h==null?void 0:h.constraint,this.equals_=(b=h==null?void 0:h.equals)!==null&&b!==void 0?b:(I,X)=>I===X,this.emitter=new M,this.rawValue_=u}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(u){this.setRawValue(u,{forceEmit:!1,last:!0})}setRawValue(u,h){const b=h!=null?h:{forceEmit:!1,last:!0},I=this.constraint_?this.constraint_.constrain(u):u;!!this.equals_(this.rawValue_,I)&&!b.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=I,this.emitter.emit("change",{options:b,rawValue:I,sender:this}))}}class le{constructor(u){this.emitter=new M,this.value_=u}get rawValue(){return this.value_}set rawValue(u){this.setRawValue(u,{forceEmit:!1,last:!0})}setRawValue(u,h){const b=h!=null?h:{forceEmit:!1,last:!0};this.value_===u&&!b.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=u,this.emitter.emit("change",{options:b,rawValue:this.value_,sender:this}))}}function se(p,u){const h=u==null?void 0:u.constraint,b=u==null?void 0:u.equals;return!h&&!b?new le(p):new K(p,u)}class ne{constructor(u){this.emitter=new M,this.valMap_=u;for(const h in this.valMap_)this.valMap_[h].emitter.on("change",()=>{this.emitter.emit("change",{key:h,sender:this})})}static createCore(u){return Object.keys(u).reduce((b,I)=>Object.assign(b,{[I]:se(u[I])}),{})}static fromObject(u){const h=this.createCore(u);return new ne(h)}get(u){return this.valMap_[u].rawValue}set(u,h){this.valMap_[u].rawValue=h}value(u){return this.valMap_[u]}}function O(p,u){const b=Object.keys(u).reduce((I,X)=>{if(I===void 0)return;const ee=u[X],Me=ee(p[X]);return Me.succeeded?Object.assign(Object.assign({},I),{[X]:Me.value}):void 0},{});return b}function B(p,u){return p.reduce((h,b)=>{if(h===void 0)return;const I=u(b);if(!(!I.succeeded||I.value===void 0))return[...h,I.value]},[])}function H(p){return p===null?!1:typeof p=="object"}function $(p){return u=>h=>{if(!u&&h===void 0)return{succeeded:!1,value:void 0};if(u&&h===void 0)return{succeeded:!0,value:void 0};const b=p(h);return b!==void 0?{succeeded:!0,value:b}:{succeeded:!1,value:void 0}}}function ie(p){return{custom:u=>$(u)(p),boolean:$(u=>typeof u=="boolean"?u:void 0)(p),number:$(u=>typeof u=="number"?u:void 0)(p),string:$(u=>typeof u=="string"?u:void 0)(p),function:$(u=>typeof u=="function"?u:void 0)(p),constant:u=>$(h=>h===u?u:void 0)(p),raw:$(u=>u)(p),object:u=>$(h=>{if(!!H(h))return O(h,u)})(p),array:u=>$(h=>{if(!!Array.isArray(h))return B(h,u)})(p)}}const fe={optional:ie(!0),required:ie(!1)};function be(p,u){const h=fe.required.object(u)(p);return h.succeeded?h.value:void 0}function qe(p){return p&&p.parentElement&&p.parentElement.removeChild(p),null}function ce(){return["veryfirst","first","last","verylast"]}const Ke=P(""),tt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class nt{constructor(u){this.parent_=null,this.blade=u.blade,this.view=u.view,this.viewProps=u.viewProps;const h=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ce().forEach(b=>{h.classList.remove(Ke(void 0,tt[b]))}),this.blade.get("positions").forEach(b=>{h.classList.add(Ke(void 0,tt[b]))})}),this.viewProps.handleDispose(()=>{qe(h)})}get parent(){return this.parent_}}const Te="http://www.w3.org/2000/svg";function rt(p){p.offsetHeight}function we(p,u){const h=p.style.transition;p.style.transition="none",u(),p.style.transition=h}function me(p){return p.ontouchstart!==void 0}function Ae(){return new Function("return this")()}function Ye(){return Ae().document}function Ne(p){const u=p.ownerDocument.defaultView;return u&&"document"in u?p.getContext("2d"):null}const dt={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Qe(p,u){const h=p.createElementNS(Te,"svg");return h.innerHTML=dt[u],h}function Je(p,u,h){p.insertBefore(u,p.children[h])}function Tt(p){p.parentElement&&p.parentElement.removeChild(p)}function kt(p){for(;p.children.length>0;)p.removeChild(p.children[0])}function j(p){for(;p.childNodes.length>0;)p.removeChild(p.childNodes[0])}function U(p){return p.relatedTarget?p.relatedTarget:"explicitOriginalTarget"in p?p.explicitOriginalTarget:null}const de=P("lbl");function Ee(p,u){const h=p.createDocumentFragment();return u.split(`
`).map(I=>p.createTextNode(I)).forEach((I,X)=>{X>0&&h.appendChild(p.createElement("br")),h.appendChild(I)}),h}class Le{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(de()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("div");b.classList.add(de("l")),z(h.props,"label",X=>{m(X)?this.element.classList.add(de(void 0,"nol")):(this.element.classList.remove(de(void 0,"nol")),j(b),b.appendChild(Ee(u,X)))}),this.element.appendChild(b),this.labelElement=b;const I=u.createElement("div");I.classList.add(de("v")),this.element.appendChild(I),this.valueElement=I}}class De extends nt{constructor(u,h){const b=h.valueController.viewProps;super(Object.assign(Object.assign({},h),{view:new Le(u,{props:h.props,viewProps:b}),viewProps:b})),this.props=h.props,this.valueController=h.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const lt={id:"button",type:"blade",accept(p){const u=fe,h=be(p,{title:u.required.string,view:u.required.constant("button"),label:u.optional.string});return h?{params:h}:null},controller(p){return new De(p.document,{blade:p.blade,props:ne.fromObject({label:p.params.label}),valueController:new te(p.document,{props:ne.fromObject({title:p.params.title}),viewProps:p.viewProps})})},api(p){return!(p.controller instanceof De)||!(p.controller.valueController instanceof te)?null:new E(p.controller)}};class he extends nt{constructor(u){super(u),this.value=u.value}}function We(){return new ne({positions:se([],{equals:_})})}class Oe extends ne{constructor(u){super(u)}static create(u){const h={completed:!0,expanded:u,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},b=ne.createCore(h);return new Oe(b)}get styleExpanded(){var u;return(u=this.get("temporaryExpanded"))!==null&&u!==void 0?u:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const u=this.get("expandedHeight");return this.get("shouldFixHeight")&&!m(u)?`${u}px`:"auto"}bindExpandedClass(u,h){const b=()=>{this.styleExpanded?u.classList.add(h):u.classList.remove(h)};z(this,"expanded",b),z(this,"temporaryExpanded",b)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Y(p,u){let h=0;return we(u,()=>{p.set("expandedHeight",null),p.set("temporaryExpanded",!0),rt(u),h=u.clientHeight,p.set("temporaryExpanded",null),rt(u)}),h}function ue(p,u){u.style.height=p.styleHeight}function Pe(p,u){p.value("expanded").emitter.on("beforechange",()=>{p.set("completed",!1),m(p.get("expandedHeight"))&&p.set("expandedHeight",Y(p,u)),p.set("shouldFixHeight",!0),rt(u)}),p.emitter.on("change",()=>{ue(p,u)}),ue(p,u),u.addEventListener("transitionend",h=>{h.propertyName==="height"&&p.cleanUpTransition()})}class Ve extends r{constructor(u,h){super(u),this.rackApi_=h}}function ft(p,u){return p.addBlade(Object.assign(Object.assign({},u),{view:"button"}))}function Z(p,u){return p.addBlade(Object.assign(Object.assign({},u),{view:"folder"}))}function Ue(p,u){const h=u!=null?u:{};return p.addBlade(Object.assign(Object.assign({},h),{view:"separator"}))}function _e(p,u){return p.addBlade(Object.assign(Object.assign({},u),{view:"tab"}))}class Ie{constructor(u){this.emitter=new M,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=u}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(u){for(const h of this.allItems())if(u(h))return h;return null}includes(u){return this.cache_.has(u)}add(u,h){if(this.includes(u))throw w.shouldNeverHappen();const b=h!==void 0?h:this.items_.length;this.items_.splice(b,0,u),this.cache_.add(u);const I=this.extract_(u);I&&(I.emitter.on("add",this.onSubListAdd_),I.emitter.on("remove",this.onSubListRemove_),I.allItems().forEach(X=>{this.cache_.add(X)})),this.emitter.emit("add",{index:b,item:u,root:this,target:this})}remove(u){const h=this.items_.indexOf(u);if(h<0)return;this.items_.splice(h,1),this.cache_.delete(u);const b=this.extract_(u);b&&(b.emitter.off("add",this.onSubListAdd_),b.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:h,item:u,root:this,target:this})}onSubListAdd_(u){this.cache_.add(u.item),this.emitter.emit("add",{index:u.index,item:u.item,root:this,target:u.target})}onSubListRemove_(u){this.cache_.delete(u.item),this.emitter.emit("remove",{index:u.index,item:u.item,root:this,target:u.target})}}class ke extends r{constructor(u){super(u),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new M,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(u){this.controller_.props.set("label",u)}on(u,h){const b=h.bind(this);return this.emitter_.on(u,I=>{b(I.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(u){const h=u.sender.target.read();this.emitter_.emit("change",{event:new o(this,h,this.controller_.binding.target.presetKey,u.options.last)})}}class ht extends De{constructor(u,h){super(u,h),this.binding=h.binding}}class un extends r{constructor(u){super(u),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new M,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(u){this.controller_.props.set("label",u)}on(u,h){const b=h.bind(this);return this.emitter_.on(u,I=>{b(I.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(u){const h=u.sender.target.read();this.emitter_.emit("update",{event:new l(this,h,this.controller_.binding.target.presetKey)})}}class Nt extends De{constructor(u,h){super(u,h),this.binding=h.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function Ki(p){return p instanceof kn?p.apiSet_:p instanceof Ve?p.rackApi_.apiSet_:null}function jt(p,u){const h=p.find(b=>b.controller_===u);if(!h)throw w.shouldNeverHappen();return h}function xi(p,u,h){if(!S.isBindable(p))throw w.notBindable();return new S(p,u,h)}class kn extends r{constructor(u,h){super(u),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new M,this.apiSet_=new Ie(Ki),this.pool_=h;const b=this.controller_.rack;b.emitter.on("add",this.onRackAdd_),b.emitter.on("remove",this.onRackRemove_),b.emitter.on("inputchange",this.onRackInputChange_),b.emitter.on("monitorupdate",this.onRackMonitorUpdate_),b.children.forEach(I=>{this.setUpApi_(I)})}get children(){return this.controller_.rack.children.map(u=>jt(this.apiSet_,u))}addInput(u,h,b){const I=b!=null?b:{},X=this.controller_.view.element.ownerDocument,ee=this.pool_.createInput(X,xi(u,h,I.presetKey),I),Me=new ke(ee);return this.add(Me,I.index)}addMonitor(u,h,b){const I=b!=null?b:{},X=this.controller_.view.element.ownerDocument,ee=this.pool_.createMonitor(X,xi(u,h),I),Me=new un(ee);return this.add(Me,I.index)}addFolder(u){return Z(this,u)}addButton(u){return ft(this,u)}addSeparator(u){return Ue(this,u)}addTab(u){return _e(this,u)}add(u,h){this.controller_.rack.add(u.controller_,h);const b=this.apiSet_.find(I=>I.controller_===u.controller_);return b&&this.apiSet_.remove(b),this.apiSet_.add(u),u}remove(u){this.controller_.rack.remove(u.controller_)}addBlade(u){const h=this.controller_.view.element.ownerDocument,b=this.pool_.createBlade(h,u),I=this.pool_.createBladeApi(b);return this.add(I,u.index)}on(u,h){const b=h.bind(this);return this.emitter_.on(u,I=>{b(I.event)}),this}setUpApi_(u){this.apiSet_.find(b=>b.controller_===u)||this.apiSet_.add(this.pool_.createBladeApi(u))}onRackAdd_(u){this.setUpApi_(u.bladeController)}onRackRemove_(u){if(u.isRoot){const h=jt(this.apiSet_,u.bladeController);this.apiSet_.remove(h)}}onRackInputChange_(u){const h=u.bladeController;if(h instanceof ht){const b=jt(this.apiSet_,h),I=h.binding;this.emitter_.emit("change",{event:new o(b,I.target.read(),I.target.presetKey,u.options.last)})}else if(h instanceof he){const b=jt(this.apiSet_,h);this.emitter_.emit("change",{event:new o(b,h.value.rawValue,void 0,u.options.last)})}}onRackMonitorUpdate_(u){if(!(u.bladeController instanceof Nt))throw w.shouldNeverHappen();const h=jt(this.apiSet_,u.bladeController),b=u.bladeController.binding;this.emitter_.emit("update",{event:new l(h,b.target.read(),b.target.presetKey)})}}class Mo extends Ve{constructor(u,h){super(u,new kn(u.rackController,h)),this.emitter_=new M,this.controller_.foldable.value("expanded").emitter.on("change",b=>{this.emitter_.emit("fold",{event:new d(this,b.sender.rawValue)})}),this.rackApi_.on("change",b=>{this.emitter_.emit("change",{event:b})}),this.rackApi_.on("update",b=>{this.emitter_.emit("update",{event:b})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(u){this.controller_.foldable.set("expanded",u)}get title(){return this.controller_.props.get("title")}set title(u){this.controller_.props.set("title",u)}get children(){return this.rackApi_.children}addInput(u,h,b){return this.rackApi_.addInput(u,h,b)}addMonitor(u,h,b){return this.rackApi_.addMonitor(u,h,b)}addFolder(u){return this.rackApi_.addFolder(u)}addButton(u){return this.rackApi_.addButton(u)}addSeparator(u){return this.rackApi_.addSeparator(u)}addTab(u){return this.rackApi_.addTab(u)}add(u,h){return this.rackApi_.add(u,h)}remove(u){this.rackApi_.remove(u)}addBlade(u){return this.rackApi_.addBlade(u)}on(u,h){const b=h.bind(this);return this.emitter_.on(u,I=>{b(I.event)}),this}}class ws extends nt{constructor(u){super({blade:u.blade,view:u.view,viewProps:u.rackController.viewProps}),this.rackController=u.rackController}}class lu{constructor(u,h){const b=P(h.viewName);this.element=u.createElement("div"),this.element.classList.add(b()),h.viewProps.bindClassModifiers(this.element)}}function gd(p,u){for(let h=0;h<p.length;h++){const b=p[h];if(b instanceof ht&&b.binding===u)return b}return null}function uu(p,u){for(let h=0;h<p.length;h++){const b=p[h];if(b instanceof Nt&&b.binding===u)return b}return null}function Ua(p,u){for(let h=0;h<p.length;h++){const b=p[h];if(b instanceof he&&b.value===u)return b}return null}function G(p){return p instanceof re?p.rack:p instanceof ws?p.rackController.rack:null}function oe(p){const u=G(p);return u?u.bcSet_:null}class ye{constructor(u){var h;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new M,this.blade_=u!=null?u:null,(h=this.blade_)===null||h===void 0||h.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new Ie(oe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(u,h){u.parent&&u.parent.remove(u),u.parent_=this,this.bcSet_.add(u,h)}remove(u){u.parent_=null,this.bcSet_.remove(u)}find(u){return this.bcSet_.allItems().filter(h=>h instanceof u)}onSetAdd_(u){this.updatePositions_();const h=u.target===u.root;if(this.emitter.emit("add",{bladeController:u.item,index:u.index,isRoot:h,sender:this}),!h)return;const b=u.item;if(b.viewProps.emitter.on("change",this.onChildViewPropsChange_),b.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),b.viewProps.handleDispose(this.onChildDispose_),b instanceof ht)b.binding.emitter.on("change",this.onChildInputChange_);else if(b instanceof Nt)b.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(b instanceof he)b.value.emitter.on("change",this.onChildValueChange_);else{const I=G(b);if(I){const X=I.emitter;X.on("layout",this.onDescendantLayout_),X.on("inputchange",this.onDescendantInputChange_),X.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(u){this.updatePositions_();const h=u.target===u.root;if(this.emitter.emit("remove",{bladeController:u.item,isRoot:h,sender:this}),!h)return;const b=u.item;if(b instanceof ht)b.binding.emitter.off("change",this.onChildInputChange_);else if(b instanceof Nt)b.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(b instanceof he)b.value.emitter.off("change",this.onChildValueChange_);else{const I=G(b);if(I){const X=I.emitter;X.off("layout",this.onDescendantLayout_),X.off("inputchange",this.onDescendantInputChange_),X.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const u=this.bcSet_.items.filter(I=>!I.viewProps.get("hidden")),h=u[0],b=u[u.length-1];this.bcSet_.items.forEach(I=>{const X=[];I===h&&(X.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&X.push("veryfirst")),I===b&&(X.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&X.push("verylast")),I.blade.set("positions",X)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(u){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(h=>h.viewProps.get("disposed")).forEach(h=>{this.bcSet_.remove(h)})}onChildInputChange_(u){const h=gd(this.find(ht),u.sender);if(!h)throw w.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:h,options:u.options,sender:this})}onChildMonitorUpdate_(u){const h=uu(this.find(Nt),u.sender);if(!h)throw w.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:h,sender:this})}onChildValueChange_(u){const h=Ua(this.find(he),u.sender);if(!h)throw w.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:h,options:u.options,sender:this})}onDescendantLayout_(u){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(u){this.emitter.emit("inputchange",{bladeController:u.bladeController,options:u.options,sender:this})}onDescendantMonitorUpdate_(u){this.emitter.emit("monitorupdate",{bladeController:u.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class re extends nt{constructor(u,h){super(Object.assign(Object.assign({},h),{view:new lu(u,{viewName:"brk",viewProps:h.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const b=new ye(h.root?void 0:h.blade);b.emitter.on("add",this.onRackAdd_),b.emitter.on("remove",this.onRackRemove_),this.rack=b,this.viewProps.handleDispose(()=>{for(let I=this.rack.children.length-1;I>=0;I--)this.rack.children[I].viewProps.set("disposed",!0)})}onRackAdd_(u){!u.isRoot||Je(this.view.element,u.bladeController.view.element,u.index)}onRackRemove_(u){!u.isRoot||Tt(u.bladeController.view.element)}}const xe=P("cnt");class st{constructor(u,h){var b;this.className_=P((b=h.viewName)!==null&&b!==void 0?b:"fld"),this.element=u.createElement("div"),this.element.classList.add(this.className_(),xe()),h.viewProps.bindClassModifiers(this.element),this.foldable_=h.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),z(this.foldable_,"completed",N(this.element,this.className_(void 0,"cpl")));const I=u.createElement("button");I.classList.add(this.className_("b")),z(h.props,"title",$e=>{m($e)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),h.viewProps.bindDisabled(I),this.element.appendChild(I),this.buttonElement=I;const X=u.createElement("div");X.classList.add(this.className_("t")),F(h.props.value("title"),X),this.buttonElement.appendChild(X),this.titleElement=X;const ee=u.createElement("div");ee.classList.add(this.className_("m")),this.buttonElement.appendChild(ee);const Me=h.containerElement;Me.classList.add(this.className_("c")),this.element.appendChild(Me),this.containerElement=Me}}class ut extends ws{constructor(u,h){var b;const I=Oe.create((b=h.expanded)!==null&&b!==void 0?b:!0),X=new re(u,{blade:h.blade,root:h.root,viewProps:h.viewProps});super(Object.assign(Object.assign({},h),{rackController:X,view:new st(u,{containerElement:X.view.element,foldable:I,props:h.props,viewName:h.root?"rot":void 0,viewProps:h.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=h.props,this.foldable=I,Pe(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const _t={id:"folder",type:"blade",accept(p){const u=fe,h=be(p,{title:u.required.string,view:u.required.constant("folder"),expanded:u.optional.boolean});return h?{params:h}:null},controller(p){return new ut(p.document,{blade:p.blade,expanded:p.params.expanded,props:ne.fromObject({title:p.params.title}),viewProps:p.viewProps})},api(p){return p.controller instanceof ut?new Mo(p.controller,p.pool):null}};class at extends he{constructor(u,h){const b=h.valueController.viewProps;super(Object.assign(Object.assign({},h),{value:h.valueController.value,view:new Le(u,{props:h.props,viewProps:b}),viewProps:b})),this.props=h.props,this.valueController=h.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class It extends r{}const Ct=P("spr");class At{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(Ct()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("hr");b.classList.add(Ct("r")),this.element.appendChild(b)}}class Jt extends nt{constructor(u,h){super(Object.assign(Object.assign({},h),{view:new At(u,{viewProps:h.viewProps})}))}}const jr={id:"separator",type:"blade",accept(p){const h=be(p,{view:fe.required.constant("separator")});return h?{params:h}:null},controller(p){return new Jt(p.document,{blade:p.blade,viewProps:p.viewProps})},api(p){return p.controller instanceof Jt?new It(p.controller):null}},Ss=P("");function Xr(p,u){return N(p,Ss(void 0,u))}class pn extends ne{constructor(u){super(u)}static create(u){var h,b;const I=u!=null?u:{},X={disabled:(h=I.disabled)!==null&&h!==void 0?h:!1,disposed:!1,hidden:(b=I.hidden)!==null&&b!==void 0?b:!1},ee=ne.createCore(X);return new pn(ee)}bindClassModifiers(u){z(this,"disabled",Xr(u,"disabled")),z(this,"hidden",Xr(u,"hidden"))}bindDisabled(u){z(this,"disabled",h=>{u.disabled=h})}bindTabIndex(u){z(this,"disabled",h=>{u.tabIndex=h?-1:0})}handleDispose(u){this.value("disposed").emitter.on("change",h=>{h&&u()})}}const yt=P("tbi");class xr{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(yt()),h.viewProps.bindClassModifiers(this.element),z(h.props,"selected",X=>{X?this.element.classList.add(yt(void 0,"sel")):this.element.classList.remove(yt(void 0,"sel"))});const b=u.createElement("button");b.classList.add(yt("b")),h.viewProps.bindDisabled(b),this.element.appendChild(b),this.buttonElement=b;const I=u.createElement("div");I.classList.add(yt("t")),F(h.props.value("title"),I),this.buttonElement.appendChild(I),this.titleElement=I}}class nn{constructor(u,h){this.emitter=new M,this.onClick_=this.onClick_.bind(this),this.props=h.props,this.viewProps=h.viewProps,this.view=new xr(u,{props:h.props,viewProps:h.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Zn{constructor(u,h){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new nn(u,{props:h.itemProps,viewProps:pn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new re(u,{blade:We(),viewProps:pn.create()}),this.props=h.props,z(this.props,"selected",b=>{this.itemController.props.set("selected",b),this.contentController.viewProps.set("hidden",!b)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class wi{constructor(u,h){this.controller_=u,this.rackApi_=h}get title(){var u;return(u=this.controller_.itemController.props.get("title"))!==null&&u!==void 0?u:""}set title(u){this.controller_.itemController.props.set("title",u)}get selected(){return this.controller_.props.get("selected")}set selected(u){this.controller_.props.set("selected",u)}get children(){return this.rackApi_.children}addButton(u){return this.rackApi_.addButton(u)}addFolder(u){return this.rackApi_.addFolder(u)}addSeparator(u){return this.rackApi_.addSeparator(u)}addTab(u){return this.rackApi_.addTab(u)}add(u,h){this.rackApi_.add(u,h)}remove(u){this.rackApi_.remove(u)}addInput(u,h,b){return this.rackApi_.addInput(u,h,b)}addMonitor(u,h,b){return this.rackApi_.addMonitor(u,h,b)}addBlade(u){return this.rackApi_.addBlade(u)}}class Si extends Ve{constructor(u,h){super(u,new kn(u.rackController,h)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new M,this.pageApiMap_=new Map,this.rackApi_.on("change",b=>{this.emitter_.emit("change",{event:b})}),this.rackApi_.on("update",b=>{this.emitter_.emit("update",{event:b})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(b=>{this.setUpPageApi_(b)})}get pages(){return this.controller_.pageSet.items.map(u=>{const h=this.pageApiMap_.get(u);if(!h)throw w.shouldNeverHappen();return h})}addPage(u){const h=this.controller_.view.element.ownerDocument,b=new Zn(h,{itemProps:ne.fromObject({selected:!1,title:u.title}),props:ne.fromObject({selected:!1})});this.controller_.add(b,u.index);const I=this.pageApiMap_.get(b);if(!I)throw w.shouldNeverHappen();return I}removePage(u){this.controller_.remove(u)}on(u,h){const b=h.bind(this);return this.emitter_.on(u,I=>{b(I.event)}),this}setUpPageApi_(u){const h=this.rackApi_.apiSet_.find(I=>I.controller_===u.contentController);if(!h)throw w.shouldNeverHappen();const b=new wi(u,h);this.pageApiMap_.set(u,b)}onPageAdd_(u){this.setUpPageApi_(u.item)}onPageRemove_(u){if(!this.pageApiMap_.get(u.item))throw w.shouldNeverHappen();this.pageApiMap_.delete(u.item)}onSelect_(u){this.emitter_.emit("select",{event:new f(this,u.rawValue)})}}const bi=-1;class pt{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=se(!0),this.selectedIndex=se(bi),this.items_=[]}add(u,h){const b=h!=null?h:this.items_.length;this.items_.splice(b,0,u),u.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(u){const h=this.items_.indexOf(u);h<0||(this.items_.splice(h,1),u.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=bi,this.empty.rawValue=!0;return}const u=this.items_.findIndex(h=>h.rawValue);u<0?(this.items_.forEach((h,b)=>{h.rawValue=b===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((h,b)=>{h.rawValue=b===u}),this.selectedIndex.rawValue=u),this.empty.rawValue=!1}onItemSelectedChange_(u){if(u.rawValue){const h=this.items_.findIndex(b=>b===u.sender);this.items_.forEach((b,I)=>{b.rawValue=I===h}),this.selectedIndex.rawValue=h}else this.keepSelection_()}}const Et=P("tab");class zi{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(Et(),xe()),h.viewProps.bindClassModifiers(this.element),D(h.empty,N(this.element,Et(void 0,"nop")));const b=u.createElement("div");b.classList.add(Et("i")),this.element.appendChild(b),this.itemsElement=b;const I=h.contentsElement;I.classList.add(Et("c")),this.element.appendChild(I),this.contentsElement=I}}class zt extends ws{constructor(u,h){const b=new re(u,{blade:h.blade,viewProps:h.viewProps}),I=new pt;super({blade:h.blade,rackController:b,view:new zi(u,{contentsElement:b.view.element,empty:I.empty,viewProps:h.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new Ie(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=I}get pageSet(){return this.pageSet_}add(u,h){this.pageSet_.add(u,h)}remove(u){this.pageSet_.remove(this.pageSet_.items[u])}onPageAdd_(u){const h=u.item;Je(this.view.itemsElement,h.itemController.view.element,u.index),this.rackController.rack.add(h.contentController,u.index),this.tab.add(h.props.value("selected"))}onPageRemove_(u){const h=u.item;Tt(h.itemController.view.element),this.rackController.rack.remove(h.contentController),this.tab.remove(h.props.value("selected"))}}const Pn={id:"tab",type:"blade",accept(p){const u=fe,h=be(p,{pages:u.required.array(u.required.object({title:u.required.string})),view:u.required.constant("tab")});return!h||h.pages.length===0?null:{params:h}},controller(p){const u=new zt(p.document,{blade:p.blade,viewProps:p.viewProps});return p.params.pages.forEach(h=>{const b=new Zn(p.document,{itemProps:ne.fromObject({selected:!1,title:h.title}),props:ne.fromObject({selected:!1})});u.add(b)}),u},api(p){return p.controller instanceof zt?new Si(p.controller,p.pool):null}};function qr(p,u){const h=p.accept(u.params);if(!h)return null;const b=fe.optional.boolean(u.params.disabled).value,I=fe.optional.boolean(u.params.hidden).value;return p.controller({blade:We(),document:u.document,params:Object.assign(Object.assign({},h.params),{disabled:b,hidden:I}),viewProps:pn.create({disabled:b,hidden:I})})}class Yr{constructor(){this.disabled=!1,this.emitter=new M}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class oi{constructor(u,h){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=u,this.emitter=new M,this.interval_=h,this.setTimer_()}get disabled(){return this.disabled_}set disabled(u){this.disabled_=u,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const u=this.doc_.defaultView;u&&u.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const u=this.doc_.defaultView;u&&(this.timerId_=u.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class bs{constructor(u){this.constraints=u}constrain(u){return this.constraints.reduce((h,b)=>b.constrain(h),u)}}function Zi(p,u){if(p instanceof u)return p;if(p instanceof bs){const h=p.constraints.reduce((b,I)=>b||(I instanceof u?I:null),null);if(h)return h}return null}class Eo{constructor(u){this.options=u}constrain(u){const h=this.options;return h.length===0||h.filter(I=>I.value===u).length>0?u:h[0].value}}class Kr{constructor(u){this.maxValue=u.max,this.minValue=u.min}constrain(u){let h=u;return m(this.minValue)||(h=Math.max(h,this.minValue)),m(this.maxValue)||(h=Math.min(h,this.maxValue)),h}}class Ba{constructor(u,h=0){this.step=u,this.origin=h}constrain(u){const h=this.origin%this.step,b=Math.round((u-h)/this.step);return h+b*this.step}}const Mi=P("lst");class Cv{constructor(u,h){this.onValueChange_=this.onValueChange_.bind(this),this.props_=h.props,this.element=u.createElement("div"),this.element.classList.add(Mi()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("select");b.classList.add(Mi("s")),z(this.props_,"options",X=>{kt(b),X.forEach((ee,Me)=>{const $e=u.createElement("option");$e.dataset.index=String(Me),$e.textContent=ee.text,$e.value=String(ee.value),b.appendChild($e)})}),h.viewProps.bindDisabled(b),this.element.appendChild(b),this.selectElement=b;const I=u.createElement("div");I.classList.add(Mi("m")),I.appendChild(Qe(u,"dropdown")),this.element.appendChild(I),h.value.emitter.on("change",this.onValueChange_),this.value_=h.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class Va{constructor(u,h){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=h.props,this.value=h.value,this.viewProps=h.viewProps,this.view=new Cv(u,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(u){const b=u.currentTarget.selectedOptions.item(0);if(!b)return;const I=Number(b.dataset.index);this.value.rawValue=this.props.get("options")[I].value}}const Gf=P("pop");class cu{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(Gf()),h.viewProps.bindClassModifiers(this.element),D(h.shows,N(this.element,Gf(void 0,"v")))}}class Ha{constructor(u,h){this.shows=se(!1),this.viewProps=h.viewProps,this.view=new cu(u,{shows:this.shows,viewProps:this.viewProps})}}const Co=P("txt");class du{constructor(u,h){this.onChange_=this.onChange_.bind(this),this.element=u.createElement("div"),this.element.classList.add(Co()),h.viewProps.bindClassModifiers(this.element),this.props_=h.props,this.props_.emitter.on("change",this.onChange_);const b=u.createElement("input");b.classList.add(Co("i")),b.type="text",h.viewProps.bindDisabled(b),this.element.appendChild(b),this.inputElement=b,h.value.emitter.on("change",this.onChange_),this.value_=h.value,this.refresh()}refresh(){const u=this.props_.get("formatter");this.inputElement.value=u(this.value_.rawValue)}onChange_(){this.refresh()}}class hu{constructor(u,h){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=h.parser,this.props=h.props,this.value=h.value,this.viewProps=h.viewProps,this.view=new du(u,{props:h.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(u){const b=u.currentTarget.value,I=this.parser_(b);m(I)||(this.value.rawValue=I),this.view.refresh()}}function Pv(p){return String(p)}function fu(p){return p==="false"?!1:!!p}function pu(p){return Pv(p)}class Ga{constructor(u){this.text=u}evaluate(){return Number(this.text)}toString(){return this.text}}const Tv={"**":(p,u)=>Math.pow(p,u),"*":(p,u)=>p*u,"/":(p,u)=>p/u,"%":(p,u)=>p%u,"+":(p,u)=>p+u,"-":(p,u)=>p-u,"<<":(p,u)=>p<<u,">>":(p,u)=>p>>u,">>>":(p,u)=>p>>>u,"&":(p,u)=>p&u,"^":(p,u)=>p^u,"|":(p,u)=>p|u};class vd{constructor(u,h,b){this.left=h,this.operator=u,this.right=b}evaluate(){const u=Tv[this.operator];if(!u)throw new Error(`unexpected binary operator: '${this.operator}`);return u(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Dt={"+":p=>p,"-":p=>-p,"~":p=>~p};class Wf{constructor(u,h){this.operator=u,this.expression=h}evaluate(){const u=Dt[this.operator];if(!u)throw new Error(`unexpected unary operator: '${this.operator}`);return u(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Wa(p){return(u,h)=>{for(let b=0;b<p.length;b++){const I=p[b](u,h);if(I!=="")return I}return""}}function Po(p,u){var h;const b=p.substr(u).match(/^\s+/);return(h=b&&b[0])!==null&&h!==void 0?h:""}function Av(p,u){const h=p.substr(u,1);return h.match(/^[1-9]$/)?h:""}function ja(p,u){var h;const b=p.substr(u).match(/^[0-9]+/);return(h=b&&b[0])!==null&&h!==void 0?h:""}function In(p,u){const h=ja(p,u);if(h!=="")return h;const b=p.substr(u,1);if(u+=1,b!=="-"&&b!=="+")return"";const I=ja(p,u);return I===""?"":b+I}function Xa(p,u){const h=p.substr(u,1);if(u+=1,h.toLowerCase()!=="e")return"";const b=In(p,u);return b===""?"":h+b}function jf(p,u){const h=p.substr(u,1);if(h==="0")return h;const b=Av(p,u);return u+=b.length,b===""?"":b+ja(p,u)}function _d(p,u){const h=jf(p,u);if(u+=h.length,h==="")return"";const b=p.substr(u,1);if(u+=b.length,b!==".")return"";const I=ja(p,u);return u+=I.length,h+b+I+Xa(p,u)}function Lv(p,u){const h=p.substr(u,1);if(u+=h.length,h!==".")return"";const b=ja(p,u);return u+=b.length,b===""?"":h+b+Xa(p,u)}function mu(p,u){const h=jf(p,u);return u+=h.length,h===""?"":h+Xa(p,u)}const wr=Wa([_d,Lv,mu]);function Rv(p,u){var h;const b=p.substr(u).match(/^[01]+/);return(h=b&&b[0])!==null&&h!==void 0?h:""}function kv(p,u){const h=p.substr(u,2);if(u+=h.length,h.toLowerCase()!=="0b")return"";const b=Rv(p,u);return b===""?"":h+b}function Sr(p,u){var h;const b=p.substr(u).match(/^[0-7]+/);return(h=b&&b[0])!==null&&h!==void 0?h:""}function Zr(p,u){const h=p.substr(u,2);if(u+=h.length,h.toLowerCase()!=="0o")return"";const b=Sr(p,u);return b===""?"":h+b}function gu(p,u){var h;const b=p.substr(u).match(/^[0-9a-f]+/i);return(h=b&&b[0])!==null&&h!==void 0?h:""}function yd(p,u){const h=p.substr(u,2);if(u+=h.length,h.toLowerCase()!=="0x")return"";const b=gu(p,u);return b===""?"":h+b}const Xf=Wa([kv,Zr,yd]),Iv=Wa([Xf,wr]);function br(p,u){const h=Iv(p,u);return u+=h.length,h===""?null:{evaluable:new Ga(h),cursor:u}}function Dv(p,u){const h=p.substr(u,1);if(u+=h.length,h!=="(")return null;const b=Gs(p,u);if(!b)return null;u=b.cursor,u+=Po(p,u).length;const I=p.substr(u,1);return u+=I.length,I!==")"?null:{evaluable:b.evaluable,cursor:u}}function vu(p,u){var h;return(h=br(p,u))!==null&&h!==void 0?h:Dv(p,u)}function qf(p,u){const h=vu(p,u);if(h)return h;const b=p.substr(u,1);if(u+=b.length,b!=="+"&&b!=="-"&&b!=="~")return null;const I=qf(p,u);return I?(u=I.cursor,{cursor:u,evaluable:new Wf(b,I.evaluable)}):null}function Ji(p,u,h){h+=Po(u,h).length;const b=p.filter(I=>u.startsWith(I,h))[0];return b?(h+=b.length,h+=Po(u,h).length,{cursor:h,operator:b}):null}function _u(p,u){return(h,b)=>{const I=p(h,b);if(!I)return null;b=I.cursor;let X=I.evaluable;for(;;){const ee=Ji(u,h,b);if(!ee)break;b=ee.cursor;const Me=p(h,b);if(!Me)return null;b=Me.cursor,X=new vd(ee.operator,X,Me.evaluable)}return X?{cursor:b,evaluable:X}:null}}const yu=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((p,u)=>_u(p,u),qf);function Gs(p,u){return u+=Po(p,u).length,yu(p,u)}function xd(p){const u=Gs(p,0);return!u||u.cursor+Po(p,u.cursor).length!==p.length?null:u.evaluable}function Qi(p){var u;const h=xd(p);return(u=h==null?void 0:h.evaluate())!==null&&u!==void 0?u:null}function wd(p){if(typeof p=="number")return p;if(typeof p=="string"){const u=Qi(p);if(!m(u))return u}return 0}function Sd(p){return String(p)}function Tn(p){return u=>u.toFixed(Math.max(Math.min(p,20),0))}const To=Tn(0);function Jn(p){return To(p)+"%"}function $i(p){return String(p)}function Mr(p){return p}function xu(p,u){for(;p.length<u;)p.push(void 0)}function Yf(p){const u=[];return xu(u,p),se(u)}function Jr(p){const u=p.indexOf(void 0);return u<0?p:p.slice(0,u)}function Ms(p,u){const h=[...Jr(p),u];return h.length>p.length?h.splice(0,h.length-p.length):xu(h,p.length),h}function Es({primary:p,secondary:u,forward:h,backward:b}){let I=!1;function X(ee){I||(I=!0,ee(),I=!1)}p.emitter.on("change",ee=>{X(()=>{u.setRawValue(h(p,u),ee.options)})}),u.emitter.on("change",ee=>{X(()=>{p.setRawValue(b(p,u),ee.options)}),X(()=>{u.setRawValue(h(p,u),ee.options)})}),X(()=>{u.setRawValue(h(p,u),{forceEmit:!1,last:!0})})}function Qn(p,u){const h=p*(u.altKey?.1:1)*(u.shiftKey?10:1);return u.upKey?+h:u.downKey?-h:0}function Cs(p){return{altKey:p.altKey,downKey:p.key==="ArrowDown",shiftKey:p.shiftKey,upKey:p.key==="ArrowUp"}}function Er(p){return{altKey:p.altKey,downKey:p.key==="ArrowLeft",shiftKey:p.shiftKey,upKey:p.key==="ArrowRight"}}function Kf(p){return p==="ArrowUp"||p==="ArrowDown"}function wu(p){return Kf(p)||p==="ArrowLeft"||p==="ArrowRight"}function Ao(p,u){var h,b;const I=u.ownerDocument.defaultView,X=u.getBoundingClientRect();return{x:p.pageX-(((h=I&&I.scrollX)!==null&&h!==void 0?h:0)+X.left),y:p.pageY-(((b=I&&I.scrollY)!==null&&b!==void 0?b:0)+X.top)}}class Ps{constructor(u){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=u,this.emitter=new M,u.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),u.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),u.addEventListener("touchend",this.onTouchEnd_),u.addEventListener("mousedown",this.onMouseDown_)}computePosition_(u){const h=this.elem_.getBoundingClientRect();return{bounds:{width:h.width,height:h.height},point:u?{x:u.x,y:u.y}:null}}onMouseDown_(u){var h;u.preventDefault(),(h=u.currentTarget)===null||h===void 0||h.focus();const b=this.elem_.ownerDocument;b.addEventListener("mousemove",this.onDocumentMouseMove_),b.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:u.altKey,data:this.computePosition_(Ao(u,this.elem_)),sender:this,shiftKey:u.shiftKey})}onDocumentMouseMove_(u){this.emitter.emit("move",{altKey:u.altKey,data:this.computePosition_(Ao(u,this.elem_)),sender:this,shiftKey:u.shiftKey})}onDocumentMouseUp_(u){const h=this.elem_.ownerDocument;h.removeEventListener("mousemove",this.onDocumentMouseMove_),h.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:u.altKey,data:this.computePosition_(Ao(u,this.elem_)),sender:this,shiftKey:u.shiftKey})}onTouchStart_(u){u.preventDefault();const h=u.targetTouches.item(0),b=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:u.altKey,data:this.computePosition_(h?{x:h.clientX-b.left,y:h.clientY-b.top}:void 0),sender:this,shiftKey:u.shiftKey}),this.lastTouch_=h}onTouchMove_(u){const h=u.targetTouches.item(0),b=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:u.altKey,data:this.computePosition_(h?{x:h.clientX-b.left,y:h.clientY-b.top}:void 0),sender:this,shiftKey:u.shiftKey}),this.lastTouch_=h}onTouchEnd_(u){var h;const b=(h=u.targetTouches.item(0))!==null&&h!==void 0?h:this.lastTouch_,I=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:u.altKey,data:this.computePosition_(b?{x:b.clientX-I.left,y:b.clientY-I.top}:void 0),sender:this,shiftKey:u.shiftKey})}}function Qt(p,u,h,b,I){const X=(p-u)/(h-u);return b+X*(I-b)}function bd(p){return String(p.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function mn(p,u,h){return Math.min(Math.max(p,u),h)}function Ws(p,u){return(p%u+u)%u}const Fn=P("txt");class Su{constructor(u,h){this.onChange_=this.onChange_.bind(this),this.props_=h.props,this.props_.emitter.on("change",this.onChange_),this.element=u.createElement("div"),this.element.classList.add(Fn(),Fn(void 0,"num")),h.arrayPosition&&this.element.classList.add(Fn(void 0,h.arrayPosition)),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("input");b.classList.add(Fn("i")),b.type="text",h.viewProps.bindDisabled(b),this.element.appendChild(b),this.inputElement=b,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=h.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Fn()),this.inputElement.classList.add(Fn("i"));const I=u.createElement("div");I.classList.add(Fn("k")),this.element.appendChild(I),this.knobElement=I;const X=u.createElementNS(Te,"svg");X.classList.add(Fn("g")),this.knobElement.appendChild(X);const ee=u.createElementNS(Te,"path");ee.classList.add(Fn("gb")),X.appendChild(ee),this.guideBodyElem_=ee;const Me=u.createElementNS(Te,"path");Me.classList.add(Fn("gh")),X.appendChild(Me),this.guideHeadElem_=Me;const $e=u.createElement("div");$e.classList.add(P("tt")()),this.knobElement.appendChild($e),this.tooltipElem_=$e,h.value.emitter.on("change",this.onChange_),this.value=h.value,this.refresh()}onDraggingChange_(u){if(u.rawValue===null){this.element.classList.remove(Fn(void 0,"drg"));return}this.element.classList.add(Fn(void 0,"drg"));const h=u.rawValue/this.props_.get("draggingScale"),b=h+(h>0?-1:h<0?1:0),I=mn(-b,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${b+I},0 L${b},4 L${b+I},8`,`M ${h},-1 L${h},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${h},4`);const X=this.props_.get("formatter");this.tooltipElem_.textContent=X(this.value.rawValue),this.tooltipElem_.style.left=`${h}px`}refresh(){const u=this.props_.get("formatter");this.inputElement.value=u(this.value.rawValue)}onChange_(){this.refresh()}}class Ts{constructor(u,h){var b;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=h.baseStep,this.parser_=h.parser,this.props=h.props,this.sliderProps_=(b=h.sliderProps)!==null&&b!==void 0?b:null,this.value=h.value,this.viewProps=h.viewProps,this.dragging_=se(null),this.view=new Su(u,{arrayPosition:h.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const I=new Ps(this.view.knobElement);I.emitter.on("down",this.onPointerDown_),I.emitter.on("move",this.onPointerMove_),I.emitter.on("up",this.onPointerUp_)}constrainValue_(u){var h,b;const I=(h=this.sliderProps_)===null||h===void 0?void 0:h.get("minValue"),X=(b=this.sliderProps_)===null||b===void 0?void 0:b.get("maxValue");let ee=u;return I!==void 0&&(ee=Math.max(ee,I)),X!==void 0&&(ee=Math.min(ee,X)),ee}onInputChange_(u){const b=u.currentTarget.value,I=this.parser_(b);m(I)||(this.value.rawValue=this.constrainValue_(I)),this.view.refresh()}onInputKeyDown_(u){const h=Qn(this.baseStep_,Cs(u));h!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+h),{forceEmit:!1,last:!1})}onInputKeyUp_(u){Qn(this.baseStep_,Cs(u))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(u){if(!u.point)return null;const h=u.point.x-u.bounds.width/2;return this.constrainValue_(this.originRawValue_+h*this.props.get("draggingScale"))}onPointerMove_(u){const h=this.computeDraggingValue_(u.data);h!==null&&(this.value.setRawValue(h,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(u){const h=this.computeDraggingValue_(u.data);h!==null&&(this.value.setRawValue(h,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const ai=P("sld");class Oi{constructor(u,h){this.onChange_=this.onChange_.bind(this),this.props_=h.props,this.props_.emitter.on("change",this.onChange_),this.element=u.createElement("div"),this.element.classList.add(ai()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("div");b.classList.add(ai("t")),h.viewProps.bindTabIndex(b),this.element.appendChild(b),this.trackElement=b;const I=u.createElement("div");I.classList.add(ai("k")),this.trackElement.appendChild(I),this.knobElement=I,h.value.emitter.on("change",this.onChange_),this.value=h.value,this.update_()}update_(){const u=mn(Qt(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${u}%`}onChange_(){this.update_()}}class js{constructor(u,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=h.baseStep,this.value=h.value,this.viewProps=h.viewProps,this.props=h.props,this.view=new Oi(u,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ps(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(u,h){!u.point||this.value.setRawValue(Qt(mn(u.point.x,0,u.bounds.width),0,u.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),h)}onPointerDownOrMove_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerUp_(u){this.handlePointerEvent_(u.data,{forceEmit:!0,last:!0})}onKeyDown_(u){const h=Qn(this.baseStep_,Er(u));h!==0&&this.value.setRawValue(this.value.rawValue+h,{forceEmit:!1,last:!1})}onKeyUp_(u){Qn(this.baseStep_,Er(u))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const er=P("sldtxt");class Qr{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(er());const b=u.createElement("div");b.classList.add(er("s")),this.sliderView_=h.sliderView,b.appendChild(this.sliderView_.element),this.element.appendChild(b);const I=u.createElement("div");I.classList.add(er("t")),this.textView_=h.textView,I.appendChild(this.textView_.element),this.element.appendChild(I)}}class $r{constructor(u,h){this.value=h.value,this.viewProps=h.viewProps,this.sliderC_=new js(u,{baseStep:h.baseStep,props:h.sliderProps,value:h.value,viewProps:this.viewProps}),this.textC_=new Ts(u,{baseStep:h.baseStep,parser:h.parser,props:h.textProps,sliderProps:h.sliderProps,value:h.value,viewProps:h.viewProps}),this.view=new Qr(u,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Lo(p,u){p.write(u)}function Ro(p){const u=fe;if(Array.isArray(p))return u.required.array(u.required.object({text:u.required.string,value:u.required.raw}))(p).value;if(typeof p=="object")return u.required.raw(p).value}function bu(p){if(p==="inline"||p==="popup")return p}function Sn(p){const u=fe;return u.required.object({max:u.optional.number,min:u.optional.number,step:u.optional.number})(p).value}function li(p){if(Array.isArray(p))return p;const u=[];return Object.keys(p).forEach(h=>{u.push({text:h,value:p[h]})}),u}function Kt(p){return m(p)?null:new Eo(li(p))}function Xs(p){const u=p?Zi(p,Eo):null;return u?u.options:null}function tr(p){const u=p?Zi(p,Ba):null;return u?u.step:null}function qa(p,u){const h=p&&Zi(p,Ba);return h?bd(h.step):Math.max(bd(u),2)}function qs(p){const u=tr(p);return u!=null?u:1}function As(p,u){var h;const b=p&&Zi(p,Ba),I=Math.abs((h=b==null?void 0:b.step)!==null&&h!==void 0?h:u);return I===0?.1:Math.pow(10,Math.floor(Math.log10(I))-1)}const ko=P("ckb");class Zf{constructor(u,h){this.onValueChange_=this.onValueChange_.bind(this),this.element=u.createElement("div"),this.element.classList.add(ko()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("label");b.classList.add(ko("l")),this.element.appendChild(b);const I=u.createElement("input");I.classList.add(ko("i")),I.type="checkbox",b.appendChild(I),this.inputElement=I,h.viewProps.bindDisabled(this.inputElement);const X=u.createElement("div");X.classList.add(ko("w")),b.appendChild(X);const ee=Qe(u,"check");X.appendChild(ee),h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Ya{constructor(u,h){this.onInputChange_=this.onInputChange_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new Zf(u,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(u){const h=u.currentTarget;this.value.rawValue=h.checked}}function Io(p){const u=[],h=Kt(p.options);return h&&u.push(h),new bs(u)}const Md={id:"input-bool",type:"input",accept:(p,u)=>{if(typeof p!="boolean")return null;const b=be(u,{options:fe.optional.custom(Ro)});return b?{initialValue:p,params:b}:null},binding:{reader:p=>fu,constraint:p=>Io(p.params),writer:p=>Lo},controller:p=>{var u;const h=p.document,b=p.value,I=p.constraint;return I&&Zi(I,Eo)?new Va(h,{props:ne.fromObject({options:(u=Xs(I))!==null&&u!==void 0?u:[]}),value:b,viewProps:p.viewProps}):new Ya(h,{value:b,viewProps:p.viewProps})}},nr=P("col");class Mu{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(nr()),h.foldable.bindExpandedClass(this.element,nr(void 0,"expanded")),z(h.foldable,"completed",N(this.element,nr(void 0,"cpl")));const b=u.createElement("div");b.classList.add(nr("h")),this.element.appendChild(b);const I=u.createElement("div");I.classList.add(nr("s")),b.appendChild(I),this.swatchElement=I;const X=u.createElement("div");if(X.classList.add(nr("t")),b.appendChild(X),this.textElement=X,h.pickerLayout==="inline"){const ee=u.createElement("div");ee.classList.add(nr("p")),this.element.appendChild(ee),this.pickerElement=ee}else this.pickerElement=null}}function Jf(p,u,h){const b=mn(p/255,0,1),I=mn(u/255,0,1),X=mn(h/255,0,1),ee=Math.max(b,I,X),Me=Math.min(b,I,X),$e=ee-Me;let ct=0,Lt=0;const Ot=(Me+ee)/2;return $e!==0&&(Lt=$e/(1-Math.abs(ee+Me-1)),b===ee?ct=(I-X)/$e:I===ee?ct=2+(X-b)/$e:ct=4+(b-I)/$e,ct=ct/6+(ct<0?1:0)),[ct*360,Lt*100,Ot*100]}function Qf(p,u,h){const b=(p%360+360)%360,I=mn(u/100,0,1),X=mn(h/100,0,1),ee=(1-Math.abs(2*X-1))*I,Me=ee*(1-Math.abs(b/60%2-1)),$e=X-ee/2;let ct,Lt,Ot;return b>=0&&b<60?[ct,Lt,Ot]=[ee,Me,0]:b>=60&&b<120?[ct,Lt,Ot]=[Me,ee,0]:b>=120&&b<180?[ct,Lt,Ot]=[0,ee,Me]:b>=180&&b<240?[ct,Lt,Ot]=[0,Me,ee]:b>=240&&b<300?[ct,Lt,Ot]=[Me,0,ee]:[ct,Lt,Ot]=[ee,0,Me],[(ct+$e)*255,(Lt+$e)*255,(Ot+$e)*255]}function Do(p,u,h){const b=mn(p/255,0,1),I=mn(u/255,0,1),X=mn(h/255,0,1),ee=Math.max(b,I,X),Me=Math.min(b,I,X),$e=ee-Me;let ct;$e===0?ct=0:ee===b?ct=60*(((I-X)/$e%6+6)%6):ee===I?ct=60*((X-b)/$e+2):ct=60*((b-I)/$e+4);const Lt=ee===0?0:$e/ee,Ot=ee;return[ct,Lt*100,Ot*100]}function Ed(p,u,h){const b=Ws(p,360),I=mn(u/100,0,1),X=mn(h/100,0,1),ee=X*I,Me=ee*(1-Math.abs(b/60%2-1)),$e=X-ee;let ct,Lt,Ot;return b>=0&&b<60?[ct,Lt,Ot]=[ee,Me,0]:b>=60&&b<120?[ct,Lt,Ot]=[Me,ee,0]:b>=120&&b<180?[ct,Lt,Ot]=[0,ee,Me]:b>=180&&b<240?[ct,Lt,Ot]=[0,Me,ee]:b>=240&&b<300?[ct,Lt,Ot]=[Me,0,ee]:[ct,Lt,Ot]=[ee,0,Me],[(ct+$e)*255,(Lt+$e)*255,(Ot+$e)*255]}function Ka(p,u,h){const b=h+u*(100-Math.abs(2*h-100))/200;return[p,b!==0?u*(100-Math.abs(2*h-100))/b:0,h+u*(100-Math.abs(2*h-100))/(2*100)]}function Fi(p,u,h){const b=100-Math.abs(h*(200-u)/100-100);return[p,b!==0?u*h/b:0,h*(200-u)/(2*100)]}function ir(p){return[p[0],p[1],p[2]]}function Ys(p,u){return[p[0],p[1],p[2],u]}const Cr={hsl:{hsl:(p,u,h)=>[p,u,h],hsv:Ka,rgb:Qf},hsv:{hsl:Fi,hsv:(p,u,h)=>[p,u,h],rgb:Ed},rgb:{hsl:Jf,hsv:Do,rgb:(p,u,h)=>[p,u,h]}};function No(p,u){return[u==="float"?1:p==="rgb"?255:360,u==="float"?1:p==="rgb"?255:100,u==="float"?1:p==="rgb"?255:100]}function zo(p,u,h){var b;const I=No(u,h);return[u==="rgb"?mn(p[0],0,I[0]):Ws(p[0],I[0]),mn(p[1],0,I[1]),mn(p[2],0,I[2]),mn((b=p[3])!==null&&b!==void 0?b:1,0,1)]}function Cd(p,u,h,b){const I=No(u,h),X=No(u,b);return p.map((ee,Me)=>ee/I[Me]*X[Me])}function Pd(p,u,h){const b=Cd(p,u.mode,u.type,"int"),I=Cr[u.mode][h.mode](...b);return Cd(I,h.mode,"int",h.type)}function Zt(p,u){return typeof p!="object"||m(p)?!1:u in p&&typeof p[u]=="number"}class xt{constructor(u,h,b="int"){this.mode=h,this.type=b,this.comps_=zo(u,h,b)}static black(u="int"){return new xt([0,0,0],"rgb",u)}static fromObject(u,h="int"){const b="a"in u?[u.r,u.g,u.b,u.a]:[u.r,u.g,u.b];return new xt(b,"rgb",h)}static toRgbaObject(u,h="int"){return u.toRgbaObject(h)}static isRgbColorObject(u){return Zt(u,"r")&&Zt(u,"g")&&Zt(u,"b")}static isRgbaColorObject(u){return this.isRgbColorObject(u)&&Zt(u,"a")}static isColorObject(u){return this.isRgbColorObject(u)}static equals(u,h){if(u.mode!==h.mode)return!1;const b=u.comps_,I=h.comps_;for(let X=0;X<b.length;X++)if(b[X]!==I[X])return!1;return!0}getComponents(u,h="int"){return Ys(Pd(ir(this.comps_),{mode:this.mode,type:this.type},{mode:u!=null?u:this.mode,type:h}),this.comps_[3])}toRgbaObject(u="int"){const h=this.getComponents("rgb",u);return{r:h[0],g:h[1],b:h[2],a:h[3]}}}const Pr=P("colp");class Td{constructor(u,h){this.alphaViews_=null,this.element=u.createElement("div"),this.element.classList.add(Pr());const b=u.createElement("div");b.classList.add(Pr("hsv"));const I=u.createElement("div");I.classList.add(Pr("sv")),this.svPaletteView_=h.svPaletteView,I.appendChild(this.svPaletteView_.element),b.appendChild(I);const X=u.createElement("div");X.classList.add(Pr("h")),this.hPaletteView_=h.hPaletteView,X.appendChild(this.hPaletteView_.element),b.appendChild(X),this.element.appendChild(b);const ee=u.createElement("div");if(ee.classList.add(Pr("rgb")),this.textView_=h.textView,ee.appendChild(this.textView_.element),this.element.appendChild(ee),h.alphaViews){this.alphaViews_={palette:h.alphaViews.palette,text:h.alphaViews.text};const Me=u.createElement("div");Me.classList.add(Pr("a"));const $e=u.createElement("div");$e.classList.add(Pr("ap")),$e.appendChild(this.alphaViews_.palette.element),Me.appendChild($e);const ct=u.createElement("div");ct.classList.add(Pr("at")),ct.appendChild(this.alphaViews_.text.element),Me.appendChild(ct),this.element.appendChild(Me)}}get allFocusableElements(){const u=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(h=>h.inputElement)];return this.alphaViews_&&u.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),u}}function Eu(p){return p==="int"?"int":p==="float"?"float":void 0}function ui(p){const u=fe;return be(p,{alpha:u.optional.boolean,color:u.optional.object({alpha:u.optional.boolean,type:u.optional.custom(Eu)}),expanded:u.optional.boolean,picker:u.optional.custom(bu)})}function Ui(p){return p?.1:1}function Xt(p){var u;return(u=p.color)===null||u===void 0?void 0:u.type}function Gn(p,u){return p.alpha===u.alpha&&p.mode===u.mode&&p.notation===u.notation&&p.type===u.type}function Gt(p,u){const h=p.match(/^(.+)%$/);return Math.min(h?parseFloat(h[1])*.01*u:parseFloat(p),u)}const Cu={deg:p=>p,grad:p=>p*360/400,rad:p=>p*360/(2*Math.PI),turn:p=>p*360};function Oo(p){const u=p.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!u)return parseFloat(p);const h=parseFloat(u[1]),b=u[2];return Cu[b](h)}function Fo(p){const u=p.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!u)return null;const h=[Gt(u[1],255),Gt(u[2],255),Gt(u[3],255)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function $f(p){return u=>{const h=Fo(u);return h?new xt(h,"rgb",p):null}}function Un(p){const u=p.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!u)return null;const h=[Gt(u[1],255),Gt(u[2],255),Gt(u[3],255),Gt(u[4],1)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function Pu(p){return u=>{const h=Un(u);return h?new xt(h,"rgb",p):null}}function Tu(p){const u=p.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!u)return null;const h=[Oo(u[1]),Gt(u[2],100),Gt(u[3],100)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function Au(p){return u=>{const h=Tu(u);return h?new xt(h,"hsl",p):null}}function Tr(p){const u=p.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!u)return null;const h=[Oo(u[1]),Gt(u[2],100),Gt(u[3],100),Gt(u[4],1)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function rr(p){return u=>{const h=Tr(u);return h?new xt(h,"hsl",p):null}}function Ls(p){const u=p.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(u)return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)];const h=p.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return h?[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]:null}function Lu(p){const u=Ls(p);return u?new xt(u,"rgb","int"):null}function Za(p){const u=p.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(u)return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16),Qt(parseInt(u[4]+u[4],16),0,255,0,1)];const h=p.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return h?[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16),Qt(parseInt(h[4],16),0,255,0,1)]:null}function ep(p){const u=Za(p);return u?new xt(u,"rgb","int"):null}function Ad(p){const u=p.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!u)return null;const h=[parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function Ld(p){return u=>{const h=Ad(u);return h?new xt(h,"rgb",p):null}}function Rd(p){const u=p.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!u)return null;const h=[parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]),parseFloat(u[4])];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function kd(p){return u=>{const h=Rd(u);return h?new xt(h,"rgb",p):null}}const tp=[{parser:Ls,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Za,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Fo,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Un,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Tu,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Tr,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Ad,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Rd,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Id(p){return tp.reduce((u,{parser:h,result:b})=>u||(h(p)?b:null),null)}function Ks(p,u="int"){const h=Id(p);return h?h.notation==="hex"&&u!=="float"?Object.assign(Object.assign({},h),{type:"int"}):h.notation==="func"?Object.assign(Object.assign({},h),{type:u}):null:null}const Dd={int:[Lu,ep,$f("int"),Pu("int"),Au("int"),rr("int"),Ld("int"),kd("int")],float:[$f("float"),Pu("float"),Au("float"),rr("float"),Ld("float"),kd("float")]};function Ru(p){const u=Dd[p];return h=>{if(typeof h!="string")return xt.black(p);const b=u.reduce((I,X)=>I||X(h),null);return b!=null?b:xt.black(p)}}function Uo(p){const u=Dd[p];return h=>u.reduce((b,I)=>b||I(h),null)}function ku(p){const u=mn(Math.floor(p),0,255).toString(16);return u.length===1?`0${u}`:u}function Bo(p,u="#"){const h=ir(p.getComponents("rgb")).map(ku).join("");return`${u}${h}`}function Iu(p,u="#"){const h=p.getComponents("rgb"),b=[h[0],h[1],h[2],h[3]*255].map(ku).join("");return`${u}${b}`}function Nd(p,u){const h=Tn(u==="float"?2:0);return`rgb(${ir(p.getComponents("rgb",u)).map(I=>h(I)).join(", ")})`}function np(p){return u=>Nd(u,p)}function Ja(p,u){const h=Tn(2),b=Tn(u==="float"?2:0);return`rgba(${p.getComponents("rgb",u).map((X,ee)=>(ee===3?h:b)(X)).join(", ")})`}function zd(p){return u=>Ja(u,p)}function ip(p){const u=[Tn(0),Jn,Jn];return`hsl(${ir(p.getComponents("hsl")).map((b,I)=>u[I](b)).join(", ")})`}function rp(p){const u=[Tn(0),Jn,Jn,Tn(2)];return`hsla(${p.getComponents("hsl").map((b,I)=>u[I](b)).join(", ")})`}function sp(p,u){const h=Tn(u==="float"?2:0),b=["r","g","b"];return`{${ir(p.getComponents("rgb",u)).map((X,ee)=>`${b[ee]}: ${h(X)}`).join(", ")}}`}function op(p){return u=>sp(u,p)}function ap(p,u){const h=Tn(2),b=Tn(u==="float"?2:0),I=["r","g","b","a"];return`{${p.getComponents("rgb",u).map((ee,Me)=>{const $e=Me===3?h:b;return`${I[Me]}: ${$e(ee)}`}).join(", ")}}`}function Nv(p){return u=>ap(u,p)}const lp=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Bo},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Iu},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:ip},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:rp},...["int","float"].reduce((p,u)=>[...p,{format:{alpha:!1,mode:"rgb",notation:"func",type:u},stringifier:np(u)},{format:{alpha:!0,mode:"rgb",notation:"func",type:u},stringifier:zd(u)},{format:{alpha:!1,mode:"rgb",notation:"object",type:u},stringifier:op(u)},{format:{alpha:!0,mode:"rgb",notation:"object",type:u},stringifier:Nv(u)}],[])];function Du(p){return lp.reduce((u,h)=>u||(Gn(h.format,p)?h.stringifier:null),null)}const Vo=P("apl");class up{constructor(u,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=u.createElement("div"),this.element.classList.add(Vo()),h.viewProps.bindTabIndex(this.element);const b=u.createElement("div");b.classList.add(Vo("b")),this.element.appendChild(b);const I=u.createElement("div");I.classList.add(Vo("c")),b.appendChild(I),this.colorElem_=I;const X=u.createElement("div");X.classList.add(Vo("m")),this.element.appendChild(X),this.markerElem_=X;const ee=u.createElement("div");ee.classList.add(Vo("p")),this.markerElem_.appendChild(ee),this.previewElem_=ee,this.update_()}update_(){const u=this.value.rawValue,h=u.getComponents("rgb"),b=new xt([h[0],h[1],h[2],0],"rgb"),I=new xt([h[0],h[1],h[2],255],"rgb"),X=["to right",Ja(b),Ja(I)];this.colorElem_.style.background=`linear-gradient(${X.join(",")})`,this.previewElem_.style.backgroundColor=Ja(u);const ee=Qt(h[3],0,1,0,100);this.markerElem_.style.left=`${ee}%`}onValueChange_(){this.update_()}}class Nu{constructor(u,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new up(u,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ps(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(u,h){if(!u.point)return;const b=u.point.x/u.bounds.width,I=this.value.rawValue,[X,ee,Me]=I.getComponents("hsv");this.value.setRawValue(new xt([X,ee,Me,b],"hsv"),h)}onPointerDown_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerMove_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerUp_(u){this.handlePointerEvent_(u.data,{forceEmit:!0,last:!0})}onKeyDown_(u){const h=Qn(Ui(!0),Er(u));if(h===0)return;const b=this.value.rawValue,[I,X,ee,Me]=b.getComponents("hsv");this.value.setRawValue(new xt([I,X,ee,Me+h],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(u){Qn(Ui(!0),Er(u))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ho=P("coltxt");function zv(p){const u=p.createElement("select"),h=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return u.appendChild(h.reduce((b,I)=>{const X=p.createElement("option");return X.textContent=I.text,X.value=I.value,b.appendChild(X),b},p.createDocumentFragment())),u}class Ov{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(Ho());const b=u.createElement("div");b.classList.add(Ho("m")),this.modeElem_=zv(u),this.modeElem_.classList.add(Ho("ms")),b.appendChild(this.modeSelectElement);const I=u.createElement("div");I.classList.add(Ho("mm")),I.appendChild(Qe(u,"dropdown")),b.appendChild(I),this.element.appendChild(b);const X=u.createElement("div");X.classList.add(Ho("w")),this.element.appendChild(X),this.textsElem_=X,this.textViews_=h.textViews,this.applyTextViews_(),D(h.colorMode,ee=>{this.modeElem_.value=ee})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(u){this.textViews_=u,this.applyTextViews_()}applyTextViews_(){kt(this.textsElem_);const u=this.element.ownerDocument;this.textViews_.forEach(h=>{const b=u.createElement("div");b.classList.add(Ho("c")),b.appendChild(h.element),this.textsElem_.appendChild(b)})}}function Od(p){return Tn(p==="float"?2:0)}function Fd(p,u,h){const b=No(p,u)[h];return new Kr({min:0,max:b})}function Ud(p,u,h){return new Ts(p,{arrayPosition:h===0?"fst":h===3-1?"lst":"mid",baseStep:Ui(!1),parser:u.parser,props:ne.fromObject({draggingScale:u.colorType==="float"?.01:1,formatter:Od(u.colorType)}),value:se(0,{constraint:Fd(u.colorMode,u.colorType,h)}),viewProps:u.viewProps})}class cp{constructor(u,h){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=h.colorType,this.parser_=h.parser,this.value=h.value,this.viewProps=h.viewProps,this.colorMode=se(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(u),this.view=new Ov(u,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(u){const h={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},b=[Ud(u,h,0),Ud(u,h,1),Ud(u,h,2)];return b.forEach((I,X)=>{Es({primary:this.value,secondary:I.value,forward:ee=>ee.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[X],backward:(ee,Me)=>{const $e=this.colorMode.rawValue,ct=ee.rawValue.getComponents($e,this.colorType_);return ct[X]=Me.rawValue,new xt(Ys(ir(ct),ct[3]),$e,this.colorType_)}})}),b}onModeSelectChange_(u){const h=u.currentTarget;this.colorMode.rawValue=h.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const zu=P("hpl");class dp{constructor(u,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=u.createElement("div"),this.element.classList.add(zu()),h.viewProps.bindTabIndex(this.element);const b=u.createElement("div");b.classList.add(zu("c")),this.element.appendChild(b);const I=u.createElement("div");I.classList.add(zu("m")),this.element.appendChild(I),this.markerElem_=I,this.update_()}update_(){const u=this.value.rawValue,[h]=u.getComponents("hsv");this.markerElem_.style.backgroundColor=Nd(new xt([h,100,100],"hsv"));const b=Qt(h,0,360,0,100);this.markerElem_.style.left=`${b}%`}onValueChange_(){this.update_()}}class hp{constructor(u,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new dp(u,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ps(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(u,h){if(!u.point)return;const b=Qt(mn(u.point.x,0,u.bounds.width),0,u.bounds.width,0,359),I=this.value.rawValue,[,X,ee,Me]=I.getComponents("hsv");this.value.setRawValue(new xt([b,X,ee,Me],"hsv"),h)}onPointerDown_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerMove_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerUp_(u){this.handlePointerEvent_(u.data,{forceEmit:!0,last:!0})}onKeyDown_(u){const h=Qn(Ui(!1),Er(u));if(h===0)return;const b=this.value.rawValue,[I,X,ee,Me]=b.getComponents("hsv");this.value.setRawValue(new xt([I+h,X,ee,Me],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(u){Qn(Ui(!1),Er(u))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ou=P("svp"),sr=64;class fp{constructor(u,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=u.createElement("div"),this.element.classList.add(Ou()),h.viewProps.bindTabIndex(this.element);const b=u.createElement("canvas");b.height=sr,b.width=sr,b.classList.add(Ou("c")),this.element.appendChild(b),this.canvasElement=b;const I=u.createElement("div");I.classList.add(Ou("m")),this.element.appendChild(I),this.markerElem_=I,this.update_()}update_(){const u=Ne(this.canvasElement);if(!u)return;const b=this.value.rawValue.getComponents("hsv"),I=this.canvasElement.width,X=this.canvasElement.height,ee=u.getImageData(0,0,I,X),Me=ee.data;for(let Lt=0;Lt<X;Lt++)for(let Ot=0;Ot<I;Ot++){const ns=Qt(Ot,0,I,0,100),Yo=Qt(Lt,0,X,100,0),Ko=Ed(b[0],ns,Yo),Vi=(Lt*I+Ot)*4;Me[Vi]=Ko[0],Me[Vi+1]=Ko[1],Me[Vi+2]=Ko[2],Me[Vi+3]=255}u.putImageData(ee,0,0);const $e=Qt(b[1],0,100,0,100);this.markerElem_.style.left=`${$e}%`;const ct=Qt(b[2],0,100,100,0);this.markerElem_.style.top=`${ct}%`}onValueChange_(){this.update_()}}class Qa{constructor(u,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new fp(u,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ps(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(u,h){if(!u.point)return;const b=Qt(u.point.x,0,u.bounds.width,0,100),I=Qt(u.point.y,0,u.bounds.height,100,0),[X,,,ee]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new xt([X,b,I,ee],"hsv"),h)}onPointerDown_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerMove_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerUp_(u){this.handlePointerEvent_(u.data,{forceEmit:!0,last:!0})}onKeyDown_(u){wu(u.key)&&u.preventDefault();const[h,b,I,X]=this.value.rawValue.getComponents("hsv"),ee=Ui(!1),Me=Qn(ee,Er(u)),$e=Qn(ee,Cs(u));Me===0&&$e===0||this.value.setRawValue(new xt([h,b+Me,I+$e,X],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(u){const h=Ui(!1),b=Qn(h,Er(u)),I=Qn(h,Cs(u));b===0&&I===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class $a{constructor(u,h){this.value=h.value,this.viewProps=h.viewProps,this.hPaletteC_=new hp(u,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Qa(u,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=h.supportsAlpha?{palette:new Nu(u,{value:this.value,viewProps:this.viewProps}),text:new Ts(u,{parser:Qi,baseStep:.1,props:ne.fromObject({draggingScale:.01,formatter:Tn(2)}),value:se(0,{constraint:new Kr({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Es({primary:this.value,secondary:this.alphaIcs_.text.value,forward:b=>b.rawValue.getComponents()[3],backward:(b,I)=>{const X=b.rawValue.getComponents();return X[3]=I.rawValue,new xt(X,b.rawValue.mode)}}),this.textC_=new cp(u,{colorType:h.colorType,parser:Qi,value:this.value,viewProps:this.viewProps}),this.view=new Td(u,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:h.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const Go=P("colsw");class Fu{constructor(u,h){this.onValueChange_=this.onValueChange_.bind(this),h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.element=u.createElement("div"),this.element.classList.add(Go()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("div");b.classList.add(Go("sw")),this.element.appendChild(b),this.swatchElem_=b;const I=u.createElement("button");I.classList.add(Go("b")),h.viewProps.bindDisabled(I),this.element.appendChild(I),this.buttonElement=I,this.update_()}update_(){const u=this.value.rawValue;this.swatchElem_.style.backgroundColor=Iu(u)}onValueChange_(){this.update_()}}class pp{constructor(u,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new Fu(u,{value:this.value,viewProps:this.viewProps})}}class Zs{constructor(u,h){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.foldable_=Oe.create(h.expanded),this.swatchC_=new pp(u,{value:this.value,viewProps:this.viewProps});const b=this.swatchC_.view.buttonElement;b.addEventListener("blur",this.onButtonBlur_),b.addEventListener("click",this.onButtonClick_),this.textC_=new hu(u,{parser:h.parser,props:ne.fromObject({formatter:h.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Mu(u,{foldable:this.foldable_,pickerLayout:h.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=h.pickerLayout==="popup"?new Ha(u,{viewProps:this.viewProps}):null;const I=new $a(u,{colorType:h.colorType,supportsAlpha:h.supportsAlpha,value:this.value,viewProps:this.viewProps});I.view.allFocusableElements.forEach(X=>{X.addEventListener("blur",this.onPopupChildBlur_),X.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=I,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(I.view.element),Es({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:X=>X.rawValue,backward:(X,ee)=>ee.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Pe(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(u){if(!this.popC_)return;const h=this.view.element,b=u.relatedTarget;(!b||!h.contains(b))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(u){if(!this.popC_)return;const h=this.popC_.view.element,b=U(u);b&&h.contains(b)||b&&b===this.swatchC_.view.buttonElement&&!me(h.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(u){this.popC_?u.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&u.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Wn(p,u){return xt.isColorObject(p)?xt.fromObject(p,u):xt.black(u)}function Fv(p){return ir(p.getComponents("rgb")).reduce((u,h)=>u<<8|Math.floor(h)&255,0)}function Uv(p){return p.getComponents("rgb").reduce((u,h,b)=>{const I=Math.floor(b===3?h*255:h)&255;return u<<8|I},0)>>>0}function Ei(p){return new xt([p>>16&255,p>>8&255,p&255],"rgb")}function $n(p){return new xt([p>>24&255,p>>16&255,p>>8&255,Qt(p&255,0,255,0,1)],"rgb")}function mp(p){return typeof p!="number"?xt.black():Ei(p)}function gp(p){return typeof p!="number"?xt.black():$n(p)}function vp(p){const u=Du(p);return u?(h,b)=>{Lo(h,u(b))}:null}function _p(p){const u=p?Uv:Fv;return(h,b)=>{Lo(h,u(b))}}function yp(p,u,h){const b=u.toRgbaObject(h);p.writeProperty("r",b.r),p.writeProperty("g",b.g),p.writeProperty("b",b.b),p.writeProperty("a",b.a)}function Bd(p,u,h){const b=u.toRgbaObject(h);p.writeProperty("r",b.r),p.writeProperty("g",b.g),p.writeProperty("b",b.b)}function xp(p,u){return(h,b)=>{p?yp(h,b,u):Bd(h,b,u)}}function el(p){var u;return!!((p==null?void 0:p.alpha)||((u=p==null?void 0:p.color)===null||u===void 0?void 0:u.alpha))}function wp(p){return p?u=>Iu(u,"0x"):u=>Bo(u,"0x")}function Sp(p){return"color"in p||"view"in p&&p.view==="color"}const Uu={id:"input-color-number",type:"input",accept:(p,u)=>{if(typeof p!="number"||!Sp(u))return null;const h=ui(u);return h?{initialValue:p,params:h}:null},binding:{reader:p=>el(p.params)?gp:mp,equals:xt.equals,writer:p=>_p(el(p.params))},controller:p=>{const u=el(p.params),h="expanded"in p.params?p.params.expanded:void 0,b="picker"in p.params?p.params.picker:void 0;return new Zs(p.document,{colorType:"int",expanded:h!=null?h:!1,formatter:wp(u),parser:Uo("int"),pickerLayout:b!=null?b:"popup",supportsAlpha:u,value:p.value,viewProps:p.viewProps})}};function Bu(p){return xt.isRgbaColorObject(p)}function bp(p){return u=>Wn(u,p)}function Vd(p,u){return h=>p?ap(h,u):sp(h,u)}const Mp={id:"input-color-object",type:"input",accept:(p,u)=>{if(!xt.isColorObject(p))return null;const h=ui(u);return h?{initialValue:p,params:h}:null},binding:{reader:p=>bp(Xt(p.params)),equals:xt.equals,writer:p=>xp(Bu(p.initialValue),Xt(p.params))},controller:p=>{var u;const h=xt.isRgbaColorObject(p.initialValue),b="expanded"in p.params?p.params.expanded:void 0,I="picker"in p.params?p.params.picker:void 0,X=(u=Xt(p.params))!==null&&u!==void 0?u:"int";return new Zs(p.document,{colorType:X,expanded:b!=null?b:!1,formatter:Vd(h,X),parser:Uo(X),pickerLayout:I!=null?I:"popup",supportsAlpha:h,value:p.value,viewProps:p.viewProps})}},Ep={id:"input-color-string",type:"input",accept:(p,u)=>{if(typeof p!="string"||"view"in u&&u.view==="text")return null;const h=Ks(p,Xt(u));if(!h||!Du(h))return null;const I=ui(u);return I?{initialValue:p,params:I}:null},binding:{reader:p=>{var u;return Ru((u=Xt(p.params))!==null&&u!==void 0?u:"int")},equals:xt.equals,writer:p=>{const u=Ks(p.initialValue,Xt(p.params));if(!u)throw w.shouldNeverHappen();const h=vp(u);if(!h)throw w.notBindable();return h}},controller:p=>{const u=Ks(p.initialValue,Xt(p.params));if(!u)throw w.shouldNeverHappen();const h=Du(u);if(!h)throw w.shouldNeverHappen();const b="expanded"in p.params?p.params.expanded:void 0,I="picker"in p.params?p.params.picker:void 0;return new Zs(p.document,{colorType:u.type,expanded:b!=null?b:!1,formatter:h,parser:Uo(u.type),pickerLayout:I!=null?I:"popup",supportsAlpha:u.alpha,value:p.value,viewProps:p.viewProps})}};class or{constructor(u){this.components=u.components,this.asm_=u.assembly}constrain(u){const h=this.asm_.toComponents(u).map((b,I)=>{var X,ee;return(ee=(X=this.components[I])===null||X===void 0?void 0:X.constrain(b))!==null&&ee!==void 0?ee:b});return this.asm_.fromComponents(h)}}const Hd=P("pndtxt");class Gd{constructor(u,h){this.textViews=h.textViews,this.element=u.createElement("div"),this.element.classList.add(Hd()),this.textViews.forEach(b=>{const I=u.createElement("div");I.classList.add(Hd("a")),I.appendChild(b.element),this.element.appendChild(I)})}}function Cp(p,u,h){return new Ts(p,{arrayPosition:h===0?"fst":h===u.axes.length-1?"lst":"mid",baseStep:u.axes[h].baseStep,parser:u.parser,props:u.axes[h].textProps,value:se(0,{constraint:u.axes[h].constraint}),viewProps:u.viewProps})}class ar{constructor(u,h){this.value=h.value,this.viewProps=h.viewProps,this.acs_=h.axes.map((b,I)=>Cp(u,h,I)),this.acs_.forEach((b,I)=>{Es({primary:this.value,secondary:b.value,forward:X=>h.assembly.toComponents(X.rawValue)[I],backward:(X,ee)=>{const Me=h.assembly.toComponents(X.rawValue);return Me[I]=ee.rawValue,h.assembly.fromComponents(Me)}})}),this.view=new Gd(u,{textViews:this.acs_.map(b=>b.view)})}}function Pp(p,u){return"step"in p&&!m(p.step)?new Ba(p.step,u):null}function Tp(p){return"max"in p&&!m(p.max)||"min"in p&&!m(p.min)?new Kr({max:p.max,min:p.min}):null}function Vu(p,u){const h=[],b=Pp(p,u);b&&h.push(b);const I=Tp(p);I&&h.push(I);const X=Kt(p.options);return X&&h.push(X),new bs(h)}function Js(p){const u=p?Zi(p,Kr):null;return u?[u.minValue,u.maxValue]:[void 0,void 0]}function Bv(p){const[u,h]=Js(p);return[u!=null?u:0,h!=null?h:100]}const Fe={id:"input-number",type:"input",accept:(p,u)=>{if(typeof p!="number")return null;const h=fe,b=be(u,{format:h.optional.function,max:h.optional.number,min:h.optional.number,options:h.optional.custom(Ro),step:h.optional.number});return b?{initialValue:p,params:b}:null},binding:{reader:p=>wd,constraint:p=>Vu(p.params,p.initialValue),writer:p=>Lo},controller:p=>{var u,h;const b=p.value,I=p.constraint;if(I&&Zi(I,Eo))return new Va(p.document,{props:ne.fromObject({options:(u=Xs(I))!==null&&u!==void 0?u:[]}),value:b,viewProps:p.viewProps});const X=(h="format"in p.params?p.params.format:void 0)!==null&&h!==void 0?h:Tn(qa(I,b.rawValue));if(I&&Zi(I,Kr)){const[ee,Me]=Bv(I);return new $r(p.document,{baseStep:qs(I),parser:Qi,sliderProps:ne.fromObject({maxValue:Me,minValue:ee}),textProps:ne.fromObject({draggingScale:As(I,b.rawValue),formatter:X}),value:b,viewProps:p.viewProps})}return new Ts(p.document,{baseStep:qs(I),parser:Qi,props:ne.fromObject({draggingScale:As(I,b.rawValue),formatter:X}),value:b,viewProps:p.viewProps})}};class lr{constructor(u=0,h=0){this.x=u,this.y=h}getComponents(){return[this.x,this.y]}static isObject(u){if(m(u))return!1;const h=u.x,b=u.y;return!(typeof h!="number"||typeof b!="number")}static equals(u,h){return u.x===h.x&&u.y===h.y}toObject(){return{x:this.x,y:this.y}}}const Hu={toComponents:p=>p.getComponents(),fromComponents:p=>new lr(...p)},Qs=P("p2d");class Vv{constructor(u,h){this.element=u.createElement("div"),this.element.classList.add(Qs()),h.viewProps.bindClassModifiers(this.element),D(h.expanded,N(this.element,Qs(void 0,"expanded")));const b=u.createElement("div");b.classList.add(Qs("h")),this.element.appendChild(b);const I=u.createElement("button");I.classList.add(Qs("b")),I.appendChild(Qe(u,"p2dpad")),h.viewProps.bindDisabled(I),b.appendChild(I),this.buttonElement=I;const X=u.createElement("div");if(X.classList.add(Qs("t")),b.appendChild(X),this.textElement=X,h.pickerLayout==="inline"){const ee=u.createElement("div");ee.classList.add(Qs("p")),this.element.appendChild(ee),this.pickerElement=ee}else this.pickerElement=null}}const ci=P("p2dp");class tl{constructor(u,h){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=h.invertsY,this.maxValue_=h.maxValue,this.element=u.createElement("div"),this.element.classList.add(ci()),h.layout==="popup"&&this.element.classList.add(ci(void 0,"p"));const b=u.createElement("div");b.classList.add(ci("p")),h.viewProps.bindTabIndex(b),this.element.appendChild(b),this.padElement=b;const I=u.createElementNS(Te,"svg");I.classList.add(ci("g")),this.padElement.appendChild(I),this.svgElem_=I;const X=u.createElementNS(Te,"line");X.classList.add(ci("ax")),X.setAttributeNS(null,"x1","0"),X.setAttributeNS(null,"y1","50%"),X.setAttributeNS(null,"x2","100%"),X.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(X);const ee=u.createElementNS(Te,"line");ee.classList.add(ci("ax")),ee.setAttributeNS(null,"x1","50%"),ee.setAttributeNS(null,"y1","0"),ee.setAttributeNS(null,"x2","50%"),ee.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(ee);const Me=u.createElementNS(Te,"line");Me.classList.add(ci("l")),Me.setAttributeNS(null,"x1","50%"),Me.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(Me),this.lineElem_=Me;const $e=u.createElement("div");$e.classList.add(ci("m")),this.padElement.appendChild($e),this.markerElem_=$e,h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[u,h]=this.value.rawValue.getComponents(),b=this.maxValue_,I=Qt(u,-b,+b,0,100),X=Qt(h,-b,+b,0,100),ee=this.invertsY_?100-X:X;this.lineElem_.setAttributeNS(null,"x2",`${I}%`),this.lineElem_.setAttributeNS(null,"y2",`${ee}%`),this.markerElem_.style.left=`${I}%`,this.markerElem_.style.top=`${ee}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Gu(p,u,h){return[Qn(u[0],Er(p)),Qn(u[1],Cs(p))*(h?1:-1)]}class Ap{constructor(u,h){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.baseSteps_=h.baseSteps,this.maxValue_=h.maxValue,this.invertsY_=h.invertsY,this.view=new tl(u,{invertsY:this.invertsY_,layout:h.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ps(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(u,h){if(!u.point)return;const b=this.maxValue_,I=Qt(u.point.x,0,u.bounds.width,-b,+b),X=Qt(this.invertsY_?u.bounds.height-u.point.y:u.point.y,0,u.bounds.height,-b,+b);this.value.setRawValue(new lr(I,X),h)}onPointerDown_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerMove_(u){this.handlePointerEvent_(u.data,{forceEmit:!1,last:!1})}onPointerUp_(u){this.handlePointerEvent_(u.data,{forceEmit:!0,last:!0})}onPadKeyDown_(u){wu(u.key)&&u.preventDefault();const[h,b]=Gu(u,this.baseSteps_,this.invertsY_);h===0&&b===0||this.value.setRawValue(new lr(this.value.rawValue.x+h,this.value.rawValue.y+b),{forceEmit:!1,last:!1})}onPadKeyUp_(u){const[h,b]=Gu(u,this.baseSteps_,this.invertsY_);h===0&&b===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Lp{constructor(u,h){var b,I;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.foldable_=Oe.create(h.expanded),this.popC_=h.pickerLayout==="popup"?new Ha(u,{viewProps:this.viewProps}):null;const X=new Ap(u,{baseSteps:[h.axes[0].baseStep,h.axes[1].baseStep],invertsY:h.invertsY,layout:h.pickerLayout,maxValue:h.maxValue,value:this.value,viewProps:this.viewProps});X.view.allFocusableElements.forEach(ee=>{ee.addEventListener("blur",this.onPopupChildBlur_),ee.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=X,this.textC_=new ar(u,{assembly:Hu,axes:h.axes,parser:h.parser,value:this.value,viewProps:this.viewProps}),this.view=new Vv(u,{expanded:this.foldable_.value("expanded"),pickerLayout:h.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(b=this.view.buttonElement)===null||b===void 0||b.addEventListener("blur",this.onPadButtonBlur_),(I=this.view.buttonElement)===null||I===void 0||I.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Es({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:ee=>ee.rawValue,backward:(ee,Me)=>Me.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Pe(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(u){if(!this.popC_)return;const h=this.view.element,b=u.relatedTarget;(!b||!h.contains(b))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(u){if(!this.popC_)return;const h=this.popC_.view.element,b=U(u);b&&h.contains(b)||b&&b===this.view.buttonElement&&!me(h.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(u){this.popC_?u.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&u.key==="Escape"&&this.view.buttonElement.focus()}}function Rp(p){return lr.isObject(p)?new lr(p.x,p.y):new lr}function kp(p,u){p.writeProperty("x",u.x),p.writeProperty("y",u.y)}function Ar(p,u){if(!p)return;const h=[],b=Pp(p,u);b&&h.push(b);const I=Tp(p);return I&&h.push(I),new bs(h)}function Ip(p,u){return new or({assembly:Hu,components:[Ar("x"in p?p.x:void 0,u.x),Ar("y"in p?p.y:void 0,u.y)]})}function Wu(p,u){var h,b;const I=p&&Zi(p,Kr);if(I)return Math.max(Math.abs((h=I.minValue)!==null&&h!==void 0?h:0),Math.abs((b=I.maxValue)!==null&&b!==void 0?b:0));const X=qs(p);return Math.max(Math.abs(X)*10,Math.abs(u)*10)}function Wd(p,u){const h=u instanceof or?u.components[0]:void 0,b=u instanceof or?u.components[1]:void 0,I=Wu(h,p.x),X=Wu(b,p.y);return Math.max(I,X)}function jd(p,u){return{baseStep:qs(u),constraint:u,textProps:ne.fromObject({draggingScale:As(u,p),formatter:Tn(qa(u,p))})}}function Xd(p){if(!("y"in p))return!1;const u=p.y;return u&&"inverted"in u?!!u.inverted:!1}const ju={id:"input-point2d",type:"input",accept:(p,u)=>{if(!lr.isObject(p))return null;const h=fe,b=be(u,{expanded:h.optional.boolean,picker:h.optional.custom(bu),x:h.optional.custom(Sn),y:h.optional.object({inverted:h.optional.boolean,max:h.optional.number,min:h.optional.number,step:h.optional.number})});return b?{initialValue:p,params:b}:null},binding:{reader:p=>Rp,constraint:p=>Ip(p.params,p.initialValue),equals:lr.equals,writer:p=>kp},controller:p=>{const u=p.document,h=p.value,b=p.constraint;if(!(b instanceof or))throw w.shouldNeverHappen();const I="expanded"in p.params?p.params.expanded:void 0,X="picker"in p.params?p.params.picker:void 0;return new Lp(u,{axes:[jd(h.rawValue.x,b.components[0]),jd(h.rawValue.y,b.components[1])],expanded:I!=null?I:!1,invertsY:Xd(p.params),maxValue:Wd(h.rawValue,b),parser:Qi,pickerLayout:X!=null?X:"popup",value:h,viewProps:p.viewProps})}};class Wo{constructor(u=0,h=0,b=0){this.x=u,this.y=h,this.z=b}getComponents(){return[this.x,this.y,this.z]}static isObject(u){if(m(u))return!1;const h=u.x,b=u.y,I=u.z;return!(typeof h!="number"||typeof b!="number"||typeof I!="number")}static equals(u,h){return u.x===h.x&&u.y===h.y&&u.z===h.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Dp={toComponents:p=>p.getComponents(),fromComponents:p=>new Wo(...p)};function Np(p){return Wo.isObject(p)?new Wo(p.x,p.y,p.z):new Wo}function zp(p,u){p.writeProperty("x",u.x),p.writeProperty("y",u.y),p.writeProperty("z",u.z)}function Op(p,u){return new or({assembly:Dp,components:[Ar("x"in p?p.x:void 0,u.x),Ar("y"in p?p.y:void 0,u.y),Ar("z"in p?p.z:void 0,u.z)]})}function Xu(p,u){return{baseStep:qs(u),constraint:u,textProps:ne.fromObject({draggingScale:As(u,p),formatter:Tn(qa(u,p))})}}const qu={id:"input-point3d",type:"input",accept:(p,u)=>{if(!Wo.isObject(p))return null;const h=fe,b=be(u,{x:h.optional.custom(Sn),y:h.optional.custom(Sn),z:h.optional.custom(Sn)});return b?{initialValue:p,params:b}:null},binding:{reader:p=>Np,constraint:p=>Op(p.params,p.initialValue),equals:Wo.equals,writer:p=>zp},controller:p=>{const u=p.value,h=p.constraint;if(!(h instanceof or))throw w.shouldNeverHappen();return new ar(p.document,{assembly:Dp,axes:[Xu(u.rawValue.x,h.components[0]),Xu(u.rawValue.y,h.components[1]),Xu(u.rawValue.z,h.components[2])],parser:Qi,value:u,viewProps:p.viewProps})}};class es{constructor(u=0,h=0,b=0,I=0){this.x=u,this.y=h,this.z=b,this.w=I}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(u){if(m(u))return!1;const h=u.x,b=u.y,I=u.z,X=u.w;return!(typeof h!="number"||typeof b!="number"||typeof I!="number"||typeof X!="number")}static equals(u,h){return u.x===h.x&&u.y===h.y&&u.z===h.z&&u.w===h.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const nl={toComponents:p=>p.getComponents(),fromComponents:p=>new es(...p)};function Yu(p){return es.isObject(p)?new es(p.x,p.y,p.z,p.w):new es}function Ku(p,u){p.writeProperty("x",u.x),p.writeProperty("y",u.y),p.writeProperty("z",u.z),p.writeProperty("w",u.w)}function il(p,u){return new or({assembly:nl,components:[Ar("x"in p?p.x:void 0,u.x),Ar("y"in p?p.y:void 0,u.y),Ar("z"in p?p.z:void 0,u.z),Ar("w"in p?p.w:void 0,u.w)]})}function qd(p,u){return{baseStep:qs(u),constraint:u,textProps:ne.fromObject({draggingScale:As(u,p),formatter:Tn(qa(u,p))})}}const Yd={id:"input-point4d",type:"input",accept:(p,u)=>{if(!es.isObject(p))return null;const h=fe,b=be(u,{x:h.optional.custom(Sn),y:h.optional.custom(Sn),z:h.optional.custom(Sn),w:h.optional.custom(Sn)});return b?{initialValue:p,params:b}:null},binding:{reader:p=>Yu,constraint:p=>il(p.params,p.initialValue),equals:es.equals,writer:p=>Ku},controller:p=>{const u=p.value,h=p.constraint;if(!(h instanceof or))throw w.shouldNeverHappen();return new ar(p.document,{assembly:nl,axes:u.rawValue.getComponents().map((b,I)=>qd(b,h.components[I])),parser:Qi,value:u,viewProps:p.viewProps})}};function Kd(p){const u=[],h=Kt(p.options);return h&&u.push(h),new bs(u)}const Fp={id:"input-string",type:"input",accept:(p,u)=>{if(typeof p!="string")return null;const b=be(u,{options:fe.optional.custom(Ro)});return b?{initialValue:p,params:b}:null},binding:{reader:p=>$i,constraint:p=>Kd(p.params),writer:p=>Lo},controller:p=>{var u;const h=p.document,b=p.value,I=p.constraint;return I&&Zi(I,Eo)?new Va(h,{props:ne.fromObject({options:(u=Xs(I))!==null&&u!==void 0?u:[]}),value:b,viewProps:p.viewProps}):new hu(h,{parser:X=>X,props:ne.fromObject({formatter:Mr}),value:b,viewProps:p.viewProps})}},$s={monitor:{defaultInterval:200,defaultLineCount:3}},Up=P("mll");class Zu{constructor(u,h){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=h.formatter,this.element=u.createElement("div"),this.element.classList.add(Up()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("textarea");b.classList.add(Up("i")),b.style.height=`calc(var(--bld-us) * ${h.lineCount})`,b.readOnly=!0,h.viewProps.bindDisabled(b),this.element.appendChild(b),this.textareaElem_=b,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}update_(){const u=this.textareaElem_,h=u.scrollTop===u.scrollHeight-u.clientHeight,b=[];this.value.rawValue.forEach(I=>{I!==void 0&&b.push(this.formatter_(I))}),u.textContent=b.join(`
`),h&&(u.scrollTop=u.scrollHeight)}onValueUpdate_(){this.update_()}}class rl{constructor(u,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new Zu(u,{formatter:h.formatter,lineCount:h.lineCount,value:this.value,viewProps:this.viewProps})}}const cn=P("sgl");class wt{constructor(u,h){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=h.formatter,this.element=u.createElement("div"),this.element.classList.add(cn()),h.viewProps.bindClassModifiers(this.element);const b=u.createElement("input");b.classList.add(cn("i")),b.readOnly=!0,b.type="text",h.viewProps.bindDisabled(b),this.element.appendChild(b),this.inputElement=b,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}update_(){const u=this.value.rawValue,h=u[u.length-1];this.inputElement.value=h!==void 0?this.formatter_(h):""}onValueUpdate_(){this.update_()}}class dn{constructor(u,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new wt(u,{formatter:h.formatter,value:this.value,viewProps:this.viewProps})}}const bn={id:"monitor-bool",type:"monitor",accept:(p,u)=>{if(typeof p!="boolean")return null;const b=be(u,{lineCount:fe.optional.number});return b?{initialValue:p,params:b}:null},binding:{reader:p=>fu},controller:p=>{var u;return p.value.rawValue.length===1?new dn(p.document,{formatter:pu,value:p.value,viewProps:p.viewProps}):new rl(p.document,{formatter:pu,lineCount:(u=p.params.lineCount)!==null&&u!==void 0?u:$s.monitor.defaultLineCount,value:p.value,viewProps:p.viewProps})}},rn=P("grl");class Ci{constructor(u,h){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=u.createElement("div"),this.element.classList.add(rn()),h.viewProps.bindClassModifiers(this.element),this.formatter_=h.formatter,this.props_=h.props,this.cursor_=h.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const b=u.createElementNS(Te,"svg");b.classList.add(rn("g")),b.style.height=`calc(var(--bld-us) * ${h.lineCount})`,this.element.appendChild(b),this.svgElem_=b;const I=u.createElementNS(Te,"polyline");this.svgElem_.appendChild(I),this.lineElem_=I;const X=u.createElement("div");X.classList.add(rn("t"),P("tt")()),this.element.appendChild(X),this.tooltipElem_=X,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const u=this.svgElem_.getBoundingClientRect(),h=this.value.rawValue.length-1,b=this.props_.get("minValue"),I=this.props_.get("maxValue"),X=[];this.value.rawValue.forEach((Lt,Ot)=>{if(Lt===void 0)return;const ns=Qt(Ot,0,h,0,u.width),Yo=Qt(Lt,b,I,u.height,0);X.push([ns,Yo].join(","))}),this.lineElem_.setAttributeNS(null,"points",X.join(" "));const ee=this.tooltipElem_,Me=this.value.rawValue[this.cursor_.rawValue];if(Me===void 0){ee.classList.remove(rn("t","a"));return}const $e=Qt(this.cursor_.rawValue,0,h,0,u.width),ct=Qt(Me,b,I,u.height,0);ee.style.left=`${$e}px`,ee.style.top=`${ct}px`,ee.textContent=`${this.formatter_(Me)}`,ee.classList.contains(rn("t","a"))||(ee.classList.add(rn("t","a"),rn("t","in")),rt(ee),ee.classList.remove(rn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class jo{constructor(u,h){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=h.props,this.value=h.value,this.viewProps=h.viewProps,this.cursor_=se(-1),this.view=new Ci(u,{cursor:this.cursor_,formatter:h.formatter,lineCount:h.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!me(u))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const b=new Ps(this.view.element);b.emitter.on("down",this.onGraphPointerDown_),b.emitter.on("move",this.onGraphPointerMove_),b.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(u){const h=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Qt(u.offsetX,0,h.width,0,this.value.rawValue.length))}onGraphPointerDown_(u){this.onGraphPointerMove_(u)}onGraphPointerMove_(u){if(!u.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Qt(u.data.point.x,0,u.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function gn(p){return"format"in p&&!m(p.format)?p.format:Tn(2)}function sl(p){var u;return p.value.rawValue.length===1?new dn(p.document,{formatter:gn(p.params),value:p.value,viewProps:p.viewProps}):new rl(p.document,{formatter:gn(p.params),lineCount:(u=p.params.lineCount)!==null&&u!==void 0?u:$s.monitor.defaultLineCount,value:p.value,viewProps:p.viewProps})}function Xo(p){var u,h,b;return new jo(p.document,{formatter:gn(p.params),lineCount:(u=p.params.lineCount)!==null&&u!==void 0?u:$s.monitor.defaultLineCount,props:ne.fromObject({maxValue:(h="max"in p.params?p.params.max:null)!==null&&h!==void 0?h:100,minValue:(b="min"in p.params?p.params.min:null)!==null&&b!==void 0?b:0}),value:p.value,viewProps:p.viewProps})}function ol(p){return"view"in p&&p.view==="graph"}const Zd={id:"monitor-number",type:"monitor",accept:(p,u)=>{if(typeof p!="number")return null;const h=fe,b=be(u,{format:h.optional.function,lineCount:h.optional.number,max:h.optional.number,min:h.optional.number,view:h.optional.string});return b?{initialValue:p,params:b}:null},binding:{defaultBufferSize:p=>ol(p)?64:1,reader:p=>wd},controller:p=>ol(p.params)?Xo(p):sl(p)},al={id:"monitor-string",type:"monitor",accept:(p,u)=>{if(typeof p!="string")return null;const h=fe,b=be(u,{lineCount:h.optional.number,multiline:h.optional.boolean});return b?{initialValue:p,params:b}:null},binding:{reader:p=>$i},controller:p=>{var u;const h=p.value;return h.rawValue.length>1||"multiline"in p.params&&p.params.multiline?new rl(p.document,{formatter:Mr,lineCount:(u=p.params.lineCount)!==null&&u!==void 0?u:$s.monitor.defaultLineCount,value:h,viewProps:p.viewProps}):new dn(p.document,{formatter:Mr,value:h,viewProps:p.viewProps})}};class di{constructor(u){this.onValueChange_=this.onValueChange_.bind(this),this.reader=u.reader,this.writer=u.writer,this.emitter=new M,this.value=u.value,this.value.emitter.on("change",this.onValueChange_),this.target=u.target,this.read()}read(){const u=this.target.read();u!==void 0&&(this.value.rawValue=this.reader(u))}write_(u){this.writer(this.target,u)}onValueChange_(u){this.write_(u.rawValue),this.emitter.emit("change",{options:u.options,rawValue:u.rawValue,sender:this})}}function Jd(p,u){const h=p.accept(u.target.read(),u.params);if(m(h))return null;const b=fe,I={target:u.target,initialValue:h.initialValue,params:h.params},X=p.binding.reader(I),ee=p.binding.constraint?p.binding.constraint(I):void 0,Me=se(X(h.initialValue),{constraint:ee,equals:p.binding.equals}),$e=new di({reader:X,target:u.target,value:Me,writer:p.binding.writer(I)}),ct=b.optional.boolean(u.params.disabled).value,Lt=b.optional.boolean(u.params.hidden).value,Ot=p.controller({constraint:ee,document:u.document,initialValue:h.initialValue,params:h.params,value:$e.value,viewProps:pn.create({disabled:ct,hidden:Lt})}),ns=b.optional.string(u.params.label).value;return new ht(u.document,{binding:$e,blade:We(),props:ne.fromObject({label:ns!=null?ns:u.target.key}),valueController:Ot})}class Qd{constructor(u){this.onTick_=this.onTick_.bind(this),this.reader_=u.reader,this.target=u.target,this.emitter=new M,this.value=u.value,this.ticker=u.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const u=this.target.read();if(u===void 0)return;const h=this.value.rawValue,b=this.reader_(u);this.value.rawValue=Ms(h,b),this.emitter.emit("update",{rawValue:b,sender:this})}onTick_(u){this.read()}}function qo(p,u){return u===0?new Yr:new oi(p,u!=null?u:$s.monitor.defaultInterval)}function Ju(p,u){var h,b,I;const X=fe,ee=p.accept(u.target.read(),u.params);if(m(ee))return null;const Me={target:u.target,initialValue:ee.initialValue,params:ee.params},$e=p.binding.reader(Me),ct=(b=(h=X.optional.number(u.params.bufferSize).value)!==null&&h!==void 0?h:p.binding.defaultBufferSize&&p.binding.defaultBufferSize(ee.params))!==null&&b!==void 0?b:1,Lt=X.optional.number(u.params.interval).value,Ot=new Qd({reader:$e,target:u.target,ticker:qo(u.document,Lt),value:Yf(ct)}),ns=X.optional.boolean(u.params.disabled).value,Yo=X.optional.boolean(u.params.hidden).value,Ko=p.controller({document:u.document,params:ee.params,value:Ot.value,viewProps:pn.create({disabled:ns,hidden:Yo})}),Vi=(I=X.optional.string(u.params.label).value)!==null&&I!==void 0?I:u.target.key;return new Nt(u.document,{binding:Ot,blade:We(),props:ne.fromObject({label:Vi}),valueController:Ko})}class $d{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(u){u.type==="blade"?this.pluginsMap_.blades.unshift(u):u.type==="input"?this.pluginsMap_.inputs.unshift(u):u.type==="monitor"&&this.pluginsMap_.monitors.unshift(u)}createInput(u,h,b){const I=h.read();if(m(I))throw new w({context:{key:h.key},type:"nomatchingcontroller"});const X=this.pluginsMap_.inputs.reduce((ee,Me)=>ee!=null?ee:Jd(Me,{document:u,target:h,params:b}),null);if(X)return X;throw new w({context:{key:h.key},type:"nomatchingcontroller"})}createMonitor(u,h,b){const I=this.pluginsMap_.monitors.reduce((X,ee)=>X!=null?X:Ju(ee,{document:u,params:b,target:h}),null);if(I)return I;throw new w({context:{key:h.key},type:"nomatchingcontroller"})}createBlade(u,h){const b=this.pluginsMap_.blades.reduce((I,X)=>I!=null?I:qr(X,{document:u,params:h}),null);if(!b)throw new w({type:"nomatchingview",context:{params:h}});return b}createBladeApi(u){if(u instanceof ht)return new ke(u);if(u instanceof Nt)return new un(u);if(u instanceof re)return new kn(u,this);const h=this.pluginsMap_.blades.reduce((b,I)=>b!=null?b:I.api({controller:u,pool:this}),null);if(!h)throw w.shouldNeverHappen();return h}}function Rs(){const p=new $d;return[ju,qu,Yd,Fp,Fe,Ep,Mp,Uu,Md,bn,al,Zd,lt,_t,jr,Pn].forEach(u=>{p.register(u)}),p}class ll extends r{constructor(u){super(u),this.emitter_=new M,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new o(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(u){this.controller_.props.set("label",u)}get options(){return this.controller_.valueController.props.get("options")}set options(u){this.controller_.valueController.props.set("options",u)}get value(){return this.controller_.valueController.value.rawValue}set value(u){this.controller_.valueController.value.rawValue=u}on(u,h){const b=h.bind(this);return this.emitter_.on(u,I=>{b(I.event)}),this}}class ts extends r{constructor(u){super(u),this.emitter_=new M,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new o(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(u){this.controller_.props.set("label",u)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(u){this.controller_.valueController.sliderController.props.set("maxValue",u)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(u){this.controller_.valueController.sliderController.props.set("minValue",u)}get value(){return this.controller_.valueController.value.rawValue}set value(u){this.controller_.valueController.value.rawValue=u}on(u,h){const b=h.bind(this);return this.emitter_.on(u,I=>{b(I.event)}),this}}class ul extends r{constructor(u){super(u),this.emitter_=new M,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new o(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(u){this.controller_.props.set("label",u)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(u){this.controller_.valueController.props.set("formatter",u)}get value(){return this.controller_.valueController.value.rawValue}set value(u){this.controller_.valueController.value.rawValue=u}on(u,h){const b=h.bind(this);return this.emitter_.on(u,I=>{b(I.event)}),this}}const cl=function(){return{id:"list",type:"blade",accept(p){const u=fe,h=be(p,{options:u.required.custom(Ro),value:u.required.raw,view:u.required.constant("list"),label:u.optional.string});return h?{params:h}:null},controller(p){const u=new Va(p.document,{props:ne.fromObject({options:li(p.params.options)}),value:se(p.params.value),viewProps:p.viewProps});return new at(p.document,{blade:p.blade,props:ne.fromObject({label:p.params.label}),valueController:u})},api(p){return!(p.controller instanceof at)||!(p.controller.valueController instanceof Va)?null:new ll(p.controller)}}}();function eh(p){return p.reduce((u,h)=>Object.assign(u,{[h.presetKey]:h.read()}),{})}function Qu(p,u){p.forEach(h=>{const b=u[h.presetKey];b!==void 0&&h.write(b)})}class $u extends Mo{constructor(u,h){super(u,h)}get element(){return this.controller_.view.element}importPreset(u){const h=this.controller_.rackController.rack.find(ht).map(b=>b.binding.target);Qu(h,u),this.refresh()}exportPreset(){const u=this.controller_.rackController.rack.find(ht).map(h=>h.binding.target);return eh(u)}refresh(){this.controller_.rackController.rack.find(ht).forEach(u=>{u.binding.read()}),this.controller_.rackController.rack.find(Nt).forEach(u=>{u.binding.read()})}}class ei extends ut{constructor(u,h){super(u,{expanded:h.expanded,blade:h.blade,props:h.props,root:!0,viewProps:h.viewProps})}}const ks={id:"slider",type:"blade",accept(p){const u=fe,h=be(p,{max:u.required.number,min:u.required.number,view:u.required.constant("slider"),format:u.optional.function,label:u.optional.string,value:u.optional.number});return h?{params:h}:null},controller(p){var u,h;const b=(u=p.params.value)!==null&&u!==void 0?u:0,I=new $r(p.document,{baseStep:1,parser:Qi,sliderProps:ne.fromObject({maxValue:p.params.max,minValue:p.params.min}),textProps:ne.fromObject({draggingScale:As(void 0,b),formatter:(h=p.params.format)!==null&&h!==void 0?h:Sd}),value:se(b),viewProps:p.viewProps});return new at(p.document,{blade:p.blade,props:ne.fromObject({label:p.params.label}),valueController:I})},api(p){return!(p.controller instanceof at)||!(p.controller.valueController instanceof $r)?null:new ts(p.controller)}},Bi=function(){return{id:"text",type:"blade",accept(p){const u=fe,h=be(p,{parse:u.required.function,value:u.required.raw,view:u.required.constant("text"),format:u.optional.function,label:u.optional.string});return h?{params:h}:null},controller(p){var u;const h=new hu(p.document,{parser:p.params.parse,props:ne.fromObject({formatter:(u=p.params.format)!==null&&u!==void 0?u:b=>String(b)}),value:se(p.params.value),viewProps:p.viewProps});return new at(p.document,{blade:p.blade,props:ne.fromObject({label:p.params.label}),valueController:h})},api(p){return!(p.controller instanceof at)||!(p.controller.valueController instanceof hu)?null:new ul(p.controller)}}}();function ec(p){const u=p.createElement("div");return u.classList.add(P("dfw")()),p.body&&p.body.appendChild(u),u}function ti(p,u,h){if(p.querySelector(`style[data-tp-style=${u}]`))return;const b=p.createElement("style");b.dataset.tpStyle=u,b.textContent=h,p.head.appendChild(b)}class Bp extends $u{constructor(u){var h,b;const I=u!=null?u:{},X=(h=I.document)!==null&&h!==void 0?h:Ye(),ee=Rs(),Me=new ei(X,{expanded:I.expanded,blade:We(),props:ne.fromObject({title:I.title}),viewProps:pn.create()});super(Me,ee),this.pool_=ee,this.containerElem_=(b=I.container)!==null&&b!==void 0?b:ec(X),this.containerElem_.appendChild(this.element),this.doc_=X,this.usesDefaultWrapper_=!I.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw w.alreadyDisposed();return this.doc_}dispose(){const u=this.containerElem_;if(!u)throw w.alreadyDisposed();if(this.usesDefaultWrapper_){const h=u.parentElement;h&&h.removeChild(u)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(u){("plugin"in u?[u.plugin]:"plugins"in u?u.plugins:[]).forEach(b=>{this.pool_.register(b),this.embedPluginStyle_(b)})}embedPluginStyle_(u){u.css&&ti(this.document,`plugin-${u.id}`,u.css)}setUpDefaultPlugins_(){ti(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(u=>{this.embedPluginStyle_(u)}),this.registerPlugin({plugins:[ks,cl,Pn,Bi]})}}const th=new i("3.1.0");t.BladeApi=r,t.ButtonApi=E,t.FolderApi=Mo,t.InputBindingApi=ke,t.ListApi=ll,t.MonitorBindingApi=un,t.Pane=Bp,t.SeparatorApi=It,t.SliderApi=ts,t.TabApi=Si,t.TabPageApi=wi,t.TextApi=ul,t.TpChangeEvent=o,t.VERSION=th,Object.defineProperty(t,"__esModule",{value:!0})})})(jy,jy.exports);const z4="0.0.1";new jy.exports.Pane({title:String(z4)});function Pb(n){const e=He.exports.useRef(null),[t,i]=He.exports.useState(!1),[r,s]=He.exports.useState(!1);return Pw((o,l)=>e.current.rotation.x+=.005),Ev("mesh",{...n,ref:e,scale:r?1.5:1,onClick:o=>s(!r),onPointerOver:o=>i(!0),onPointerOut:o=>i(!1),children:[Wt("boxGeometry",{args:[1,2,1]}),Wt("meshStandardMaterial",{color:t?"hotpink":"orange",metalness:1,roughness:0})]})}function O4(){return Ev(E4,{children:[Wt(L4,{}),Wt("ambientLight",{intensity:.1}),Wt("directionalLight",{color:"red",position:[0,0,5]}),Wt(Pb,{position:[-1.2,0,0]}),Wt(Pb,{position:[1.2,0,0]}),Wt(N4,{files:"https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/peppermint_powerplant_2_1k.hdr"})]})}function F4(){return Wt(O4,{})}u_.createRoot(document.getElementById("root")).render(Wt(kP.StrictMode,{children:Wt(F4,{})}));
